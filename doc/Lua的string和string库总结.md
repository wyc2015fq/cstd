# [Luaçš„stringå’Œstringåº“æ€»ç»“](https://www.cnblogs.com/zrtqsk/p/4372889.html)



ã€€ã€€Luaæœ‰7ç§æ•°æ®ç±»å‹ï¼Œåˆ†åˆ«æ˜¯nilã€booleanã€numberã€stringã€tableã€functionã€userdataã€‚è¿™é‡Œæˆ‘æ€»ç»“ä¸€ä¸‹Luaçš„stringç±»å‹å’Œstringåº“ï¼Œå¤ä¹ ä¸€ä¸‹ï¼Œä»¥ä¾¿åŠ æ·±è®°å¿†ã€‚

ä¸ªäººè®¤ä¸ºstringæ˜¯Luaç¼–ç¨‹ä½¿ç”¨æ•°æ®ç»“æ„çš„æ—¶å€™ï¼Œé‡è¦æ€§ä»…æ¬¡äºtableçš„ç±»å‹ã€‚ååˆ†é‡è¦ï¼

**ä¸€ã€stringåŸºç¡€ã€‚**

ã€€ã€€Luaå¹¶æ²¡æœ‰å­—ç¬¦ç±»å‹ï¼ŒLuaçš„stringç±»å‹è¡¨ç¤ºå­—ç¬¦åºåˆ—ã€‚æ‰€ä»¥ï¼Œé•¿åº¦ä¸º1çš„stringå°±è¡¨ç¤ºäº†å•ä¸ªå­—ç¬¦ã€‚Luaçš„å­—ç¬¦ç±»å‹æœ‰è¿™äº›ç‰¹å¾ï¼š

1ã€stringå­—ç¬¦åºåˆ—ä¸­çš„å­—ç¬¦é‡‡ç”¨å®Œå…¨8ä½ç¼–ç ï¼Œå³å¯ä»¥å­˜æ”¾ä»»ä½•äºŒè¿›åˆ¶æ•°æ®ã€‚

2ã€stringæ˜¯ä¸å¯å˜çš„å€¼ã€‚ç›¸å½“äºjavaä¸­çš„Stringç±»ã€‚æ¯æ¬¡ä¿®æ”¹éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„stringï¼Œè€ŒåŸæœ‰çš„stringä¿æŒä¸å˜ã€‚å¦‚ï¼š

```
a = "abc"
b = a
a = "cba"
print(a)        -->cba
print(b)        -->abc
```

 

3ã€stringçš„å­—é¢å€¼ï¼Œç”¨åŒ¹é…çš„å•å¼•å·ã€åŒå¼•å·æ‹¬èµ·æ¥éƒ½è¡Œã€‚åŒæ—¶è·Ÿå…¶ä»–è¯­è¨€ä¸€æ ·å¯ä»¥ç”¨åæ–œæ â€œ\â€çš„è½¬ä¹‰åºåˆ—ã€‚å¦‚ï¼š

```
c = â€˜abc\ndefâ€™            
print(c)        -->è¾“å‡ºæ¢è¡Œäº†    
```

 

4ã€å¯ä»¥é€šè¿‡<è½¬ä¹‰ç¬¦â€œ\â€+æ•°å€¼>æ¥æŒ‡å®šå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼Œæ•°å€¼ä¸ºæœ€å¤š3ä½æ•°ç»„æˆçš„åºåˆ—ã€‚å¦‚ï¼š

```
d = "\97\98c"
print(d)        --abc
```

 

5ã€å¯ä»¥ç”¨ä¸€å¯¹[[XXX]]æ¥ç•Œå®šä¸€ä¸ªå­—ç¬¦ä¸²XXXã€‚å­—ç¬¦ä¸²å¯ä»¥ä¸ºä»»æ„å­—ç¬¦ã€‚å¦‚ï¼š

```
e = [[it's mine!
it's not yours! --'Oh'   --"Wow!!!!"
]]
print (e)        --è¾“å‡º[[]]é‡Œé¢çš„æ‰€æœ‰å†…å®¹
```

 

6ã€å¦‚ä¸Šçš„è¡¨ç¤ºæœ‰ä¸€ä¸ªbugï¼Œå°±æ˜¯å½“å­—ç¬¦ä¸²åŒ…å«[[æˆ–]]å­ä¸²çš„æ—¶å€™ï¼Œä¼šè¡¨è¾¾é”™è¯¯ã€‚Luaæä¾›äº†[===[XXX]===]è¿™æ ·çš„å½¢å¼æ¥åŒ…å«å­—ç¬¦ä¸²XXXã€‚å…¶ä¸­ï¼Œä¸¤è¾¹ä¸­æ‹¬å·ä¹‹é—´çš„â€œ=â€æ•°é‡è¦åŒ¹é…ã€‚å¦‚ï¼š

```
f = [==[abc[=]defgh[[=]]]==]
print(f)        --abc[=]defgh[[=]]
```

 

7ã€Luaæä¾›è¿è¡Œæ—¶æ•°å­—å’Œå­—ç¬¦çš„è‡ªåŠ¨è½¬æ¢ã€‚å³ä¸€ä¸ªæ•°å­—å’Œä¸€ä¸ªå­—ç¬¦ä¸²ç›¸åŠ ï¼ŒLuaä¼šå°è¯•æŠŠè¿™ä¸ªå­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—å†æ±‚å€¼ã€‚ä¸éœ€è¦æˆ‘ä»¬æ˜¾å¼è½¬æ¢ã€‚å¦‚ï¼š

```
print("5"+6)        --11
print("5e-2"+3)        --3.05
```

 

8ã€é•¿åº¦æ“ä½œç¬¦â€œ#â€ï¼Œå¯ç”¨äºæ±‚å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå³å­—ç¬¦ä¸²åŒ…å«çš„å­—ç¬¦æ•°ã€‚å¦‚ï¼š

```
print(#"abcd\n")    --5
str = "abc"
print(#str)            --3
```

 

 

 

**äºŒã€stringåº“**

ã€€ã€€ï¼ˆç§‘æ™®ä¸€ä¸‹ï¼Œä¼°è®¡æœ‰ä¸å°‘Luaåˆå­¦è€…è·Ÿæˆ‘ä¸€æ ·ç¬¬ä¸€æ¬¡çœ‹åˆ°Luaçš„APIçš„æ—¶å€™éƒ½ä¼šå¾ˆå¥‡æ€ªï¼Œåƒstring.byte (s [, i [, j]])é‡Œé¢è¿™äº›â€œ[]â€éƒ½æ˜¯äº›ä»€ä¹ˆæ¥çš„ï¼Ÿå‘µå‘µï¼Œä¸­æ‹¬å·ä»£è¡¨å¯é€‰çš„å‚æ•°ã€‚

å°±æ˜¯è¯´ï¼Œå¯ä»¥è¿™æ ·è°ƒç”¨ï¼šstring.byte("abc")ï¼Œä¹Ÿå¯ä»¥è¿™æ ·è°ƒç”¨ï¼šstring.byte("abc",1)ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è¿™æ ·è°ƒç”¨ï¼šstring.byte ("abc",1,-1);ï¼‰

ã€€ã€€APIçš„è¯¦ç»†è§£é‡Šä¸ç”¨é‡å¤é€ è½®å­äº†å§ï¼Œäº‘ç¥å·²ç»ç¿»è¯‘äº†ï¼Œ[çœ‹è¿™é‡Œ](http://cloudwu.github.io/lua53doc/contents.html)ï¼Œè¿™è¾¹æˆ‘ç®€è¦è§£é‡Šä¸€ä¸‹ã€‚

ã€€ã€€1ã€**string.byte (s [, i [, j]])**

ã€€ã€€è¿”å›å­—ç¬¦ä¸²çš„å†…éƒ¨æ•°å­—ç¼–ç ï¼Œiã€jä¸ºå­—ç¬¦ä¸²çš„ç´¢å¼•ï¼Œiã€jé™å®šäº†å¤šå°‘å­—ç¬¦å°±è¿”å›å¤šå°‘å€¼ã€‚å¦‚ä¸‹ï¼š

```
k1,k2,k3 = string.byte("abcdef",1,3)
print (k1,k2,k3)    --97    98    99
```

 

ã€€ã€€2ã€**string.char (Â·Â·Â·)**

ã€€ã€€è·Ÿbyte()ç›¸åï¼ŒæŠŠæ•°å­—ç¼–ç è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å¦‚ä¸‹ï¼š

[![å¤åˆ¶ä»£ç ](https://common.cnblogs.com/images/copycode.gif)](javascript:void(0);)

```
s = string.char(97,98,99)
print(s)            --abc

n = string.char()
print(n)            --ä»€ä¹ˆéƒ½æ²¡è¾“å‡º
print(type(n))        --string
print(string.char(string.byte("hello",1,-2)))    --hell
```

[![å¤åˆ¶ä»£ç ](https://common.cnblogs.com/images/copycode.gif)](javascript:void(0);)

 

ã€€ã€€3ã€**string.dump (function [, strip])**

ã€€ã€€è¿™ä¸ªå‡½æ•°æ˜¯ç”¨æ¥åºåˆ—åŒ–å‡½æ•°çš„ã€‚ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚é€šè¿‡loadè¯¥å­—ç¬¦ä¸²å¯ä»¥ååºåˆ—åŒ–è¯¥å‡½æ•°ã€‚ç”¨æ³•å¦‚ä¸‹ï¼š

[![å¤åˆ¶ä»£ç ](https://common.cnblogs.com/images/copycode.gif)](javascript:void(0);)

```
function max( a,b )
    return a>b and a or b
end
--åºåˆ—åŒ–
du = string.dump(max)
print(type(du))        --string
print(du)            --LuaQ
--ååºåˆ—åŒ–
max2 = load(du)    
--è°ƒç”¨å‡½æ•°
print(max2(1,2))    --2
```

[![å¤åˆ¶ä»£ç ](https://common.cnblogs.com/images/copycode.gif)](javascript:void(0);)

 

ã€€ã€€4ã€**string.find (s, pattern [, init [, plain]])**

ã€€ã€€è¿™ä¸ªå‡½æ•°å¦‚å…¶åï¼Œç”¨æ¥æŸ¥æ‰¾åŒ¹é…çš„patternï¼Œè¿”å›è¯¥patternçš„ç´¢å¼•ã€‚æ‰¾åˆ°ä¸€ä¸ªåŒ¹é…å°±è¿”å›ã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å›ç©ºã€‚å¦‚ä¸‹ï¼š

```
txt = "it's very very good!"
i ,j = string.find(txt, "very")
print(i,j)    --6    9
i ,j = string.find(txt, "big")
print(i,j)    --nil    nilã€€ã€€
```

 

ã€€ã€€5ã€**string.format (formatstring, Â·Â·Â·)**

ã€€ã€€è¿™ä¸ªå‡½æ•°ç”¨æ¥æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚APIæ–‡æ¡£å¾ˆå¤æ‚ï¼Œç”¨æ³•å¾ˆå¤šï¼Œå¯æŸ¥çœ‹æ–‡æ¡£ã€‚å¦‚ä¸‹ï¼š

```
print(string.format("i want %d apples", 5))    --i want 5 apples
```

 

ã€€ã€€6ã€string.match (s, pattern [, init])

ã€€ã€€è¿™ä¸ªå‡½æ•°ä¸find()å‡½æ•°ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ï¼Œfindè¿”å›åŒ¹é…çš„ç´¢å¼•ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„å†…å®¹æœ¬èº«ï¼Œå¦‚ä¸‹ï¼š

```
print(string.format("i want %d apples", 5))    --i want 5 apples
```

 

ã€€ã€€7ã€**string.gmatch (s, pattern)**

ã€€ã€€è¿™ä¸ªå‡½æ•°åŸºæœ¬å°±æ˜¯ç”¨æ¥é…åˆforå¾ªç¯ä½¿ç”¨çš„ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨å‡½æ•°ï¼Œæ¯æ¬¡è°ƒç”¨è¿™ä¸ªè¿­ä»£å™¨å‡½æ•°éƒ½ä¼šè¿”å›ä¸€ä¸ªåŒ¹é…è¯¥å­—ç¬¦ä¸²çš„å€¼ã€‚

ã€€ã€€Lua5.3å‚è€ƒæ‰‹å†Œé‡Œé¢çš„ç¤ºä¾‹å¾ˆç»å…¸äº†ï¼Œå¦‚ä¸‹ï¼š

```
s = "hello world from Lua"
for w in string.gmatch(s, "%a+") do
    print(w)    --è¿ç»­è¾“å‡ºæ¯ä¸ªå•è¯
end
```

 

ã€€ã€€8ã€**string.gsub (s, pattern, repl [, n])**

è¿™ä¸ªå‡½æ•°ç”¨æ¥è¿›è¡Œå­—ç¬¦æ›¿æ¢çš„ã€‚å°†æ¯ä¸ªåŒ¹é…çš„å­—ç¬¦ä¸²æ›¿æ¢æˆæŒ‡å®šçš„å­—ç¬¦ä¸²replã€‚è¿”å›æ›¿æ¢å®Œæ¯•çš„å­—ç¬¦ä¸²å’Œæ›¿æ¢çš„æ¬¡æ•°ã€‚ä¸ªäººè§‰å¾—è¿™ä¸ªå‡½æ•°éå¸¸æœ‰æ„æ€ã€‚

è‹¥replä¸ºå‡½æ•°åˆ™ä¼šç”¨åŒ¹é…åˆ°çš„å‚æ•°ä½œä¸ºå‚æ•°è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œè‹¥replä¸ºtableï¼Œåˆ™ä¼šç”¨åŒ¹é…åˆ°çš„å‚æ•°ä½œä¸ºé”®å»æŸ¥æ‰¾è¿™ä¸ªè¡¨ã€‚å¦‚ä¸‹ï¼š

[![å¤åˆ¶ä»£ç ](https://common.cnblogs.com/images/copycode.gif)](javascript:void(0);)

```
--å­—ç¬¦ä¸²
print(string.gsub("i have an apple", "apple", "peach"))
--å‡½æ•°
function ff( arg )
    print("function arg : " .. arg)
end
print(string.gsub("my name is qsk", "%a+", ff))
--table
t = {}
metat = {}
metat.__index = function ( table,key )        
    return "!!" .. key
end
setmetatable(t, metat)
print(string.gsub("my name is qsk", "%a+", t))
```

[![å¤åˆ¶ä»£ç ](https://common.cnblogs.com/images/copycode.gif)](javascript:void(0);)

ã€€æµ‹è¯•è¡¨çš„æ—¶å€™ï¼Œç»™è¯¥è¡¨è®¾ç½®äº†ä¸€ä¸ªå…ƒè¡¨ã€‚è¾“å‡ºå¦‚ä¸‹ï¼š

[![å¤åˆ¶ä»£ç ](https://common.cnblogs.com/images/copycode.gif)](javascript:void(0);)

```
i have an peach    1
function arg : my
function arg : name
function arg : is
function arg : qsk
my name is qsk    4
!!my !!name !!is !!qsk    4
```

[![å¤åˆ¶ä»£ç ](https://common.cnblogs.com/images/copycode.gif)](javascript:void(0);)

åŒ¹é…å­—ç¬¦ä¸²ä¸­çš„å•è¯ï¼ŒåŒ¹é…äº†4æ¬¡æ‰€ä»¥è¾“å‡ºçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯4. 

 

ã€€ã€€9ã€**string.len (s)ã€string.lower (s)ã€string.upper (s)**

ã€€ã€€è¿™ä¸ªä¸¤ä¸ªå‡½æ•°éƒ½å¤ªç®€å•äº†ï¼Œä¸€ä¸ªæ˜¯æ±‚å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å¦ä¸€ä¸ªæ˜¯å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™ã€‚å¦‚ä¸‹ï¼š

```
print(string.len("abcd"))        --4
print(string.lower("MACOS"))    --macos
print(string.upper("12abAB"))    --12ABAB
```

 

ã€€ã€€10ã€**string.rep (s, n [, sep])**

ã€€ã€€è¿™ä¸ªå‡½æ•°å°±æ˜¯ç”¨æ¥å°†æŸä¸ªå­—ç¬¦ä¸²è‡ªæˆ‘å¤åˆ¶é“¾æ¥èµ·æ¥ã€‚å¦‚ä¸‹ï¼š

```
print(string.rep("s", 5,"-"))        --s-s-s-s-s
print(string.rep("ab", 5))            --ababababab
```

 

ã€€ã€€11ã€**string.reverse (s)**

ã€€ã€€å¦‚åï¼Œç”¨æ¥åè½¬å­—ç¬¦ä¸²ï¼Œåè½¬å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„åºåˆ—ã€‚å¦‚ä¸‹ï¼š

```
print(string.reverse("abcdefg"))        --gfedcba
```

 

ã€€ã€€12ã€**string.sub (s, i [, j])**

ã€€ã€€è¿™ä¸ªå‡½æ•°å°±æ˜¯ç”¨æ¥æˆªå–å­—ç¬¦ä¸²ã€‚å¾ˆç®€å•ï¼Œå¦‚ä¸‹ï¼š

```
print(string.sub("abcdefg", 3,5))        --cde
```

 

ã€€ã€€æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒLuaçš„å­—ç¬¦ä¸²å¤„ç†å®åœ¨æ˜¯å¾ˆå¼ºå¤§ã€‚ç›¸å¯¹äºJavaçš„Stringå¢åŠ äº†å¾ˆå¤šåŒ¹é…å‡½æ•°ï¼Œä½¿ç”¨èµ·æ¥ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚

ã€€ã€€å…³äºLuaçš„stringè¿˜æœ‰ä¸€é¡¹æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œé‚£å°±æ˜¯Luaçš„å­—ç¬¦ä¸²â€œæ¨¡å¼â€ï¼Œç”¨äºå­—ç¬¦ä¸²åŒ¹é…ï¼Œå…·ä½“çš„ç”¨æ³•ï¼Œå‚ç…§äº‘ç¥ç¿»è¯‘çš„[ã€ŠLua5.3å‚è€ƒæ‰‹å†Œã€‹](http://cloudwu.github.io/lua53doc/contents.html)å°±å¥½äº†ã€‚

 