# MySQL ä¹‹ ROUND å‡½æ•°å››èˆäº”å…¥çš„é™·é˜± - æ–‡ç«  - ä¼¯ä¹åœ¨çº¿
æœ¬æ–‡ä½œè€…ï¼š [ä¼¯ä¹åœ¨çº¿](http://blog.jobbole.com) - [ç®¡å®œå°§](http://www.jobbole.com/members/mylxsw) ã€‚æœªç»ä½œè€…è®¸å¯ï¼Œç¦æ­¢è½¬è½½ï¼
æ¬¢è¿åŠ å…¥ä¼¯ä¹åœ¨çº¿ [ä¸“æ ä½œè€…](http://blog.jobbole.com/99322)ã€‚
åœ¨MySQLä¸­ï¼Œ`ROUND`å‡½æ•°ç”¨äºå¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œå››èˆäº”å…¥ï¼Œä¸è¿‡æœ€è¿‘ä½¿ç”¨ROUNDå‡½æ•°å››èˆäº”å…¥æ—¶æ„å¤–å‘ç°å¹¶æ²¡æœ‰é¢„æœŸçš„é‚£æ ·ï¼Œæœ¬æ–‡å°†è¿™ä¸€é—®é¢˜è®°å½•ä¸‹æ¥ï¼Œä»¥å…å¤§å®¶è·Ÿæˆ‘ä¸€æ ·çŠ¯åŒæ ·çš„é”™è¯¯ã€‚
## é—®é¢˜æè¿°
å‡å¦‚æˆ‘ä»¬æœ‰å¦‚ä¸‹ä¸€ä¸ªæ•°æ®è¡¨`test`ï¼Œå»ºè¡¨è¯­å¥å¦‚ä¸‹


```
CREATE TABLE test (
  id int(11) NOT NULL AUTO_INCREMENT,
  field1 bigint(10) DEFAULT NULL,
  field2 decimal(10,0) DEFAULT NULL,
  field3 int(10) DEFAULT NULL,
  field4 float(15,4) DEFAULT NULL,
  field5 float(15,4) DEFAULT NULL,
  field6 float(15,4) DEFAULT NULL,
  PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
```
æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º`test`çš„è¡¨ï¼Œå‡ºäº†`id`å­—æ®µä¹‹å¤–è¿˜åŒ…å«äº†å¤šä¸ªå­—æ®µï¼Œæ‹¥æœ‰è¿™ä¸åŒçš„æ•°æ®ç±»å‹ã€‚æˆ‘ä»¬å‘è¿™ä¸ªè¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®


```
INSERT INTO test (field1, field2, field3, field4, field5, field6) VALUE (100, 100, 100, 1.005, 3.5, 2.5);
```
æ’å…¥ä¹‹åè¡¨ä¸­çš„æ•°æ®æ˜¯è¿™æ ·çš„


```
mysql> select * from test;
+----+--------+--------+--------+--------+--------+--------+
| id | field1 | field2 | field3 | field4 | field5 | field6 |
+----+--------+--------+--------+--------+--------+--------+
|  1 |    100 |    100 |    100 | 1.0050 | 3.5000 | 2.5000 |
+----+--------+--------+--------+--------+--------+--------+
1 row in set (0.00 sec)
```
å¦‚æœç°åœ¨æˆ‘ä»¬æ‰§è¡Œä¸‹é¢è¿™ä¸ªSQLï¼Œä½ è§‰å¾—ç»“æœä¼šæ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ


```
SELECT
  round(field1 * field4),
  round(field2 * field4),
  round(field3 * field4),
  round(field1 * 1.005),
  round(field2 * 1.005),
  round(field3 * 1.005),
  round(field5),
  round(field6)
FROM test;
```
æœ€åˆä¸€ç›´ä»¥ä¸ºè¿™æ ·çš„ç»“æœè‚¯å®šæ˜¯éƒ½æ˜¯**101**ï¼Œå› ä¸ºä¸Šé¢è¿™å…­ä¸ªå–å€¼ç»“æœéƒ½æ˜¯å¯¹`100 * 1.005`è¿›è¡Œå››èˆäº”å…¥ï¼Œç»“æœè‚¯å®šéƒ½æ˜¯`101`æ‰å¯¹ï¼Œè€Œåé¢ä¸¤ä¸ªè‚¯å®šæ˜¯**4**å’Œ**3**æ‰å¯¹ï¼Œä½†æ˜¯æœ€ç»ˆçš„ç»“æœå´æ˜¯ä¸è®¾æƒ³çš„å¤§ç›¸å¾„åº­


```
*************************** 1. row ***************************
round(field1 * field4): 100
round(field2 * field4): 100
round(field3 * field4): 100
 round(field1 * 1.005): 101
 round(field2 * 1.005): 101
 round(field3 * 1.005): 101
         round(field5): 4
         round(field6): 2
1 row in set (0.00 sec)
```
## ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ
åŒæ ·æ˜¯100*1.005ï¼Œä¸ºä»€ä¹ˆä»æ•°æ®åº“ä¸­çš„å­—æ®µç›¸ä¹˜å¾—åˆ°çš„ç»“æœå’Œç›´æ¥å­—æ®µä¸å°æ•°ç›¸ä¹˜å¾—åˆ°çš„ä¸ä¸€æ ·å‘¢ï¼Ÿ
å¯¹è¿™ä¸ªé—®é¢˜ç™¾æ€ä¸å¾—å…¶è§£ï¼Œå„ç§ç™¾åº¦è°·æ­Œæ— æœã€‚ã€‚ã€‚æ²¡åŠæ³•ï¼Œè¿˜å¾—é è‡ªå·±ï¼Œè¿™ä¸ªæ—¶å€™æœ€æœ‰ç”¨çš„å°±æ˜¯å®˜ç½‘æ–‡æ¡£äº†ï¼Œäºæ˜¯æŸ¥è¯¢äº†mysqlå®˜æ–¹æ–‡æ¡£ä¸­å…³äºROUNDå‡½æ•°çš„éƒ¨åˆ†ï¼Œå…¶ä¸­åŒ…å«ä¸‹é¢ä¸¤æ¡è§„åˆ™
- For exact-value numbers, ROUND() uses the â€œround half upâ€ ruleï¼ˆå¯¹äºç²¾ç¡®çš„æ•°å€¼ï¼Œ`ROUND`å‡½æ•°ä½¿ç”¨å››èˆäº”å…¥ï¼‰
- For approximate-value numbers, the result depends on the C library. On many systems, this means that ROUND() uses the â€œround to nearest evenâ€ rule: A value with any fractional part is rounded to the nearest even integer. ï¼ˆå¯¹äºè¿‘ä¼¼å€¼ï¼Œåˆ™ä¾èµ–äºåº•å±‚çš„Cå‡½æ•°åº“ï¼Œåœ¨å¾ˆå¤šç³»ç»Ÿä¸­`ROUND`å‡½æ•°ä¼šä½¿ç”¨â€œå–æœ€è¿‘çš„å¶æ•°â€çš„è§„åˆ™ï¼‰
é€šè¿‡è¿™ä¸¤æ¡è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œç”±äºæˆ‘ä»¬åœ¨ä½¿ç”¨ä¸¤ä¸ªå­—æ®µç›¸ä¹˜çš„æ—¶å€™ï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯æŒ‰ç…§`float`ç±»å‹å¤„ç†çš„ï¼Œè€Œåœ¨è®¡ç®—æœºä¸­`float`ç±»å‹ä¸æ˜¯ç²¾ç¡®çš„æ•°ï¼Œå› æ­¤å¤„ç†ç»“æœä¼šæŒ‰ç…§ç¬¬äºŒæ¡æ¥ï¼Œè€Œç›´æ¥æ•´æ•°å­—æ®µä¸1.005è¿™æ ·çš„å°æ•°è¿ç®—çš„ç»“æœæ˜¯å› ä¸ºä¸¤ä¸ªå‚ä¸è¿ç®—çš„å€¼éƒ½æ˜¯ç²¾ç¡®æ•°ï¼Œå› æ­¤æŒ‰ç…§ç¬¬ä¸€æ¡è§„åˆ™è®¡ç®—ã€‚ä»`field5`å’Œ`field6`æ‰§è¡Œ`ROUND`å‡½æ•°çš„ç»“æœå¯ä»¥æ˜ç¡®çš„çœ‹ç¡®å®æ˜¯è½¬æ¢ä¸ºäº†æœ€è¿‘çš„å¶æ•°ã€‚
## æ€»ç»“
ä»è¿™ä¸ªä¾‹å­ä¸­å¯ä»¥çœ‹åˆ°ï¼Œåœ¨MySQLä¸­ä½¿ç”¨ROUNDè¿˜æ˜¯è¦éå¸¸éœ€è¦æ³¨æ„çš„ï¼Œç‰¹åˆ«æ˜¯å½“å‚ä¸è®¡ç®—çš„å­—æ®µä¸­åŒ…å«æµ®ç‚¹æ•°çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™è®¡ç®—ç»“æœæ˜¯ä¸å‡†ç¡®çš„ã€‚
æœ¬æ–‡å°†ä¼šæŒç»­ä¿®æ­£å’Œæ›´æ–°ï¼Œæœ€æ–°å†…å®¹è¯·å‚è€ƒæˆ‘çš„ GITHUB ä¸Šçš„ [ç¨‹åºçŒ¿æˆé•¿è®¡åˆ’](https://github.com/mylxsw/growing-up) é¡¹ç›®ï¼Œæ¬¢è¿ Starï¼Œå¦å¤–ï¼Œæ±‚[follow](https://github.com/mylxsw)ğŸ˜‚ã€‚
> 
**æ‰“èµæ”¯æŒæˆ‘å†™å‡ºæ›´å¤šå¥½æ–‡ç« ï¼Œè°¢è°¢ï¼**
[æ‰“èµä½œè€…](#rewardbox)
#### æ‰“èµæ”¯æŒæˆ‘å†™å‡ºæ›´å¤šå¥½æ–‡ç« ï¼Œè°¢è°¢ï¼
ä»»é€‰ä¸€ç§æ”¯ä»˜æ–¹å¼
![](http://jbcdn2.b0.upaiyun.com/2017/01/e8b93699352c7d38fa1d9d15a95ba461.jpg)![](http://jbcdn2.b0.upaiyun.com/2017/01/2197f30341190c0c9daab43dd2d4ce0c.jpg)
