# S.O.L.I.D åŸåˆ™åœ¨ Go ä¸­çš„åº”ç”¨ - æ–‡ç«  - ä¼¯ä¹åœ¨çº¿
æœ¬æ–‡ä½œè€…ï¼š [ä¼¯ä¹åœ¨çº¿](http://blog.jobbole.com) - [yemengying](http://www.jobbole.com/members/giraffe0813) ã€‚æœªç»ä½œè€…è®¸å¯ï¼Œç¦æ­¢è½¬è½½ï¼
æ¬¢è¿åŠ å…¥ä¼¯ä¹åœ¨çº¿ [ä¸“æ ä½œè€…](http://blog.jobbole.com/99322)ã€‚
å‰è¨€
> 
ç”±äºè‡ªå·±æœ€è¿‘çµæ„Ÿæ¯ç«­ï¼Œæ‰€ä»¥æˆ‘å†³å®šç¿»è¯‘ä¸€ç¯‡åˆ«äººçš„æ–‡ç«  O(âˆ©_âˆ©)O~ã€‚ä½œä¸ºä¸€ä¸ªä¸€ç›´æƒ³å­¦ Goï¼Œä½†æƒ³äº†å¥½ä¹…è¿˜æ²¡å…¥é—¨çš„äººï¼Œæˆ‘æŒ‘äº†ç¯‡å†™ Go çš„æ–‡ç« ï¼Œé¡ºä¾¿å¸®è‡ªå·±ç†Ÿæ‚‰ä¸€ä¸‹ Goã€‚åŸæ–‡æ˜¯ Dave Cheney æ ¹æ®è‡ªå·± GolangUK çš„[æ¼”è®²](https://www.youtube.com/watch?v=zzAdEt3xZ1M)æ‰€æ•´ç†çš„ï¼Œå…¨æ–‡ä»¥ SOLID åŸåˆ™ä¸ºçº¿è·¯ï¼Œè®²è¿°äº†ä»€ä¹ˆæ ·çš„ Go ä»£ç æ‰ç®—æ˜¯å¥½ä»£ç ï¼Œå½“ç„¶ SOLID åŸåˆ™ä¹Ÿé€‚ç”¨äºå…¶ä»–è¯­è¨€ã€‚
[è‹±æ–‡åŸæ–‡](http://dave.cheney.net/2016/08/20/solid-go-design)æ¯”è¾ƒé•¿ï¼Œç”±æˆ‘å’Œ [Kevin](http://kevin.doyeden.com/) åˆè¯‘ã€‚
### ä¸–ç•Œä¸Šæœ‰å¤šå°‘ä¸ª Go è¯­è¨€å¼€å‘è€…ï¼Ÿ
ä»‹ä¸ªä¸–ç•Œä¸Šæœ‰å¤šå°‘ Go å¼€å‘è€…æï¼Ÿåœ¨è„‘æµ·ä¸­æƒ³ä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬ä¼šåœ¨æœ€åå›åˆ°è¿™ä¸ªè¯é¢˜ã€‚
![thinking](http://oduh99f02.bkt.clouddn.com/image/think1.png)
### Code review
æœ‰å¤šå°‘äººå°† code review å½“åšè‡ªå·±å·¥ä½œçš„ä¸€éƒ¨åˆ†?[å¬æ¼”è®²çš„äººéƒ½ä¸¾èµ·äº†æ‰‹]ã€‚ä¸ºä»€ä¹ˆè¦åš code reviewï¼Ÿ[ä¸€äº›äººå›ç­”ä¸ºäº†é˜»æ­¢ä¸å¥½çš„ä»£ç ]
å¦‚æœ code review æ˜¯ä¸ºäº†æ•æ‰åˆ°ä¸å¥½çš„ä»£ç ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä½ æ€ä¹ˆåˆ¤æ–­ä½ æ­£åœ¨ review çš„ä»£ç æ˜¯å¥½è¿˜æ˜¯ä¸å¥½å‘¢ï¼Ÿ
æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„è¯´å‡ºâ€œè¿™ä»£ç å¥½è¾£çœ¼ç›â€æˆ–è€…â€œè¿™æºç å†™çš„å¤ªåŠäº†â€ï¼Œå°±åƒè¯´â€œè¿™ç”»çœŸç¾â€ï¼Œâ€œè¿™å±‹å­çœŸå¤§æ°”â€ä¸€æ ·ã€‚ä½†æ˜¯è¿™äº›éƒ½æ˜¯ä¸»è§‚çš„ï¼Œæˆ‘å¸Œæœ›æ‰¾åˆ°ä¸€äº›å®¢è§‚çš„æ–¹æ³•æ¥è¡¡é‡ä»£ç æ˜¯å¥½è¿˜æ˜¯ä¸å¥½ã€‚
### Bad code
ä¸‹é¢çœ‹ä¸€ä¸‹åœ¨ code review ä¸­ï¼Œä¸€æ®µä»£ç æœ‰å“ªäº›ç‰¹ç‚¹ä¼šè¢«è®¤ä¸ºæ˜¯ä¸å¥½çš„ä»£ç ã€‚
- Rigid ä»£ç æ˜¯ä¸æ˜¯å¾ˆåƒµç¡¬ï¼Ÿæ˜¯å¦ç”±äºä¸¥æ ¼çš„ç±»å‹å’Œå‚æ•°å¯¼è‡´ä¿®æ”¹ä»£ç çš„æˆæœ¬æé«˜
- Fragile ä»£ç æ˜¯ä¸æ˜¯å¾ˆè„†å¼±ï¼Ÿæ˜¯å¦ä¸€ç‚¹å°çš„æ”¹åŠ¨å°±ä¼šé€ æˆå·¨å¤§çš„ç ´åï¼Ÿ
- Immobile ä»£ç æ˜¯å¦éš¾ä»¥é‡æ„ï¼Ÿ
- Complex ä»£ç æ˜¯å¦æ˜¯è¿‡åº¦è®¾è®¡ï¼Ÿ
- Verbose å½“ä½ è¯»è¿™æ®µä»£ç æ—¶ï¼Œèƒ½å¦æ¸…æ¥šçš„çŸ¥é“å®ƒæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ
ğŸ‘†è¿™äº›éƒ½ä¸æ˜¯ä»€ä¹ˆå¥½å¬çš„è¯ï¼Œæ²¡æœ‰äººå¸Œæœ›åœ¨åˆ«äºº review è‡ªå·±ä»£ç æ—¶å¬åˆ°è¿™äº›è¯ã€‚
### Good design
äº†è§£äº†ä»€ä¹ˆæ˜¯ä¸å¥½çš„ä»£ç ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥è¯´â€œæˆ‘ä¸å–œæ¬¢è¿™æ®µä»£ç å› ä¸ºå®ƒä¸æ˜“äºä¿®æ”¹â€æˆ–è€…â€œè¿™æ®µä»£ç å¹¶æ²¡æœ‰æ¸…æ™°çš„å‘Šè¯‰æˆ‘å®ƒè¦åšä»€ä¹ˆâ€ã€‚ä½†è¿™äº›å¹¶æ²¡æœ‰å¸¦æ¥ç§¯æçš„å¼•å¯¼ã€‚
å¦‚æœæˆ‘ä»¬ä¸ä»…ä»…å¯ä»¥æè¿°ä¸å¥½çš„è®¾è®¡ï¼Œè¿˜å¯ä»¥å®¢è§‚çš„æè¿°å¥½çš„è®¾è®¡ï¼Œæ˜¯ä¸æ˜¯æ›´æœ‰åŠ©äºæé«˜å‘¢ã€‚
![excited](http://oduh99f02.bkt.clouddn.com/image/excited.jpg)
### SOLID
2002å¹´ï¼Œ`Robert Martin` å‡ºç‰ˆäº†ã€Šæ•æ·è½¯ä»¶å¼€å‘:åŸåˆ™ã€æ¨¡å¼ä¸å®è·µã€‹ä¸€ä¹¦ï¼Œåœ¨ä¹¦ä¸­ä»–æè¿°äº†å¯é‡ç”¨è½¯ä»¶è®¾è®¡çš„äº”ä¸ªåŸåˆ™ï¼Œä»–ç§°ä¹‹ä¸º **SOLID** åŸåˆ™(æ¯ä¸ªåŸåˆ™çš„é¦–å­—æ¯ç»„åˆåœ¨ä¸€èµ·)ã€‚
- å•ä¸€è´£ä»»åŸåˆ™
- å¼€æ”¾å°é—­åŸåˆ™
- é‡Œæ°æ›¿æ¢åŸåˆ™
- æ¥å£åˆ†ç¦»åŸåˆ™
- ä¾èµ–å€’ç½®åŸåˆ™
è¿™æœ¬ä¹¦æœ‰ç‚¹è¿‡æ—¶äº†ï¼Œä¹¦ä¸­è°ˆè®ºçš„è¯­è¨€éƒ½å·²ç»è¶…è¿‡äº†åå¹´ä¹‹ä¹…ã€‚å°½ç®¡å¦‚æ­¤ï¼Œåœ¨è°ˆè®ºä»€ä¹ˆæ ·çš„ Go ä»£ç æ‰æ˜¯å¥½ä»£ç æ—¶ï¼ŒSOLID çš„åŸåˆ™ä¾ç„¶å¯ä»¥ç»™æˆ‘ä»¬ä¸€äº›å¯å‘ã€‚
Soï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘èŠ±æ—¶é—´æƒ³åœ¨æœ¬æ–‡å’Œå¤§å®¶ä¸€èµ·è®¨è®ºçš„ã€‚
### å•ä¸€è´£ä»»åŸåˆ™
![å¿™æˆç‹—](http://oduh99f02.bkt.clouddn.com/image/single.png)
SOLID åŸåˆ™ä¸­çš„ç¬¬ä¸€ä¸ªåŸåˆ™å°±æ˜¯`å•ä¸€è´£ä»»åŸåˆ™`ã€‚`Robert C Martin` è¯´è¿‡ A class should have one, and only one, reason to change(ä¿®æ”¹æŸä¸ªç±»çš„æ—¶å€™ï¼ŒåŸå› æœ‰ä¸”åªæœ‰ä¸€ä¸ª)ï¼Œè¯´ç™½äº†å°±æ˜¯ï¼Œä¸€ä¸ªç±»åªè´Ÿè´£ä¸€é¡¹èŒè´£ã€‚
è™½ç„¶ Go è¯­è¨€ä¸­å¹¶æ²¡æœ‰ç±»çš„æ¦‚å¿µâ€“ä½†æˆ‘ä»¬æœ‰æ›´é¹…å¦¹å­å˜¤çš„ `composition` (ç»„åˆ)çš„ç‰¹æ€§ã€‚
ä¸ºä»€ä¹ˆä¿®æ”¹ä¸€æ®µä»£ç åªè´Ÿè´£ä¸€é¡¹èŒè´£å¦‚æ­¤é‡è¦å‘¢ï¼Ÿå¦‚æœä¸€ä¸ªç±»æœ‰ä¸¤ä¸ªèŒè´£R1ï¼ŒR2ï¼Œé‚£ä¹ˆä¿®æ”¹R1æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¹Ÿè¦ä¿®æ”¹R2ã€‚ä¿®æ”¹ä»£ç æ˜¯ç—›è‹¦çš„ï¼Œä½†æ›´ç—›è‹¦çš„æ˜¯ä¿®æ”¹ä»£ç çš„åŸå› æ˜¯ç”±äºä¿®æ”¹å…¶ä»–ä»£ç å¼•èµ·çš„ã€‚
æ‰€ä»¥å½“ä¸€ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½é¢†åŸŸä¸­çš„ç›¸åº”èŒè´£æ—¶ï¼Œå¯ä»¥ä¿®æ”¹çš„å®ƒçš„åŸå› ä¹Ÿå°±æœ€å¤§é™åº¦çš„å˜å°‘äº†ã€‚
### è€¦åˆ & å†…èš
è¿™ä¸¤ä¸ªè¯æ˜¯ç”¨æ¥å½¢å®¹ä¸€æ®µä»£ç æ˜¯å¦æ˜“äºä¿®æ”¹çš„ã€‚
`è€¦åˆ`æ˜¯æŒ‡ä¸¤ä¸ªä¸œè¥¿éœ€è¦ä¸€èµ·ä¿®æ”¹â€”å¯¹å…¶ä¸­ä¸€ä¸ªçš„æ”¹åŠ¨ä¼šå½±å“åˆ°å¦ä¸€ä¸ªã€‚
å¦ä¸€ä¸ªç›¸å…³ä½†ç‹¬ç«‹çš„æ¦‚å¿µæ˜¯`å†…èš`ï¼Œä¸€èˆ¬æŒ‡ç›¸äº’å¸å¼•çš„è¿·ä¹‹åŠ›é‡ã€‚
åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸä¸­ï¼Œå†…èšå¸¸å¸¸ç”¨æ¥æè¿°ä¸€æ®µä»£ç å†…å„ä¸ªå…ƒç´ å½¼æ­¤ç»“åˆçš„ç´§å¯†ç¨‹åº¦ã€‚
ä¸‹é¢æˆ‘å‡†å¤‡ä» Go çš„åŒ…æ¨¡å‹å¼€å§‹ï¼ŒèŠèŠ Go å¼€å‘ä¸­çš„è€¦åˆä¸å†…èšã€‚
### åŒ…å
åœ¨Goä¸­ï¼Œæ‰€æœ‰ä»£ç éƒ½å¿…é¡»æœ‰ä¸€ä¸ªæ‰€å±çš„åŒ…ã€‚ä¸€ä¸ªåŒ…åè¦æè¿°å®ƒçš„ç”¨é€”ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å‘½åç©ºé—´çš„å‰ç¼€ã€‚ä¸‹é¢æ˜¯ Go æ ‡å‡†åº“ä¸­ä¸€äº›å¥½çš„åŒ…åï¼š
- net/httpï¼Œæä¾› http çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ã€‚
- os/execï¼Œå¯ä»¥è¿è¡Œè¿è¡Œå¤–éƒ¨å‘½ä»¤ã€‚
- encoding/jsonï¼Œå®ç°äº† JSON æ–‡ä»¶çš„ç¼–ç å’Œè§£ç ã€‚
### ä¸å¥½çš„åŒ…å
ç°åœ¨è®©æˆ‘ä»¬æ¥å–·ä¸€äº›ä¸å¥½çš„åŒ…åã€‚è¿™äº›åŒ…åå¹¶æ²¡æœ‰å¾ˆå¥½çš„å±•ç°å‡ºå®ƒä»¬çš„ç”¨é€”ï¼Œå½“ç„¶äº†å‰ææ˜¯å®ƒä»¬æœ‰-_-|||ã€‚
- package server æ˜¯æä¾›ä»€ä¹ˆï¼Ÿã€‚ã€‚ã€‚å¥½å§å°±å½“æ˜¯æä¾›ä¸€ä¸ªæœåŠ¡ç«¯å§ï¼Œä½†æ˜¯æ˜¯ä»€ä¹ˆåè®®å‘¢?
- package private æ˜¯æä¾›ä»€ä¹ˆï¼Ÿä¸€äº›æˆ‘ä¸åº”è¯¥çœ‹ğŸ‘€çš„ä¸œè¥¿ï¼Ÿ
- è¿˜æœ‰ package commonï¼Œ package utilsï¼ŒåŒæ ·æ— æ³•æ¸…æ¥šçš„è¡¨è¾¾å®ƒä»¬çš„ç”¨é€”ï¼Œå¼€å‘è€…ä¹Ÿä¸æ˜“ä¿æŒå®ƒä»¬åŠŸèƒ½çš„ä¸“ä¸€æ€§ã€‚
ä¸Šé¢è¿™äº›åŒ…å¾ˆå¿«å°±ä¼šå˜æˆå †æ”¾æ‚ä¸ƒæ‚å…«ä»£ç çš„åƒåœ¾å †ï¼Œè€Œä¸”ä¼šç”±äºåŠŸèƒ½å¤ªæ‚ä¹±è€Œé¢‘ç¹ä¿®æ”¹ã€‚
### Go ä¸­çš„ UNIX å“²å­¦
åœ¨æˆ‘çœ‹æ¥ï¼Œä»»ä½•å…³äºè§£è€¦è®¾è®¡çš„è®¨è®ºå¦‚æœæ²¡æœ‰æåˆ° `Doug McIlroy` çš„ `UNIX å“²å­¦`éƒ½æ˜¯ä¸å®Œæ•´çš„ã€‚UNIX å“²å­¦å°±æ˜¯ä¸»å¼ å°†è‹¥å¹²ç®€æ´ï¼Œæ¸…æ™°çš„æ¨¡å—ç»„åˆèµ·æ¥å®Œæˆå¤æ‚çš„ä»»åŠ¡ï¼Œè€Œä¸”é€šå¸¸æƒ…å†µä¸‹è¿™ä¸ªä»»åŠ¡éƒ½ä¸æ˜¯åŸä½œè€…æ‰€èƒ½é¢„æƒ³åˆ°çš„ã€‚
æˆ‘æƒ³ Go ä¸­çš„åŒ…æ­£ä½“ç°äº† UNIX å“²å­¦çš„ç²¾ç¥ã€‚å› ä¸ºæ¯ä¸€ä¸ªåŒ…éƒ½æ˜¯ä¸€ä¸ªæ‹¥æœ‰å•ä¸€è´£ä»»çš„ç®€æ´çš„ Go ç¨‹åºã€‚
### å¼€æ”¾å°é—­åŸåˆ™
![open or close](http://oduh99f02.bkt.clouddn.com/image/open.png)
ç¬¬äºŒä¸ªåŸåˆ™ï¼Œä¹Ÿå°±æ˜¯ SOLID å½“ä¸­çš„ Oï¼Œæ˜¯ç”± `Bertrand Meyer` æå‡ºçš„`å¼€æ”¾å°é—­åŸåˆ™`ã€‚1988å¹´ï¼ŒBertrand Mey åœ¨ä»–çš„è‘—ä½œã€Šé¢å‘å¯¹è±¡è½¯ä»¶æ„é€ ã€‹ä¸€ä¹¦ä¸­å†™é“ï¼šSoftware entities should be open for extension,but closed for modificationï¼ˆè½¯ä»¶å®ä½“åº”å½“å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼‰ã€‚
é‚£ä¹ˆè¿™ä¸ªnå¹´å‰çš„å»ºè®®åœ¨ Go è¯­è¨€ä¸­æ˜¯å¦‚ä½•åº”ç”¨çš„å‘¢ï¼Ÿ


```
package main
type A struct {
â€¨        year intâ€¨
}
func (a A) Greet() { fmt.Println("Hello GolangUK", a.year) }
type B struct {
â€¨        A
â€¨}
func (b B) Greet() { fmt.Println("Welcome to GolangUK", b.year) }
func main() {
â€¨        var a Aâ€¨
        a.year = 2016
â€¨        var b Bâ€¨
        b.year = 2016
â€¨        a.Greet() // Hello GolangUK 2016
â€¨        b.Greet() // Welcome to GolangUK 2016â€¨
}
```
ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æœ‰ç±»å‹Aï¼ŒåŒ…å«å±æ€§ year å’Œä¸€ä¸ªæ–¹æ³• Greetã€‚æˆ‘ä»¬è¿˜æœ‰ç±»å‹Bï¼ŒBä¸­åµŒå…¥(embedding)äº†ç±»å‹Aï¼Œå¹¶ä¸”Bæä¾›äº†ä»–è‡ªå·±çš„ Greet æ–¹æ³•ï¼Œè¦†ç›–äº†Açš„ã€‚
åµŒå…¥ä¸ä»…ä»…æ˜¯é’ˆå¯¹æ–¹æ³•ï¼Œè¿˜å¯ä»¥é€šè¿‡åµŒå…¥ä½¿ç”¨è¢«åµŒå…¥ç±»å‹çš„å±æ€§ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå› ä¸ºAå’ŒBå®šä¹‰åœ¨åŒä¸€ä¸ªåŒ…ä¸­ï¼Œæ‰€ä»¥Bå¯ä»¥åƒä½¿ç”¨è‡ªå·±å®šä¹‰çš„å±æ€§ä¸€æ ·ä½¿ç”¨Aä¸­çš„ private çš„å±æ€§ yearã€‚
æ‰€ä»¥ï¼ŒåµŒå…¥æ˜¯å®ç° Go ç±»å‹å¯¹æ‰©å±•å¼€æ”¾éå¸¸é¹…å¦¹å­å˜¤çš„æ‰‹æ®µã€‚


```
package main
type Cat struct {â€¨
        Name string
â€¨}
func (c Cat) Legs() int { return 4 }
func (c Cat) PrintLegs() {
â€¨        fmt.Printf("I have %d legs\n", c.Legs())â€¨
}
type OctoCat struct {â€¨
        Catâ€¨
}
func (o OctoCat) Legs() int { return 5 }
func main() {â€¨
        var octo OctoCat
â€¨        fmt.Println(octo.Legs()) // 5â€¨
        octo.PrintLegs()         // I have 4 legs
â€¨}
```
åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª Cat ç±»å‹ï¼Œå®ƒæ‹¥æœ‰ä¸€ä¸ª Legs æ–¹æ³•å¯ä»¥è·å¾—è…¿çš„æ•°ç›®ã€‚æˆ‘ä»¬å°† Cat ç±»å‹åµŒå…¥åˆ°ä¸€ä¸ªæ–°ç±»å‹ OctoCat ä¸­ï¼Œç„¶åå£°æ˜ Octocat æœ‰5æ¡è…¿ã€‚ç„¶è€Œï¼Œå°½ç®¡ OctoCat å®šä¹‰äº†å®ƒè‡ªå·±çš„ Legs æ–¹æ³•è¿”å›5ï¼Œåœ¨è°ƒç”¨ PrintLegs æ–¹æ³•æ—¶ä¾æ—§ä¼šæ‰“å°â€œI have 4 legsâ€ã€‚
è¿™æ˜¯å› ä¸º PrintLegs æ–¹æ³•æ˜¯å®šä¹‰åœ¨ Cat ç±»å‹ä¸­çš„ï¼Œå®ƒå°† Cat ä½œä¸ºæ¥æ”¶è€…ï¼Œæ‰€ä»¥ä¼šè°ƒç”¨ Cat ç±»å‹çš„ Legs æ–¹æ³•ã€‚Cat ç±»å‹å¹¶ä¸ä¼šæ„ŸçŸ¥åˆ°å®ƒè¢«åµŒå…¥åˆ°å…¶ä»–ç±»å‹ä¸­ï¼Œæ‰€ä»¥å®ƒçš„æ–¹æ³•ä¹Ÿä¸ä¼šè¢«æ›´æ”¹ã€‚
æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è¯´ Go çš„ç±»å‹æ˜¯å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­çš„ã€‚
å®é™…ä¸Šï¼ŒGo ç±»å‹ä¸­çš„æ–¹æ³•æ¯”æ™®é€šå‡½æ•°å¤šäº†ä¸€ç‚¹è¯­æ³•ç³–â€”-å°†æ¥æ”¶è€…ä½œä¸ºä¸€ä¸ªé¢„å…ˆå£°æ˜çš„å½¢å‚ã€‚(è¯‘è€…æ³¨ï¼šè¿™å—ç†è§£äº†å¥½ä¹…ğŸ˜–ã€‚ã€‚ã€‚ï¼Œä¸æ‡‚å¾—å¯ä»¥çœ‹è¿™ç¯‡[å‚è€ƒæ–‡æ¡£](https://tiancaiamao.gitbooks.io/go-internals/content/zh/07.3.html))


```
func (c Cat) PrintLegs() {
        fmt.Printf("I have %d legs\n", c.Legs())
}
func PrintLegs(c Cat) {
        fmt.Printf("I have %d legs\n", c.Legs())
}
```
ç”±äº Go å¹¶ä¸æ”¯æŒå‡½æ•°é‡è½½ï¼Œæ‰€ä»¥ OctoCat ç±»å‹å¹¶ä¸èƒ½æ›¿ä»£ Cat ç±»å‹ã€‚è¿™ä¹Ÿå°†å¼•å‡ºä¸‹ä¸€ä¸ªåŸåˆ™â€”é‡Œæ°æ›¿æ¢åŸåˆ™ã€‚
### é‡Œå¼æ›¿æ¢åŸåˆ™
é‡Œå¼æ›¿æ¢åŸåˆ™ç”± `Barbara Liskov` æå‡ºï¼Œå¦‚æœä¸¤ä¸ªç±»å‹è¡¨ç°çš„è¡Œä¸ºå¯¹äºè°ƒç”¨è€…æ¥è¯´æ²¡æœ‰å·®åˆ«ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºè¿™ä¸¤ä¸ªç±»å‹æ˜¯å¯äº’ç›¸æ›¿æ¢çš„ã€‚
åœ¨é¢å‘å¯¹è±¡çš„è¯­è¨€ä¸­ï¼Œé‡Œå¼æ›¿æ¢åŸåˆ™é€šå¸¸è§£é‡Šä¸ºä¸€ä¸ªæŠ½è±¡åŸºç±»æ‹¥æœ‰ç»§æ‰¿å®ƒçš„è®¸å¤šå…·ä½“çš„å­ç±»ã€‚ä½† Go ä¸­å¹¶æ²¡æœ‰ç±»æˆ–ç»§æ‰¿ï¼Œæ‰€ä»¥æ— æ³•é€šè¿‡ç±»çš„ç»§æ‰¿æ¥å®ç°æ›¿æ¢ã€‚
### æ¥å£
ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ¥å£å®ç°æ›¿æ¢ã€‚åœ¨ Go ä¸­ï¼Œç±»å‹å¹¶ä¸éœ€è¦æŒ‡å®šä»–ä»¬å®ç°çš„æ¥å£ï¼Œåªè¦åœ¨ç±»å‹ä¸­æä¾›æ¥å£è¦æ±‚çš„æ‰€æœ‰æ–¹æ³•å³å¯ã€‚
æ‰€ä»¥ï¼ŒGo ä¸­çš„æ¥å£æ˜¯éšå¼çš„(éä¾µå…¥æ€§çš„)ï¼Œè€Œéæ˜¾å¼çš„ã€‚è¿™å¯¹äºæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨è¿™é—¨è¯­è¨€æœ‰ç€æ·±è¿œçš„å½±å“ã€‚
ä¸€ä¸ªå¥½çš„æ¥å£åº”è¯¥æ˜¯å°å·§çš„ï¼Œæ¯”è¾ƒæµè¡Œçš„åšæ³•æ˜¯ä¸€ä¸ªæ¥å£åªåŒ…å«ä¸€ä¸ªæ–¹æ³•ã€‚å› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå°çš„æ¥å£å¾€å¾€æ„å‘³ç€ç®€æ´çš„å®ç°ã€‚
### io.Reader


```
type Reader interface {
        // Read reads up to len(buf) bytes into buf.
        Read(buf []byte) (n int, err error)
}
```
### ä¸‹é¢è®©æˆ‘ä»¬çœ‹ä¸‹ Go ä¸­æˆ‘æœ€çˆ±çš„æ¥å£â€”`io.Reader`ã€‚
`io.Reader` æ¥å£çš„åŠŸèƒ½éå¸¸ç®€å•ï¼›å°†æ•°æ®è¯»å–åˆ°æä¾›çš„ç¼“å†²åŒºä¸­ï¼Œå¹¶è¿”å›è¯»å–çš„å­—èŠ‚æ•°ä»¥åŠè¯»å–è¿‡ç¨‹ä¸­é‡åˆ°çš„é”™è¯¯ã€‚è™½ç„¶çœ‹ä¸Šå»ç®€å•ï¼Œä½†æ˜¯ç¡®éå¸¸æœ‰ç”¨ã€‚
å› ä¸º`io.Reader`å¯ä»¥å¤„ç†ä»»ä½•å¯ä»¥è¡¨ç¤ºä¸ºå­—èŠ‚æµçš„ä¸œä¸œï¼Œæˆ‘ä»¬å‡ ä¹å¯ä»¥ä¸ºæ‰€æœ‰ä¸œè¥¿æ„é€ è¯»å–å™¨ï¼›æ¯”å¦‚ï¼šä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²ï¼Œå­—èŠ‚æ•°ç»„ï¼Œæ ‡å‡†è¾“å…¥ï¼Œç½‘ç»œæµï¼Œtar æ–‡ä»¶ï¼Œé€šè¿‡ ssh è¿œç¨‹æ‰§è¡Œå‘½ä»¤çš„æ ‡å‡†è¾“å‡ºï¼Œç­‰ç­‰ã€‚
è€Œç”±äºå®ç°äº†åŒæ ·çš„æ¥å£ï¼Œè¿™äº›å…·ä½“å®ç°éƒ½æ˜¯äº’ç›¸å¯æ›¿æ¢çš„ã€‚
æˆ‘ä»¬å¯ä»¥ç”¨ `Jim Weirich` çš„ä¸€å¥è¯æ¥æè¿°é‡Œå¼æ›¿æ¢åŸåˆ™åœ¨ Go ä¸­çš„åº”ç”¨ã€‚
> 
Require no more, promise no lessã€‚
å¥½ï¼Œä¸‹é¢è®©æˆ‘ä»¬ç»§ç»­çœ‹ SOLID çš„ç¬¬å››ä¸ªåŸåˆ™Iã€‚
### æ¥å£éš”ç¦»åŸåˆ™
ç¬¬å››ä¸ªåŸåˆ™æ˜¯æ¥å£éš”ç¦»ï¼ŒRobert C. Martin è§£é‡Šä¸ºï¼š
> 
è°ƒç”¨è€…ä¸åº”è¯¥è¢«å¼ºåˆ¶ä¾èµ–é‚£äº›ä»–ä»¬ä¸éœ€è¦ä½¿ç”¨çš„æ–¹æ³•ã€‚
åœ¨ Go ä¸­ï¼Œæ¥å£éš”ç¦»åŸåˆ™çš„åº”ç”¨å¯ä»¥å‚è€ƒå¦‚ä½•åˆ†ç¦»ä¸€ä¸ªå‡½æ•°åŠŸèƒ½çš„è¿‡ç¨‹ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬éœ€å°†ä¸€ä»½æ–‡æ¡£æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚å‡½æ•°ç­¾åå¯ä»¥è®¾è®¡å¦‚ä¸‹ï¼š


```
// Save æ–¹æ³•å°†æ–‡æ¡£çš„å†…å®¹å†™åˆ°æ–‡ä»¶f
func Save(f *os.File, doc *Document) error
```
æˆ‘ä»¬å®šä¹‰çš„ Save æ–¹æ³•ï¼Œå°† `*os.File` ä½œä¸ºæ–‡æ¡£å†™å…¥çš„ç›®æ ‡ï¼Œè¿™æ ·çš„è®¾è®¡ä¼šæœ‰ä¸€äº›é—®é¢˜ã€‚
Save æ–¹æ³•çš„ç­¾åè®¾è®¡æ’é™¤äº†å°†æ–‡æ¡£å†…å®¹å­˜å‚¨åˆ°ç½‘ç»œè®¾å¤‡ä¸Šçš„å¯èƒ½ã€‚å‡è®¾åç»­æœ‰å°†æ–‡æ¡£å­˜å‚¨åˆ°ç½‘ç»œå­˜å‚¨è®¾å¤‡ä¸Šçš„éœ€æ±‚ï¼ŒSave æ–¹æ³•çš„ç­¾åéœ€è¦åšå‡ºç›¸åº”çš„æ”¹å˜ï¼Œå¯¼è‡´æ‰€æœ‰ Save æ–¹æ³•çš„è°ƒç”¨æ–¹ä¹Ÿéœ€è¦åšå‡ºæ”¹å˜ã€‚
ç”±äº Save æ–¹æ³•ç›´æ¥åœ¨ç£ç›˜ä¸Šæ“ä½œæ–‡ä»¶ï¼Œå¯¼è‡´å¯¹æµ‹è¯•ä¸å‹å¥½ã€‚ä¸ºäº†éªŒè¯ Save æ‰€åšçš„æ“ä½œï¼Œæµ‹è¯•éœ€è¦åœ¨æ–‡æ¡£å†™å…¥åä»ç£ç›˜ä¸Šè¯»å–æ–‡æ¡£å†…å®¹æ¥åšéªŒè¯ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œæµ‹è¯•è¿˜è¦ç¡®ä¿æ–‡ä»¶è¢«å†™å…¥åˆ°ä¸´æ—¶ç©ºé—´ï¼Œä¹‹åè¢«åˆ é™¤ã€‚
`*os.File` å®šä¹‰äº†è®¸å¤šä¸ Save æ“ä½œä¸ç›¸å…³çš„æ–¹æ³•ï¼Œæ¯”å¦‚è¯»å–æ–‡ä»¶ç›®å½•ï¼Œæ£€æŸ¥ä¸€ä¸ªè·¯å¾„æ˜¯å¦æ˜¯ç¬¦å·é“¾æ¥ã€‚å¦‚æœ Save æ–¹æ³•çš„ç­¾ååªæè¿° `*os.File` éƒ¨åˆ†ç›¸å…³çš„æ“ä½œä¼šæ›´æœ‰å¸®åŠ©ã€‚
æˆ‘ä»¬åº”è¯¥å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜å‘¢ï¼Ÿ


```
// Save æ–¹æ³•å°†æ–‡æ¡£æ–‡æ¡£å†…å®¹å†™å…¥åˆ°æŒ‡å®šçš„ReadWriterCloser
func Save(rwc io.ReadWriteCloser, doc *Document) error
```
ä½¿ç”¨ `io.ReadWriteCloser` æˆ‘ä»¬å¯ä»¥æ ¹æ®æ¥å£éš”ç¦»åŸåˆ™æ¥é‡æ–°å®šä¹‰ Save æ–¹æ³•ï¼Œå°†æ›´é€šç”¨çš„æ–‡ä»¶æè¿°æ¥å£ä½œä¸ºå‚æ•°ã€‚
é‡æ„åï¼Œä»»ä½•å®ç°äº† `io.ReadWriteCloser` æ¥å£çš„ç±»å‹éƒ½å¯ä»¥æ›¿ä»£ä¹‹å‰çš„ `*os.File` æ¥å£ã€‚è¿™æ‰©å¤§äº† Save æ–¹æ³•çš„åº”ç”¨åœºæ™¯ï¼Œç›¸æ¯”ä½¿ç”¨ `*os.File` æ¥å£ï¼ŒSave æ–¹æ³•å¯¹è°ƒç”¨è€…å¼€è¯´å˜å¾—æ›´åŠ é€æ˜ã€‚
Save æ–¹æ³•çš„ç¼–å†™è€…ä¹Ÿæ— éœ€å…³å¿ƒ `*os.File` åŒ…å«çš„é‚£äº›ä¸ç›¸å…³çš„æ–¹æ³•ï¼Œå› ä¸ºè¿™äº›ç»†èŠ‚éƒ½è¢«`io.ReadWriteCloser` æ¥å£å±è”½æ‰äº†ã€‚æˆ‘ä»¬è¿˜å¯ä»¥è¿›ä¸€æ­¥å°†æ¥å£éš”ç¦»åŸåˆ™å‘æŒ¥ä¸€ä¸‹ã€‚
é¦–å…ˆï¼Œå¦‚æœ Save æ–¹æ³•éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œæ–¹æ³•ä¸åº”è¯¥è¯»å–æ–‡ä»¶å†…å®¹æ¥å¯¹åˆšå†™å…¥çš„å†…å®¹åšéªŒè¯ï¼Œè¿™åº”è¯¥æ˜¯å¦ä¸€ä¸ªä»£ç ç‰‡æ®µåº”è¯¥åšçš„äº‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥ç»†åŒ–ä¼ é€’ç»™ Save æ–¹æ³•çš„æ¥å£å®šä¹‰ï¼Œä»…ä¿ç•™å†™å…¥å’Œå…³é—­çš„åŠŸèƒ½ã€‚


```
// Save æ–¹æ³•å°†æ–‡æ¡£æ–‡æ¡£å†…å®¹å†™å…¥åˆ°æŒ‡å®šçš„WriterCloser
func Save(wc io.WriteCloser, doc *Document) error
```
*è¯‘è€…æ³¨ï¼šæ³¨æ„ï¼Œè¿™é‡Œæ¥å£åå­—æ˜¯io.WriteCloserï¼Œè€Œä¸Šä¸€ä¸ªç­¾åçš„å‚æ•°æ˜¯io.ReadWriterCloser*
å…¶æ¬¡ï¼Œæ ¹æ®æˆ‘ä»¬æ‰€æœŸæœ›çš„é€šç”¨æ–‡ä»¶æè¿°æ‰€å…·å¤‡çš„åŠŸèƒ½ï¼Œç»™ Save æ–¹æ³•æä¾›å…³é—­æµçš„æœºåˆ¶ã€‚ä½†æ˜¯è¿™ä¼šå¼•å‘ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼š `wc` åœ¨ä»€ä¹ˆæ—¶æœºå…³é—­ã€‚Save æ–¹æ³•å¯ä»¥æ— æ¡ä»¶çš„è°ƒç”¨ Close æ–¹æ³•ï¼Œæˆ–è€…æ˜¯ Close æ–¹æ³•åœ¨æ‰§è¡ŒæˆåŠŸçš„æ¡ä»¶ä¸‹æ‰ä¼šè¢«è°ƒç”¨ã€‚
ä¸ç®¡å“ªç§å…³é—­æµçš„æ–¹å¼éƒ½ä¼šäº§ç”Ÿä¸ªé—®é¢˜ï¼Œå› ä¸º Save æ–¹æ³•çš„è°ƒç”¨è€…å¯èƒ½å¸Œæœ›åœ¨å†™å…¥çš„æ–‡æ¡£çš„æµåé¢è¿½åŠ æ•°æ®ï¼Œè€Œæ­¤æ—¶æµå·²ç»è¢«å…³é—­ã€‚


```
type NopCloser struct {
    io.Writer
}
// Close é‡å†™ Close æ–¹æ³•ï¼Œæä¾›ç©ºå®ç°
func (c *NopCloser) Close() error { return nil }
```
å¦‚ä¸Šç¤ºä¾‹ä»£ç æ‰€ç¤ºï¼Œä¸€ç§ç²—æš´çš„åšæ³•å°±æ˜¯é‡æ–°å®šä¸€ä¸ªç±»å‹ï¼Œç»„åˆäº† `io.Writer` , é‡å†™ Close å‡½æ•°ï¼Œæ›¿æ¢ä¸ºç©ºå®ç°ï¼Œé˜²æ­¢ Save æ–¹æ³•å…³é—­æ•°æ®æµã€‚
ä½†æ˜¯ï¼Œè¿™è¿åäº†é‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œå› ä¸º NopCloser å¹¶æ²¡æœ‰çœŸæ­£å…³é—­æµã€‚


```
// Save æ–¹æ³•å°†æ–‡æ¡£æ–‡æ¡£å†…å®¹å†™å…¥åˆ°æŒ‡å®šçš„Writer
func Save(w io.Writer, doc *Document) error
```
ä¸€ç§æ›´åŠ ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆæ˜¯é‡æ–°å®šä¹‰ Save æ–¹æ³•çš„å‚æ•°ï¼Œå°† `io.Writer` ä½œä¸ºå‚æ•°ï¼ŒæŠŠ Save æ–¹æ³•çš„èŒè´£è¿›ä¸€æ­¥ç»†åŒ–ï¼Œé™¤äº†å†™å…¥æ•°æ®ï¼Œå…¶ä»–ä¸ç›¸å…³çš„äº‹æƒ…éƒ½ä¸åšã€‚
é€šè¿‡å°†æ¥å£éš”ç¦»åŸåˆ™åº”ç”¨åˆ° Save æ–¹æ³•ï¼ŒæŠŠæ–¹æ³•åŠŸèƒ½æ›´åŠ æ˜ç¡®åŒ–ï¼Œå®ƒä»…éœ€è¦ä¸€ç§å¯ä»¥å†™å…¥çš„ä¸œè¥¿å°±å¯ä»¥ã€‚æ–¹æ³•çš„å®šä¹‰æ›´å…·æœ‰æ™®é€‚æ€§ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Save æ–¹æ³•å»ä¿å­˜æ•°æ®åˆ°ä»»ä½•å®ç°äº† `io.Writer` çš„è®¾å¤‡ã€‚
> 
Go ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªåŸåˆ™å°±æ˜¯æ¥å—interfaceï¼Œè¿”å›structsã€‚ â€“ Jack Lindamood
ä¸Šè¿°å¼•è¨€æ˜¯ GO åœ¨è¿™äº›å¹´çš„å‘å±•è¿‡ç¨‹ä¸­æ¸—é€åˆ° GO è®¾è®¡æ€æƒ³é‡Œä¸­çš„éå¸¸æœ‰æ„æ€çš„çº¦å®šã€‚
Jack çš„ç²¾æ‚è¨€è®ºå¯èƒ½è·Ÿå®é™…ä¼šæœ‰ç»†å¾®å·®åˆ«ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºè¿™æ˜¯ Go è®¾è®¡ä¸­é¢‡å…·æœ‰ä»£è¡¨æ€§çš„å£°æ˜ã€‚
### ä¾èµ–å€’ç½®åŸåˆ™
æœ€åä¸€ä¸ªåŸåˆ™æ˜¯ä¾èµ–å€’ç½®ã€‚å¯ä»¥è¿™æ ·ç†è§£ï¼š
> 
ä¸Šå±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä¸‹å±‚æ¨¡å—ï¼Œä»–ä»¬éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚
æŠ½è±¡ä¸åº”ä¾èµ–äºå®ç°ç»†èŠ‚ï¼Œå®ç°ç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚ â€“ Robert C. Martin
é‚£ä¹ˆï¼Œå¯¹äº Go è¯­è¨€å¼€å‘è€…æ¥è®²ï¼Œä¾èµ–å€’ç½®å…·ä½“æŒ‡çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
å¦‚æœä½ åº”ç”¨äº†æˆ‘ä»¬ä¸Šé¢è®²è¿°çš„4ä¸ªåŸåˆ™ï¼Œé‚£ä¹ˆä½ çš„ä»£ç å·²ç»ç»„ç»‡åœ¨ç‹¬ç«‹çš„ package ä¸­ï¼Œæ¯ä¸€ä¸ªåŒ…çš„èŒè´£éƒ½å®šä¹‰æ¸…æ™°ã€‚ä½ çš„ä»£ç çš„ä¾èµ–å£°æ˜åº”è¯¥é€šè¿‡æ¥å£æ¥å®ç°ï¼Œè¿™äº›æ¥å£ä»…æè¿°äº†æ–¹æ³•éœ€è¦çš„åŠŸèƒ½è¡Œä¸ºï¼Œæ¢å¥è¯è¯´ï¼Œä½ ä¸éœ€è¦ä¸ºæ­¤åšå¤ªå¤šçš„æ”¹å˜ã€‚
å› æ­¤æˆ‘è®¤ä¸º,åœ¨ Go è¯­è¨€ä¸­ï¼ŒMartin æ‰€è®²çš„ä¾èµ–å€’ç½®æ˜¯ä½ çš„ä¾èµ–å¯¼å…¥çš„ç»“æ„ã€‚
åœ¨ Go è¯­è¨€ä¸­ï¼Œä½ çš„ä¾èµ–å¯¼å…¥ç»“æ„å¿…é¡»æ˜¯éå¾ªç¯çš„ï¼Œä¸éµå®ˆæ­¤çº¦å®šçš„åæœæ˜¯å¯èƒ½ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œä½†æ˜¯æ›´ä¸ºä¸¥é‡çš„æ˜¯è®¾è®¡ä¸Šçš„é”™è¯¯ã€‚
è‰¯å¥½çš„ä¾èµ–å¯¼å…¥ç»“æ„å› è¯¥æ˜¯å¹³å¦çš„ï¼Œè€Œä¸æ˜¯å±‚æ¬¡ç»“æ„å¾ˆæ·±ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªåŒ…ï¼Œåœ¨æ²¡æœ‰å…¶ä»–åŒ…çš„æƒ…å†µä¸‹ï¼Œä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œè¿™å¯èƒ½ä½ çš„ä»£ç åŒ…çš„ç»„ç»‡ç»“æ„æ²¡æœ‰åˆ’åˆ†å¥½è¾¹ç•Œã€‚
ä¾èµ–å€’ç½®åŸåˆ™é¼“åŠ±ä½ å°†å…·ä½“å®ç°ç»†èŠ‚å°½å¯èƒ½çš„æ”¾åˆ°ä¾èµ–å¯¼å…¥ç»“æ„çš„æœ€é¡¶å±‚ï¼Œåœ¨ main package æˆ–è€…æ›´é«˜å±‚çº§çš„å¤„ç†ç¨‹åºä¸­ï¼Œè®©ä½å±‚çº§çš„ä»£ç å»å¤„ç†æŠ½è±¡çš„æ¥å£ã€‚
### SOLID Go è®¾è®¡
ç®€è¦å›é¡¾ä¸€ä¸‹ï¼Œåœ¨å°† SOLID åº”ç”¨åˆ° Go è¯­è¨€æ—¶ï¼Œæ¯ä¸€ä¸ªåŸåˆ™éƒ½é™ˆè¿°äº†å…¶è®¾è®¡æ€æƒ³ï¼Œä½†æ˜¯æ‰€æœ‰åŸåˆ™éƒ½éµå¾ªäº†åŒä¸€ä¸ªä¸­å¿ƒæ€æƒ³ã€‚
å•ä¸€èŒè´£åŸåˆ™é¼“åŠ±ä½ ç»„ç»‡ functionï¼Œtype åˆ°é«˜å†…èšçš„åŒ…ä¸­ï¼Œtype æˆ–è€…æ–¹æ³•éƒ½åº”è¯¥æœ‰å•ä¸€çš„èŒè´£ã€‚
å¼€é—­åŸåˆ™é¼“åŠ±ä½ é€šè¿‡ç»„åˆç®€å•ç±»å‹æ¥è¡¨è¾¾å¤æ‚ç±»å‹ã€‚
é‡Œæ°æ›¿æ¢åŸåˆ™é¼“åŠ±ä½ é€šè¿‡æ¥å£æ¥è¡¨è¾¾åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œè€Œéå…·ä½“çš„å®ç°ã€‚é€šè¿‡å®šä¹‰èŒè´£æ˜ç¡®çš„æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿å…¶å…·ä½“å®ç°è¶³ä»¥æ»¡è¶³æ¥å£å¥‘çº¦ã€‚
æ¥å£éš”ç¦»åŸåˆ™å°†é‡Œæ°æ›¿æ¢åŸåˆ™è¿›ä¸€æ­¥æå‡ï¼Œé¼“åŠ±ä½ åœ¨å®šä¹‰æ–¹æ³•æˆ–è€…å‡½æ•°çš„æ—¶å€™ä»…åŒ…å«ä»–æ‰€éœ€è¦çš„åŠŸèƒ½ã€‚å¦‚æœä»…éœ€è¦ä¸€ä¸ª interface ç±»å‹çš„å‚æ•°çš„æ–¹æ³•å°±å¯ä»¥æ»¡è¶³ä¸šåŠ¡åŠŸèƒ½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®¤ä¸ºè¿™ä¹Ÿæ»¡è¶³äº†å•ä¸€èŒè´£åŸåˆ™ã€‚
ä¾èµ–å€’ç½®åŸåˆ™é¼“åŠ±å°†ä½ çš„ package çš„ä¾èµ–ä»ç¼–è¯‘é˜¶æ®µæ¨è¿Ÿåˆ°è¿è¡Œæ—¶ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ import çš„æ•°é‡ã€‚
ä¸€å¥è¯æ¥æ€»ç»“ä»¥ä¸Šè®²è¿°: å–„ç”¨ interface å¯ä»¥å°† SOLID åŸåˆ™åº”ç”¨åˆ° Go ç¼–ç¨‹ä¸­ã€‚
å› ä¸ºinterface è®©ä½ å°†å…³æ³¨ç‚¹æ”¾åœ¨æè¿°åŒ…çš„æ¥å£ä¸Šï¼Œè€Œéå…·ä½“çš„å®ç°ï¼Œè¿™ä¹Ÿæ˜¯å®ç°è§£è€¦çš„å¦ä¸€ç§æ–¹å¼ï¼Œå®é™…ä¸Šè¿™ä¹Ÿæ˜¯æˆ‘ä»¬è®¾è®¡çš„ç›®æ ‡ï¼Œæ¾è€¦åˆçš„è½¯ä»¶æ›´å®¹æ˜“å¯¹ä¿®æ”¹å¼€æ”¾ã€‚
å°±åƒ Sandi Metz æ‰€è¯´çš„ï¼š
> 
è½¯ä»¶è®¾è®¡çš„è‰ºæœ¯å°±æ˜¯åˆç†ç»„ç»‡ä»£ç ï¼Œä¸ä»…èƒ½è®©å®ƒæ­£å¸¸å·¥ä½œï¼Œä¹Ÿæ€»æ˜¯èƒ½å¤Ÿå¯¹ä¿®æ”¹å¼€æ”¾ã€‚
å¦‚æœ Go ä½œä¸ºä¸€å®¶å…¬å¸ä»é•¿è¿œè§’åº¦æ‰€åšå‡ºçš„æŠ€æœ¯é€‰å‹ï¼Œé‚£ä¹ˆå¯¹ä¿®æ”¹å¼€æ”¾çš„ç‰¹æ€§å¿…ç„¶æ˜¯ä»–ä»¬åœ¨åšå†³ç­–æ—¶éå¸¸è®¤å¯çš„ä¸€ä¸ªå› ç´ ã€‚
### ç»“å°¾
æœ€åï¼Œå›åˆ°æ¼”è®²å¼€å§‹æŠ›å‡ºçš„é—®é¢˜ï¼Œåˆ°åº•æœ‰å¤šå°‘ Go ç¨‹åºå‘˜ï¼Ÿæˆ‘çš„çŒœæµ‹æ˜¯ï¼šåˆ°2020å¹´ï¼Œå°†æœ‰ 500,000 å Go å¼€å‘è€…ã€‚
è¿™ 50 ä¸‡ Go å¼€å‘è€…éƒ½ä¼šåšäº›ä»€ä¹ˆå‘¢ï¼Ÿæ˜¾ç„¶ï¼Œä»–ä»¬ä¼šå†™å¾ˆå¤š Go çš„ä»£ç ï¼Œå¦è¯šçš„è¯´ï¼Œè¿™äº›ä»£ç å¹¶ééƒ½æ˜¯å¥½çš„ï¼Œç”šè‡³ä¸€äº›æ˜¯åçš„å®è·µã€‚
è¿™ä¸æ˜¯è€¸äººå¬é—»ï¼Œåœ¨åº§çš„å„ä½ï¼Œä»å…¶ä»–è¯­è¨€è½¬åˆ° Go çš„é˜µè¥ï¼Œä»¥å¤§å®¶çš„ç»éªŒæ¥è°ˆï¼Œè¿™ä¸ªé¢„è¨€ä¸æ˜¯ç©ºç©´æ¥é£ã€‚
> 
C++ çš„ä¸–ç•Œï¼Œåªéœ€ç”¨ä¸€éƒ¨åˆ†è¯­æ³•å°±å¯ä»¥å½¢æˆä¸€ç§æ–°çš„æ›´ç®€æ´çš„è¯­è¨€ã€‚ â€“ Bjarne Stroustrup
*è¯‘è€…æ³¨ï¼šè¿™é‡Œä¸»è¦è¯´æ˜ C++ è¿‡äºå¤æ‚ï¼Œå¹¶ä¸”è‡ƒè‚¿å†—ä½™*
Go è¦æˆä¸ºä¸€é—¨æˆåŠŸçš„è¯­è¨€éœ€è¦é å¤§å®¶çš„åŠªåŠ›ï¼Œä¸è¦åƒ C++ é‚£æ ·æå¾—ä¸€å›¢ç³Ÿï¼Œè¢«æˆ‘ä»¬åæ§½ã€‚
è‡ƒè‚¿ï¼Œå•°å—¦ï¼Œè¿‡äºå¤æ‚ï¼Œå…¶ä»–è¯­è¨€è¢«å–·çš„æ§½ç‚¹æœ‰ä¸€å¤©å¯èƒ½ä¹Ÿä¼šå‘ç”Ÿåœ¨ Go èº«ä¸Šï¼Œæˆ‘ä¸å¸Œæœ›çœ‹åˆ°è¿™ä¸€å¹•ï¼Œæ‰€ä»¥æˆ‘æœ‰ä¸€ä¸ªå°å°çš„è¯·æ±‚ï¼š
ä½œä¸º Go å¼€å‘è€…ï¼Œå°‘è°ˆè®ºä¸€äº›æ¡†æ¶ï¼Œå¤šè°ˆè®ºä¸€äº›è®¾è®¡ï¼Œå¹¶ä¸”æˆ‘ä»¬è¦ä¸æƒœä¸€åˆ‡ä»£ä»·å»å…³æ³¨ä»£ç é‡ç”¨è€Œéæ€§èƒ½ã€‚
æˆ‘å¸Œæœ›çœ‹åˆ°çš„æ˜¯äººä»¬åœ¨è®¨è®ºå¦‚ä½•ä½¿ç”¨å½“ä¸‹çš„è¯­è¨€æ¥è§£å†³å®é™…é—®é¢˜ï¼Œä¸è®ºè¿™é—¨è¯­è¨€æ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆé™åˆ¶ã€‚
æˆ‘å¸Œæœ›å¬åˆ°çš„æ˜¯äººä»¬åœ¨è°ˆè®ºå¦‚ä½•å†™ç²¾å¿ƒè®¾è®¡ï¼Œè§£è€¦çš„ï¼Œå¯é‡ç”¨ï¼Œå¯¹æ”¹å˜å¼€æ”¾çš„ Go ç¨‹åºã€‚
### å½©è›‹
ä»Šå¤©æˆ‘ä»¬é½èšä¸€å ‚ï¼Œæ¥è†å¬è®²å¸ˆä»¬çš„æ¼”è®²ï¼Œä½†æ˜¯ç°å®æ˜¯ï¼Œç›¸å¯¹äºå³å°†ä½¿ç”¨ Go è¯­è¨€çš„å¼€å‘è€…çš„æ•°é‡è€Œè¨€ï¼Œæˆ‘ä»¬ä»…ä»…æ˜¯å¤§æµ·ä¸­çš„ä¸€å¶æ‰èˆŸã€‚
å› æ­¤ï¼Œæˆ‘ä»¬æœ‰ä¹‰åŠ¡å‘Šè¯‰ä»–ä»¬åº”è¯¥å¦‚ä½•ç¼–å†™è®¾è®¡è‰¯å¥½çš„è½¯ä»¶ï¼Œå¯ç»„åˆçš„è½¯ä»¶ï¼Œå¯¹ä¿®æ”¹å¼€æ”¾çš„è½¯ä»¶ï¼Œä½¿ç”¨ Go è¯­è¨€å¦‚ä½•å®ç°ï¼Œè€Œè¿™äº›éœ€è¦ä»ä½ å¼€å§‹åšèµ·ã€‚
æˆ‘å¸Œæœ›å½“ä½ åœ¨è°ˆè®ºè®¾è®¡çš„æ—¶å€™ï¼Œæˆ‘ä»Šå¤©æ‰€è¯´çš„è§‚ç‚¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿå¸Œæœ›ä½ èƒ½è‡ªå·±åšäº›ç ”ç©¶å·¥ä½œï¼Œå¹¶åº”ç”¨åˆ°å·¥ç¨‹ä¸­å»ï¼Œç„¶åå¸Œæœ›ä½ èƒ½å¤Ÿåšä»¥ä¸‹äº‹æƒ…ï¼š
- å†™ä¸€ç¯‡ç›¸å…³çš„åšå®¢
- åœ¨ç ”è®¨ä¼šä¸Šåˆ†äº«ä½ æ‰€åšçš„äº‹æƒ…
- æŠŠä½ æ‰€å­¦çš„ä¸œè¥¿å†™æˆä¸€æœ¬ä¹¦
- æ˜å¹´å†æ¥å‚åŠ ä¼šè®®çš„æ—¶å€™è®²è®²ä½ å–å¾—çš„æˆå°±
é€šè¿‡åšè¿™äº›äº‹æƒ…ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…³å¿ƒä»£ç è®¾è®¡çš„ Go å¼€å‘è€…ä¸­å»ºç«‹èµ·ä¸€ç§æ–‡åŒ–ã€‚
æœ€åè°¢è°¢å¤§å®¶ï¼
> 
**æ‰“èµæ”¯æŒæˆ‘å†™å‡ºæ›´å¤šå¥½æ–‡ç« ï¼Œè°¢è°¢ï¼**
[æ‰“èµä½œè€…](#rewardbox)
#### æ‰“èµæ”¯æŒæˆ‘å†™å‡ºæ›´å¤šå¥½æ–‡ç« ï¼Œè°¢è°¢ï¼
ä»»é€‰ä¸€ç§æ”¯ä»˜æ–¹å¼
![](http://jbcdn2.b0.upaiyun.com/2016/07/0d3d92b9284e4a3394f15a33a96eb89d.jpg)![](http://jbcdn2.b0.upaiyun.com/2016/07/f22e22ed7e5b4a227b39a6ce6da7471f.jpg)
