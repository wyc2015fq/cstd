# .NET Core 使用Dapper 操作MySQL - 文章 - 伯乐在线
原文出处： [LineZero](http://www.cnblogs.com/linezero/p/NETCoreMySQL.html)
.NET Core 使用Dapper 操作MySQL 数据库， .NET Core 使用Dapper。目前官方没有出.NET Core MySQL  驱动，但是已经有第三方进行改动封装出.NET Core MySQL Connector 预览版。Dapper 也已经出了 .NET Core 预览版。Dapper dot net 是一个轻量型的ORM，但是性能很强大。有了.NET Core MySQL Connector  我们可以直接使用ADO.NET 操作数据库。
目前EF Core 暂时不支持MySQL， 本篇主要讲解使用Dapper 操作 MySQL。
第三方 MySQL Connector: https://github.com/SapientGuardian/mysql-connector-net-netstandard
Dapper: https://github.com/StackExchange/dapper-dot-net
## 新建项目
新建一个.NET Core控制台应用程序 NETCoreMySQL
![](http://jbcdn2.b0.upaiyun.com/2016/06/f051bc89ea136e4d0f21498b98346e41.png)
### 添加引用
使用 NuGet 控制台添加


C#
```
Install-Package SapientGuardian.MySql.Data -Pre
Install-Package Dapper -Pre
```
## MySQL 增删查改
在MySQL里面新建一个测试库 及表
测试所用脚本：


C#
```
CREATE DATABASE `test` 
CREATE TABLE `user` (
  `Id` int(11) NOT NULL AUTO_INCREMENT,
  `UserName` varchar(255) DEFAULT NULL,
  `Url` varchar(255) DEFAULT NULL,
  `Age` int(11) DEFAULT NULL,
  PRIMARY KEY (`Id`)
) ENGINE=InnoDB DEFAULT CHARSET=gbk;
```
新建一个User 类


C#
```
public class User
    {
        public int Id { get; set; }
        public string UserName { get; set; }
        public string Url { get; set; }
        public int Age { get; set; }
    }
```
下面来操作MySQL 增删改查


C#
```
public static void Main(string[] args)
        {
            Encoding.RegisterProvider(CodePagesEncodingProvider.Instance);
            MySqlConnection con = new MySqlConnection("server=127.0.0.1;database=test;uid=root;pwd=;charset='gbk'");
            //新增数据
            con.Execute("insert into user values(null, '测试', 'http://www.cnblogs.com/linezero/', 18)");
            //新增数据返回自增id
            var id=con.QueryFirstint>("insert into user values(null, 'linezero', 'http://www.cnblogs.com/linezero/', 18);select last_insert_id();");
            //修改数据
            con.Execute("update user set UserName = 'linezero123' where Id = @Id", new { Id = id });
            //查询数据
            var list=con.Query("select * from user");
            foreach (var item in list)
            {
                Console.WriteLine($"用户名：{item.UserName} 链接：{item.Url}");
            }
            //删除数据
            con.Execute("delete from user where Id = @Id", new { Id = id });
            Console.WriteLine("删除数据后的结果");
            list = con.Query("select * from user");
            foreach (var item in list)
            {
                Console.WriteLine($"用户名：{item.UserName} 链接：{item.Url}");
            }
            Console.ReadKey();
        }
```
简单使用Dapper，更多功能可以查看官方文档。
执行效果：
![](http://jbcdn2.b0.upaiyun.com/2016/06/ed9ba1a87335720b4361585a5a97239e.png)
GitHub ：[https://github.com/linezero/Blog/tree/master/NETCoreMySQL](https://github.com/linezero/Blog/tree/master/NETCoreMySQL)
