# [LeetCode] K-th Symbol in Grammar è¯­æ³•ä¸­çš„ç¬¬Kä¸ªç¬¦å· - Grandyang - åšå®¢å›­







# [[LeetCode] K-th Symbol in Grammar è¯­æ³•ä¸­çš„ç¬¬Kä¸ªç¬¦å·](https://www.cnblogs.com/grandyang/p/9027098.html)







On the first row, we write aÂ `0`. Now in every subsequent row, we look at the previous row and replace each occurrence ofÂ `0`Â withÂ `01`, and each occurrence ofÂ `1`Â withÂ `10`.

Given rowÂ `N`Â and indexÂ `K`, return theÂ `K`-th indexed symbol in rowÂ `N`. (The values ofÂ `K`Â are 1-indexed.) (1 indexed).
Examples:
Input: N = 1, K = 1
Output: 0

Input: N = 2, K = 1
Output: 0

Input: N = 2, K = 2
Output: 1

Input: N = 4, K = 5
Output: 1

Explanation:
row 1: 0
row 2: 01
row 3: 0110
row 4: 01101001

Note:
- `N`Â will be an integer in the rangeÂ `[1, 30]`.
- `K`Â will be an integer in the rangeÂ `[1, 2^(N-1)]`.



è¿™é“é¢˜è¯´ç¬¬ä¸€è¡Œå†™ä¸Šäº†ä¸€ä¸ª0ï¼Œç„¶åä»ç¬¬äºŒè¡Œå¼€å§‹ï¼Œé‡åˆ°0ï¼Œå°±å˜ä¸º01ï¼Œé‡åˆ°1ï¼Œåˆ™å˜ä¸º10ï¼Œé—®æˆ‘ä»¬ç¬¬Nè¡Œçš„ç¬¬Kä¸ªæ•°å­—æ˜¯å•¥ã€‚è¿™æ˜¯ä¸€é“è›®æœ‰æ„æ€çš„é¢˜ç›®ï¼Œé¦–å…ˆå¦‚æœæ²¡å•¥æ€è·¯çš„è¯ï¼ŒæŒ‰ç…§ç»™å®šçš„æ–¹æ³•ï¼Œä¸€è¡Œè¡Œgenerateå‡ºæ¥ï¼Œç›´åˆ°ç”Ÿæˆç¬¬Nè¡Œï¼Œé‚£ä¹ˆç¬¬Kä¸ªæ•°å­—ä¹Ÿå°±çŸ¥é“äº†ã€‚ä½†æ˜¯è¿™ç§brute forceçš„æ–¹æ³•æ— æ³•é€šè¿‡OJï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼Œéœ€è¦æƒ³ä¸€äº›æ›´é«˜ç«¯çš„è§£æ³•ã€‚æˆ‘ä»¬æƒ³å•Šï¼Œé‡åˆ°0å˜ä¸º01ï¼Œé‚£ä¹ˆå¯ä¸å¯ä»¥æŠŠ0å’Œ1çœ‹ä½œä¸Šä¸€å±‚0çš„å·¦å³å­ç»“ç‚¹å‘¢ï¼ŒåŒæ—¶ï¼ŒæŠŠ1å’Œ0çœ‹ä½œä¸Šä¸€å±‚1çš„å·¦å³å­ç»“ç‚¹ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬æ•´ä¸ªç»“æ„å°±å¯ä»¥è½¬ä¸ºäºŒå‰æ ‘äº†ï¼Œé‚£ä¹ˆå‰å››å±‚çš„äºŒå‰æ ‘ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š

```
0
       /             \
      0               1
   /     \         /     \
  0       1       1       0
 / \     / \     / \     / \
0   1   1   0   1   0   0   1
```

æˆ‘ä»¬ä»”ç»†è§‚å¯Ÿä¸Šé¢è¿™æ£µäºŒå‰æ ‘ï¼Œç¬¬å››å±‚K=3çš„é‚£ä¸ªçº¢è‰²çš„å·¦å­ç»“ç‚¹ï¼Œå…¶çˆ¶ç»“ç‚¹çš„ä½ç½®æ˜¯ç¬¬ä¸‰å±‚çš„ç¬¬ (K+1)/2 = 2ä¸ªçº¢è‰²ç»“ç‚¹ï¼Œè€Œç¬¬å››å±‚K=6çš„é‚£ä¸ªè“è‰²å¹½å­ç»“ç‚¹ï¼Œå…¶çˆ¶èŠ‚ç‚¹çš„ä½ç½®æ˜¯ç¬¬ä¸‰å±‚çš„ç¬¬ K/2 = 3ä¸ªè“è‰²ç»“ç‚¹ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä¸€å±‚ä¸€å±‚çš„å¾€ä¸Šæ¨ï¼Œç›´åˆ°åˆ°è¾¾ç¬¬ä¸€å±‚çš„é‚£ä¸ª0ã€‚æ‰€ä»¥æˆ‘ä»¬çš„æ€è·¯æ˜¯æ ¹æ®å½“å‰å±‚Kçš„å¥‡å¶æ€§æ¥ç¡®å®šä¸Šä¸€å±‚ä¸­çˆ¶èŠ‚ç‚¹çš„ä½ç½®ï¼Œç„¶åç»§ç»­å¾€ä¸Šä¸€å±‚æ¨ï¼Œç›´åˆ°æ¨å€’ç¬¬ä¸€å±‚çš„0ï¼Œç„¶åå†è¿”å›ç¡®å®šè·¯å¾„ä¸Šæ¯ä¸€ä¸ªä½ç½®çš„å€¼ï¼Œè¿™å¤©ç„¶å°±æ˜¯é€’å½’çš„è¿è¡Œæœºåˆ¶å•Šã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®Kçš„å¥‡å¶æ€§çŸ¥é“å…¶æ˜¯å·¦ç»“ç‚¹è¿˜æ˜¯å³ç»“ç‚¹ï¼Œç”±äºKæ˜¯ä»1å¼€å§‹çš„ï¼Œæ‰€ä»¥å½“Kæ˜¯å¥‡æ•°æ—¶ï¼Œå…¶æ˜¯å·¦ç»“ç‚¹ï¼Œå½“Kæ˜¯å¶æ•°æ—¶ï¼Œå…¶æ˜¯å³ç»“ç‚¹ã€‚è€Œä¸”è¿˜èƒ½è§‚å¯Ÿå‡ºæ¥çš„æ˜¯ï¼Œå·¦å­ç»“ç‚¹å’Œå…¶çˆ¶èŠ‚ç‚¹çš„å€¼ç›¸åŒï¼Œå³å­ç»“ç‚¹å’Œå…¶çˆ¶èŠ‚ç‚¹å€¼ç›¸åï¼Œè¿™æ˜¯å› ä¸º0æ¢æˆäº†01ï¼Œ1æ¢æˆäº†10ï¼Œå·¦å­ç»“ç‚¹ä¿æŒä¸å˜ï¼Œå³å­ç»“ç‚¹flipäº†ä¸€ä¸‹ã€‚æƒ³é€šäº†è¿™äº›ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„é€’å½’è§£æ³•å°±ä¸éš¾å†™å‡ºæ¥äº†ï¼Œå‚è§ä»£ç å¦‚ä¸‹ï¼š



è§£æ³•ä¸€ï¼š

```
class Solution {
public:
    int kthGrammar(int N, int K) {
        if (N == 1) return 0;
        if (K % 2 == 0) return (kthGrammar(N - 1, K / 2) == 0) ? 1 : 0;
        else return (kthGrammar(N - 1, (K + 1) / 2) == 0) ? 0 : 1;
    }
};
```



æˆ‘ä»¬å¯ä»¥ç®€åŒ–ä¸‹ä¸Šé¢çš„è§£æ³•ï¼Œä½ ä»¬å¯èƒ½ä¼šè¯´ï¼Œçº³å°¼ï¼Ÿå·²ç»ä¸‰è¡Œäº†è¿˜è¦ç®€åŒ–ï¼Ÿæ²¡é”™ï¼Œåšä¸»å°±æ˜¯è¿™æ ·ä¸€ä¸ªç²¾ç›Šæ±‚ç²¾çš„äººï¼ˆæ­¤å¤„åº”æœ‰æŒå£°ğŸ‘ï¼‰ã€‚æˆ‘ä»¬çŸ¥é“å¶æ•°åŠ 1é™¤ä»¥2ï¼Œå’Œå…¶æœ¬èº«é™¤ä»¥2çš„å€¼æ˜¯ç›¸åŒçš„ï¼Œé‚£ä¹ˆå…¶å®ä¸è®ºKæ˜¯å¥‡æ˜¯å¶ï¼Œå…¶çˆ¶èŠ‚ç‚¹çš„ä½ç½®éƒ½å¯ä»¥ç”¨ (K+1)/2 æ¥è¡¨ç¤ºï¼Œé—®é¢˜åœ¨äºKæœ¬èº«çš„å¥‡å¶å†³å®šäº†å…¶å·¦å³ç»“ç‚¹çš„ä½ç½®ï¼Œä»è€Œå†³å®šè¦ä¸è¦flipçˆ¶èŠ‚ç‚¹çš„å€¼ï¼Œè¿™æ‰æ˜¯ä¸Šé¢è§£æ³•ä¸­æˆ‘ä»¬è¦ä½¿ç”¨ if...else ç»“æ„çš„åŸå› ã€‚å®é™…ä¸Šæˆ‘ä»¬å¯ä»¥é€šè¿‡â€˜äº¦æˆ–â€™æ“ä½œæ¥å®ç°ä¸€è¡Œæå®šï¼Œå¼ä¸å¼ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹å˜æ¢è§„åˆ™ï¼Œ0æ¢æˆäº†01ï¼Œ1æ¢æˆäº†10ã€‚

0 -> 01

å·¦å­ç»“ç‚¹(0) = çˆ¶èŠ‚ç‚¹(0) ^ 0Â 

å³å­ç»“ç‚¹(1) = çˆ¶èŠ‚ç‚¹(0) ^ 1Â 

1 -> 10

å·¦å­ç»“ç‚¹(1) = çˆ¶èŠ‚ç‚¹(1) ^ 0Â 

å³å­ç»“ç‚¹(0) = çˆ¶èŠ‚ç‚¹(1) ^ 1Â 

é‚£ä¹ˆåªè¦æˆ‘ä»¬çŸ¥é“äº†çˆ¶ç»“ç‚¹çš„å€¼å’Œå½“å‰Kçš„å¥‡å¶æ€§å°±å¯ä»¥çŸ¥é“Kçš„å€¼äº†ï¼Œå› ä¸ºå·¦å­ç»“ç‚¹å°±æ˜¯çˆ¶ç»“ç‚¹å€¼â€˜äº¦æˆ–â€™0ï¼Œå³å­ç»“ç‚¹å°±æ˜¯çˆ¶ç»“ç‚¹å€¼â€˜äº¦æˆ–â€™1ï¼Œç”±äºå·¦å­ç»“ç‚¹çš„Kæ˜¯å¥‡æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶å–åå†â€˜ä¸â€™1ï¼Œæ‰€ä»¥å°±æ˜¯ (~K & 1)ï¼Œå†â€˜äº¦æˆ–â€™ä¸Šé€’å½’å‡½æ•°çš„è¿”å›å€¼å³å¯ï¼Œå‚è§ä»£ç å¦‚ä¸‹ï¼š



è§£æ³•äºŒï¼š

```
class Solution {
public:
    int kthGrammar(int N, int K) {
        if (N == 1) return 0;
        return (~K & 1) ^ kthGrammar(N - 1, (K + 1) / 2);
    }
};
```



ä¸‹é¢è¿™ç§è§£æ³•çš„æ€è·¯ä¹Ÿååˆ†å·§å¦™ï¼Œè¿˜æ˜¯ä»å˜æ¢è§„åˆ™å…¥æ‰‹ï¼Œ0æ¢æˆäº†01ï¼Œ1æ¢æˆäº†10ã€‚æˆ‘ä»¬æ¥çœ‹è§£æ³•ä¸€è®²è§£ä¸­çš„äºŒå‰æ ‘ç¤ºä¾‹å›¾ä¸­çš„è“è‰²è·¯å¾„ï¼Œç¬¬å››å±‚K=6ï¼Œç¬¬ä¸‰å±‚K=3ï¼Œç¬¬äºŒå±‚K=2ï¼Œç¬¬ä¸€å±‚K=1ï¼Œæ‰€ä»¥è·¯å¾„å°±æ˜¯ 6->3->2->1ï¼Œå¦‚æœæˆ‘ä»¬æ¢æˆ0å¼€å¤´çš„è®¡æ•°æ–¹æ³•ï¼Œé‚£ä¹ˆè·¯å¾„å°±æ˜¯ 5->2->1->0ï¼Œå†æ¢æˆäºŒè¿›åˆ¶çš„è¡¨è¾¾æ–¹å¼å°±æ˜¯ 101->10->1->0ï¼Œæˆ‘ä»¬å‘ç°å…¶å®å°±æ˜¯æ¯æ¬¡å³ç§»ä¸€ä½ï¼Œç›´åˆ°ç§»åŠ¨åˆ°0ï¼Œè€Œå½“æœ€ä½ä½æ˜¯1çš„æ—¶å€™ï¼Œè¡¨ç¤ºå½“å‰æ˜¯å³å­ç»“ç‚¹ï¼Œéœ€è¦flipä¸€ä¸‹ï¼Œé‚£ä¹ˆåªè¦æˆ‘ä»¬çŸ¥é“æ€»å…±flipäº†å¤šå°‘æ¬¡ï¼Œå°±èƒ½æ¨ç®—å‡ºç¬¬Kä¸ªä½ç½®çš„å€¼ã€‚æ¯”å¦‚Â 101->10->1->0ï¼Œæ€»å…±flipäº†ä¸¤æ¬¡å˜æˆäº†0ï¼Œé‚£ä¹ˆè¯´æ˜K=6çš„ä½ç½®å€¼ä¸º0ã€‚äºæ˜¯é—®é¢˜å°±è½¬åŒ–ä¸ºäº†ç»Ÿè®¡K-1è¿™ä¸ªæ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ä½1çš„ä¸ªæ•°ï¼Œä½¿ç”¨ä¸€ä¸ªwhileå¾ªç¯ç»Ÿè®¡å‡ºæ¥å°±å¯ä»¥äº†ï¼Œç„¶åæ ¹æ®ä¸ªæ•°çš„å¥‡å¶æ€§è¿”å›1æˆ–0å³å¯ï¼Œå‚è§ä»£ç å¦‚ä¸‹ï¼š



è§£æ³•ä¸‰ï¼š

```
class Solution {
public:
    int kthGrammar(int N, int K) {
        int cnt = 0;
        --K;
        while (K) {
            cnt += K & 1;
            K >>= 1;
        }
        return cnt % 2;
    }
};
```



ä¸‹é¢è¿™ç§è§£æ³•çš„æ€è·¯ä¹Ÿå¾ˆæ¸…æ–°è„±ä¿—å•Šï¼Œä¸€åˆ‡çš„ä¸€åˆ‡éƒ½æ˜¯ä»å˜æ¢è§„åˆ™å…¥æ‰‹ï¼Œ0æ¢æˆäº†01ï¼Œ1æ¢æˆäº†10ã€‚é‚£ä¹ˆå½“Kæ˜¯å¥‡æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹‹å‰åˆ†æäº†ï¼Œå…¶ä¸€å®šæ˜¯å·¦å­ç»“ç‚¹ï¼Œé‚£ä¹ˆå…¶æ˜¯01æˆ–è€…10çš„ç¬¬ä¸€ä¸ªæ•°å­—ï¼Œå› ä¸ºåªæœ‰è¿™ä¸¤ç§ç»„åˆæ–¹å¼ï¼Œæ‰€ä»¥å¦‚æœç¬¬Kä¸ªæ•°æ˜¯0çš„è¯ï¼Œé‚£ä¹ˆç¬¬K+1ä¸ªæ•°å°±æ˜¯1ï¼ŒåŒæ ·ï¼Œå¦‚æœç¬¬Kä¸ªæ•°æ˜¯1çš„è¯ï¼Œé‚£ä¹ˆç¬¬K+1ä¸ªæ•°å°±æ˜¯0ï¼Œæ‰€ä»¥æ­¤æ—¶ç¬¬Kä¸ªæ•°å’Œç¬¬K+1ä¸ªæ•°ä¸€å®šç›¸åï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡â€˜äº¦æˆ–â€™1æ¥å®ç°è¿™ä¸ªä¸€å®šç›¸åçš„æ“ä½œã€‚

å½“Kæ˜¯å¶æ•°çš„æ—¶å€™ï¼Œé‚£ä¹ˆå…¶æ˜¯01æˆ–è€…10çš„ç¬¬äºŒä¸ªæ•°å­—ï¼Œé‚£ä¹ˆæ ¹æ®ä¹‹å‰çš„åˆ†æï¼Œå…¶æ˜¯ç”±ä¸Šä¸€å±‚çš„ç¬¬ K/2 ä½ç½®çš„æ•°å­—ç”Ÿæˆçš„ï¼Œä¸Šä¸€å±‚çš„ç¬¬ K/2 ä¸ªæ•°å­—å’Œå½“å‰å±‚çš„ç¬¬ K/2 ä¸ªæ•°å­—æ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœä½ ä»”ç»†è§‚å¯Ÿé¢˜ç›®ä¸­çš„ä¾‹å­æˆ–è€…åšä¸»ç”»çš„é‚£ä¸ªäºŒå‰æ ‘å›¾ï¼Œåªè¦Kä¸è¶Šç•Œï¼Œæ¯ä¸€å±‚çš„ç¬¬Kä¸ªæ•°å­—éƒ½æ˜¯ç›¸ç­‰çš„ã€‚æ‰€ä»¥å¦‚æœç¬¬Kä¸ªæ•°æ˜¯0çš„è¯ï¼Œé‚£ä¹ˆç¬¬ K/2 ä¸ªæ•°å°±æ˜¯1ï¼ŒåŒæ ·ï¼Œå¦‚æœç¬¬Kä¸ªæ•°æ˜¯1çš„è¯ï¼Œé‚£ä¹ˆç¬¬ K/2 ä¸ªæ•°å°±æ˜¯0ï¼Œæ‰€ä»¥æ­¤æ—¶ç¬¬Kä¸ªæ•°å’Œç¬¬ K/2 ä¸ªæ•°ä¸€å®šç›¸åï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡â€˜äº¦æˆ–â€™1æ¥å®ç°è¿™ä¸ªä¸€å®šç›¸åçš„æ“ä½œã€‚

äºæ˜¯ä¹ï¼Œæˆ‘ä»¬çš„æ“ä½œå°±æ˜¯ï¼Œå½“Kæ˜¯å¥‡æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å°†å…¶æ¢æˆK+1ï¼Œå½“Kæ˜¯å¶æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†å…¶æ¢ä¸ºK/2ã€‚ç„¶åæ¯æ¬¡éƒ½å¯¹ç»“æœresï¼ˆåˆå§‹åŒ–ä¸º0ï¼‰è¿›è¡Œâ€˜äº¦æˆ–â€™1æ“ä½œï¼Œå¾ªç¯çš„ç»ˆæ­¢æ¡ä»¶æ˜¯å½“Kç­‰äº1æ—¶ï¼Œå‚è§ä»£ç å¦‚ä¸‹ï¼š



è§£æ³•å››ï¼š

```
class Solution {
public:
    int kthGrammar(int N, int K) {
        int res = 0;
        while (K > 1) {
            K = (K % 2 == 1) ? K + 1 : K / 2;
            res ^= 1;
        }
        return res;
    }
};
```



ä¸‹é¢è¿™ç§è§£æ³•è·Ÿè§£æ³•ä¸‰çš„æ€è·¯å®Œå…¨ç›¸åŒï¼Œåªä¸è¿‡ä½¿ç”¨äº†bitsetè¿™ä¸ªå†…ç½®çš„æ•°æ®ç»“æ„æ¥å¿«é€Ÿçš„æ±‚å‡ºäº†K-1çš„äºŒè¿›åˆ¶è¡¨è¾¾æ•°ä¸­çš„ä½1çš„ä¸ªæ•°ï¼ŒJavaä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨Integer.bitCount()å‡½æ•°ï¼Œå‚è§ä»£ç å¦‚ä¸‹ï¼š



è§£æ³•äº”ï¼š

```
class Solution {
public:
    int kthGrammar(int N, int K) {
        return bitset<32>(K - 1).count() % 2;
    }
};
```



å‚è€ƒèµ„æ–™ï¼š

[https://leetcode.com/problems/k-th-symbol-in-grammar/solution/](https://leetcode.com/problems/k-th-symbol-in-grammar/solution/)

[https://leetcode.com/problems/k-th-symbol-in-grammar/discuss/113705/JAVA-one-line](https://leetcode.com/problems/k-th-symbol-in-grammar/discuss/113705/JAVA-one-line)

[https://leetcode.com/problems/k-th-symbol-in-grammar/discuss/113697/My-3-lines-C++-recursive-solution](https://leetcode.com/problems/k-th-symbol-in-grammar/discuss/113697/My-3-lines-C++-recursive-solution)

[https://leetcode.com/problems/k-th-symbol-in-grammar/discuss/121544/C++JavaPython-Another-Solution-with-Explanation](https://leetcode.com/problems/k-th-symbol-in-grammar/discuss/121544/C++JavaPython-Another-Solution-with-Explanation)

[https://leetcode.com/problems/k-th-symbol-in-grammar/discuss/113721/C++-with-explanation-three-solutions-O(n)-O(logn)-and-O(loglogn)](https://leetcode.com/problems/k-th-symbol-in-grammar/discuss/113721/C++-with-explanation-three-solutions-O(n)-O(logn)-and-O(loglogn))



[LeetCode All in One é¢˜ç›®è®²è§£æ±‡æ€»(æŒç»­æ›´æ–°ä¸­...)](http://www.cnblogs.com/grandyang/p/4606334.html)












