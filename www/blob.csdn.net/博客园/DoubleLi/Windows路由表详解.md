# Windows路由表详解 - DoubleLi - 博客园






对于路由器的路由表，大部分网管朋友都很熟悉，但是对于windows的路由表，可能了解的人就相对少一些。今天我们就一起来看看windows路由表。



**一、**** windows****路由表条目解释**

1. 使用ipconfig /all查看网卡信息



2. 使用route print命令查看路由表信息，如下图：



3. 路由表信息解释

  1）名词解释：

Active Routes：活动的路由

Network destination ：目的网段

Netmask：子网掩码

Gateway：网关，又称下一跳路由器。在发送IP数据包时，网关定义了针对特定的网络目的地址，数据包发送到的下一跳服务器。如果是本地计算机直接连接到的网络，网关通常是本地计算机对应的网络接口，但是此时接口必须和网关一致；如果是远程网络或默认路由，网关通常是本地计算机所连接到的网络上的某个服务器或路由器。

Interface：接口，接口定义了针对特定的网络目的地址，本地计算机用于发送数据包的网络接口。网关必须位于和接口相同的子网（默认网关除外），否则造成在使用此路由项时需调用其他路由项，从而可能会导致路由死锁。

Metric：跳数，跳数用于指出路由的成本，通常情况下代表到达目标地址所需要经过的跳跃数量，一个跳数代表经过一个路由器。跳数越低，代表路由成本越低，优先级越高。

Persistent Routes：手动配置的静态固化路由

  2）第一条路由信息：缺省路由

    当系统接收到一个目的地址不在路由表中的数据包时，系统会将该数据包通过192.168.99.8这个接口发送到缺省网关192.168.99.1。

  3）第二条路由信息：本地环路

    当系统接收到一个发往目标网段127.0.0.0的数据包时，系统将接收发送给该网段的所有数据包。

  4）第三条路由信息：直连网段的路由记录

    当系统接收到一个发往目的网段192.168.99.0/24的数据包时，系统会将该数据包通过192.168.99.8这个接口发送出去。

  5）第四条路由信息：本地主机路由

    当系统接收到一个目标ip地址为本地网卡ip地址的数据包时，系统会将该数据包收下。

  6）第五条路由信息：本地广播路由

    当系统接收到一个发给直连网段的本地广播数据包时，系统会将该数据包从192.168.99.8这个接口以广播的形式发送出去。

  7）第六条路由信息：组播路由

    当系统接收到一个组播数据包时，系统会将该数据包从192.168.99.8这个接口以组播的形式发送出去。

  8）第七条路由信息：广播路由

    在系统接收到一个绝对广播数据包时，系统会将该数据包通过192.168.99.8这个接口发送出去。

  9）Default Gateway（缺省网关）



**二、****windows****路由表操作**

    windows路由表的设置主要通过route命令，ROUTE命令格式如下：

ROUTE [-f] [-p] [command [destination] [MASK netmask] [gateway] [METRIC metric] [IF interface]

其中 –f 参数用于清除路由表，-p参数用于永久保留某条路由（即在系统重启时不会丢失路由）。

Command主要有PRINT（打印）、ADD（添加）、DELETE（删除）、CHANGE（修改）共4个命令。

Destination代表所要达到的目标IP地址。

MASK是子网掩码的关键字。Netmask代表具体的子网掩码，如果不加说明，默认是255.255.255.255（单机IP地址）。如果代表全部出口子网掩码可用0.0.0.0。

Gateway代表出口网关。

其他interface和metric分别代表特殊路由的接口数目和到达目标地址的跳数，一般默认。





**三、双网卡路由配置实例**

某公司有两个网络：一个是办公网络192.168.99.0/24，网关为：192.168.99.1；一个是用来访问internet的商务网络192.168.201.0/24，网关为：192.168.201.1。现在有一台电脑使用两块网卡，一块连接公司办公网络，IP地址为192.168.99.8；另一块连接商务网络，IP地址为192.168.201.254。现在需要这台电脑既能访问办公网络，也能访问商务网络。

1. 我们可以使用ipconfig /all命令来查看该电脑的网卡设置情况，如下图：



2. 我们再用route print命令来查看该电脑的路由表信息，该路由表跟上面介绍的路由表是一样的，只是增加了几条网卡2的路由信息，如下图所示：



3. 我们可以使用ping命令来测试网络连接情况，如下图：ping内网是通的，但是ping外网不通。也就是说现在该电脑只能访问办公网络，但是无法访问商务网络。



4. 由上面的路由表可以看到，系统有两条缺省路由，这也是造成不能同时访问两个网络的主要原因，要解决这个问题，我们就需要修改路由表。

首先使用route delete 0.0.0.0这条命令删除缺省路由；

然后手动设置两条路由，如下图所示：



5. 我们再用route print来查看路由表信息，现在我们可以看到Persistent Routes下面多了两条静态固化路由，如下图所示：



6. 我们再使用ping来测试一下网络连接情况，如下图，办公网络和商务网络都可以ping通了。该电脑现在可以正常访问办公网络和商务网络了。





    windows路由表其实是比较简单的，熟悉windows路由表有利于排除网络故障，所以这里拿出来跟大家分享下。









