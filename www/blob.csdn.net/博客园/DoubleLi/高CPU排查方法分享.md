# 高CPU排查方法分享 - DoubleLi - 博客园






1 软件性能较差，占用CPU较多，往往是由于某段代码逻辑算法不佳导致，那如何在数以千计的函数中找到问题函数呢？
2 在使用!runaway命令比较不同时间各线程占用CPU时间，找到CPU时间增涨较多的线程，那么就初步定位了问题函数所在的问题线程，
3 然后在不同的时刻观察问题线程的调用栈，如果多次观察到截取的调用栈在执行某个函数，那么就有理由相信该函数调用存在性能问题。
4 修改代码指令，屏敝对问题函数的调用，观察CPU占用率是否有明显下降，若是，则说明第2步骤找到的问题函数存在性能瓶颈，需进一步优化。









