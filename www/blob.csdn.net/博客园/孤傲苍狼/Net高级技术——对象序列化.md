# .Net高级技术——对象序列化 - 孤傲苍狼 - 博客园



# [孤傲苍狼](https://www.cnblogs.com/xdp-gacl/)

只为成功找方法，不为失败找借口！




## [.Net高级技术——对象序列化](https://www.cnblogs.com/xdp-gacl/p/3541080.html)



## 对象序列化

“**序列化是将一个对象保存到存储介质上或者将对象进行转换使之能够在网络上传送的行为**”。**通俗一点的解释，序列化就是把一个对象保存到一个文件或数据库字段中去，反序列化就是从文件或者数据库中取出数据再转化成原来的对象使用。**对象是稍纵即逝的，不仅程序重启、操作系统重启会造成对象的消失，就是退出函数范围等都可能造成对象的消失，**序列化****/****反序列化就是为了保持对象的持久化。**就像用DV录像（序列化）和用播放器播放（反序列化）一样。

**能对一个类进行序列化的条件是：该类的任何基类可序列化；该类应用了****Serializable****特性**。

在**.net framework**中，有三种**序列化机制：二进制、****XML****和简单对象访问协议（****Simple Object Access Protocol****，****SOAP****）**它们的优缺点阐述如下：

1、二进制序列化的最大优点是，类型数据可以准确的表示出来。因为二进制序列化对象的公有和私有成员，**也就是说除了标记为****NonSerialized****的其他所有成员都能序列化**，所以在反序列化的时候可以忠诚地重建出该对象的状态。

2、XML只序列化对象的公共属性和字段。在XML序列化时，私有字段和其他实例对象就丢失了，**也就是说采用****xml****序列化的方式只能保存****public****的字段和可读写的属性，对于****private****等类型的字段不能进行序列化**

3、XML和SOAP是开发标准，具有很好的移植性。

简单对象访问协议（Simple Object Access Protocol，SOAP），是一种轻量的、简单的、基于XML的协议，它被设计成在WEB上交换结构化的和固化的信息。 SOAP 可以和现存的许多因特网协议和格式结合使用，包括超文本传输协议（HTTP），简单邮件传输协议（SMTP），多用途网际邮件扩充协议（MIME）。它还支持从消息系统到远程过程调用（RPC）等大量的应用程序。SOAP使用基于XML的数据结构和超文本传输协议(HTTP)的组合定义了一个标准的方法来使用Internet上各种不同操作环境中的分布式对象。

进行序列化和反序列化的代码很简单，三者对应的命名空间及对应的格式化类如下：

二进制：System.Runtime.Serialization.Formatters.Binary—BinaryFormatter

XML： System.Xml.Serialization—XmlSerializer

SOAP： System.Runtime.Serialization.Formatters.SOAP—SoapFormatter

BinaryFormatter，XmlSerializer，SoapFormatter类都有两个方法：

void Serialize(Stream stream, object obj)，将对象obj序列化到stream中

object Deserialize(Stream stream)，将对象从stream中反序列化，返回值为反序列化得到的对象。

不是所有对象都能序列化，只有可序列化的对象才能序列化，在类声明上添加[Serializable]，对象的属性、字段的类型也必须可序列化。反序列的项目中必须有同样的类，否则不能反序列化。

## 序列化的应用
- 配置程序的加载和保存

我们可以创建一个类，它包含了应用程序的配置信息。当应用程序加载时，配置对象被反序列化到内存中的配置类；当用户在程序运行的过程中对配置文件进行修改了的时候，可以把内存的配置类序列化到硬盘。这样，方便地实现了配置文件的读写。
- 分布式计算

**序列化的最大优势在于分布式计算**。两台机器拥有相同的程序集，则可以利用序列化技术进行通信。A机器通过序列化技术向B机器发送对象的快照，B机器能快速的、正确地重建出该对象来。









