# Django中的原子事务相关注意事项 - =朝晖= - 博客园
# [Django中的原子事务相关注意事项](https://www.cnblogs.com/dhcn/p/7120922.html)
       Django中的原子事务支持(transaction.atomic)方式函数装饰器或者with语句，这种方式特别是前者和[spring](http://lib.csdn.net/base/javaee)里面的AOP事务支持方式基本等同，当然其实质方式都是原始的try..catch方式，真是因为这个真正的原始方式，写这种外套事务支持的业务代码时需要注意一些问题：
      1、外加事务支持的业务代码内部就不要做泛型的try catch异常捕捉，这样会导致，真正的事务支持接不到异常，导致可能所需的事务回滚不会执行。
      2、外加事务支持的业务代码内部的逻辑控制不能对[数据库](http://lib.csdn.net/base/mysql)操作有影响，比如Django中的form验证,如果双数据库操作外都有不同的Form验证，那么最好在外部同时做完两个Form验证，然后在内部再用with语句加原子事务支持，否则话，第二次数据库操作可能会由于其相关的form验证失败，而不执行数据库操作，这种纯粹没有任何异常，当然也不会对第一个操作的回滚起任何影响，所以表单验证和数据库提交需要分别的集中化，当然最主要的是不同的数据库操作最好集中执行，而这些操作所需的业务逻辑代码最好在第一个数据库操作之前全部执行准备完。

