# 可重入函数 - h13 - 博客园
可重入函数主要用于多任务环境中，一个可重入的函数简单来说就是可以被中断的函数，也就是说，可以在这个函数执行的任何时刻中断它，转入OS调度下去执行另外一段代码，而返回控制时不会出现什么错误；而不可重入的函数由于使用了一些[系统资源](http://www.cnblogs.com/view/53557.htm)，比如[全局变量](http://www.cnblogs.com/view/261041.htm)区，[中断向量表](http://www.cnblogs.com/view/994002.htm)等，所以它如果被中断的话，可能会出现问题，这类函数是不能运行在多任务环境下的。
简介
　可重入函数也可以这样理解，重入即表示重复进入，首先它意味着这个函数可以被中断，其次意味着它除了使用自己栈上的[变量](http://www.cnblogs.com/view/296689.htm)以外不依赖于任何环境（包括static），这样的函数就是purecode（[纯代码](http://www.cnblogs.com/view/7209239.htm)）可重入，可以允许有该函数的多个副本在运行，由于它们使用的是分离的栈，所以不会互相干扰。如果确实需要访问[全局变量](http://www.cnblogs.com/view/261041.htm)（包括static），一定要注意实施互斥手段。可重入函数在并行运行环境中非常重要，但是一般要为访问全局变量付出一些性能代价。
注意事项
　　编写可重入函数时，若使用[全局变量](http://www.cnblogs.com/view/261041.htm)，则应通过关中断、[信号量](http://www.cnblogs.com/view/1303265.htm)（即P、V操作）等手段对其加以保护。 
　　若对所使用的全局变量不加以保护，则此函数就不具有可重入性，即当多个进程调用此函数时，很有可能使有关全局变量变为不可知状态。
