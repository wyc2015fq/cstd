# acdream 1685  多民族王国（DFS，并查集） - xcw0754 - 博客园
# [acdream 1685  多民族王国（DFS，并查集）](https://www.cnblogs.com/xcw0754/p/4572526.html)
#### Problem Description
娜娜好不容易才回忆起自己是娜娜而不是什么Alice，也回忆起了自己要继续探索这个世界的目标，便偷偷溜出皇宫。娜娜发现这个王国有很多个民族组成，每个民族都有自己的方言，更要命的是这些方面差别还很远，这就导致这个王国的人民交流十分困难。娜娜仔细观察并记录了好久，发现总共有m种不同的语言。
突然娜娜发现前面有一群天才在讨论问题，但是奈何语言问题，导致这群人交流非常吃力。不过幸亏的是，这群天才都有一个特殊的能力，只要消耗一个单位的能量即可完全领悟一门新的语言（妈妈再也不用担心我的四六级托福雅思GRE！）。于是娜娜久违的的好奇心又开始冒泡了，娜娜希望你告诉她，如果知道了每个人会的语言，是否能让这群天才两两直接或者间接的交流呢？所谓间接得交流是指经过若干个人的翻译使两个人得到相互表达的信息。如果不能，至少需要多少能量才能实现呢？
#### Input
多组数据，首先是一个正整数t（t<=20）
对于每组数据，首先是两个整数n,m(2<=n<=100,1<=m<=100)，分别代表人数以及语言的种类数，语言的编号从1~m。
接下来是n行，每行对这个人进行描述
首先是一个整数k，表示这个人已经会k门语言，接下来是k个整数，分别是这个人掌握的语言编号。(0<=k<=m)
#### Output
对于每组数据，输出一个整数，表示使得这群人能够互相直接或者间接交流所需要的最少能量。
#### Sample Input
2
2 2
1 2
0
5 5
1 2
2 2 3
2 3 4
2 4 5
1 5
#### Sample Output
1
0
#### Hint
样例1中其中第一个人会第二种语言，而第二个人不会任何语言，所以只需要第二个人也学会第二种语言即可交流，所以能量数为1
样例2中有5个人，而且这5个人已经可以相互直接或间接进行交流： 1-2-3-4-5，正好构成一条链。因此不需要继续学习新的语言，能量数为0。
题意：有一群人，每个人分别会c种语言(c>=0)，问题是，要让他们都可以互相交流（可以通过其他人翻译，只需要把话讲给能听懂你的话的人，让他代你传达）。问，如果消耗1点能量可以让某个人学会一种语言，那么要消耗多少能量能让他们都能交流？
思路：数据也是比较小的，直接就BFS了，维护两个表，一个是靠语言编号来索引的表，表示会这种语言的人。一个是靠人的编号来索引的表，表示这个人会的语言。从第一人开始扯出所有有联系的人，从该人索引到他会的语言，用这些语言索引所有会此语言的人，全部拖出，将这些人置为浏览过。如果还有剩下的人，肯定是联系不到的了。其实就是求有多少个连通分量，但是此题没有给直接的图，而是给出他们所会的语言，不方便用并查集，如果耗时去全部搜一遍来建立邻接表，何不如直接搜一遍得出答案。 
```
1 #include <bits/stdc++.h>
 2 #define LL long long
 3 using namespace std;
 4 const int N=102;
 5 vector< vector<int> >   lang;
 6 vector< vector<int> >   peop;
 7  
 8 bool vis[N];
 9 int t, n, m, num, c;
10  
11 void DFS(int e)
12 {
13     for(int i=0; i<peop[e].size(); i++) //所会的语言
14     {
15         int r=peop[e][i];
16         for(int j=0; j<lang[r].size(); j++)  //会该语言的所有人都是朋友
17         {
18             int w=lang[r][j];   //会r语言的人
19             if( !vis[w] )
20             {
21                 vis[w]=true;
22                 DFS(w);
23             }
24         }
25     }
26 }
27  
28 int cal()
29 {
30     int cnt=-1;
31     memset(vis,0,sizeof(vis));
32     for(int i=1; i<=n; i++) //每个人
33     {
34         if(peop[i].empty()) //这些人都不会讲话
35         {
36             vis[i]=true;
37             continue;
38         }
39         if(!vis[i])
40         {
41             vis[i]=true;
42             cnt++;
43             DFS(i); //暴力灭它9族
44         }
45     }
46     return max(cnt,0);  //总不能为负吧！
47 }
48  
49 int main()
50 {
51     //freopen("e://input.txt", "r", stdin);
52     vector<int> tmp;
53     cin>>t;
54     while(t--)
55     {
56         int cnt=0;  //这些人必须学会一种语言
57         peop.clear();lang.clear();
58         scanf("%d%d",&n,&m);
59         for(int i=0; i<=(n>m?n:m); i++)    peop.push_back(tmp),lang.push_back(tmp);//初始化
60         for(int i=1; i<=n; i++) //每个人
61         {
62             scanf("%d",&num);
63             if(!num)    cnt++;          //注意坑在这：假如有两个人，都不会任何语言，那么他们必须学会一种，即2点能量，而不是1。
64             for(int j=0; j<num; j++)    //会的语言
65             {
66                 scanf("%d",&c);
67                 lang[c].push_back(i);   //会c语言的人
68                 peop[i].push_back(c);   //第i人会的语言
69             }
70         }
71         cout<<cal()+cnt<<endl;
72     }
73     return 0;
74 }
AC代码
```

