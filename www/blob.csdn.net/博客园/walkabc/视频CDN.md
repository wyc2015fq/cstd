# 视频CDN - walkabc - 博客园
# [视频CDN](https://www.cnblogs.com/hitfire/articles/4515828.html)
[视频CDN](http://www.simope.com/web/distr.html)专为移动互联网视频内容分发量身定做的一套自主研发的分布式平台，该平台以深圳为中心，分布在全国各地BGP机房的[服务器](http://baike.baidu.com/view/3787429.htm)为边缘节点，汇聚中国电信、中国联通、中国移动、中国教育网等运营商网络资源，构建一个全国性的全网覆盖网络，将视频内容缓存或镜像到这些节点边缘服务器上，为不同地域的不同用户提供视频内容加速服务。实现就近访问，从而加速访问速度，提升用户的访问体验，并可以避免源站因访问量过大而造成的服务器负载过量与带宽资源不足等问题，解决网络拥塞，提高用户访问网站的响应速度，有效保证用户体验。
以[云宙多媒体](http://www.simope.com/index.html)技术有限公司的视频CDN产品为例对其技术架构及工作流程进行说明如下：
基于媒体内容和实时流媒体节目的地域性特点，不同于一般CDN，云宙视频CDN采用分布式多源架构，它允许位于不同地理位置的边缘分节点可以单独发布自己的媒体内容和实时节目，即各边缘节点在某种程度上也可作为源站，同时也可以将这些内容和节目分发到位于其他各地的分节点，因此每一个节点既可以作为系统中心源站存在，同时也可以实现边缘节点的功能。而源站也可作为边缘节点，来接受用户视频内容的快速响应服务，对于普通的Internet用户来讲，每个CDN边缘节点就相当于一个放置在它周围的Web网站，通过负载均衡系统的控制，用户的请求被透明地指向距离用户最近，网络状态最优的节点，节点中的WebServer服务器会像网站的原始服务器一样，可快速响应用户的请求。
    用户可以预定义内容分发的规则，对上传的内容添加权限及优先级，内容上传后，可选择将优先级高的热点内容预先全镜像同步部署到其他节点，优先级低的可先不进行同步，仅保存在本地源站，系统建立全局性的内容检索查询索引，一旦有用户访问，系统通过对应用层访问请求的智能判断，按照真实用户所处的实际地理位置，所属运营商，以及遍布全网的节点健康状态、网络流量、负载状况以及到用户的距离等信息，根据多种优化策略，通过网络的动态内容分配和全局负载均衡，将用户请求重定向到距离用户最近且健康可用的节点缓存服务器上，使用户可以就近取得所需的内容，如本节点不存在所需内容，系统将自动启动内容检索功能，回源实时获取所需的内容源提供给用户。
    利用云宙多媒体的视频CDN网络，网络内容提供商无需投资昂贵的各类服务器、设立分站点，其基础视频服务，拥有海量存储与分发能力，能够帮助视频网站节省流量。特别是对于视频流媒体信息、远程教学课件等消耗带宽资源多的网络应用服务，使用CDN技术把内容复制到网络的最边缘，使内容请求点和交付点之间的距离缩至最小，对于促进Web站点性能的提高具有重要的意义。网站使用CDN后，即由CDN服务提供商负责信息的传递，保证信息的传输，而网站只需要内容维护，不再需要考虑带宽服务器问题。CDN能够为网络的快速、安全、稳定、可扩展性等方面提供保障。
    目前[云宙视频CDN](http://www.simope.com/web/distr.html)网络体系，可提供对视频内容的点播加速、直播加速、网站内容的缓存加速、镜像部署等服务。云宙公司的[万视无忧视频托管平台](http://www.wsview.com/index3.html)依靠公司自主研发的强大的[视频CDN产品](http://www.wsview.com/index3.html)，打破了由传统CDN设备厂商提供的加速解决方案的技术模式，开创了符合中国互联网/移动互联网情况的CDN技术，可以消除视频内容客户巨大的基础投资及研发与运维投入，同时使视频内容分发的效果在异构网络中都能达到专业级的流畅度与表现力。有效降低了运营成本，适应了中国国情的复杂的网络环境。根据客户需求，提供高性能的互联网及移动互联网视频云服务，使客户只需要最低的成本投入，即能享受到广播级的视听内容。
![](http://static.oschina.net/uploads/space/2014/0311/160941_2LKM_328302.jpg)
云宙视频CDN主要由五部分组成：全局智能解析系统、负载均衡调度系统、内容路由同步系统、分布式存储管理系统、后台管理系统等。
云宙视频CDN技术架构如下图所示：
![](http://static.oschina.net/uploads/space/2014/0311/161030_wAUI_328302.jpg)
云宙视频CDN的服务流程：
![](http://static.oschina.net/uploads/space/2014/0311/161058_xjw1_328302.jpg)
当终端用户访问流媒体视频内容时，首先通过负载均衡系统确定最接近用户的最佳边缘节点，同时将终端用户的请求指向该节点。当终端用户的请求到达指定节点时，边缘节点服务器负责将请求的内容提供给终端用户。
    终端用户访问的基本服务流程如下：
    1、终端用户通过域名访问网站指定的视频内容，用户请求将由本地DNS
      最终交给云宙视频CDN负载均衡系统进行处理；
    2、负载均衡系统智能判断访问用户所处地理区域及所属运营商，并搜集相
      关节点的负载及健康状态，返回最优及离用户最近的网络边缘节点IP 给
      用户；
    3、终端用户根据返回的IP地址发送媒体请求到相应的网络边缘节点去请求
      内容；
    4、网络边缘节点接收客户请求，根据节点内各设备的实际能力、负载状况
       等因素选择合适的服务器设备给客户提供服务；
    5、如果本地边缘节点存在用户请求的内容，则直接将用户请求媒体内容发
       往最终用户。
    6、如果本地边缘节点不存在用户请求的内容，则查找相应节目列表数据库，
      找出存有目标内容的最佳节点；
    7、边缘节点将用户请求重定向到存有目标内容的节点，由该节点完成对用
       户请求的应答服务；
    8、本地边缘节点启动对目标内容的拉取功能，将目标内容从重定向节点上
       同步过来，以供后续用户的就近访问；
