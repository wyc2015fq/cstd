# 整理: 各种汉诺塔公式 - 知乎
# 

- 三柱汉诺塔(Trivial)

![H_3=2^n-1](https://www.zhihu.com/equation?tex=H_3%3D2%5En-1)
- 限制三柱汉诺塔

**[easy]**禁止隔柱移动,从A->C

![H=3^n-1](https://www.zhihu.com/equation?tex=H%3D3%5En-1)

**[Normal]**只能顺时针转,从A->B

![H(n)=\frac{1}{6} \left(-\left(\sqrt{3}-3\right) \left(1-\sqrt{3}\right)^n+\left(\sqrt{3}+3\right) \left(\sqrt{3}+1\right)^n-6\right)](https://www.zhihu.com/equation?tex=H%28n%29%3D%5Cfrac%7B1%7D%7B6%7D+%5Cleft%28-%5Cleft%28%5Csqrt%7B3%7D-3%5Cright%29+%5Cleft%281-%5Csqrt%7B3%7D%5Cright%29%5En%2B%5Cleft%28%5Csqrt%7B3%7D%2B3%5Cright%29+%5Cleft%28%5Csqrt%7B3%7D%2B1%5Cright%29%5En-6%5Cright%29)

**[Another]**随机汉诺塔, 从任意一个状态到随机另一个状态的期望步数...

![H_R(n)={\frac {466}{885}}\cdot 2^{n}-{\frac {1}{3}}-{\frac {3}{5}}\cdot \left({\frac {1}{3}}\right)^{n}+\left({\frac {12}{59}}+{\frac {18}{1003}}{\sqrt {17}}\right)\left({\frac {5+{\sqrt {17}}}{18}}\right)^{n}+\left({\frac {12}{59}}-{\frac {18}{1003}}{\sqrt {17}}\right)\left({\frac {5-{\sqrt {17}}}{18}}\right)^{n}](https://www.zhihu.com/equation?tex=H_R%28n%29%3D%7B%5Cfrac+%7B466%7D%7B885%7D%7D%5Ccdot+2%5E%7Bn%7D-%7B%5Cfrac+%7B1%7D%7B3%7D%7D-%7B%5Cfrac+%7B3%7D%7B5%7D%7D%5Ccdot+%5Cleft%28%7B%5Cfrac+%7B1%7D%7B3%7D%7D%5Cright%29%5E%7Bn%7D%2B%5Cleft%28%7B%5Cfrac+%7B12%7D%7B59%7D%7D%2B%7B%5Cfrac+%7B18%7D%7B1003%7D%7D%7B%5Csqrt+%7B17%7D%7D%5Cright%29%5Cleft%28%7B%5Cfrac+%7B5%2B%7B%5Csqrt+%7B17%7D%7D%7D%7B18%7D%7D%5Cright%29%5E%7Bn%7D%2B%5Cleft%28%7B%5Cfrac+%7B12%7D%7B59%7D%7D-%7B%5Cfrac+%7B18%7D%7B1003%7D%7D%7B%5Csqrt+%7B17%7D%7D%5Cright%29%5Cleft%28%7B%5Cfrac+%7B5-%7B%5Csqrt+%7B17%7D%7D%7D%7B18%7D%7D%5Cright%29%5E%7Bn%7D)

**[Relax]**12题...我已经疯了...
![](https://pic4.zhimg.com/v2-dc2886806b0d812f5d6c2c157e5857ab_b.jpg)- 四柱汉诺塔**(Proved)**

![H_4=1-2^{t-2}(t^2-3 t-2 n+4)](https://www.zhihu.com/equation?tex=H_4%3D1-2%5E%7Bt-2%7D%28t%5E2-3+t-2+n%2B4%29)

其中 ![t=\lfloor\sqrt{2 n}\ \rceil](https://www.zhihu.com/equation?tex=t%3D%5Clfloor%5Csqrt%7B2+n%7D%5C+%5Crceil)

忽略低阶项之后是:

![H_4\sim\frac{3 \sqrt{2}}{4}\cdot \sqrt{n}\cdot 2^{\sqrt{2 n}}; \ n\to \infty](https://www.zhihu.com/equation?tex=H_4%5Csim%5Cfrac%7B3+%5Csqrt%7B2%7D%7D%7B4%7D%5Ccdot+%5Csqrt%7Bn%7D%5Ccdot+2%5E%7B%5Csqrt%7B2+n%7D%7D%3B+%5C+n%5Cto+%5Cinfty)

公式验证:[A007664 - OEIS](https://link.zhihu.com/?target=https%3A//oeis.org/A007664)

`H4[n_]:=Evaluate[2^t(2n-4-t^2+3t)/4+1/.t->Round@Sqrt[2n]];`
- 五柱汉诺塔**(conjecture)**

![H_5\sim\frac{2^r}{12} \left(6 n-r^3+3 r^2-8 r+12\right)-1](https://www.zhihu.com/equation?tex=H_5%5Csim%5Cfrac%7B2%5Er%7D%7B12%7D+%5Cleft%286+n-r%5E3%2B3+r%5E2-8+r%2B12%5Cright%29-1)

其中 ![t=\left\lfloor R_1(x^3 - x-6 n,x)\right\rfloor=\left\lfloor \frac{\left(\sqrt{729 n^2-3}+27 n\right)^{2/3}+\sqrt[3]{3}}{3^{2/3} \sqrt[3]{\sqrt{729 n^2-3}+27 n}}\right\rfloor](https://www.zhihu.com/equation?tex=t%3D%5Cleft%5Clfloor+R_1%28x%5E3+-+x-6+n%2Cx%29%5Cright%5Crfloor%3D%5Cleft%5Clfloor+%5Cfrac%7B%5Cleft%28%5Csqrt%7B729+n%5E2-3%7D%2B27+n%5Cright%29%5E%7B2%2F3%7D%2B%5Csqrt%5B3%5D%7B3%7D%7D%7B3%5E%7B2%2F3%7D+%5Csqrt%5B3%5D%7B%5Csqrt%7B729+n%5E2-3%7D%2B27+n%7D%7D%5Cright%5Crfloor)

忽略低阶项之后我没搞错的话是:

![H_5\sim2^{-4/3}3^{2/3} 2^{\sqrt[3]{6n}} n^{2/3}; \ n\to \infty](https://www.zhihu.com/equation?tex=H_5%5Csim2%5E%7B-4%2F3%7D3%5E%7B2%2F3%7D+2%5E%7B%5Csqrt%5B3%5D%7B6n%7D%7D+n%5E%7B2%2F3%7D%3B+%5C+n%5Cto+%5Cinfty)

公式验证:[A007665 - OEIS](https://link.zhihu.com/?target=https%3A//oeis.org/A007665)

`H5[n_]:=Evaluate[2^t(12+6n-8t+3t^2-t^3)/12-1/.t->Floor@Root[#^3-#-6n&,1]];`
- 多柱汉诺塔(Unsolved)

瞎猜一下可能有 ![H_p\sim a\cdot 2^{\sqrt[p]{p!n}} n^\frac{p-1}{p}; \ n\to \infty](https://www.zhihu.com/equation?tex=H_p%5Csim+a%5Ccdot+2%5E%7B%5Csqrt%5Bp%5D%7Bp%21n%7D%7D+n%5E%5Cfrac%7Bp-1%7D%7Bp%7D%3B+%5C+n%5Cto+%5Cinfty)

考虑到五阶方程不可解估计真没法表示了...

但是近乎 ![O(1)](https://www.zhihu.com/equation?tex=O%281%29) 的算法还是可能的.

题图无关(从来没有有关过,好吗): [Hamakaze](https://link.zhihu.com/?target=https%3A//totoro-gx.deviantart.com/art/Hamakaze-565761652)

讲道理我是第四次看具体数学了...

上面的习题还是一道两个小时不一定能搞定...

**高德纳老哥你能不能不要混 开! 问! 题! 进去???**
![](https://pic2.zhimg.com/v2-bee0c7f2602c1d11a04a660e26c935c5_b.jpg)这是教导我们做习题前要先估计下难度不要不知天高地厚吗......还是等着高斯来秒杀......

