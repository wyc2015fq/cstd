# Adele and Idele - 知乎
# 

**（一）adele 与 idele **

在代数数论中，我们希望***把局部对象“粘”在一起来推导出整体对象的性质***。把局部“粘”在一起得到的东西就是adele ring和idele group。可以从下面的例子入手。

取一个有理数例如 ![a=2^{2}3^{-3}7^{31}](https://www.zhihu.com/equation?tex=a%3D2%5E%7B2%7D3%5E%7B-3%7D7%5E%7B31%7D) ， ![a\in\mathbb{Z}_{p},p\ne3](https://www.zhihu.com/equation?tex=a%5Cin%5Cmathbb%7BZ%7D_%7Bp%7D%2Cp%5Cne3) ,也就是说 ![a](https://www.zhihu.com/equation?tex=a) 可以看作是 ![\Pi_{p\ne3}\mathbb{Z}_{p}\times\mathbb{Q}_{3}\times\mathbb{R}](https://www.zhihu.com/equation?tex=%5CPi_%7Bp%5Cne3%7D%5Cmathbb%7BZ%7D_%7Bp%7D%5Ctimes%5Cmathbb%7BQ%7D_%7B3%7D%5Ctimes%5Cmathbb%7BR%7D) 中的元素。我们发现 ![\mathbb{Q}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BQ%7D) 可以“对角”嵌入到下面这个集合里：![\mathbb{A}_{\mathbb{Q}}=\{(a_{v})_{v}\in\Pi_{v}\mathbb{Q}_{v}|\text{for all but finitely many finite primes} ~v~\text{of}~\mathbb{Q},a_{v}\in\mathbb{Z}_{v}\}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D_%7B%5Cmathbb%7BQ%7D%7D%3D%5C%7B%28a_%7Bv%7D%29_%7Bv%7D%5Cin%5CPi_%7Bv%7D%5Cmathbb%7BQ%7D_%7Bv%7D%7C%5Ctext%7Bfor+all+but+finitely+many+finite+primes%7D+~v~%5Ctext%7Bof%7D~%5Cmathbb%7BQ%7D%2Ca_%7Bv%7D%5Cin%5Cmathbb%7BZ%7D_%7Bv%7D%5C%7D)

对角嵌入为 ![\mathbb{Q}\rightarrow\mathbb{A}_{\mathbb{Q}}:x\mapsto(...,x,x,x...)](https://www.zhihu.com/equation?tex=%5Cmathbb%7BQ%7D%5Crightarrow%5Cmathbb%7BA%7D_%7B%5Cmathbb%7BQ%7D%7D%3Ax%5Cmapsto%28...%2Cx%2Cx%2Cx...%29)

![\mathbb{A}_{\mathbb{Q}}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D_%7B%5Cmathbb%7BQ%7D%7D) 就称为 ![\mathbb{Q}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BQ%7D) 的adele ，事实上可以对任意一个数域做类似的事情。 设 ![K ](https://www.zhihu.com/equation?tex=K+) 是一个数域，定义它的adele ring为：

![\mathbb{A}_{K}=\{(a_{v})_{v}\in\Pi_{v}K_{v}~|~\text{for all but finitely many finite primes} ~v~\text{of}~K,a_{v}\in O_{v}\}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D_%7BK%7D%3D%5C%7B%28a_%7Bv%7D%29_%7Bv%7D%5Cin%5CPi_%7Bv%7DK_%7Bv%7D~%7C~%5Ctext%7Bfor+all+but+finitely+many+finite+primes%7D+~v~%5Ctext%7Bof%7D~K%2Ca_%7Bv%7D%5Cin+O_%7Bv%7D%5C%7D)

同时也可以定义它的idele group：

![\mathbb{I}_{K}=\{(a_{v})_{v}\in\Pi_{v}K_{v}^{\times}~|~\text{for all but finitely many finite primes} ~v~\text{of}~K,a_{v}\in O_{v}^{\times}\}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D_%7BK%7D%3D%5C%7B%28a_%7Bv%7D%29_%7Bv%7D%5Cin%5CPi_%7Bv%7DK_%7Bv%7D%5E%7B%5Ctimes%7D~%7C~%5Ctext%7Bfor+all+but+finitely+many+finite+primes%7D+~v~%5Ctext%7Bof%7D~K%2Ca_%7Bv%7D%5Cin+O_%7Bv%7D%5E%7B%5Ctimes%7D%5C%7D)

为什么要把局部对象“粘”在一起呢？粗略的讲，局部对象有好的拓扑性质，譬如 ![\mathbb{Q}_{p},K_{v}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BQ%7D_%7Bp%7D%2CK_%7Bv%7D) 都是局部紧的，完备的； ![\mathbb{Z}_{p},O_{v}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BZ%7D_%7Bp%7D%2CO_%7Bv%7D) 分别是它们的紧开子群。而***局部紧的拓扑群上可以定义Harr measure，上面可以做Fourier analysis***。当我们定义出来adele和idele以后，我们希望它也具有局部紧的结构，这样当我们把整体域嵌进去以后，就可以通过adele，idele的拓扑性质来反映与整体域相关的一些代数结构的性质，譬如理想类群（类数有限）和单位群（单位定理）。

**（二）adele 与 idele 上的拓扑**

首先我们考虑一般的定义：限制乘积（restricted product）。一般地，给出了一族局部紧群 ![(G_{v})_{v\in \Lambda}](https://www.zhihu.com/equation?tex=%28G_%7Bv%7D%29_%7Bv%5Cin+%5CLambda%7D) , ![S](https://www.zhihu.com/equation?tex=S) 为 ![\Lambda](https://www.zhihu.com/equation?tex=%5CLambda) 的有限子集，对每个 ![v\in\Lambda-S](https://www.zhihu.com/equation?tex=v%5Cin%5CLambda-S) 指定 ![G_{v}](https://www.zhihu.com/equation?tex=G_%7Bv%7D) 的紧开子群 ![U_{v}](https://www.zhihu.com/equation?tex=U_%7Bv%7D) 。定义 ![(G_{v})_{v\in \Lambda}](https://www.zhihu.com/equation?tex=%28G_%7Bv%7D%29_%7Bv%5Cin+%5CLambda%7D) 关于 ![(U_{v})_{v\in \Lambda}](https://www.zhihu.com/equation?tex=%28U_%7Bv%7D%29_%7Bv%5Cin+%5CLambda%7D) 的限制乘积为：

![G={\Pi_{v\in\Lambda}}^{\prime}G_{v}=\{(x_{v})\in\Pi_{v\in\Lambda}G_{v}~|~\text{for all but finitely many}~v\in\Lambda-S,x_{v}\in U_{v}\}](https://www.zhihu.com/equation?tex=G%3D%7B%5CPi_%7Bv%5Cin%5CLambda%7D%7D%5E%7B%5Cprime%7DG_%7Bv%7D%3D%5C%7B%28x_%7Bv%7D%29%5Cin%5CPi_%7Bv%5Cin%5CLambda%7DG_%7Bv%7D~%7C~%5Ctext%7Bfor+all+but+finitely+many%7D~v%5Cin%5CLambda-S%2Cx_%7Bv%7D%5Cin+U_%7Bv%7D%5C%7D)

现在来构造 ![G](https://www.zhihu.com/equation?tex=G) 上的拓扑：

**Step1. **对于每个有限集合 ![T ](https://www.zhihu.com/equation?tex=T+) ， ![S\subset T\subset\Lambda](https://www.zhihu.com/equation?tex=S%5Csubset+T%5Csubset%5CLambda) ，考虑限制乘积的子集：

![G_{T}=\Pi_{v\in T}G_{v}\times\Pi_{v\in\Lambda-T}U_{v}](https://www.zhihu.com/equation?tex=G_%7BT%7D%3D%5CPi_%7Bv%5Cin+T%7DG_%7Bv%7D%5Ctimes%5CPi_%7Bv%5Cin%5CLambda-T%7DU_%7Bv%7D) ，于是 ![G={\Pi_{v\in\Lambda}}^{\prime}G_{v}=\cup_{T}G_{T}](https://www.zhihu.com/equation?tex=G%3D%7B%5CPi_%7Bv%5Cin%5CLambda%7D%7D%5E%7B%5Cprime%7DG_%7Bv%7D%3D%5Ccup_%7BT%7DG_%7BT%7D) ，这里的 ![T](https://www.zhihu.com/equation?tex=T) 遍历所有包含 ![S](https://www.zhihu.com/equation?tex=S) 的 ![\Lambda](https://www.zhihu.com/equation?tex=%5CLambda) 的有限子集。

**Step2. **在每一个 ![G_{T}](https://www.zhihu.com/equation?tex=G_%7BT%7D) 上赋予乘积拓扑，由Tychonoff乘积定理可知 ![\Pi_{v\in\Lambda-T}U_{v}](https://www.zhihu.com/equation?tex=%5CPi_%7Bv%5Cin%5CLambda-T%7DU_%7Bv%7D) 紧，其次有限乘积 ![\Pi_{v\in T}G_{v}](https://www.zhihu.com/equation?tex=%5CPi_%7Bv%5Cin+T%7DG_%7Bv%7D) 保持局部紧。

**Step3.** 对于限制乘积的子集 ![V](https://www.zhihu.com/equation?tex=V) ，定义它为开集，如果存在 ![T](https://www.zhihu.com/equation?tex=T) 使得 ![V\cap G_{T}](https://www.zhihu.com/equation?tex=V%5Ccap+G_%7BT%7D) 是 ![G_{T}](https://www.zhihu.com/equation?tex=G_%7BT%7D) 中的开集。由于限制乘积里任何一个元素都落在某个 ![G_{T}](https://www.zhihu.com/equation?tex=G_%7BT%7D) 里面，它有一个局部紧领域为 ![\Pi_{v\in T}H_{v}\times\Pi_{v\in\Lambda-T}U_{v}](https://www.zhihu.com/equation?tex=%5CPi_%7Bv%5Cin+T%7DH_%7Bv%7D%5Ctimes%5CPi_%7Bv%5Cin%5CLambda-T%7DU_%7Bv%7D) ，其中 ![H_{v}](https://www.zhihu.com/equation?tex=H_%7Bv%7D) 为 ![G_{v}](https://www.zhihu.com/equation?tex=G_%7Bv%7D) 的紧开子群，于是限制乘积就具有了局部紧拓扑。

现在设 ![K](https://www.zhihu.com/equation?tex=K) 是一个数域， ![S](https://www.zhihu.com/equation?tex=S) 是 ![K](https://www.zhihu.com/equation?tex=K) 所有无限素点构成的集合，令 ![G_{v}=K_{v},U_{v}=O_{v}](https://www.zhihu.com/equation?tex=G_%7Bv%7D%3DK_%7Bv%7D%2CU_%7Bv%7D%3DO_%7Bv%7D) ；或者 ![G_{v}=K^{\times}_{v},U_{v}=O^{\times}_{v}](https://www.zhihu.com/equation?tex=G_%7Bv%7D%3DK%5E%7B%5Ctimes%7D_%7Bv%7D%2CU_%7Bv%7D%3DO%5E%7B%5Ctimes%7D_%7Bv%7D) ，则得到 ![\mathbb{A}_{K},\mathbb{I}_{K}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D_%7BK%7D%2C%5Cmathbb%7BI%7D_%7BK%7D) 。

注意到我们可以确定 ![G](https://www.zhihu.com/equation?tex=G) 的一个**拓扑基**，例如对于 ![\mathbb{I}_{K}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D_%7BK%7D) ,它的基为：

![\{\Pi_{v}U_{v}~|~U_{v}~\text{open in}~K_{v}^{\times}~\text{for all}~v,U_{v}=O_{v}^{\times}~\text{for all but finitely many}~v\}](https://www.zhihu.com/equation?tex=%5C%7B%5CPi_%7Bv%7DU_%7Bv%7D~%7C~U_%7Bv%7D~%5Ctext%7Bopen+in%7D~K_%7Bv%7D%5E%7B%5Ctimes%7D~%5Ctext%7Bfor+all%7D~v%2CU_%7Bv%7D%3DO_%7Bv%7D%5E%7B%5Ctimes%7D~%5Ctext%7Bfor+all+but+finitely+many%7D~v%5C%7D)

还可以找到**![1](https://www.zhihu.com/equation?tex=1) 的领域基**：对于每个素点构成的有限集 ![S\supset S_{\infty}](https://www.zhihu.com/equation?tex=S%5Csupset+S_%7B%5Cinfty%7D) （ ![S_{\infty}](https://www.zhihu.com/equation?tex=S_%7B%5Cinfty%7D) 为 ![K](https://www.zhihu.com/equation?tex=K) 的所有无限素点构成的集合）以及 ![\varepsilon>0](https://www.zhihu.com/equation?tex=%5Cvarepsilon%3E0)，定义：

![U(S,\varepsilon)=\{(a_{v})~|~|a_{v}-1|_{v}<\varepsilon,v\in S,|a|_{v}=1,v\notin S\}](https://www.zhihu.com/equation?tex=U%28S%2C%5Cvarepsilon%29%3D%5C%7B%28a_%7Bv%7D%29~%7C~%7Ca_%7Bv%7D-1%7C_%7Bv%7D%3C%5Cvarepsilon%2Cv%5Cin+S%2C%7Ca%7C_%7Bv%7D%3D1%2Cv%5Cnotin+S%5C%7D)

那么 ![\{U(S,\varepsilon)~|~S,\varepsilon\}](https://www.zhihu.com/equation?tex=%5C%7BU%28S%2C%5Cvarepsilon%29~%7C~S%2C%5Cvarepsilon%5C%7D) 就是 ![1](https://www.zhihu.com/equation?tex=1) 的领域基。

**（三）离散子群和fundamental domain**

考虑我们熟知的 ![\mathbb{R}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BR%7D) 上的分析，我们对一个 ![f\in L(\mathbb{R})](https://www.zhihu.com/equation?tex=f%5Cin+L%28%5Cmathbb%7BR%7D%29) 做积分： ![\int_{\mathbb{R}}f(x)dx=\sum_{k\in\mathbb{Z}}\int_{k+[0,1]}f(x)dx=\sum_{k\in\mathbb{Z}}\int_{[0,1]}f(x+k)dx](https://www.zhihu.com/equation?tex=%5Cint_%7B%5Cmathbb%7BR%7D%7Df%28x%29dx%3D%5Csum_%7Bk%5Cin%5Cmathbb%7BZ%7D%7D%5Cint_%7Bk%2B%5B0%2C1%5D%7Df%28x%29dx%3D%5Csum_%7Bk%5Cin%5Cmathbb%7BZ%7D%7D%5Cint_%7B%5B0%2C1%5D%7Df%28x%2Bk%29dx) 。

这里**![\mathbb{Z}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BZ%7D)*****是 ![\mathbb{R}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BR%7D) 的离散子群，把积分区域表示成disjoint union*：**![\mathbb{R}=\cup_{k\in\mathbb{Z}}k+[0,1)](https://www.zhihu.com/equation?tex=%5Cmathbb%7BR%7D%3D%5Ccup_%7Bk%5Cin%5Cmathbb%7BZ%7D%7Dk%2B%5B0%2C1%29) ，**并且 ![\mathbb{R}/\mathbb{Z}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BR%7D%2F%5Cmathbb%7BZ%7D) 是compact的， ![D=[0,1)](https://www.zhihu.com/equation?tex=D%3D%5B0%2C1%29) 是"fundamental domain"**。

***后面我们在adele上做分析时，有类似的处理方法。***这里做两个准备：

【1】找到adele（idele）的一个离散子群，这个离散子群为 ![k(k^{\times})](https://www.zhihu.com/equation?tex=k%28k%5E%7B%5Ctimes%7D%29)

【2】找到fundamental domain ![D](https://www.zhihu.com/equation?tex=D) 从而把adele(idele)写成disjoint union，并考虑 ![\mathbb{A}_{K}/K](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D_%7BK%7D%2FK) ( ![\mathbb{I}_{K}^{1}/K^{\times}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D_%7BK%7D%5E%7B1%7D%2FK%5E%7B%5Ctimes%7D) )的拓扑性质（compact）

后面的叙述中，adele简记 ![\mathbb{A}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D) ，idele简记为 ![\mathbb{I}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D) 。

我们会用两个比较tricky的引理：***Lemma2，Lemma3***。它们证明可以在J.S.Milne的讲义Algebraic Number Theory的Chapter4，5中找到，链接如下：
[ANT  J.S. Milne​www.jmilne.org](https://link.zhihu.com/?target=http%3A//www.jmilne.org/math/CourseNotes/ant.html)

**![1.~\mathbb{A}~\text{and}~K](https://www.zhihu.com/equation?tex=1.~%5Cmathbb%7BA%7D~%5Ctext%7Band%7D~K)**

首先有对角嵌入 : ![K\rightarrow\mathbb{A},x\mapsto(...,x,x,x...)](https://www.zhihu.com/equation?tex=K%5Crightarrow%5Cmathbb%7BA%7D%2Cx%5Cmapsto%28...%2Cx%2Cx%2Cx...%29) ，于是可以把 ![K](https://www.zhihu.com/equation?tex=K) 看作 ![\mathbb{A}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D) 的子群

***Lemma 1.***![K+\mathbb{A}_{S_{\infty}}=\mathbb{A} ](https://www.zhihu.com/equation?tex=K%2B%5Cmathbb%7BA%7D_%7BS_%7B%5Cinfty%7D%7D%3D%5Cmathbb%7BA%7D+)，![K\cap\mathbb{A}_{S_{\infty}}=O](https://www.zhihu.com/equation?tex=K%5Ccap%5Cmathbb%7BA%7D_%7BS_%7B%5Cinfty%7D%7D%3DO) 。这里 ![O](https://www.zhihu.com/equation?tex=O) 是ring of integers，![\mathbb{A}_{S_{\infty}}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D_%7BS_%7B%5Cinfty%7D%7D) 是 ![S_{\infty}-adele](https://www.zhihu.com/equation?tex=S_%7B%5Cinfty%7D-adele) : ![\Pi_{v\in S_{\infty}}K_{v}\times\Pi_{v\notin S_{\infty}}O_{v}](https://www.zhihu.com/equation?tex=%5CPi_%7Bv%5Cin+S_%7B%5Cinfty%7D%7DK_%7Bv%7D%5Ctimes%5CPi_%7Bv%5Cnotin+S_%7B%5Cinfty%7D%7DO_%7Bv%7D) 。

**Proof**. 第二个断言是trivial的，对于第一个断言，即证对于任意 ![x=(...,x_{v},...)](https://www.zhihu.com/equation?tex=x%3D%28...%2Cx_%7Bv%7D%2C...%29) ，总可以找到 ![a\in K ](https://www.zhihu.com/equation?tex=a%5Cin+K+) ，使得 ![x+a\in\mathbb{A}_{S_{\infty}}](https://www.zhihu.com/equation?tex=x%2Ba%5Cin%5Cmathbb%7BA%7D_%7BS_%7B%5Cinfty%7D%7D) 。

（证明的关键在于：由于 ![x](https://www.zhihu.com/equation?tex=x) 只有有限个分量 ![x_{v}](https://www.zhihu.com/equation?tex=x_%7Bv%7D) 不在 ![O_{v}](https://www.zhihu.com/equation?tex=O_%7Bv%7D) 中，（1）所以只需要每次平移一个 ![x_{v}](https://www.zhihu.com/equation?tex=x_%7Bv%7D) 至 ![O_{v}](https://www.zhihu.com/equation?tex=O_%7Bv%7D) 中， ![x_{v}+a_{v}\in O_{v}](https://www.zhihu.com/equation?tex=x_%7Bv%7D%2Ba_%7Bv%7D%5Cin+O_%7Bv%7D) ；（2）并且这次平移不影响其他分量， ![a_{v}\in O_{w},w\ne v](https://www.zhihu.com/equation?tex=a_%7Bv%7D%5Cin+O_%7Bw%7D%2Cw%5Cne+v) 。那么经过有限次平移即可。）

设 ![x_{v}\notin O_{v}](https://www.zhihu.com/equation?tex=x_%7Bv%7D%5Cnotin+O_%7Bv%7D) : 先取 ![a^{\prime}\in K, a_{v}^{\prime}\in-x_{v}+O_{v}](https://www.zhihu.com/equation?tex=a%5E%7B%5Cprime%7D%5Cin+K%2C+a_%7Bv%7D%5E%7B%5Cprime%7D%5Cin-x_%7Bv%7D%2BO_%7Bv%7D) ，即 ![a_{v}^{\prime}+x_{v}\in O_{v}](https://www.zhihu.com/equation?tex=a_%7Bv%7D%5E%7B%5Cprime%7D%2Bx_%7Bv%7D%5Cin+O_%7Bv%7D) ，然后调整 ![a_{v}^{\prime}](https://www.zhihu.com/equation?tex=a_%7Bv%7D%5E%7B%5Cprime%7D) ：为了满足条件（2），我们***需要把 ![a^{\prime}](https://www.zhihu.com/equation?tex=a%5E%7B%5Cprime%7D) 不在局部环中的那些分量"抵消"掉；**同时为了满足条件*（1）***我们至少还需要把分量 ![a_{v}^{\prime}](https://www.zhihu.com/equation?tex=a_%7Bv%7D%5E%7B%5Cprime%7D) 抵消*，**具体如下**：**

设 ![S=\{\text{finite primes}~q~|~a^{\prime}\notin O_{q}\}](https://www.zhihu.com/equation?tex=S%3D%5C%7B%5Ctext%7Bfinite+primes%7D~q~%7C~a%5E%7B%5Cprime%7D%5Cnotin+O_%7Bq%7D%5C%7D) ， ![N_{q}=-ord_{q}(a^{\prime}),N=-ord_{v}(a^{\prime})](https://www.zhihu.com/equation?tex=N_%7Bq%7D%3D-ord_%7Bq%7D%28a%5E%7B%5Cprime%7D%29%2CN%3D-ord_%7Bv%7D%28a%5E%7B%5Cprime%7D%29) 。

由中国剩余定理，存在 ![b\in O](https://www.zhihu.com/equation?tex=b%5Cin+O) 使得 ![b\equiv0~\text{mod}~q^{N_{q}},q\in S;b\equiv1~\text{mod}~v^{N}](https://www.zhihu.com/equation?tex=b%5Cequiv0~%5Ctext%7Bmod%7D~q%5E%7BN_%7Bq%7D%7D%2Cq%5Cin+S%3Bb%5Cequiv1~%5Ctext%7Bmod%7D~v%5E%7BN%7D) 。令 ![a=ba^{\prime}](https://www.zhihu.com/equation?tex=a%3Dba%5E%7B%5Cprime%7D)

现在验证条件(1),(2)：

![a_{v}=b_{v}a_{v}^{\prime}\in (1+v^{N})(-x_{v}+O_{v})=-x_{v}+v^{N}x_{v}+v^{N}O_{v}+O_{v}](https://www.zhihu.com/equation?tex=a_%7Bv%7D%3Db_%7Bv%7Da_%7Bv%7D%5E%7B%5Cprime%7D%5Cin+%281%2Bv%5E%7BN%7D%29%28-x_%7Bv%7D%2BO_%7Bv%7D%29%3D-x_%7Bv%7D%2Bv%5E%7BN%7Dx_%7Bv%7D%2Bv%5E%7BN%7DO_%7Bv%7D%2BO_%7Bv%7D)

对于唯一需要考虑的一项： ![v^{N}x_{v}](https://www.zhihu.com/equation?tex=v%5E%7BN%7Dx_%7Bv%7D) ，注意到 ![a_{v}^{\prime}+x_{v}\in O_{v}](https://www.zhihu.com/equation?tex=a_%7Bv%7D%5E%7B%5Cprime%7D%2Bx_%7Bv%7D%5Cin+O_%7Bv%7D) ，即 ![x_{v}=-a_{v}^{\prime}+y,y\in O_{ v}](https://www.zhihu.com/equation?tex=x_%7Bv%7D%3D-a_%7Bv%7D%5E%7B%5Cprime%7D%2By%2Cy%5Cin+O_%7B+v%7D) ，由 ![ord_{v}(x_{v})\geq\text{min}\{ord_{v}(a_{v}^{\prime})=-N\leq0,ord_{v}(y)\geq0\}](https://www.zhihu.com/equation?tex=ord_%7Bv%7D%28x_%7Bv%7D%29%5Cgeq%5Ctext%7Bmin%7D%5C%7Bord_%7Bv%7D%28a_%7Bv%7D%5E%7B%5Cprime%7D%29%3D-N%5Cleq0%2Cord_%7Bv%7D%28y%29%5Cgeq0%5C%7D) 可知， ![ord_{v}(x_{v})\geq-N](https://www.zhihu.com/equation?tex=ord_%7Bv%7D%28x_%7Bv%7D%29%5Cgeq-N) ，即 ![v^{N}x_{v}\in O_{v}](https://www.zhihu.com/equation?tex=v%5E%7BN%7Dx_%7Bv%7D%5Cin+O_%7Bv%7D) ，那么 ![a_{v}=-x_{v}+v^{N}x_{v}+v^{N}O_{v}+O_{v}\in -x_{v}+ O_{v}](https://www.zhihu.com/equation?tex=a_%7Bv%7D%3D-x_%7Bv%7D%2Bv%5E%7BN%7Dx_%7Bv%7D%2Bv%5E%7BN%7DO_%7Bv%7D%2BO_%7Bv%7D%5Cin+-x_%7Bv%7D%2B+O_%7Bv%7D) 。

若 ![w\notin S](https://www.zhihu.com/equation?tex=w%5Cnotin+S) ，![a_{v}^{\prime}\in O_{w}\Rightarrow a_{v}=b_{v}a_{v}^{\prime}\in O_{w}](https://www.zhihu.com/equation?tex=a_%7Bv%7D%5E%7B%5Cprime%7D%5Cin+O_%7Bw%7D%5CRightarrow+a_%7Bv%7D%3Db_%7Bv%7Da_%7Bv%7D%5E%7B%5Cprime%7D%5Cin+O_%7Bw%7D) ；若 ![w\in S](https://www.zhihu.com/equation?tex=w%5Cin+S) ，由 ![b](https://www.zhihu.com/equation?tex=b) 的定义： ![ a_{v}\in O_{w}](https://www.zhihu.com/equation?tex=+a_%7Bv%7D%5Cin+O_%7Bw%7D) 。

设 ![K](https://www.zhihu.com/equation?tex=K) 有 ![r](https://www.zhihu.com/equation?tex=r) 个real embedding ![\sigma_{1},...,\sigma_{r}](https://www.zhihu.com/equation?tex=%5Csigma_%7B1%7D%2C...%2C%5Csigma_%7Br%7D) 和 ![s](https://www.zhihu.com/equation?tex=s)**对**complex embedding ![\sigma_{r+1},\overline{\sigma_{r+1}},...\sigma_{r+s},\overline{\sigma_{r+s}}](https://www.zhihu.com/equation?tex=%5Csigma_%7Br%2B1%7D%2C%5Coverline%7B%5Csigma_%7Br%2B1%7D%7D%2C...%5Csigma_%7Br%2Bs%7D%2C%5Coverline%7B%5Csigma_%7Br%2Bs%7D%7D) ，记 ![\mathbb{A}^{\infty}=\Pi_{v\in S_{\infty}}K_{v}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D%5E%7B%5Cinfty%7D%3D%5CPi_%7Bv%5Cin+S_%7B%5Cinfty%7D%7DK_%7Bv%7D) , 那么 ![\mathbb{A}^{\infty}\simeq\mathbb{R}^{r}\times\mathbb{C}^{s}\simeq\mathbb{R}^{r+2s}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D%5E%7B%5Cinfty%7D%5Csimeq%5Cmathbb%7BR%7D%5E%7Br%7D%5Ctimes%5Cmathbb%7BC%7D%5E%7Bs%7D%5Csimeq%5Cmathbb%7BR%7D%5E%7Br%2B2s%7D) 是 ![\mathbb{R}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BR%7D) 上的 ![r+2s=n=[K:Q]](https://www.zhihu.com/equation?tex=r%2B2s%3Dn%3D%5BK%3AQ%5D) 维线性空间。

设 ![\{w_{1},...,w_{n}\}](https://www.zhihu.com/equation?tex=%5C%7Bw_%7B1%7D%2C...%2Cw_%7Bn%7D%5C%7D) 是 ![O](https://www.zhihu.com/equation?tex=O) over ![\mathbb{Z}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BZ%7D) 的一组basis。

现在考虑一个很重要的嵌入映射： ![K\rightarrow \mathbb{A}^{\infty},x\mapsto(x_{v_{1}},...x_{v_{n}}) ](https://www.zhihu.com/equation?tex=K%5Crightarrow+%5Cmathbb%7BA%7D%5E%7B%5Cinfty%7D%2Cx%5Cmapsto%28x_%7Bv_%7B1%7D%7D%2C...x_%7Bv_%7Bn%7D%7D%29+) ，具体地， ![x\mapsto(\sigma_{1}x,...,\sigma_{r+s}x)](https://www.zhihu.com/equation?tex=x%5Cmapsto%28%5Csigma_%7B1%7Dx%2C...%2C%5Csigma_%7Br%2Bs%7Dx%29) 。

***Lemma 2.*** 设 ![\mathfrak{a}](https://www.zhihu.com/equation?tex=%5Cmathfrak%7Ba%7D) 是 ![O](https://www.zhihu.com/equation?tex=O) 中的一个非零理想，那么 ![\mathfrak{a}](https://www.zhihu.com/equation?tex=%5Cmathfrak%7Ba%7D) 在 ![K\rightarrow \mathbb{A}^{\infty}](https://www.zhihu.com/equation?tex=K%5Crightarrow+%5Cmathbb%7BA%7D%5E%7B%5Cinfty%7D) 中的像是**full lattice**，特别地，设 **![w_{i}^{\infty}](https://www.zhihu.com/equation?tex=w_%7Bi%7D%5E%7B%5Cinfty%7D)** 是 ![w_{i}](https://www.zhihu.com/equation?tex=w_%7Bi%7D) 在 ![ \mathbb{A}^{\infty}](https://www.zhihu.com/equation?tex=+%5Cmathbb%7BA%7D%5E%7B%5Cinfty%7D) 中的像，那么 ![w_{i}^{\infty}](https://www.zhihu.com/equation?tex=w_%7Bi%7D%5E%7B%5Cinfty%7D) 在 ![\mathbb{R}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BR%7D) 上线性无关。

定义 ![ \mathbb{A}^{\infty}](https://www.zhihu.com/equation?tex=+%5Cmathbb%7BA%7D%5E%7B%5Cinfty%7D) 的一个子集 ![ D^{\infty}=\{\Sigma_{i=1}^{n}t_{i}w_{i}^{\infty}~|~0\leq t_{i}<1\}](https://www.zhihu.com/equation?tex=+D%5E%7B%5Cinfty%7D%3D%5C%7B%5CSigma_%7Bi%3D1%7D%5E%7Bn%7Dt_%7Bi%7Dw_%7Bi%7D%5E%7B%5Cinfty%7D~%7C~0%5Cleq+t_%7Bi%7D%3C1%5C%7D) 。**定义Fundamental domain：**![D= D^{\infty}\times\Pi_{v\notin S_{\infty}}O_{v}\subset \mathbb{A}^{\infty}](https://www.zhihu.com/equation?tex=D%3D+D%5E%7B%5Cinfty%7D%5Ctimes%5CPi_%7Bv%5Cnotin+S_%7B%5Cinfty%7D%7DO_%7Bv%7D%5Csubset+%5Cmathbb%7BA%7D%5E%7B%5Cinfty%7D) 。

**Example：**![K=\mathbb{Q}(\sqrt{2})](https://www.zhihu.com/equation?tex=K%3D%5Cmathbb%7BQ%7D%28%5Csqrt%7B2%7D%29) 。此时 ![O=\mathbb{Z}(\sqrt{2})](https://www.zhihu.com/equation?tex=O%3D%5Cmathbb%7BZ%7D%28%5Csqrt%7B2%7D%29) ，整基 ![\{1,\sqrt{2}\}](https://www.zhihu.com/equation?tex=%5C%7B1%2C%5Csqrt%7B2%7D%5C%7D) ，![\mathbb{A}^{\infty}=\mathbb{R}^{2}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D%5E%7B%5Cinfty%7D%3D%5Cmathbb%7BR%7D%5E%7B2%7D) ， ![w_{1}^{\infty}=(1,1),w_{2}^{\infty}=(\sqrt{2},-\sqrt{2})](https://www.zhihu.com/equation?tex=w_%7B1%7D%5E%7B%5Cinfty%7D%3D%281%2C1%29%2Cw_%7B2%7D%5E%7B%5Cinfty%7D%3D%28%5Csqrt%7B2%7D%2C-%5Csqrt%7B2%7D%29) ， ![D^{\infty}](https://www.zhihu.com/equation?tex=D%5E%7B%5Cinfty%7D) 即 ![w_{1}^{\infty},w_{2}^{\infty}](https://www.zhihu.com/equation?tex=w_%7B1%7D%5E%7B%5Cinfty%7D%2Cw_%7B2%7D%5E%7B%5Cinfty%7D) 张成的平行四边形。

- **Main result 1. **![D+K=\mathbb{A} ](https://www.zhihu.com/equation?tex=D%2BK%3D%5Cmathbb%7BA%7D+) ， ![\mathbb{A}=\cup_{a\in K}(a+D)](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D%3D%5Ccup_%7Ba%5Cin+K%7D%28a%2BD%29) 是disjoint union。

**Proof.**（1）对于任意 ![x\in\mathbb{A}](https://www.zhihu.com/equation?tex=x%5Cin%5Cmathbb%7BA%7D) ，先用一个 ![a\in K](https://www.zhihu.com/equation?tex=a%5Cin+K) 将它平移至 ![\mathbb{A}_{S_{\infty}}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D_%7BS_%7B%5Cinfty%7D%7D) 中，由Lemma1可知这个 ![a](https://www.zhihu.com/equation?tex=a) 在 ![\text{mod}O](https://www.zhihu.com/equation?tex=%5Ctext%7Bmod%7DO) 意义下唯一。（2)当 ![x\in\mathbb{A}_{S_{\infty}}](https://www.zhihu.com/equation?tex=x%5Cin%5Cmathbb%7BA%7D_%7BS_%7B%5Cinfty%7D%7D) 后，考虑它的 ![ \mathbb{A}^{\infty}](https://www.zhihu.com/equation?tex=+%5Cmathbb%7BA%7D%5E%7B%5Cinfty%7D) 分量 ![ x^{\infty}](https://www.zhihu.com/equation?tex=+x%5E%7B%5Cinfty%7D) ，由Lemma

1可知 ![ x^{\infty}=\Sigma_{i=1}^{r+2s}k_{i}w_{i}^{\infty},k_{i}\in\mathbb{R}](https://www.zhihu.com/equation?tex=+x%5E%7B%5Cinfty%7D%3D%5CSigma_%7Bi%3D1%7D%5E%7Br%2B2s%7Dk_%7Bi%7Dw_%7Bi%7D%5E%7B%5Cinfty%7D%2Ck_%7Bi%7D%5Cin%5Cmathbb%7BR%7D) 。于是我们可以找到唯一的 ![b\in O](https://www.zhihu.com/equation?tex=b%5Cin+O) ，将 ![x](https://www.zhihu.com/equation?tex=x) 平移至 ![D](https://www.zhihu.com/equation?tex=D) 中。则有disjoint union：![\mathbb{A}=\cup_{a\in K}(a+D)](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D%3D%5Ccup_%7Ba%5Cin+K%7D%28a%2BD%29)

**![2.~\mathbb{I}^{1}~\text{and}~K^{\times}](https://www.zhihu.com/equation?tex=2.~%5Cmathbb%7BI%7D%5E%7B1%7D~%5Ctext%7Band%7D~K%5E%7B%5Ctimes%7D)**

首先定义 ![\mathbb{I}^{1}=\{x\in\mathbb{I}~|~|x|=\Pi_{v}|x_{v}|_{v}=1\}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%5E%7B1%7D%3D%5C%7Bx%5Cin%5Cmathbb%7BI%7D~%7C~%7Cx%7C%3D%5CPi_%7Bv%7D%7Cx_%7Bv%7D%7C_%7Bv%7D%3D1%5C%7D) ，注意到number field中**product formula**是说对于 ![x\in{K}^{\times}](https://www.zhihu.com/equation?tex=x%5Cin%7BK%7D%5E%7B%5Ctimes%7D) ， ![|x|=\Pi_{v}|x_{v}|_{v}=1](https://www.zhihu.com/equation?tex=%7Cx%7C%3D%5CPi_%7Bv%7D%7Cx_%7Bv%7D%7C_%7Bv%7D%3D1) ，（后面我们叙述Harr measure时会说明 ![|\cdot|](https://www.zhihu.com/equation?tex=%7C%5Ccdot%7C) 是一个module）于是有自然嵌入 ![{K}^{\times}\rightarrow\mathbb{I}^{1}](https://www.zhihu.com/equation?tex=%7BK%7D%5E%7B%5Ctimes%7D%5Crightarrow%5Cmathbb%7BI%7D%5E%7B1%7D) 。

***Remark. 这里我们可以解释为什么不考虑*****![\mathbb{I}/K^{\times}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%2FK%5E%7B%5Ctimes%7D) 而是 **![\mathbb{I}^{1}/K^{\times}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%5E%7B1%7D%2FK%5E%7B%5Ctimes%7D) ：![\mathbb{I}^{1}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%5E%7B1%7D) 可以看作满同态 ![\mathbb{I}\rightarrow\mathbb{R}_{>0},x\mapsto\Pi_{v}|x_{v}|_{v}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%5Crightarrow%5Cmathbb%7BR%7D_%7B%3E0%7D%2Cx%5Cmapsto%5CPi_%7Bv%7D%7Cx_%7Bv%7D%7C_%7Bv%7D) 的Kernel，而那么 ![\mathbb{I}/K^{\times}\rightarrow\mathbb{R}_{>0}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%2FK%5E%7B%5Ctimes%7D%5Crightarrow%5Cmathbb%7BR%7D_%7B%3E0%7D) 是surjective并且continuous的。因此，若 ![\mathbb{I}/K^{\times}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%2FK%5E%7B%5Ctimes%7D) 是compact的，那么 ![\mathbb{R}_{>0}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BR%7D_%7B%3E0%7D) 也是compact的（contradiction）。

其次，Idele到ideal group上有一个连续同态，![\varphi:\mathbb{I}\rightarrow I(K),x\mapsto\Pi_{v\notin S_{\infty}}v^{ord_{v}(x_{v})}](https://www.zhihu.com/equation?tex=%5Cvarphi%3A%5Cmathbb%7BI%7D%5Crightarrow+I%28K%29%2Cx%5Cmapsto%5CPi_%7Bv%5Cnotin+S_%7B%5Cinfty%7D%7Dv%5E%7Bord_%7Bv%7D%28x_%7Bv%7D%29%7D) 。注意到 ![\ker\varphi=\mathbb{I}_{S_{\infty}}](https://www.zhihu.com/equation?tex=%5Cker%5Cvarphi%3D%5Cmathbb%7BI%7D_%7BS_%7B%5Cinfty%7D%7D) 。

考虑 ![\mathbb{I}^{1}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%5E%7B1%7D) 的子群 ![\mathbb{I}^{1}_{S_{\infty}}=\{x\in\mathbb{I}~|~x_{v}\in O_{v}^{\times},v~\text{finite}\}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%5E%7B1%7D_%7BS_%7B%5Cinfty%7D%7D%3D%5C%7Bx%5Cin%5Cmathbb%7BI%7D~%7C~x_%7Bv%7D%5Cin+O_%7Bv%7D%5E%7B%5Ctimes%7D%2Cv~%5Ctext%7Bfinite%7D%5C%7D) ，注意到 ![\mathbb{I}^{1}_{S_{\infty}}\cap K^{\times}=U](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%5E%7B1%7D_%7BS_%7B%5Cinfty%7D%7D%5Ccap+K%5E%7B%5Ctimes%7D%3DU) ，这里 ![U](https://www.zhihu.com/equation?tex=U) 是单位群。

考虑同态 ![L:\mathbb{I}^{1}_{S_{\infty}}\rightarrow\mathbb{R}^{r+s},x\mapsto(\log|x_{1}|_{1},...,\log|x_{r+s}|_{r+s})](https://www.zhihu.com/equation?tex=L%3A%5Cmathbb%7BI%7D%5E%7B1%7D_%7BS_%7B%5Cinfty%7D%7D%5Crightarrow%5Cmathbb%7BR%7D%5E%7Br%2Bs%7D%2Cx%5Cmapsto%28%5Clog%7Cx_%7B1%7D%7C_%7B1%7D%2C...%2C%5Clog%7Cx_%7Br%2Bs%7D%7C_%7Br%2Bs%7D%29) ，

以及限制映射 ![L:U\rightarrow\mathbb{R}^{r+s},\alpha\mapsto(\log|\sigma_{1}\alpha|,...,\log|\sigma_{r+s}\alpha|)](https://www.zhihu.com/equation?tex=L%3AU%5Crightarrow%5Cmathbb%7BR%7D%5E%7Br%2Bs%7D%2C%5Calpha%5Cmapsto%28%5Clog%7C%5Csigma_%7B1%7D%5Calpha%7C%2C...%2C%5Clog%7C%5Csigma_%7Br%2Bs%7D%5Calpha%7C%29) ，注意到对于 ![u\in U](https://www.zhihu.com/equation?tex=u%5Cin+U) ，有 ![\text{Nm}(u)=\Pi_{\sigma}\sigma u=1](https://www.zhihu.com/equation?tex=%5Ctext%7BNm%7D%28u%29%3D%5CPi_%7B%5Csigma%7D%5Csigma+u%3D1) ，于是 ![|\sigma_{1}\alpha||\sigma_{2}\alpha|...|\sigma_{r}\alpha||\sigma_{r+1}\alpha|^{2}...|\sigma_{r+s}\alpha|^{2}=1](https://www.zhihu.com/equation?tex=%7C%5Csigma_%7B1%7D%5Calpha%7C%7C%5Csigma_%7B2%7D%5Calpha%7C...%7C%5Csigma_%7Br%7D%5Calpha%7C%7C%5Csigma_%7Br%2B1%7D%5Calpha%7C%5E%7B2%7D...%7C%5Csigma_%7Br%2Bs%7D%5Calpha%7C%5E%7B2%7D%3D1) 。取对数后，得到 ![\text{image}(L)\subset H:x_{1}+x_{2}+...+x_{r}+2x_{r+1}+...+2x_{r+s}=0](https://www.zhihu.com/equation?tex=%5Ctext%7Bimage%7D%28L%29%5Csubset+H%3Ax_%7B1%7D%2Bx_%7B2%7D%2B...%2Bx_%7Br%7D%2B2x_%7Br%2B1%7D%2B...%2B2x_%7Br%2Bs%7D%3D0) ，而 ![H\simeq\mathbb{R}^{r+s-1}](https://www.zhihu.com/equation?tex=H%5Csimeq%5Cmathbb%7BR%7D%5E%7Br%2Bs-1%7D) 。

***Lemma 3.***![L:U\rightarrow\mathbb{R}^{r+s-1}](https://www.zhihu.com/equation?tex=L%3AU%5Crightarrow%5Cmathbb%7BR%7D%5E%7Br%2Bs-1%7D) ， ![\text{image}(L)](https://www.zhihu.com/equation?tex=%5Ctext%7Bimage%7D%28L%29) 是 ![H](https://www.zhihu.com/equation?tex=H) 中的full lattice， ![\ker(L)\simeq\mu(K)](https://www.zhihu.com/equation?tex=%5Cker%28L%29%5Csimeq%5Cmu%28K%29) 是有限群。（即Dirichlet 单位定理）

有了上述引理，我们就可以定义fundamental domain：假设 ![\varepsilon_{1},...,\varepsilon_{n}](https://www.zhihu.com/equation?tex=%5Cvarepsilon_%7B1%7D%2C...%2C%5Cvarepsilon_%7Bn%7D) 是 ![U/\mu(K)](https://www.zhihu.com/equation?tex=U%2F%5Cmu%28K%29) 的minimum generating set，那么 ![L(\varepsilon_{1}),...,L(\varepsilon_{n})](https://www.zhihu.com/equation?tex=L%28%5Cvarepsilon_%7B1%7D%29%2C...%2CL%28%5Cvarepsilon_%7Bn%7D%29) 是lattice ![\text{image}(L)](https://www.zhihu.com/equation?tex=%5Ctext%7Bimage%7D%28L%29) 的基，于是我们可以在 ![\mathbb{R}^{r+s-1}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BR%7D%5E%7Br%2Bs-1%7D) 中定义fundamental parallelotope，![P=\{\Sigma t_{i}L(\varepsilon_{i})~|~0\leq t_{i}<1\}](https://www.zhihu.com/equation?tex=P%3D%5C%7B%5CSigma+t_%7Bi%7DL%28%5Cvarepsilon_%7Bi%7D%29~%7C~0%5Cleq+t_%7Bi%7D%3C1%5C%7D) 。再定义 ![E_{0}=\{x\in L^{-1}(P)~|~0\leq\arg x_{v}<2\pi/w,v\in S_{\infty}\}](https://www.zhihu.com/equation?tex=E_%7B0%7D%3D%5C%7Bx%5Cin+L%5E%7B-1%7D%28P%29~%7C~0%5Cleq%5Carg+x_%7Bv%7D%3C2%5Cpi%2Fw%2Cv%5Cin+S_%7B%5Cinfty%7D%5C%7D) ，这里 ![w](https://www.zhihu.com/equation?tex=w) 是单位根的个数。设 ![h](https://www.zhihu.com/equation?tex=h) 是class number， ![b_{1},...,b_{h}\in\mathbb{I}^{1}](https://www.zhihu.com/equation?tex=b_%7B1%7D%2C...%2Cb_%7Bh%7D%5Cin%5Cmathbb%7BI%7D%5E%7B1%7D) 且 ![\varphi(b_{i})](https://www.zhihu.com/equation?tex=%5Cvarphi%28b_%7Bi%7D%29) 是不同的ideal class。定义fundamental domain， ![E=\cup_{i=1}^{h}E_{0}b_{i}](https://www.zhihu.com/equation?tex=E%3D%5Ccup_%7Bi%3D1%7D%5E%7Bh%7DE_%7B0%7Db_%7Bi%7D) 。

- **Main result 2.  **![E](https://www.zhihu.com/equation?tex=E) 是 ![\mathbb{I}^{1}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%5E%7B1%7D) 的fundamental domain，有disjoint union ![\mathbb{I}^{1}=\cup_{\alpha\in K^{\times}}\alpha E](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%5E%7B1%7D%3D%5Ccup_%7B%5Calpha%5Cin+K%5E%7B%5Ctimes%7D%7D%5Calpha+E) 。

**Proof. **第一步和lemma 1类似，任取 ![b\in\mathbb{I}^{1}](https://www.zhihu.com/equation?tex=b%5Cin%5Cmathbb%7BI%7D%5E%7B1%7D) ，由于 ![b](https://www.zhihu.com/equation?tex=b) 只有有限个finite places，在其中不为单位，所以可以找到 ![a\in K^{\times}](https://www.zhihu.com/equation?tex=a%5Cin+K%5E%7B%5Ctimes%7D) 使得 ![ab\in\mathbb{I}_{S_{\infty}}^{1}](https://www.zhihu.com/equation?tex=ab%5Cin%5Cmathbb%7BI%7D_%7BS_%7B%5Cinfty%7D%7D%5E%7B1%7D) ，***并且这个 ![a](https://www.zhihu.com/equation?tex=a) 在 ![\text{mod}U](https://www.zhihu.com/equation?tex=%5Ctext%7Bmod%7DU) 意义下唯一。***

当 ![b\in\mathbb{I}^{1}_{S_{\infty}}](https://www.zhihu.com/equation?tex=b%5Cin%5Cmathbb%7BI%7D%5E%7B1%7D_%7BS_%7B%5Cinfty%7D%7D) 后，把它整到 ![P](https://www.zhihu.com/equation?tex=P) 中，而由lemma 3知道， ![L(b)=\Sigma_{i=1}^{n}t_{i}L(\varepsilon_{i}),t_{i}\in\mathbb{R}](https://www.zhihu.com/equation?tex=L%28b%29%3D%5CSigma_%7Bi%3D1%7D%5E%7Bn%7Dt_%7Bi%7DL%28%5Cvarepsilon_%7Bi%7D%29%2Ct_%7Bi%7D%5Cin%5Cmathbb%7BR%7D) ，那么可找到***在 ![\text{mod}\mu(K)](https://www.zhihu.com/equation?tex=%5Ctext%7Bmod%7D%5Cmu%28K%29) 下唯一的***![a\in U](https://www.zhihu.com/equation?tex=a%5Cin+U) ，使得 ![L(ab)=L(a)+L(b)\in P](https://www.zhihu.com/equation?tex=L%28ab%29%3DL%28a%29%2BL%28b%29%5Cin+P) 。

最后，当 ![L(b)\in P](https://www.zhihu.com/equation?tex=L%28b%29%5Cin+P) ，为了让无穷素点分量的辐角在 ![0\leq\arg x_{v}<2\pi/w](https://www.zhihu.com/equation?tex=0%5Cleq%5Carg+x_%7Bv%7D%3C2%5Cpi%2Fw) ，找到唯一的 ![u\in\mu(K)](https://www.zhihu.com/equation?tex=u%5Cin%5Cmu%28K%29) 乘 ![b](https://www.zhihu.com/equation?tex=b) 即可。

![3.~\text{topology property}](https://www.zhihu.com/equation?tex=3.~%5Ctext%7Btopology+property%7D)
- **Main result 3.**![K](https://www.zhihu.com/equation?tex=K) 在 ![\mathbb{A}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D) 离散， ![K^{\times}](https://www.zhihu.com/equation?tex=K%5E%7B%5Ctimes%7D) 在 ![\mathbb{I}^{1}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%5E%7B1%7D) 中离散。

只用证明 ![0\in K](https://www.zhihu.com/equation?tex=0%5Cin+K) ， ![1\in K^{\times}](https://www.zhihu.com/equation?tex=1%5Cin+K%5E%7B%5Ctimes%7D) 在分别诱导的拓扑下为开集。可参考以下page 166：
[CFT J.S. Milne​www.jmilne.org](https://link.zhihu.com/?target=http%3A//www.jmilne.org/math/CourseNotes/cft.html)
为了证明 ![\mathbb{A}_{K}/K,\mathbb{I}_{K}^{1}/K^{\times}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D_%7BK%7D%2FK%2C%5Cmathbb%7BI%7D_%7BK%7D%5E%7B1%7D%2FK%5E%7B%5Ctimes%7D) 的紧性，我们需要下面几个基本的拓扑群的引理。

***Lemma 4.***![f:X\rightarrow Y](https://www.zhihu.com/equation?tex=f%3AX%5Crightarrow+Y) 是拓扑空间的满连续映射，若 ![X](https://www.zhihu.com/equation?tex=X) 紧， ![Y](https://www.zhihu.com/equation?tex=Y) Hausdorff，则 ![Y](https://www.zhihu.com/equation?tex=Y) 也紧。

***Lemma 5.***![G ](https://www.zhihu.com/equation?tex=G+) 是拓扑群， ![H](https://www.zhihu.com/equation?tex=H) 是其子群， ![G/H](https://www.zhihu.com/equation?tex=G%2FH) 赋予商拓扑，那么：
（1） ![H](https://www.zhihu.com/equation?tex=H) 开 ![\Leftrightarrow](https://www.zhihu.com/equation?tex=%5CLeftrightarrow)![G/H](https://www.zhihu.com/equation?tex=G%2FH) 离散

（2） ![H](https://www.zhihu.com/equation?tex=H) 闭 ![\Leftrightarrow](https://www.zhihu.com/equation?tex=%5CLeftrightarrow)![G/H](https://www.zhihu.com/equation?tex=G%2FH) Hausdorff

***Lemma 6.*** Hausdorff 空间的离散子空间是闭子空间。
- **Main result 4.**![\mathbb{A}/K,\mathbb{I}^{1}/K^{\times}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D%2FK%2C%5Cmathbb%7BI%7D%5E%7B1%7D%2FK%5E%7B%5Ctimes%7D) 是紧的。

**Proof.**![D+K=\mathbb{A} ](https://www.zhihu.com/equation?tex=D%2BK%3D%5Cmathbb%7BA%7D+) ，并且容易知道 ![D](https://www.zhihu.com/equation?tex=D) 在 ![\mathbb{A}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D) 中的闭包 ![\overline{D}](https://www.zhihu.com/equation?tex=%5Coverline%7BD%7D) 是紧的。由于 ![K](https://www.zhihu.com/equation?tex=K) 在 ![\mathbb{A}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D) 中离散，并且 ![\mathbb{A}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D) 是Hausdorff的，那么由Lemma 6可知 ![K](https://www.zhihu.com/equation?tex=K) 在 ![\mathbb{A}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D) 中闭，由lemma 5， ![\mathbb{A}/K](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D%2FK) 是Hausdorff的，再考虑连续满同态 ![\overline{D}\rightarrow\mathbb{A}/K](https://www.zhihu.com/equation?tex=%5Coverline%7BD%7D%5Crightarrow%5Cmathbb%7BA%7D%2FK) ，利用lemma 4即可知 ![\mathbb{A}/K](https://www.zhihu.com/equation?tex=%5Cmathbb%7BA%7D%2FK) 紧。

Main result 2说明 ![K^{\times}E=\mathbb{I}^{1}](https://www.zhihu.com/equation?tex=K%5E%7B%5Ctimes%7DE%3D%5Cmathbb%7BI%7D%5E%7B1%7D) ，与上述证明类似： ![E](https://www.zhihu.com/equation?tex=E) 在 ![\mathbb{I}^{1}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%5E%7B1%7D) 中的闭包 ![\overline{E}](https://www.zhihu.com/equation?tex=%5Coverline%7BE%7D) 是紧的， ![E](https://www.zhihu.com/equation?tex=E) 在 ![\mathbb{I}^{1}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%5E%7B1%7D) 中离散；![\mathbb{I}^{1}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%5E%7B1%7D) Hausdorff，Lemma 6，Lemma 5 ![\Rightarrow](https://www.zhihu.com/equation?tex=%5CRightarrow)![\mathbb{I}^{1}/K^{\times}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%5E%7B1%7D%2FK%5E%7B%5Ctimes%7D) Hausdorff；考虑连续满同态 ![\overline{E}\rightarrow\mathbb{I}^{1}/K^{\times}](https://www.zhihu.com/equation?tex=%5Coverline%7BE%7D%5Crightarrow%5Cmathbb%7BI%7D%5E%7B1%7D%2FK%5E%7B%5Ctimes%7D) ，Lemma 4 ![\Rightarrow](https://www.zhihu.com/equation?tex=%5CRightarrow)![\mathbb{I}^{1}/K^{\times}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D%5E%7B1%7D%2FK%5E%7B%5Ctimes%7D) 紧。

**（四）Idele class group, ideal class group and Ray class group**

定义 ![K](https://www.zhihu.com/equation?tex=K) 的idele class group为 ![C_{K}=\mathbb{I}_{K}/K^{\times}](https://www.zhihu.com/equation?tex=C_%7BK%7D%3D%5Cmathbb%7BI%7D_%7BK%7D%2FK%5E%7B%5Ctimes%7D) 。我们要把理想类群用idele class group以特定形式表示出来，这样一来就具有拓扑结构，比如我们可以证明上面具有紧且离散的拓扑，那么它就是有限的，自然就得到了类数有限这个定理。

理想类群 ![Cl(K)](https://www.zhihu.com/equation?tex=Cl%28K%29) 的初始定义为：分式理想 ![I(K)](https://www.zhihu.com/equation?tex=I%28K%29) /主分式理想 ![P(K)](https://www.zhihu.com/equation?tex=P%28K%29) ，而主分式理想实际上是 ![K^{\times}](https://www.zhihu.com/equation?tex=K%5E%7B%5Ctimes%7D) 嵌入到分式理想 ![I(K)](https://www.zhihu.com/equation?tex=I%28K%29) 中的像。于是 ![Cl(K)=\text{Coker}(K^{\times}\rightarrow I(K))](https://www.zhihu.com/equation?tex=Cl%28K%29%3D%5Ctext%7BCoker%7D%28K%5E%7B%5Ctimes%7D%5Crightarrow+I%28K%29%29) 。

现在把它和idele class group联系到一起，这只需要下面的一些观察：

（1） ![I(K) ](https://www.zhihu.com/equation?tex=I%28K%29+) 是 ![K](https://www.zhihu.com/equation?tex=K) 的有限素点上的自由Abel群，于是 ![I(K)\simeq\bigoplus_{v\notin S_{\infty}}\mathbb{Z}\simeq\bigoplus_{v\notin S_{\infty}}K_{v}^{\times}/O_{v}^{\times}](https://www.zhihu.com/equation?tex=I%28K%29%5Csimeq%5Cbigoplus_%7Bv%5Cnotin+S_%7B%5Cinfty%7D%7D%5Cmathbb%7BZ%7D%5Csimeq%5Cbigoplus_%7Bv%5Cnotin+S_%7B%5Cinfty%7D%7DK_%7Bv%7D%5E%7B%5Ctimes%7D%2FO_%7Bv%7D%5E%7B%5Ctimes%7D) ，这里 ![S_{\infty}](https://www.zhihu.com/equation?tex=S_%7B%5Cinfty%7D) 代表 ![K](https://www.zhihu.com/equation?tex=K) 的所有无限素点。后面那个同构通过由 ![\text{ord}_{v}:K_{v}^{\times}\rightarrow\mathbb{Z}](https://www.zhihu.com/equation?tex=%5Ctext%7Bord%7D_%7Bv%7D%3AK_%7Bv%7D%5E%7B%5Ctimes%7D%5Crightarrow%5Cmathbb%7BZ%7D) 得到。

（2） ![\bigoplus_{v\notin S_{\infty}}K_{v}^{\times}/O_{v}^{\times}\simeq\mathbb{I}_{K}/\mathbb{I}_{K,S_{\infty}}](https://www.zhihu.com/equation?tex=%5Cbigoplus_%7Bv%5Cnotin+S_%7B%5Cinfty%7D%7DK_%7Bv%7D%5E%7B%5Ctimes%7D%2FO_%7Bv%7D%5E%7B%5Ctimes%7D%5Csimeq%5Cmathbb%7BI%7D_%7BK%7D%2F%5Cmathbb%7BI%7D_%7BK%2CS_%7B%5Cinfty%7D%7D) ,这里 ![\mathbb{I}_{K,S_{\infty}}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D_%7BK%2CS_%7B%5Cinfty%7D%7D) 即 ![S_{\infty}-class](https://www.zhihu.com/equation?tex=S_%7B%5Cinfty%7D-class) ： ![\mathbb{I}_{K,S_{\infty}}=\prod_{v\in S_{\infty}}K_{v}^{\times}\times\prod_{v\notin S_{\infty}}O_{v}^{\times}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D_%7BK%2CS_%7B%5Cinfty%7D%7D%3D%5Cprod_%7Bv%5Cin+S_%7B%5Cinfty%7D%7DK_%7Bv%7D%5E%7B%5Ctimes%7D%5Ctimes%5Cprod_%7Bv%5Cnotin+S_%7B%5Cinfty%7D%7DO_%7Bv%7D%5E%7B%5Ctimes%7D) 。这个同构可以由映射 ![\mathbb{I}_{K}\rightarrow\bigoplus_{v\notin S_{\infty}}K_{v}^{\times}/O_{v}^{\times}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D_%7BK%7D%5Crightarrow%5Cbigoplus_%7Bv%5Cnotin+S_%7B%5Cinfty%7D%7DK_%7Bv%7D%5E%7B%5Ctimes%7D%2FO_%7Bv%7D%5E%7B%5Ctimes%7D) 得到（显然其 ![\text{kernel}](https://www.zhihu.com/equation?tex=%5Ctext%7Bkernel%7D) 等于 ![\mathbb{I}_{K,S_{\infty}}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D_%7BK%2CS_%7B%5Cinfty%7D%7D) ）。

于是我们得到 ![Cl(K)=\text{Coker}(K^{\times}\rightarrow \mathbb{I}_{K}/\mathbb{I}_{K,S_{\infty}})](https://www.zhihu.com/equation?tex=Cl%28K%29%3D%5Ctext%7BCoker%7D%28K%5E%7B%5Ctimes%7D%5Crightarrow+%5Cmathbb%7BI%7D_%7BK%7D%2F%5Cmathbb%7BI%7D_%7BK%2CS_%7B%5Cinfty%7D%7D%29) ，**注意到**![\mathbb{I}_{K}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D_%7BK%7D)**先mod掉谁都是一样的**，那么我们就有 ![Cl(K)=C_{K}/\overline{\mathbb{I}_{K,S_{\infty}}}](https://www.zhihu.com/equation?tex=Cl%28K%29%3DC_%7BK%7D%2F%5Coverline%7B%5Cmathbb%7BI%7D_%7BK%2CS_%7B%5Cinfty%7D%7D%7D) ，这里 ![\overline{\mathbb{I}_{K,S_{\infty}}}](https://www.zhihu.com/equation?tex=%5Coverline%7B%5Cmathbb%7BI%7D_%7BK%2CS_%7B%5Cinfty%7D%7D%7D) 是 ![\mathbb{I}_{K,S_{\infty}}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BI%7D_%7BK%2CS_%7B%5Cinfty%7D%7D) 在 ![C_{K}](https://www.zhihu.com/equation?tex=C_%7BK%7D) 中的像。

这也就是说，一旦我们可以证明 ![C_{K}/\overline{\mathbb{I}_{K,S_{\infty}}}](https://www.zhihu.com/equation?tex=C_%7BK%7D%2F%5Coverline%7B%5Cmathbb%7BI%7D_%7BK%2CS_%7B%5Cinfty%7D%7D%7D) 是紧且离散的，那么类数就是有限。所以我们就**可以把目光放在 ![C_{K}](https://www.zhihu.com/equation?tex=C_%7BK%7D) 及其相关的一些子群、商群的拓扑性质上面**。（这些证明放在以后）

Ray class group是代数数论中另一个很重要的群。这里仅仅粗略的说一下原因，**素理想在扩域 ![L/K](https://www.zhihu.com/equation?tex=L%2FK)** （class field theory只考虑abelian extension）**中的分解情况可以被Galois群 ![\text{Gal}(L/K)](https://www.zhihu.com/equation?tex=%5Ctext%7BGal%7D%28L%2FK%29) 反映出来**（参见：[素理想在扩域中的分解(1)](https://zhuanlan.zhihu.com/p/34751197)）。一个很重要的例子是 ![\mathbb{Q}](https://www.zhihu.com/equation?tex=%5Cmathbb%7BQ%7D) 的Abel扩张，Kronecker定理是说有理数域的任一个abelian extension都包含在某个分圆域里面。而对于分圆域，素理想怎么分解的是相对“清晰”的，也就下面的定理：

**定理. **若 ![p](https://www.zhihu.com/equation?tex=p) 是不整除![N](https://www.zhihu.com/equation?tex=N)的素数，则 ![p](https://www.zhihu.com/equation?tex=p) 在 ![L=\mathbb{Q}(\zeta_{N})](https://www.zhihu.com/equation?tex=L%3D%5Cmathbb%7BQ%7D%28%5Czeta_%7BN%7D%29) 中非分歧。若 ![p](https://www.zhihu.com/equation?tex=p) 在![\text{Gal}(L/\mathbb{Q})\simeq(\mathbb{Z}/N\mathbb{Z})^{\times}](https://www.zhihu.com/equation?tex=%5Ctext%7BGal%7D%28L%2F%5Cmathbb%7BQ%7D%29%5Csimeq%28%5Cmathbb%7BZ%7D%2FN%5Cmathbb%7BZ%7D%29%5E%7B%5Ctimes%7D) 的阶为 ![f](https://www.zhihu.com/equation?tex=f) ，那么 ![p](https://www.zhihu.com/equation?tex=p) 在 ![\mathbb{Q}(\zeta_{N})](https://www.zhihu.com/equation?tex=%5Cmathbb%7BQ%7D%28%5Czeta_%7BN%7D%29) 分解为 ![\varphi(n)/f](https://www.zhihu.com/equation?tex=%5Cvarphi%28n%29%2Ff) 个素理想。

***在这里，相对而言比较“invisible”的Galois group变成 ![(\mathbb{Z}/N\mathbb{Z})^{\times}](https://www.zhihu.com/equation?tex=%28%5Cmathbb%7BZ%7D%2FN%5Cmathbb%7BZ%7D%29%5E%7B%5Ctimes%7D) 就“visible”了***。这样一来 ![p](https://www.zhihu.com/equation?tex=p) 怎么分解就是由 ![p~\text{mod}~N](https://www.zhihu.com/equation?tex=p~%5Ctext%7Bmod%7D~N) 决定的，也就是说***我们用一个“看的见”的群去反映了素理想在扩域怎么分解***。然而后面会说明 ![(\mathbb{Z}/N\mathbb{Z})^{\times}](https://www.zhihu.com/equation?tex=%28%5Cmathbb%7BZ%7D%2FN%5Cmathbb%7BZ%7D%29%5E%7B%5Ctimes%7D) 是一个Ray class group，***也就是说Ray class group相对Galois group更加“visible”*。**而class field theory（数域的）在一定程度上就是要用“看的见”的idele class group（Ray class group）在某种意义下去反映Galois group，进而像上面的定理那样去反映素理想在扩域怎么分解。

Ray class group一个比较自然的定义是，给定某个理想 ![\mathfrak{m}](https://www.zhihu.com/equation?tex=%5Cmathfrak%7Bm%7D) ，让理想类群满足其元素和 ![\mathfrak{m}](https://www.zhihu.com/equation?tex=%5Cmathfrak%7Bm%7D) 互素。（还要加一个totally positive，后面说明）为了达到这个目的，定义新的分式理想：

![I(\mathfrak{m})=\{\mathfrak{a}~\text{fractional ideal}|\mathfrak{a}=\mathfrak{b}\mathfrak{c}^{-1}~\text{and}~\mathfrak{b},\mathfrak{c}~\text{are integral ideals that coprime to}~\mathfrak{m}\} ](https://www.zhihu.com/equation?tex=I%28%5Cmathfrak%7Bm%7D%29%3D%5C%7B%5Cmathfrak%7Ba%7D~%5Ctext%7Bfractional+ideal%7D%7C%5Cmathfrak%7Ba%7D%3D%5Cmathfrak%7Bb%7D%5Cmathfrak%7Bc%7D%5E%7B-1%7D~%5Ctext%7Band%7D~%5Cmathfrak%7Bb%7D%2C%5Cmathfrak%7Bc%7D~%5Ctext%7Bare+integral+ideals+that+coprime+to%7D~%5Cmathfrak%7Bm%7D%5C%7D+)

以及新的主分式理想：

![P(\mathfrak{m})=\{(\alpha)|\alpha=bc^{-1},\text{nonzero}~b,c\in\ O_{K}~\text{and coprime to}~\mathfrak{m},b\equiv c~\text{mod}~\mathfrak{m},\alpha~\text{is totally positive}\} ](https://www.zhihu.com/equation?tex=P%28%5Cmathfrak%7Bm%7D%29%3D%5C%7B%28%5Calpha%29%7C%5Calpha%3Dbc%5E%7B-1%7D%2C%5Ctext%7Bnonzero%7D~b%2Cc%5Cin%5C+O_%7BK%7D~%5Ctext%7Band+coprime+to%7D~%5Cmathfrak%7Bm%7D%2Cb%5Cequiv+c~%5Ctext%7Bmod%7D~%5Cmathfrak%7Bm%7D%2C%5Calpha~%5Ctext%7Bis+totally+positive%7D%5C%7D+)

这里totally positive的意思是在每个实素点下为正。现在定义关于 ![\mathfrak{m}](https://www.zhihu.com/equation?tex=%5Cmathfrak%7Bm%7D) 的Ray class group：

![Cl(K,\mathfrak{m})=I(\mathfrak{m})/P(\mathfrak{m})](https://www.zhihu.com/equation?tex=Cl%28K%2C%5Cmathfrak%7Bm%7D%29%3DI%28%5Cmathfrak%7Bm%7D%29%2FP%28%5Cmathfrak%7Bm%7D%29)。现在我们把它和idele group联系在一起：

（1）首先**像在理想类群做的那样，把 ![P(\mathfrak{m})](https://www.zhihu.com/equation?tex=P%28%5Cmathfrak%7Bm%7D%29) 写成 ![K^{\times}](https://www.zhihu.com/equation?tex=K%5E%7B%5Ctimes%7D) 的某个子群在 ![I(\mathfrak{m})](https://www.zhihu.com/equation?tex=I%28%5Cmathfrak%7Bm%7D%29) 中的像**，这个子群正是： ![\text{Ker}(K^{\times}\rightarrow\bigoplus_{v\in S}K_{v}^{\times}/U_{v}(\mathfrak{m}))](https://www.zhihu.com/equation?tex=%5Ctext%7BKer%7D%28K%5E%7B%5Ctimes%7D%5Crightarrow%5Cbigoplus_%7Bv%5Cin+S%7DK_%7Bv%7D%5E%7B%5Ctimes%7D%2FU_%7Bv%7D%28%5Cmathfrak%7Bm%7D%29%29) ，这里 ![S](https://www.zhihu.com/equation?tex=S) 是整除 ![\mathfrak{m}](https://www.zhihu.com/equation?tex=%5Cmathfrak%7Bm%7D) 的有限素点和 ![K](https://www.zhihu.com/equation?tex=K) 的无限素点构成的集合；如果 ![v](https://www.zhihu.com/equation?tex=v) 是有限素点并且在 ![S](https://www.zhihu.com/equation?tex=S) 中，则 ![U_{v}(\mathfrak{m})](https://www.zhihu.com/equation?tex=U_%7Bv%7D%28%5Cmathfrak%7Bm%7D%29) 定义为 ![\text{Ker}(O_{v}^{\times}\rightarrow(O_{v}/\mathfrak{m}O_{v})^{\times})](https://www.zhihu.com/equation?tex=%5Ctext%7BKer%7D%28O_%7Bv%7D%5E%7B%5Ctimes%7D%5Crightarrow%28O_%7Bv%7D%2F%5Cmathfrak%7Bm%7DO_%7Bv%7D%29%5E%7B%5Ctimes%7D%29) ；若 ![v](https://www.zhihu.com/equation?tex=v) 是有限素点但不在 ![S](https://www.zhihu.com/equation?tex=S) 中，则定义为 ![O_{v}](https://www.zhihu.com/equation?tex=O_%7Bv%7D) ；如果 ![v](https://www.zhihu.com/equation?tex=v) 是复素点，则定义为 ![K_{v}^{\times}](https://www.zhihu.com/equation?tex=K_%7Bv%7D%5E%7B%5Ctimes%7D) ；如果 ![v](https://www.zhihu.com/equation?tex=v) 是实素点， 则定义为 ![K^{\times}_{v}](https://www.zhihu.com/equation?tex=K%5E%7B%5Ctimes%7D_%7Bv%7D) 中的正元。并且 ![U(\mathfrak{m})=\bigoplus_{v} U_{v}(\mathfrak{m})](https://www.zhihu.com/equation?tex=U%28%5Cmathfrak%7Bm%7D%29%3D%5Cbigoplus_%7Bv%7D+U_%7Bv%7D%28%5Cmathfrak%7Bm%7D%29) 。这个写法很自然——它把“totally positive”和“与 ![\mathfrak{m}](https://www.zhihu.com/equation?tex=%5Cmathfrak%7Bm%7D) 互素”的局部体现表示了出来。**我们考虑下面这个定义，和理想类群类似： ![\text{Coker}(K^{\times}\rightarrow\mathbb{I}_{K}/{U(\mathfrak{m})})=C_{K}/\overline{U(\mathfrak{m})}](https://www.zhihu.com/equation?tex=%5Ctext%7BCoker%7D%28K%5E%7B%5Ctimes%7D%5Crightarrow%5Cmathbb%7BI%7D_%7BK%7D%2F%7BU%28%5Cmathfrak%7Bm%7D%29%7D%29%3DC_%7BK%7D%2F%5Coverline%7BU%28%5Cmathfrak%7Bm%7D%29%7D)**

（2） ![I(\mathfrak{m})](https://www.zhihu.com/equation?tex=I%28%5Cmathfrak%7Bm%7D%29) 是 ![v\notin S](https://www.zhihu.com/equation?tex=v%5Cnotin+S) 上的自由Abel群，即 ![I(\mathfrak{m})\simeq\bigoplus_{v\notin S}\mathbb{Z}\simeq\bigoplus_{v\notin S}K_{v}^{\times}/U_{v}(\mathfrak{m})](https://www.zhihu.com/equation?tex=I%28%5Cmathfrak%7Bm%7D%29%5Csimeq%5Cbigoplus_%7Bv%5Cnotin+S%7D%5Cmathbb%7BZ%7D%5Csimeq%5Cbigoplus_%7Bv%5Cnotin+S%7DK_%7Bv%7D%5E%7B%5Ctimes%7D%2FU_%7Bv%7D%28%5Cmathfrak%7Bm%7D%29) ，后面的同构是因为当 ![v](https://www.zhihu.com/equation?tex=v) 不属于 ![S](https://www.zhihu.com/equation?tex=S) 时， ![U_{v}(\mathfrak{m})=O_{v}^{\times} ](https://www.zhihu.com/equation?tex=U_%7Bv%7D%28%5Cmathfrak%7Bm%7D%29%3DO_%7Bv%7D%5E%7B%5Ctimes%7D+) ，再次由 ![\text{ord}_{v}:K_{v}^{\times}\rightarrow\mathbb{Z}](https://www.zhihu.com/equation?tex=%5Ctext%7Bord%7D_%7Bv%7D%3AK_%7Bv%7D%5E%7B%5Ctimes%7D%5Crightarrow%5Cmathbb%7BZ%7D) 得到。那么一开始的定义 ：![Cl(K,\mathfrak{m})=I(\mathfrak{m})/P(\mathfrak{m})=\text{Coker}(\text{Ker}(K^{\times}\rightarrow\bigoplus_{v\in S}K_{v}^{\times}/U_{v}(\mathfrak{m}))\rightarrow\bigoplus_{v\notin S}K_{v}^{\times}/U_{v}(\mathfrak{m}))](https://www.zhihu.com/equation?tex=Cl%28K%2C%5Cmathfrak%7Bm%7D%29%3DI%28%5Cmathfrak%7Bm%7D%29%2FP%28%5Cmathfrak%7Bm%7D%29%3D%5Ctext%7BCoker%7D%28%5Ctext%7BKer%7D%28K%5E%7B%5Ctimes%7D%5Crightarrow%5Cbigoplus_%7Bv%5Cin+S%7DK_%7Bv%7D%5E%7B%5Ctimes%7D%2FU_%7Bv%7D%28%5Cmathfrak%7Bm%7D%29%29%5Crightarrow%5Cbigoplus_%7Bv%5Cnotin+S%7DK_%7Bv%7D%5E%7B%5Ctimes%7D%2FU_%7Bv%7D%28%5Cmathfrak%7Bm%7D%29%29) 。

（3）我们要说明两种定义等价的：

![\text{Coker}(\text{Ker}(K^{\times}\rightarrow\bigoplus_{v\in S}K_{v}^{\times}/U_{v}(\mathfrak{m}))\rightarrow\bigoplus_{v\notin S}K_{v}^{\times}/U_{v}(\mathfrak{m}))\simeq\text{Coker}(K^{\times}\rightarrow\mathbb{I}_{K}/{U(\mathfrak{m})=\bigoplus_{v}K_{v}^{\times}/U_{v}(\mathfrak{m}}))](https://www.zhihu.com/equation?tex=%5Ctext%7BCoker%7D%28%5Ctext%7BKer%7D%28K%5E%7B%5Ctimes%7D%5Crightarrow%5Cbigoplus_%7Bv%5Cin+S%7DK_%7Bv%7D%5E%7B%5Ctimes%7D%2FU_%7Bv%7D%28%5Cmathfrak%7Bm%7D%29%29%5Crightarrow%5Cbigoplus_%7Bv%5Cnotin+S%7DK_%7Bv%7D%5E%7B%5Ctimes%7D%2FU_%7Bv%7D%28%5Cmathfrak%7Bm%7D%29%29%5Csimeq%5Ctext%7BCoker%7D%28K%5E%7B%5Ctimes%7D%5Crightarrow%5Cmathbb%7BI%7D_%7BK%7D%2F%7BU%28%5Cmathfrak%7Bm%7D%29%3D%5Cbigoplus_%7Bv%7DK_%7Bv%7D%5E%7B%5Ctimes%7D%2FU_%7Bv%7D%28%5Cmathfrak%7Bm%7D%7D%29%29)

这里简单的说一下证明思路：

把 ![K^{\times}](https://www.zhihu.com/equation?tex=K%5E%7B%5Ctimes%7D) 记成 ![G](https://www.zhihu.com/equation?tex=G) ， ![\bigoplus_{v\in S}K_{v}^{\times}/U_{v}(\mathfrak{m})](https://www.zhihu.com/equation?tex=%5Cbigoplus_%7Bv%5Cin+S%7DK_%7Bv%7D%5E%7B%5Ctimes%7D%2FU_%7Bv%7D%28%5Cmathfrak%7Bm%7D%29) 记成 ![H_{1}](https://www.zhihu.com/equation?tex=H_%7B1%7D) , ![\bigoplus_{v\notin S}K_{v}^{\times}/U_{v}(\mathfrak{m})](https://www.zhihu.com/equation?tex=%5Cbigoplus_%7Bv%5Cnotin+S%7DK_%7Bv%7D%5E%7B%5Ctimes%7D%2FU_%7Bv%7D%28%5Cmathfrak%7Bm%7D%29) 记成 ![H_{2}](https://www.zhihu.com/equation?tex=H_%7B2%7D) ；以及映射 ![f_{1}:G\rightarrow H_{1}](https://www.zhihu.com/equation?tex=f_%7B1%7D%3AG%5Crightarrow+H_%7B1%7D) ， ![f_{2}:G\rightarrow H_{2}](https://www.zhihu.com/equation?tex=f_%7B2%7D%3AG%5Crightarrow+H_%7B2%7D) ， ![h=f_{1}\oplus f_{2}:G\rightarrow H_{1}\bigoplus H_{2}](https://www.zhihu.com/equation?tex=h%3Df_%7B1%7D%5Coplus+f_%7B2%7D%3AG%5Crightarrow+H_%7B1%7D%5Cbigoplus+H_%7B2%7D) ， ![g:\text{Ker}f_{1}\rightarrow H_{2}](https://www.zhihu.com/equation?tex=g%3A%5Ctext%7BKer%7Df_%7B1%7D%5Crightarrow+H_%7B2%7D) 。那么也就是要证：

![\text{Coker}g=\text{Coker}h](https://www.zhihu.com/equation?tex=%5Ctext%7BCoker%7Dg%3D%5Ctext%7BCoker%7Dh) ，这里注意到两个事实：利用weak approximation可以说明 ![f_{1}](https://www.zhihu.com/equation?tex=f_%7B1%7D) 是满射；在 ![f_{1}](https://www.zhihu.com/equation?tex=f_%7B1%7D) 是满射时， ![\text{Coker}f_{2}=\text{Coker}h](https://www.zhihu.com/equation?tex=%5Ctext%7BCoker%7Df_%7B2%7D%3D%5Ctext%7BCoker%7Dh) 。然后画出交换图即可看出。

