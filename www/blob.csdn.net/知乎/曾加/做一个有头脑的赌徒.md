# 做一个有头脑的赌徒 - 知乎
# 

![](https://pic3.zhimg.com/7d91533960e0b114cd17a8a605785776_b.jpg)在我的一个回答 [学数学或物理学到 high 很刺激，是一种怎样的经历与感受？](http://www.zhihu.com/question/24710773/answer/28717232)中，提到了一道非常有意思的概率题：
**16个犯人，狱官让他们聚在一起，给每个人戴上一顶红色或蓝色的帽子。每个人都能看到另外15个人的帽子而看不见自己的帽子。已知他们每个人戴上红帽子和蓝帽子的概率均为1/2（注意：并非意味着恰有8顶红帽子）。随后，将16个犯人带到密室，分别审问。每一个犯人有两种选择：他可以猜自己头上帽子的颜色，也可以不猜。如果发生以下情况：*16个犯人中至少有一个人选择了猜并且所有猜的人都猜对了自己头上帽子的颜色*，16个犯人就可以全部被释放，否则就将他们全部处死。在给犯人们戴帽子之前，他们可以商讨方案，但在戴上帽子后不允许以任何方式作弊。请找到一种方案，使他们被释放的概率大于90%。**
![](https://pic4.zhimg.com/a9d4da320724c97ae7846ef146dd2413_b.jpg)
相信很多人看到这个问题，第一反应肯定是 “**这怎么可能？**”

确实，乍一看，这个问题非常“**反直觉**”。最令人奇怪的是，既然我不知道每种颜色帽子的总数，我又怎么可能看着别人帽子的颜色，来有依据地猜测自己帽子颜色呢？除了瞎猜，还有什么办法？既然是瞎猜，又怎么可能有90%以上的正确率？

        嗯，这确实是件诡异的事儿。

        在回答这个问题前，我们先来看一个很实际的问题：

**我想约一个暗恋的姑娘一起去看一场电影，这场电影的门票单价是80块钱，但我手里只有150块钱，而且除了电影院旁有一家赌场外，我没有其他任何赚钱的途径。**

**        问：我该不该进赌场试试手气？**
![](https://pic1.zhimg.com/13cec33794928803b8fdfb2be38beedc_b.jpg)
废话！看电影是小事，约妹子是大事啊！当然是义无反顾地冲进赌场了！

        问题在于，我有多大的把握约到妹子呢？

        先不管那么多啦！冲进赌场再说！……等等，为了展示我的魅力，把妹子一起带过来耍耍！别问我为什么那么冲动，哥就是这么叼！

        一眼望去，好像这个最好玩，就这个吧……

![](https://pic3.zhimg.com/ecaf6fb18fdd359310877aa0e68066b6_b.jpg)        这便是著名的轮盘赌了。一共有37个数字，1~36，还有一个0。如果滚珠滚进了0，那就庄家胜，其它的情况，你可以猜 奇数、偶数、1-18，19-36等等……反正以上投注方式，每种的赔率都是1赔2。我喜欢奇数，就投奇数吧。

        问题来了，我应该怎么下赌注呢？

        妹子深谙“**久赌必输**”的道理，她悄悄地告诉我：“要不，就赌一次吧！你赌一次，能有48.6%的机会能赢哦！”

        哇塞，妹子数学真不赖，竟然一下子就心算出18/37是多少了，果然是我喜欢的类型！

        但我岂是那种没有把握就去做事的人？哼，看我的！

        于是我制定了以下策略：

**1）至少赌1次，最多赌4次。一旦赢钱就撤！**

**        2）第1次下注10元，第2次下注20元，第3次下注40元，第4次下注80元。**

        嗯，除非我4次全输，否则我的150元就会变成160元！我有多大把握呢？

![P=1-\left( \frac{19}{37}  \right) ^{4}\approx ](https://www.zhihu.com/equation?tex=P%3D1-%5Cleft%28+%5Cfrac%7B19%7D%7B37%7D++%5Cright%29+%5E%7B4%7D%5Capprox+) 93.05%   **十拿九稳啊！我和妹子看电影的愿望可以实现啦！**

        嗯，问题来了？明明只有不到一半的赚钱率，我是怎么弄到93.05%的？

        相信聪明的你一下子就明白了——

**        为了这 93% 赚 10元钱 的机会，我可是要冒着 7% 亏损 150元 的风险啊！**

其实平均来讲，我的期望值是：

![E\approx [1-\left( \frac{18}{37}  \right)^{4}  ]\times 10+\left( \frac{18}{37}  \right)^{4}\times \left( -150 \right) \approx -1.126](https://www.zhihu.com/equation?tex=E%5Capprox+%5B1-%5Cleft%28+%5Cfrac%7B18%7D%7B37%7D++%5Cright%29%5E%7B4%7D++%5D%5Ctimes+10%2B%5Cleft%28+%5Cfrac%7B18%7D%7B37%7D++%5Cright%29%5E%7B4%7D%5Ctimes+%5Cleft%28+-150+%5Cright%29+%5Capprox+-1.126) 元  

        而我的平均投入是：

![\bar{M}=1 \times 10+ \frac{19}{37} \times 20+ \left( \frac{19}{37} \right)  ^{2} \times 40+\left( \frac{19}{37}  \right) ^{3}\times 80\approx 41.65](https://www.zhihu.com/equation?tex=%5Cbar%7BM%7D%3D1+%5Ctimes+10%2B+%5Cfrac%7B19%7D%7B37%7D+%5Ctimes+20%2B+%5Cleft%28+%5Cfrac%7B19%7D%7B37%7D+%5Cright%29++%5E%7B2%7D+%5Ctimes+40%2B%5Cleft%28+%5Cfrac%7B19%7D%7B37%7D++%5Cright%29+%5E%7B3%7D%5Ctimes+80%5Capprox+41.65) 元

        如果我一次性就赌那么多，那我的期望值是：

![E'\approx 41.65\times \left( \frac{18}{37}-\frac{19}{37}   \right)  \approx -1.126](https://www.zhihu.com/equation?tex=E%27%5Capprox+41.65%5Ctimes+%5Cleft%28+%5Cfrac%7B18%7D%7B37%7D-%5Cfrac%7B19%7D%7B37%7D+++%5Cright%29++%5Capprox+-1.126) 元

        咦？两个期望是一样的，是一个巧合吗？      

        当然不是！

**事实上，对于真正的概率一定随机事件，无论我们如何较劲，如何采取策略，我们都无法改变“期望”，但是采取一定的策略，是可以改变“概率”的。**

        回到原题，你是否有了一些想法呢？

        慢慢来，先考虑一个简化的问题：**假设只有3个人，怎么让释放概率变成 75%？**

        因为每个人猜对的可能性依然是50%，我们要达到更高的概率，只有把坏情况集中到一起去。比如，当犯人释放时，只有1个人选择猜并且猜对，而不幸被枪毙时，3个人一起去猜。这就叫：**苟延残喘地活，轰轰烈烈地死**。

        于是很快能想到一个很好地策略：

*当看到另两个人帽子颜色相同时，就猜另一种颜色，否则不猜。*

这样的话，只要3人的帽子颜色不全相同，就会有一个人猜而且猜对。注意到在总共![2^{3} ](https://www.zhihu.com/equation?tex=2%5E%7B3%7D+)=8种情况中，猜对了6次，释放的概率正是75%，但共有12人次选择了猜，猜对的概率也确实还是50%！因为，**猜对的****6次分布在6种不同的情况中，而猜错的6次却集中在了2****种情况中**。

        那拓展到16人的情况，该怎么解决呢？

        其实这道题还是有相当难度的。下面是我给出的其中一种正解：

**将16个人用二进制编号，并由此编上他们帽子的颜色，从0000到1111，然后在戴帽子时，每个人分别统计另15个人中戴红帽子和蓝帽子的号码总和，在求和时，做一种“不进位的二进制加法”，（即在某一位上，1+1=0，并且不进位，比如1011+1001=0010，其实本质就是“异或”操作）若算得红帽子的号码总和与自己的号码相同，就猜自己戴蓝帽子，若算得蓝帽子号码的总和与自己的号码相同，就猜自己戴红帽子，否则不猜。这样，他们存活的概率可以达到15/16，也即93.75%。下面来证明这一点：**

**在“不进位的二进制加法”下，16顶帽子的总和为0000，于是红帽子和蓝帽子的号码总和当是一样的。**

**1****）若红帽子和蓝帽子的号码总和均为0000（这种情况发生的概率为1/16，因为每一位加得为0的概率都是1/2，对别的位没有影响），那除了编上0000的人“不知所措”外，另外15个人都会选择猜，而且都会猜错，比如，编号为1001的人的人戴上了红帽子，他算得红帽子的总和为1001，蓝帽子的总和为0000，他会猜自己戴上了蓝帽子。**

**2****）若红帽子和蓝帽子的号码总和均不为0000，那只会有一个人选择猜，而且会猜对。如：红帽子和蓝帽子的号码总和均为0110，那么，编上0110的人若戴上红帽子，他算得红帽子的总和为0000，蓝帽子的总和为0110，他会猜自己戴红帽子，反之亦然。而别人都不会猜。**
**综上，在这种方案下，犯人们的释放概率达到了15/16，也就是93.75%！**

不知道你发现没，在情况1）中，编上0000的人会不知所措，那是因为他算得红帽子和蓝帽子的号码总和均为0000，其实，他这个时候该知道自己死期临近了。而如果他看到红帽子和蓝帽子的号码总和均不为0000，那他也可以兴奋地知道自己被释放了。

** 居然有一个人可以在随机事件中预知生死！**

**         ————这便是概率的魅力：有时候，它能让你变成能真正预知生死的巫师。**

（专栏处女作，文笔略羞涩，还请各位看官多多包涵）

