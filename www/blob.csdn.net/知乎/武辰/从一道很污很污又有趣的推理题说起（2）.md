# 从一道很污很污又有趣的推理题说起（2） - 知乎
# 

之前我发了一篇文章《从一道很污很污又有趣的推理题说起》，文章发布后短短三天内，在广大网友的共同努力下，问题得到了极大的进展。下界不断被刷新。目前最好的下界是1.5n。

该文章的链接是：
[武辰：从一道很污很污又有趣的推理题说起​zhuanlan.zhihu.com](https://zhuanlan.zhihu.com/p/35845018)
原题是：现在有n对男女，每个人都各自携带不同的性病，而且传染性都很强。如果每个男的对每个女的都发生性关系，最少需要多少个套套，才能使得他们不感染？

注：①允许套套多层叠加用，允许男的戴多层套套，且不会破烂（压住牛顿的棺材板），但不允许套套翻过来反着用；

②套套可以无限次使用；

③阴茎接触到其他男人的精液也会使得该男子感染其他男人的性病；

④只能异性之间发生性关系，暂时不考虑男男之间的关系。

在我发出这篇文章的三天内，下界不断被刷新，**从一开始的4*n²，到3n，到2n，到2n-1，到2n-2，到现在的1.5n个套套。**在此也非常感谢网友们贡献的智慧。

在思考上面的问题的过程中，我同时也思考了这个问题：

如果只有n个套套，那么最多可以完成多少次不同的交配？

这个问题可以说是原题的姊妹题。因此我新开一篇文章来讲述这个问题。这个问题就是本篇文章的主题。

咋一看，你可能会觉得，难道不是只能交配n次吗？我有n对男女（姑且称作n对情侣吧），且只有n个套套。算作每对情侣交配一次，n个套套只能交配n次呀！

不过，我们可以思考一下这样的情况：

首先还是先赋值：男性有n个，女性有n个，套套有n个。男1号与女1号配对成情侣，男2号与女2号配对成情侣……男n号与女n号配对成情侣。一共有n对情侣，每一对情侣有一个专属套套。

第一步：女n号手持她的专属套套在房间里等着，前n-1号男性先分别戴上自己的专属套套，然后轮流进那个房间里，进房间后第一件事就是再穿上女n号的专属套套，最后交配。

这一步共发生了n-1次有效交配。而且到最后，女n号的专属套套的内侧都是干净的。

第二步：男n号戴上男n号的专属套套（就是第一步的女n号的专属套套），然后前n-1号男性分别戴上自己的专属套套，然后与自己的对应的情侣交配。

这一步共发生了n次有效交配。

怎么样？是不是很神奇？

**n个套套竟然能产生2n-1次交配。**

且慢，还没完呢！

咱们加一个第三步，我们让后n-1号男性（也就是除了男1号）分别穿上自己的专属套套，然后再穿上女1号的专属套套，最后和女1号交配。这样，这n-1个男性就能轮流和女1号交配了。

这一步共发生了n-1次有效交配。

**一共有3n-2次有效交配。**

怎么样？是不是很神奇？

![](https://pic3.zhimg.com/v2-2163817120638cd5dde7fd5f3bcceb4a_b.jpg)
如图所示，打钩的表示可以进行有效交配。一共有3n-2个钩。

那么有没有更大的值呢？

我们回到刚刚的想法：事实上，第一步是将女1号特殊化，第三步是将女3号特殊化。（你可以把特殊化理解为“能够和更多男人交配”）

我们能不能尝试下让特殊化的人更多呢？

比如，如果让女1号、女2号、女n号特殊化，或者让女1号、女2号、女n-1号、女n号特殊化，我们得出的结果会如何呢？

现在以“让女1号、女2号、女n-1号、女n号特殊化”为例，如图所示：
![](https://pic4.zhimg.com/v2-c806d8d212e1417051c0f9c3aeeabdd3_b.jpg)
**这种情况下可以进行5n-8次有效交配。比3n-2好太多。**

能不能再优化一下呢？我们再增加两个特殊化的女性：
![](https://pic1.zhimg.com/v2-674259040b2285080a510b075065bc54_b.jpg)
我相信读者们已经看出规律了。

事实上不难得出，按照这种思路，当一半的时候，能够使得交配的次数最大化：
![](https://pic1.zhimg.com/v2-506dc18289f50b870850ee548e691090_b.jpg)
**答案是n²/2+n，当然这里需要n是偶数；当n为奇数时，思路是一样的，答案是n²/2+n-1/2。**

这背后的函数就是一个普通的等差数列。从3n-2到5n-8再到一般化，规律是不难找的。只要找到通项，利用初中的知识即可算出。

当然提醒一下，你还得证明为什么两边特殊化的女性的数量都是一样的。比如，为什么“让女1号、女2号、女n-1号、女n号特殊化”比“女1号、女2号、女n号特殊化”更好。同样利用通项的思想，这也是不难证明的。

那么这是不是最大值了？我还不知道。n²/2+n是我能想到的极限，正如那道题中，1.5n是目前为止大家能想到的极限。

如果你有更好的上界，或者更美妙的思路，欢迎告诉我。

