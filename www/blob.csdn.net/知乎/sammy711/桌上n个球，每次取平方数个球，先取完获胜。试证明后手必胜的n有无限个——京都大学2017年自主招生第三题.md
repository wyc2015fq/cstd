# 桌上n个球，每次取平方数个球，先取完获胜。试证明后手必胜的n有无限个——京都大学2017年自主招生第三题 - 知乎
# 

我知道普通的高考题的难度肯定没法满足读者们的需求w

这里最后来一道自主招生题

![](https://pic1.zhimg.com/v2-d824c10e9a058eba16d8bc48cb48b214_b.jpg)


![A,B](https://www.zhihu.com/equation?tex=A%2CB) 两人进行下列游戏：

最开始桌上放着 ![n](https://www.zhihu.com/equation?tex=n) 个球，先手 ![A](https://www.zhihu.com/equation?tex=A) ，后手 ![B](https://www.zhihu.com/equation?tex=B) 进行游戏。每次必须取球，且取的球的数量必须是自然数的平方。两人轮流取球，最先取完桌上所有球的玩家获胜。

以下定义先手必胜：对于先手 ![A](https://www.zhihu.com/equation?tex=A) ，如果 ![A](https://www.zhihu.com/equation?tex=A) 恰当地选择取球的个数，则无论 ![B](https://www.zhihu.com/equation?tex=B) 如何取球， ![A](https://www.zhihu.com/equation?tex=A)都一定可以胜利。同样定义后手必胜：对于后手 ![B](https://www.zhihu.com/equation?tex=B) ，如果 ![B](https://www.zhihu.com/equation?tex=B) 恰当地选择取球的个数，则无论 ![A](https://www.zhihu.com/equation?tex=A) 如何取球， ![B](https://www.zhihu.com/equation?tex=B) 都一定可以胜利。

比如考虑 ![n=10](https://www.zhihu.com/equation?tex=n%3D10) 的情况
- 最开始 ![A](https://www.zhihu.com/equation?tex=A) 取 ![1](https://www.zhihu.com/equation?tex=1) 个球，则 ![B](https://www.zhihu.com/equation?tex=B) 取 ![9](https://www.zhihu.com/equation?tex=9) 个的话可以取得胜利
- 最开始 ![A](https://www.zhihu.com/equation?tex=A) 取 ![4](https://www.zhihu.com/equation?tex=4) 个球，剩下 ![6](https://www.zhihu.com/equation?tex=6) 个球。假设 ![B](https://www.zhihu.com/equation?tex=B) 选择取 ![1](https://www.zhihu.com/equation?tex=1) 个球，显然下一回合无论 ![A](https://www.zhihu.com/equation?tex=A) 取 ![1](https://www.zhihu.com/equation?tex=1) 个还是 ![4](https://www.zhihu.com/equation?tex=4) 个球，都是 ![B](https://www.zhihu.com/equation?tex=B) 的胜利
- 最开始 ![A](https://www.zhihu.com/equation?tex=A) 取 ![9](https://www.zhihu.com/equation?tex=9) 个球，则 ![B](https://www.zhihu.com/equation?tex=B) 取 ![1](https://www.zhihu.com/equation?tex=1) 个 的话可以取得胜利

无论 ![A](https://www.zhihu.com/equation?tex=A) 如何取球， ![B](https://www.zhihu.com/equation?tex=B) 都能找到策略使得自己必胜。所以对于 ![n=10](https://www.zhihu.com/equation?tex=n%3D10) 来说，这个游戏是后手必胜。

回答以下问题：

- 试证明对于任意自然数 ![n](https://www.zhihu.com/equation?tex=n) ，这个游戏都一定是先手必胜或者后手必胜中的一个。也就是说，对于足够聪明的两个玩家来说，比赛结果是确定的。
- 试证明当 ![n=456](https://www.zhihu.com/equation?tex=n%3D456) 时，这个游戏是先手必胜。
- 试证明后手必胜的 ![n](https://www.zhihu.com/equation?tex=n) 有无限个。

1.

记 ![n](https://www.zhihu.com/equation?tex=n) 个球的游戏为游戏 ![n](https://www.zhihu.com/equation?tex=n)
- 游戏 ![1](https://www.zhihu.com/equation?tex=1) 是先手必胜
- 假设游戏 ![1,2,...,k](https://www.zhihu.com/equation?tex=1%2C2%2C...%2Ck) 都是先手必胜或者后手必胜

考虑游戏 ![k+1](https://www.zhihu.com/equation?tex=k%2B1)

设自然数 ![i](https://www.zhihu.com/equation?tex=i) 满足 ![k+1-i^2\geq0](https://www.zhihu.com/equation?tex=k%2B1-i%5E2%5Cgeq0)

如果存在一个 ![i](https://www.zhihu.com/equation?tex=i) ，使得游戏 ![i](https://www.zhihu.com/equation?tex=i) 是后手必胜，那么只要 ![A](https://www.zhihu.com/equation?tex=A) 取走 ![i^2](https://www.zhihu.com/equation?tex=i%5E2) 个球即可获胜，说明游戏 ![k+1](https://www.zhihu.com/equation?tex=k%2B1) 是先手必胜。

如果不存在，那么对于任意的 ![i](https://www.zhihu.com/equation?tex=i) ，游戏 ![k+1-i^2](https://www.zhihu.com/equation?tex=k%2B1-i%5E2) 都是先手必胜。也就是说这个游戏是后手必胜。

根据数学归纳法，原问题得证

2.

![456-441=15](https://www.zhihu.com/equation?tex=456-441%3D15) ，所以假设 ![A](https://www.zhihu.com/equation?tex=A) 最开始取走 ![441](https://www.zhihu.com/equation?tex=441) 个，考虑 ![B](https://www.zhihu.com/equation?tex=B) 取走多少个
- 如果 ![B](https://www.zhihu.com/equation?tex=B) 取走 ![1](https://www.zhihu.com/equation?tex=1) 个，那么剩下 ![14](https://www.zhihu.com/equation?tex=14) 个，接着 ![A](https://www.zhihu.com/equation?tex=A) 取走 ![9](https://www.zhihu.com/equation?tex=9) 个剩下 ![5](https://www.zhihu.com/equation?tex=5) 个。无论 ![B](https://www.zhihu.com/equation?tex=B) 如何取都是 ![A](https://www.zhihu.com/equation?tex=A) 的胜利（ ![5=1+4=4+1](https://www.zhihu.com/equation?tex=5%3D1%2B4%3D4%2B1) ）
- 如果 ![B](https://www.zhihu.com/equation?tex=B) 取走 ![4](https://www.zhihu.com/equation?tex=4) 个，那么剩下 ![11](https://www.zhihu.com/equation?tex=11) 个，接着 ![A](https://www.zhihu.com/equation?tex=A) 取走 ![9](https://www.zhihu.com/equation?tex=9) 个剩下 ![2](https://www.zhihu.com/equation?tex=2) 个。显然 ![A](https://www.zhihu.com/equation?tex=A) 胜利
- 如果 ![B](https://www.zhihu.com/equation?tex=B) 取走 ![9](https://www.zhihu.com/equation?tex=9) 个，那么剩下 ![6](https://www.zhihu.com/equation?tex=6) 个，只要 ![A](https://www.zhihu.com/equation?tex=A) 取走 ![4](https://www.zhihu.com/equation?tex=4) 个就和第二种情况一样。

得证

3.

假设只有有限个后手必胜的 ![n](https://www.zhihu.com/equation?tex=n) ，设最大的一个是 ![N](https://www.zhihu.com/equation?tex=N) 。考虑 ![n=N^2+N+1](https://www.zhihu.com/equation?tex=n%3DN%5E2%2BN%2B1) ，按照假设，这个是先手必胜。

![(N+1)^2-(N^2+N+1)=N>0](https://www.zhihu.com/equation?tex=%28N%2B1%29%5E2-%28N%5E2%2BN%2B1%29%3DN%3E0) ，所以 ![A](https://www.zhihu.com/equation?tex=A) 最多只能取 ![N^2](https://www.zhihu.com/equation?tex=N%5E2) 个

但就算取走最多的 ![N^2](https://www.zhihu.com/equation?tex=N%5E2) ，![N^2+N+1-N^2=N+1](https://www.zhihu.com/equation?tex=N%5E2%2BN%2B1-N%5E2%3DN%2B1) 按照假设也应该是先手必胜。这时先手权在 ![B](https://www.zhihu.com/equation?tex=B) ，矛盾

所以有无限个后手必胜的 ![n](https://www.zhihu.com/equation?tex=n)

