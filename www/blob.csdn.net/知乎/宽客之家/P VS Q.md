# P VS Q - 知乎
# 



**金融工程——两个需要不同高阶量化技术的独立分支**

Q Quant：对衍生品定价，其目标是“推断现在   （extrapolate the present）”

P Quant：对风险和组合进行量化管理，其核心是“对未来建模（model the future）”。
- **Q Quant——衍生品定价**

衍生品定价的目标：确定一个给定证券的公允价值，就如同那些流动性充足的证券，其价格是由供求关系决定的一样。典型的例子包括，奇异期权（exoticoptions）、抵押贷款证券（mortgage backedsecurities, MBS）、可转债、结构化产品，等等。

衍生品定价为的是获得某个证券当下的市场价值，也是卖方的主要工作。

***Q Quant——衍生品定价的历史***

Bachelier：1900年提出，布朗运动，应用于期权的定价。

Merton（1969）以及Black和Scholes（1973）：几何布朗运动，引入期权定价。

Harrison和Pliska：1981年提出，资产定价的基础理论。

他们认为，如果证券当前的价格P0是无套利空间的，也就是真正完全公允的，当且仅当描述该证券价格未来变化的随机过程Pt的数学期望等于P0。即，P0=E{Pt}，t≥0。满足上式的过程称为“鞅”。

鞅并不对风险给予回报。因此，证券价格所服从的随机过程的概率测度被称为是“风险中性”的，通常用字母Q表示，这也是“Q Quant”这一名称的由来。

此外，由于上式对任意时刻t都成立，所以用于衍生品定价的随机过程自然也都是建立在连续时间的框架之上的。

***Q Quant面临的挑战：***

       校准（calibration）是Q Quant所面临的一个主要挑战。因为，一旦一个连续时间的随机过程模型被校准后用于一系列已经流通的证券，那么它也应当被用于对类似的新上市衍生品进行定价。  

***Q Quant主要量化工具：***
-         随机微积分
-         偏微分方程



![](https://pic2.zhimg.com/v2-648bd481156e328e0a86899ca8e1cd0d_b.png)![](data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='365' height='254'></svg>)





- **P Quant——风险与组合管理**

P Quant风险与组合管理定位于在某一给定的投资范围内，对市场价格建立概率分布模型。

买方的主要工作：基于真实的分布，决定证券的仓位以改善组合的收益-风险特征。

***P Quant——风险与组合管理的历史***

Markowitz（1952）：均值-方差体系。

Treynor（1962）、Mossin（1966）、Sharpe（1964）、Lintner（1965）和Ross（1976）：资本资产定价模型（CAPM）和套利定价模型（APT）。

它们都假设概率分布P是已知的。但在实际操作中，P必须从可获得的市场信息中估计得到。而信息的一个主要来源便是历史价格的变化以及其他一些金融变量，这些都是在离散的时间点上采集并记录的。

***P Quant面临的挑战：***

       估计（estimation）是P Quant所面临的主要挑战。

***P Quant主要技术：***
-        高阶的多元统计
-        计量经济的技术

       值得注意的是，在风险和组合管理中，估计市场上所有证券的联合分布函数非常重要，每个证券不可能像在QQuant中那样被单独考虑。因此，降维技术，如，线性因子模型，在PQuant中扮演着核心角色。






![](https://pic3.zhimg.com/v2-41828497fac51d6d4975d7753ed81252_b.png)![](data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='365' height='254'></svg>)- **“P”与“Q”的共性**

**1风险溢价**

   从数学意义上来说，风险中性测度Q和真实概率测度P只是对同一个金融变量的同一个可能的结果赋予了不同的权重。从一种概率权重到另一个的转移就是所谓的风险溢价，而反过来说，也正是人们对风险溢价的认知在原则上允许了这两种测度的转换。但遗憾的是，正确估计风险溢价至今仍然是一个极具挑战性的工作。

**2 随机过程**

   随机过程不论在P Quant还是Q Quant中，都是量化模型的支柱。虽然Q Quant关注的是连续时间的风险中性过程，而P Quant以离散时间的过程为主，但相同的数学模型在这两个领域都有广泛的应用，只不过假设条件和名称可能有所区别。下表总结了这些随机过程的主要特征。



![](https://pic1.zhimg.com/v2-d82e3fc6bf2c9fbbd67833c895704e68_b.png)![](data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='654' height='129'></svg>)
（1）基础假设：

最基本的离散时间随机过程是随机游走，它是一系列独立同分布的随机变量在时间上的和。

随机游走是风险和组合管理中，对利率和股票的对数价格建模的基准假设。

在连续时间的情况下，随机游走变成了Levy过程。布朗运动是最著名的一类Levy过程，也是期权定价的基础。类似地，泊松过程作为另外一类最简单的Levy过程，广泛地应用于信用产品的定价中。

（2）自相关性。当金融序列不是一系列独立变量的和时，就会存在自相关。

在离散时间的情形中，标准的建模工具是自回归移动平均模型（auto-regressive-moving-average，ARMA），它深受买方计量经济学家的推崇和喜爱。而ARMA过程的连续时间形式就是Ornstein-Uhlenbeck及其相关的过程。其中，由Vasicek（1977）以及Cox、Ingersoll和Ross（1985）命名的两类特殊的Ornstein-Uhlenbeck过程，是卖方债券定价业务的核心工具。

（3）波动率的聚集性：高波动或低波动倾向于聚集在一起出现。

在离散时间的情形中，买方的P Quant金融工程师用GARCH及其变型捕捉这一特征。

而在卖方的Q Quant业务中，对波动率的聚集性建模的最主要方法则是随机波动率模型。

**3数值方法**

上述讨论的这些理论上的随机过程在实际应用中都必须通过数据形式呈现出来，而实现这一目标的两类最流行的数值方法就是“分类树（trees）”和蒙特卡洛模拟。

“分类树”本质上是一个可能的结果不断膨胀的随机过程。今天的状态将导致明天多种可能的结果，其中的每一种又会引发后天的多种可能，并以此类推。由此可见，使用“分类树”方法，结果的数量会随着时间的推移而增长。

对蒙特卡洛模拟而言，每一个随机过程可能产生的结果的数量，也称为路径，在模拟过程中是保持不变的。

计算效率更加低下的分类树：面临重要决策时使用

蒙特卡洛模拟：需要获得随机过程分布的时候应用

因此，在P Quant——风险与组合管理中，分类树被用来设计动态策略，而蒙特卡洛模拟则被用作管理风险，例如计算在险价值（VaR）。

在Q Quant——衍生品定价中，分类树可被用来对美式期权定价，因为它可以在到期日之前行权。而蒙特卡洛模拟常被用来对亚式期权定价，因为该类型期权的行权价为到期日前某一特定时间段内标的资产的平均价格。

**4 对冲**

对冲是P Quant和Q Quant直接交叉的又一个典型案例。

对冲的目：保护某一给定头寸的收益免受一系列风险因子的影响。因此，对冲是一个P Quant的概念。

但是，为了确定买入或卖出对冲工具的数量，投资者必须计算给定头寸和对冲工具对风险因子的敏感性。

而这些敏感性就是众所周知的“希腊字母（Greeks）”。最基础的“希腊字母”就是写在给定证券上的期权的“delta”，它也是期权对标的证券的敏感性。期权的delta告诉投资者需要卖空多少标的以保护所写的期权价值免受标的波动的影响。

希腊字母是从Q Quant的定价模型中计算得到的，随后在P Quant中被用来进行对冲。有趣的是，Q Quant中的定价模型同样也可以基于P Quant中对冲的概念来获得。

**5 统计套利**

在统计套利的领域，Q Quant也已渗透到了P Quant之中。两者相互交叉应用的具体步骤如下。

首先，Q Quant中的模型被用来寻找当前证券价格中的定价误差。其次，被错误定价的证券价格最终会收敛于Q Quant模型的预测值（见下图）。

因此，P Quant中的预期收益，或者称为“alpha”，就可以通过比较当前的错误定价和Q模型的预测价格来确定。

最后，如果alpha是正的，则建立多头头寸，即买入定价错误的证券；反之，则建立空头头寸，即卖空定价错误的证券。



![](https://pic1.zhimg.com/v2-a44bcc143f149d382b6743900bd7bccc_b.png)![](data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='535' height='224'></svg>)







