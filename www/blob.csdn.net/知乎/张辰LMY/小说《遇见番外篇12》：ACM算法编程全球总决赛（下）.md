# 小说《遇见番外篇12》：ACM算法编程全球总决赛（下） - 知乎
# 



**说明：本小说纯属虚构**。读者当是平行宇宙中的架空历史吧。

**写在前面**：ACM这块结尾写的比较草率，感觉还是不足以驾驭这类ACM小说。但是ACM这块不写个结尾的话，有感觉影响小说《遇见番外篇》的整体结构，于是草草写之。写一个好的结尾对任何一位作者都不容易。




陈城同林杨解释了自己关于E题得想法后，两人觉得E题算法应该没问题的。于是陈城一口干了红牛饮料之后，果断决定重写E 题，并且写了一个测试程序来测试E 题，结果提交后还是收到WA！这确实出乎了陈城的意料，他不能想象一个能通过1000组随机数据的程序提交之后的结果会是WA。

肖明琮认为大家不能都卡在E题上，必须开新题了。林杨观察了一下场内气球，发现有三只队伍过了D题条形码（Barcodes）问题，于是**T**大战队转而进攻D题。此时大榜上，ITMO以6题暂时领跑，**T**大等三支队伍以5题居2-4名。D题要求对条形码解码，允许5%的误差，难度确实不大，但比较麻烦，陈城顺利解决。接下来一鼓作气干掉I题加或乘，这是一道数字破解题，分两种情况讨论。

D题和I题的顺利解决稳定住了**T**大战队的心态，更重要的是把E题打乱的节奏调整了回来。按照交大那边对ACM-ICPC团体赛的看法，解题节奏非常重要。被誉为ACM-ICPC史上第一高手tourist就是代表，他的做题速度非常平均，不紧不慢，而且常常在最后1小时内爆发极大的冲刺力量，一举超过所有对手。

林杨在纸上读陈城的E题代码还是没找到问题，但是他的心里有一种怪异的感觉，觉得问题出在预处理程序。

林杨：老陈，是不是E题代码预处理程序漏掉了一些特殊情况啊？

陈城：林杨，你太聪明了！

其实林杨并没有找到程序具体错在哪里，但陈城自己不知道为什么，就在林杨提到“预处理程序”五个字时，脑海几乎同时闪过了一个重要信息，发现自己预处理过程中有一个地方少考虑了一种情况！于是陈城迅速把预处理程序补充完整，然后提交，直接通过！E题第三次才通过，罚时上被加了40分钟，不过在那样紧张的环境下，队员们已经没时间考虑这些东西了。

幸运的天平又倾向于**T**大了，ITMO战队也被某道题卡住了，导致被**T**大追上了。时间已经过了3小时，**T**大战队和ITMO战队都做出来8题，**T**大以罚时优势略微领先。

到第4个小时，各队伍的做题速度明显下来了，比如**P**大第4小时内只做出一道题，因此滑到第五。沧海横流，方显英雄本色，skywalker在第4小时内稳稳地做出两题。第4小时内，**T**大这边陈城做出K题后缀替换语法问题，肖明琮做出来L题咖啡枢纽问题，紧紧咬着ITMO没有掉队。

封榜前前四名为：ITMO10题，**T**大10题 ，东大9题和MIT9题。按照比赛规则，最后1小时不公布实时排名，名曰封榜。据说有的队伍选择扮猪吃老虎战术而选择压题，在封榜之后提交程序。比如程序已经调试通过，本可以在237分钟提交，而是在245分钟提交程序。如此，封榜前该队伍的显示排名比实际排名要低。不知这种战术是不是用来麻痹对手。

在**T**大这边，计算机系统一组织观看网上直播，随着比赛临近结尾，观看人数在上升。百度ACM贴吧里很多人已经开始猜测这次冠军是谁，**T**大还是ITMO？

ITMO封榜之后，作为队长，skywalker让一名队友先上机做题，他需要暂时休整一下。**P**大这次ACM总决赛的饮料赞助商不是红牛，而是另一种运动饮料。skywalker拧开一瓶，喝了一口后便皱眉，觉得很不好喝。

**T**大这边暂时没有上机，三人在讨论B题和G题，林杨对这两道题都有大概思路，但几个关键地方卡住了，下不了决心。对于前几名的队伍，到了最后1小时的决战时刻，如果对问题没有明确思路，万不可冒然上机做题，毕竟这时候能不能多做出1题可能就是金银牌的区别了。这方面有过深刻教训，最后1小时0题通过……

B题放射的混乱涉及坐标变换，题干特别的冗长，看起来要讨论多种情况，思路非常乱。等到肖明琮和林杨搞清楚“先平移，再拉伸”和“先拉伸，再平移”的对应参数变化关系后，发现这道题其实很水，两人决定采用：

**暴力枚举旋转 + 求线性变换算法**

分工如下：林杨搞定旋转部分，就是堆计算几何模块。肖明琮，搞定线性变换部分，主要是写一堆if-else讨论多种情况，虽然情况有各种组合，但想清楚了写起来很简单。肖明琮上机编程，结果没有通过过样例。检查后发现枚举360度旋转和线性变换有重复的地方，改成180度就通过了。第257分钟，**T**大做出了11题。

在肖明琮上机的时候，林杨和陈城交流了自己对G题的看法。这道题可以看作是凸N边形等周面积最大问题，是一道典型的计算几何难题。让林杨感到好笑又讽刺的是，余周周几个月前刚好问过林杨类似问题，只不过是凸五边形情况。



![](https://pic1.zhimg.com/v2-de06aa1cfa58c2133496d06be7cd4e88_b.jpg)![](data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1536' height='2048'></svg>)



对每个测试用例，输出测试用例编号，然后再给出通过折叠手杖所得到的最大封闭区域面积。要求误差在**0.0001**以内。

林杨和陈城商量过后，采用了一个算法策略：**能组成多边形就组成，否则砍掉最长边就是最优的**。



![](https://pic4.zhimg.com/v2-71cf336ebdfc605f2cdfa66a00cd54cb_b.jpg)![](data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1536' height='2048'></svg>)



陈城在林杨想法基础上增加了剪枝策略，迅速敲出代码。但是在测试数据的时候，发现当圆心在多边形外部的时候计算结果反而更差，**T**大战队卡在G题上了。林杨在纸上画画图，试图找出原因。忽然，林杨意识到：**当圆心在凸多边形外部时，情况是反过来的**。



![](https://pic2.zhimg.com/v2-606a22321cc3d6580769c02425ef9631_b.jpg)![](data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1536' height='1198'></svg>)



在比赛进行到一半时，陈城就告诉肖明琮和林杨，他觉得这次的总冠军可能要做出12题才行，所以三个人心中都觉得夺冠在望。忽然ITMO那边传来一阵欢呼声，令陈城和肖明琮产生了一种不好的感觉，必须利用这最后的10多分钟拼了。

M题简化了帝都的地铁线路，假设为树形结构，而不是实际的环形结构。要求编写一个程序来估计时间误差。已知每对相邻地铁站所需时间（精确到秒），然后再标注在地图上。问题在于实际时间精确到秒，而标在地图上的时间则为正整数分钟。利用四舍五入法，可以得到整数分钟估计，但累计误差比较大。为了解决这个问题，所编写的程序可能会选择一些行驶时间进一，另一些行驶时间去尾，这样做使得任何两个地铁站之间的最大累计误差最小。



![](https://pic4.zhimg.com/v2-9f7623f0b9461c07ce124cdc40a32247_b.jpg)![](data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1536' height='1194'></svg>)









这时候，陈城、肖明琮和林杨只有一个目标，干掉M题就是AK！这道题的方法不难想到，比如二分法。问题在于怎样判断可能已经达到了需要计算的目标误差 ![X](https://www.zhihu.com/equation?tex=X) ？时间不多了，那一刻，肖明琮忽然有一个很奇怪的想法：不论树的规模多大，需要计算的目标误差 ![X](https://www.zhihu.com/equation?tex=X) 有一个共同的上界。肖明琮猜测这个上界可能在120秒附近。

肖明琮把自己的这个怪异的idea告诉了陈城和林杨，两个人虽然也认为目标误差 ![X](https://www.zhihu.com/equation?tex=X) 是一致有界的，上界应该在300秒的一半以下，但是对肖明琮的这个感觉就像玄学一样。陈城想起了之前ACRush老师告诉他要相信自己的队友，况且时间不够了，只能这么不合理地干了！陈城把上界120秒这个判断条件加程序里，通过了几组测试数据后，就提交了。提交时间是298分钟。

之前，G题的提交测试结果已经反馈回来，一次性通过！当时，林杨就有一种感觉，这次前三应该是没问题了。三个人都认为ITMO应该至少也干掉了12题，双方咬得很紧。




最后的滚榜很戏剧性，**P**大最后时刻爆发做出了11题，靠罚时优势压倒了东京大学获得第三名。当大屏幕显示**T**大做出全部13题，直接AK了，全场观众和其他国家的参赛队员们报以热烈的掌声。这是ACM-ICPC历史第二支AK队伍。然而生活总是充满戏剧性，后来大屏幕显示ITMO也AK掉13道题，而且罚时比**T**大少了3分钟，最终笑到了最后。

ACM-ICPC国际大学生编程竞赛决赛成绩：

1. St.Petersburg University of IT, Mechanics and Optics 13题

2. Tsinghua University 13题

3. Peking University 11题

4. The University of Tokyo 11题

……

按照ACM比赛规则，前四名获得金牌。**T**大获得了全球第二名，亚洲区第一名的成绩。全场观众几乎都是中国人，所以掌声远比第一名队伍热烈。其实，在大家看来，能在总决赛AK的亚军相当于无冕之王了。罚时上相差3分钟很难说是水平的差距，夺得ACM总冠军需要一定的运气。

陈城、肖明琮和林杨看到最后结果时显得很失望。

林杨：都怪我G题没有早点想出来圆心在多边形外边时的情况是相反的！

肖明琮：不，林杨，你已经表现很好了。如果不是你，我和陈城也许过不了G题这道计算几何题。况且，陈城和我应该感谢你。谢谢！

陈城没有多说什么，而是给了肖明琮和林杨一个紧紧的拥抱，轻声说了一句谢谢！肖明琮和林杨心里明白，陈城的ACM之路结束了，他之前在大一时参加过有一次总决赛，按照ACM规则一名选手只能代表同一学校参加两次ACM总决赛。恍惚间，林杨依稀发现陈城的眼睛红了。当林杨把眼睛转开时，看见余周周摘下帽子笑盈盈地向他挥动着。那一刻林杨发现穿着短裙的周周真的很美！

亚军颁奖时出了一个小插曲，有服务人员匆匆上台打断了主持人，递给她一张卡片。只见支持人淡定地调整了一下站姿态，然后用甜美的声音说：下面有请帝都致一科技股份有限公司董事长肖奈先生及其夫人贝微微女士，为亚军队伍颁奖，有请！

陈城和林杨诧异地看向肖明琮，后者也是一脸惊讶表情，显得有些不自然。等到肖奈先生及其夫人贝微微女士上台后，林杨发现原来花样美男肖明琮长得更像妈妈一些。看见大儿子获奖后，冰山肖奈难得露出一丝微笑。贝微微看见大儿子获奖后显得比肖明琮还兴奋。

颁奖结束后，肖明琮没有接受采访就闪人了，但不是和他的父母。李楠第一次现场看ACM比赛非常激动，真心为琮琮感到高兴，两人手拉手去未名湖那边散步。陈城和林杨接受了采访，其中就包括了**T**大TV的采访。

学校难得高效率，当晚T大主页上就刊登了我校ACM代表队做出全部比赛试题，以3分钟时间之差错失冠军，获得世界第二名的消息。同学们也纷纷发来“贺电”！

“林杨这小子真行啊，我就说我当初没看走眼。”振华中学的潘校长坐在办公室里看着微信自言自语道。“得把林杨这小子请回来给高三这帮学生做个演讲，让这帮学生看看咱们振华精英师兄是什么样的。”

潘校长办事风风火火，后来真把林杨请回振华中学做了演讲，而且还是两个人，这都是后话了。不过，让振华中学潘校长心中吐槽的是**T**大的感谢信直到五月底才传真过来，真是官X主义作风。



![](https://pic4.zhimg.com/v2-cdeb66c2e44ed58ad199a28cbcd3d0b7_b.jpg)![](data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1536' height='1205'></svg>)

