# 法向量变换矩阵的推导 - tkokof1的专栏 - CSDN博客

2019年03月13日 14:34:59[tkokof1](https://me.csdn.net/tkokof1)阅读数：51


> 
本文简述了一种法向量变换矩阵的推导过程

使用矩阵对点进行空间变换是图形学中的常见操作,假设变换矩阵为 $M$ ,我们需要变换切向量 $T$(由 点 $P_2$ - 点 $P_1$ 定义) 以及与其垂直的法向量 $N$ .($T$ 和 $N$ 皆为列向量)

假设 点 $P_2$ 经过 $M$ 变换后为 $P_2'$, 点 $P_1$ 经过 $M$ 变换后为 $P_1'$, $T'$ 为经过变换后的切向量:

$$    \begin{aligned}    & M * P_2 = P_2' \\ & M * P_1 = P_1' \\ & T' = P_2' - P_1'    \end{aligned}$$

对于原切向量 $T$,我们希望找到一个矩阵 $M'$, 使得:

$$    M' * T = T'$$

我们直接令 $M' = M$ 来试一下:

$$    \begin{aligned}    M' * T = M * T &= M * (P_2 - P_1) \\ &= M * P_2 - M * P_1 \\ &= P_2' - P_1' \\ &= T'    \end{aligned}$$

可见对于切向量 $T$ ,我们可以直接使用 $M$ 对其进行变换.

对于法向量 $N$ ,我们有(注意,第一个公式中的点号表示**点积**):

$$    \begin{aligned}    & T \cdot N = 0 \implies \\ & T^T * N = 0    \end{aligned}$$

假设变换后的法向量为 $N'$, 我们希望仍然保持其与 $T'$($T$的变换后向量) 的垂直(注意,第一个公式中的点号表示**点积**):

$$    \begin{aligned}    & T' \cdot N' = 0 \implies \\ & T'^T * N' = 0    \end{aligned}$$

假设用于变换法向量的矩阵为 $G$, 则应有:

$$    \begin{aligned}    & T' = M * T \\ & N' = G * N \\ & T'^T * N' = 0 \\ & (M * T)^T * (G * N) = 0 \\ & T^T * M^T * G * N = 0 \\ & T^T * (M^T * G) * N = 0    \end{aligned}$$

由于我们知道:

$$    T^T * N = 0$$

所以我们只要令(**注意,这只是一种可能的取值,并不是唯一取值,我们的目的也仅是需要获得一种可能的取值**):

$$    M^T * G = I$$

便可以满足上面的等式 :

$$    \begin{aligned}    & T^T * (M^T * G) * N = \\    & T^T * I * N = \\    & T^T * N = 0    \end{aligned}$$

所以变换法向量,我们需要使用普通变化矩阵逆的转置(或者说转置的逆,**对于可逆矩阵,其转置矩阵的逆矩阵等于其逆矩阵的转置矩阵**)

$$    G = (M^T)^{-1} = (M^{-1})^T$$

如果变换矩阵 $M$ 是正交矩阵,则有(根据正交矩阵定义)

$$    M^{-1} = M^T$$

于是法向量的变换矩阵变为:

$$    G = (M^T)^{-1} = (M^{-1})^{-1} = M$$

此时我们就可以直接使用 $M$ 来变换法向量了.

#### 更多资料
- [The Normal Matrix](http://www.lighthouse3d.com/tutorials/glsl-12-tutorial/the-normal-matrix/)
- [法向量（Normal）的变换矩阵的推导](https://www.nigauri.co/%E6%B3%95%E5%90%91%E9%87%8F%EF%BC%88normal%EF%BC%89%E7%9A%84%E5%8F%98%E6%8D%A2%E7%9F%A9%E9%98%B5%E7%9A%84%E6%8E%A8%E5%AF%BC/)

