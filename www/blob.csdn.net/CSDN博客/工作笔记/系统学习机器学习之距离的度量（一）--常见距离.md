# 系统学习机器学习之距离的度量（一）--常见距离 - 工作笔记 - CSDN博客





2016年06月25日 22:16:39[Eason.wxd](https://me.csdn.net/App_12062011)阅读数：6701








﻿﻿原文：

[http://www.cnblogs.com/ronny/p/4080442.html](http://www.cnblogs.com/ronny/p/4080442.html)

# 1. 欧氏距离

欧氏距离是最常见的两点之间或多点之间的距离表示法，又称之为欧几里得度量，它定义于欧几里得空间中，如点
 和之间的距离为：









1）二维平面上两点与间的欧氏距离：







2）三维空间两点与间的欧氏距离：







3）两个维向量与间的欧氏距离：


也可以用表示成向量运算的形式： 






维平面上两点欧式距离，代码可以如下编写：

```
![复制代码](http://common.cnblogs.com/images/copycode.gif)

//unixfy：计算欧氏距离 
double euclideanDistance(const vector<double>& v1, const vector<double>& v2) 
{ 
    assert(v1.size() == v2.size()); 
    double ret = 0.0; 
    for (vector<double>::size_type i = 0; i != v1.size(); ++i) 
    { 
        ret += (v1[i] - v2[i]) * (v1[i] - v2[i]); 
    } 
    return sqrt(ret); 
}

![复制代码](http://common.cnblogs.com/images/copycode.gif)



# 2. 曼哈顿距离


我们可以定义曼哈顿距离的正式意义为-距离或城市区块距离，也就是在欧几里得空间的固定直角坐标系上两点所形成的线段对轴产生的投影的距离总和。


例如在平面上，坐标的点与坐标的点的曼哈顿距离为：














要注意的是，曼哈顿距离依赖座标系统的转度，而非系统在座标轴上的平移或映射。


通俗来讲，想象你在曼哈顿要从一个十字路口开车到另外一个十字路口，驾驶距离是两点间的直线距离吗？显然不是，除非你能穿越大楼。而实际驾驶距离就是这个“曼哈顿距离”，此即曼哈顿距离名称的来源， 同时，曼哈顿距离也称为城市街区距离(City Block distance)。


1）二维平面两点与间的曼哈顿距离











2）两个维向量与间的曼哈顿距离











# 3. 切比雪夫距离


若二个向量或二个点，其座标分别为及，则两者之间的切比雪夫距离定义如下：














这也等于以下度量的极值：，因此切比雪夫距离也称为度量。以数学的观点来看，切比雪夫距离是由一致范数（或称为上确界范数）所衍生的度量，也是超凸度量的一种。


1）在平面几何中，若二点及的直角坐标系坐标为及，则切比雪夫距离为：。


玩过国际象棋的朋友或许知道，国王走一步能够移动到相邻的8个方格中的任意一个。那么国王从格子走到格子最少需要多少步？。你会发现最少步数总是步
 。


2）二维平面上两点与间的切比雪夫距离











3）两个维向量与间的切比雪夫距离




这个公式的另一种等价形式是










# 4. 闵可夫斯基距离(Minkowski Distance)


闵氏距离不是一种距离，而是一组距离的定义。


两个维向量与间的闵可夫斯基距离定义为：














其中是一个变参数。


当时，就是曼哈顿距离；


当时，就是欧氏距离；


当时，就是切比雪夫距离；


根据变参数的不同，闵氏距离可以表示一类的距离。


# 5. 标准化欧氏距离 (Standardized Euclidean distance )


标准化欧氏距离是针对简单欧氏距离的缺点而作的一种改进方案。标准欧氏距离的思路：既然数据各维分量的分布不一样，那先将各个分量都“标准化”到均值、方差相等。


假设样本集的数学期望或均值为，标准差为，那么的“标准化变量”表示为：，而且标准化变量的数学期望为0，方差为1。


即，样本集的标准化过程(standardization)用公式描述就是：














经过简单的推导就可以得到两个维向量与间的标准化欧氏距离的公式：














如果将方差的倒数看成是一个权重，这个公式可以看成是一种加权欧氏距离(Weighted Euclidean distance)。


# 6. 马氏距离(Mahalanobis Distance)   


有个样本向量，协方差矩阵记为，均值记为向量，则其中样本向量到的马氏距离表示为：














而其中向量与之间的马氏距离定义为：














若协方差矩阵是单位矩阵（各个样本向量之间独立同分布）,则公式就成了：     














也就是欧氏距离了。


若协方差矩阵是对角矩阵，公式变成了标准化欧氏距离。 

马氏距离的优缺点：





1）马氏距离的计算是建立在总体样本的基础上的，这一点可以从上述协方差矩阵的解释中可以得出，也就是说，如果拿同样的两个样本，放入两个不同的总体中，最后计算得出的两个样本间的马氏距离通常是不相同的，除非这两个总体的协方差矩阵碰巧相同；


2）在计算马氏距离过程中，要求总体样本数大于样本的维数，否则得到的总体样本协方差矩阵逆矩阵不存在，这种情况下，用欧氏距离计算即可。


3）还有一种情况，满足了条件总体样本数大于样本的维数，但是协方差矩阵的逆矩阵仍然不存在，比如三个样本点（3，4），（5，6）和（7，8），这种情况是因为这三个样本在其所处的二维空间平面内共线。这种情况下，也采用欧氏距离计算。


4）在实际应用中“总体样本数大于样本的维数”这个条件是很容易满足的，而所有样本点出现3）中所描述的情况是很少出现的，所以在绝大多数情况下，马氏距离是可以顺利计算的，但是马氏距离的计算是不稳定的，不稳定的来源是协方差矩阵，这也是马氏距离与欧氏距离的最大差异之处。


优点：它不受量纲的影响，两点之间的马氏距离与原始数据的测量单位无关；由标准化数据和中心化数据(即原始数据与均值之差）计算出的二点之间的马氏距离相同。马氏距离还可以排除变量之间的相关性的干扰。缺点：它的缺点是夸大了变化微小的变量的作用。





# 7. 巴氏距离（Bhattacharyya Distance）


在统计中，Bhattacharyya距离测量两个离散或连续概率分布的相似性。它与衡量两个统计样品或种群之间的重叠量的Bhattacharyya系数密切相关。Bhattacharyya距离和Bhattacharyya系数以20世纪30年代曾在印度统计研究所工作的一个统计学家A. Bhattacharya命名。同时，Bhattacharyya系数可以被用来确定两个样本被认为相对接近的，它是用来测量中的类分类的可分离性。


对于离散概率分布和在同一域，它被定义为：














其中：














是Bhattacharyya系数。


对于连续概率分布，Bhattacharyya系数被定义为：














Bhattacharyya系数是两个统计样本之间的重叠量的近似测量，可以被用于确定被考虑的两个样本的相对接近。


计算Bhattacharyya系数涉及集成的基本形式的两个样本的重叠的时间间隔的值的两个样本被分裂成一个选定的分区数，并且在每个分区中的每个样品的成员的数量，在下面的公式中使用














考虑样品和
 ，是的分区数，是指样品中落在分区内的个数，有类似的定义。


# 8. 汉明距离(Hamming distance)，


两个等长字符串与之间的汉明距离定义为将其中一个变为另外一个所需要作的最小替换次数。


例如字符串“1111”与“1001”之间的汉明距离为2。


应用：信息编码（为了增强容错性，应使得编码间的最小汉明距离尽可能大）。


# 9. 夹角余弦(Cosine) 


几何中夹角余弦可用来衡量两个向量方向的差异，机器学习中借用这一概念来衡量样本向量之间的差异。


(1)在二维空间中向量与向量的夹角余弦公式：














(2) 两个维向量与的夹角余弦














类似的，对于两个n维样本点与，可以使用类似于夹角余弦的概念来衡量它们间的相似程度，即：














夹角余弦取值范围为[-1,1]。夹角余弦越大表示两个向量的夹角越小，夹角余弦越小表示两向量的夹角越大。当两个向量的方向重合时夹角余弦取最大值1，当两个向量的方向完全相反夹角余弦取最小值-1。


# 10. 杰卡德相似系数(Jaccard similarity coefficient)


## 10.1 杰卡德相似系数       


两个集合和的交集元素在的并集中所占的比例，称为两个集合的杰卡德相似系数，用符号表示。














杰卡德相似系数是衡量两个集合的相似度一种指标。


## 10.2 杰卡德距离       


与杰卡德相似系数相反的概念是杰卡德距离(Jaccard distance)。


杰卡德距离可用如下公式表示： 


![](https://img-my.csdn.net/uploads/201211/21/1353503806_4754.png)


杰卡德距离用两个集合中不同元素占所有元素的比例来衡量两个集合的区分度。


## 10.3 杰卡德相似系数与杰卡德距离的应用      


可将杰卡德相似系数用在衡量样本的相似度上。


举例：样本A与样本B是两个n维向量，而且所有维度的取值都是0或1，例如：A(0111)和B(1011)。我们将样本看成是一个集合，1表示集合包含该元素，0表示集合不包含该元素。


M11 ：样本A与B都是1的维度的个数


M01：样本A是0，样本B是1的维度的个数


M10：样本A是1，样本B是0 的维度的个数


M00：样本A与B都是0的维度的个数


依据上文给的杰卡德相似系数及杰卡德距离的相关定义，样本A与B的杰卡德相似系数J可以表示为：


![](https://img-my.csdn.net/uploads/201212/14/1355467146_1157.png)


这里M11+M01+M10可理解为A与B的并集的元素个数，而M11是A与B的交集的元素个数。而样本A与B的杰卡德距离表示为J'：


![](https://img-my.csdn.net/uploads/201212/14/1355467157_8555.png)


 


# 11.皮尔逊系数(Pearson Correlation Coefficient)


    在具体阐述皮尔逊相关系数之前，有必要解释下什么是相关系数 ( Correlation coefficient )与相关距离(Correlation distance)。


    相关系数 ( Correlation coefficient )的定义是：


![](https://img-my.csdn.net/uploads/201211/21/1353513364_9506.png)


(其中，E为数学期望或均值，D为方差，D开根号为标准差，E{ [X-E(X)] [Y-E(Y)]}称为随机变量X与Y的协方差，记为Cov(X,Y)，即Cov(X,Y) = E{ [X-E(X)] [Y-E(Y)]}，而两个变量之间的协方差和标准差的商则称为随机变量X与Y的相关系数，记为![](https://img-my.csdn.net/uploads/201212/05/1354710691_8305.jpg))


   相关系数衡量随机变量X与Y相关程度的一种方法，相关系数的取值范围是[-1,1]。相关系数的绝对值越大，则表明X与Y相关度越高。当X与Y线性相关时，相关系数取值为1（正线性相关）或-1（负线性相关）。


    具体的，如果有两个变量：X、Y，最终计算出的相关系数的含义可以有如下理解：


当相关系数为0时，X和Y两变量无关系。 

当X的值增大（减小），Y值增大（减小），两个变量为正相关，相关系数在0.00与1.00之间。 

当X的值增大（减小），Y值减小（增大），两个变量为负相关，相关系数在-1.00与0.00之间。

   相关距离的定义是：


![](https://img-my.csdn.net/uploads/201211/21/1353513387_4428.png)


OK，接下来，咱们来重点了解下皮尔逊相关系数。


    在统计学中，皮尔逊积矩相关系数（英语：Pearson product-moment correlation coefficient，又称作 PPMCC或PCCs, 用r表示）用于度量两个变量X和Y之间的相关（线性相关），其值介于-1与1之间。


通常情况下通过以下取值范围判断变量的相关强度： 

相关系数     0.8-1.0     极强相关 

                 0.6-0.8     强相关 

                 0.4-0.6     中等程度相关 

                 0.2-0.4     弱相关 

                 0.0-0.2     极弱相关或无相关

在自然科学领域中，该系数广泛用于度量两个变量之间的相关程度。它是由卡尔·皮尔逊从弗朗西斯·高尔顿在19世纪80年代提出的一个相似却又稍有不同的想法演变而来的。这个相关系数也称作“皮尔森相关系数r”。


(1)皮尔逊系数的定义：


两个变量之间的皮尔逊相关系数定义为两个变量之间的协方差和标准差的商：


![](https://img-my.csdn.net/uploads/201211/21/1353507664_9478.png)


以上方程定义了总体相关系数, 一般表示成希腊字母ρ(rho)。基于样本对协方差和方差进行估计，可以得到样本标准差, 一般表示成r：


![](https://img-my.csdn.net/uploads/201211/21/1353507674_8005.png)


一种等价表达式的是表示成标准分的均值。基于(Xi, Yi)的样本点，样本皮尔逊系数是


![](https://img-my.csdn.net/uploads/201211/21/1353507683_2154.png)


               其中![](https://img-my.csdn.net/uploads/201211/21/1353507694_9044.png)、![](https://img-my.csdn.net/uploads/201211/21/1353507706_7395.png) 及![](https://img-my.csdn.net/uploads/201211/21/1353507716_2204.png)，分别是标准分、样本平均值和样本标准差。

或许上面的讲解令你头脑混乱不堪，没关系，我换一种方式讲解，如下：


假设有两个变量X、Y，那么两变量间的皮尔逊相关系数可通过以下公式计算：


公式一：![](https://img-my.csdn.net/uploads/201211/22/1353579743_6051.jpg)


注：勿忘了上面说过，“皮尔逊相关系数定义为两个变量之间的协方差和标准差的商”，其中标准差的计算公式为：![](https://img-my.csdn.net/uploads/201211/22/1353574460_1284.jpg)


公式二：![](https://img-my.csdn.net/uploads/201211/22/1353579754_6465.jpg)

公式三：![](https://img-my.csdn.net/uploads/201211/22/1353579761_5381.jpg)

公式四：![](https://img-my.csdn.net/uploads/201211/22/1353579768_6715.jpg)

以上列出的四个公式等价，其中E是[数学期望](http://zh.wikipedia.org/wiki/%E6%95%B0%E5%AD%A6%E6%9C%9F%E6%9C%9B)，cov表示[协方差](http://zh.wikipedia.org/wiki/%E5%8D%8F%E6%96%B9%E5%B7%AE)，N表示变量取值的个数。


(2)皮尔逊相关系数的适用范围 

当两个变量的标准差都不为零时，相关系数才有定义，皮尔逊相关系数适用于：


两个变量之间是线性关系，都是连续数据。 

两个变量的总体是正态分布，或接近正态的单峰分布。 

两个变量的观测值是成对的，每对观测值之间相互独立。

(3)如何理解皮尔逊相关系数


rubyist：皮尔逊相关系数理解有两个角度


其一, 按照高中数学水平来理解, 它很简单, 可以看做将两组数据首先做Z分数处理之后, 然后两组数据的乘积和除以样本数，Z分数一般代表正态分布中, 数据偏离中心点的距离.等于变量减掉平均数再除以标准差.(就是高考的标准分类似的处理)


样本标准差则等于变量减掉平均数的平方和，再除以样本数，最后再开方，也就是说，方差开方即为标准差，样本标准差计算公式为：


![](https://img-my.csdn.net/uploads/201211/22/1353575338_2304.jpg)


所以, 根据这个最朴素的理解,我们可以将公式依次精简为:


![](https://img-my.csdn.net/uploads/201211/21/1353511454_8956.png)


其二, 按照大学的线性数学水平来理解, 它比较复杂一点,可以看做是两组数据的向量夹角的余弦。下面是关于此皮尔逊系数的几何学的解释，先来看一幅图，如下所示：


![](https://img-my.csdn.net/uploads/201211/21/1353507876_1491.png)


回归直线： y=gx(x) [红色] 和 x=gy(y) [蓝色]


如上图，对于没有中心化的数据, 相关系数与两条可能的回归线y=gx(x) 和 x=gy(y) 夹角的余弦值一致。


对于没有中心化的数据 (也就是说, 数据移动一个样本平均值以使其均值为0), 相关系数也可以被视作由两个随机变量 向量 夹角 的 余弦值（见下方）。


举个例子，例如，有5个国家的国民生产总值分别为 10, 20, 30, 50 和 80 亿美元。 假设这5个国家 (顺序相同) 的贫困百分比分别为 11%, 12%, 13%, 15%, and 18% 。 令 x 和 y 分别为包含上述5个数据的向量: x = (1, 2, 3, 5, 8) 和 y = (0.11, 0.12, 0.13, 0.15, 0.18)。

利用通常的方法计算两个向量之间的夹角  (参见 数量积), 未中心化 的相关系数是:


![](https://img-my.csdn.net/uploads/201211/21/1353507894_4766.png)


我们发现以上的数据特意选定为完全相关: y = 0.10 + 0.01 x。 于是，皮尔逊相关系数应该等于1。将数据中心化 (通过E(x) = 3.8移动 x 和通过 E(y) = 0.138 移动 y ) 得到 x = (−2.8, −1.8, −0.8, 1.2, 4.2) 和 y = (−0.028, −0.018, −0.008, 0.012, 0.042), 从中


![](https://img-my.csdn.net/uploads/201211/21/1353507911_5802.png)


(4)皮尔逊相关的约束条件


从以上解释, 也可以理解皮尔逊相关的约束条件:


1 两个变量间有线性关系 

2 变量是连续变量 

3 变量均符合正态分布,且二元分布也符合正态分布 

4 两变量独立

在实践统计中,一般只输出两个系数,一个是相关系数,也就是计算出来的相关系数大小,在-1到1之间;另一个是独立样本检验系数,用来检验样本一致性。


简单说来，各种“距离”的应用场景简单概括为，空间：欧氏距离，路径：曼哈顿距离，国际象棋国王：切比雪夫距离，以上三种的统一形式:闵可夫斯基距离，加权：标准化欧氏距离，排除量纲和依存：马氏距离，向量差距：夹角余弦，编码差别：汉明距离，集合近似度：杰卡德类似系数与距离，相关：相关系数与相关距离。
```



