# 伽马校正 - 工作笔记 - CSDN博客





2014年04月08日 21:34:48[Eason.wxd](https://me.csdn.net/App_12062011)阅读数：7597
所属专栏：[机器视觉](https://blog.csdn.net/column/details/33959.html)









所谓伽玛校正就是对图像的伽玛曲线进行编辑，以对图像进行非线性色调编辑的方法，检出图像信号中的深色部分和浅色部分，并使两者比例增大，从而提高图像对比度效果。

（一）伽马(γ )的概念

现实世界中几乎所有的CRT显示设备、摄影胶片和许多电子照相机的**光电转换特性都是非线性的**。**这些非线性部件的输出与输入之间的关系**（例如，电子摄像机的输出电压与场景中光强度的关系，CRT发射的光的强度与输入电压的关系）**可以用一个曲线表示，称为伽玛曲线（Gamma Curve）。**以传统CRT（Cathode Ray Tube）屏幕的特性而言，该曲线通常是一个乘幂函数：

**Y=(X+e)γ**

**其中，Y为亮度、X为输出电压、e为补偿系数、乘幂值（γ）为伽玛值，它用来衡量非线性部件的转换特性。这种特性称为幂-律(power-law)转换特性。**改变乘幂值（γ）的大小，就能改变CRT的伽玛曲线。按照惯例，“输入”和“输出”都缩放到0～1之间。其**中，0表示黑电平，1表示颜色分量的最高电平。对于特定的部件，人们可以度量它的输入与输出之间的函数关系，从而找出γ值。典型的Gamma值是0.45，它会使CRT的影像亮度呈现线性。使用CRT的电视机等显示器屏幕，由于对于输入信号的发光灰度，不是线性函数，而是指数函数，因此必需校正。　　**

实际的图像系统是由多个部件组成的，这些部件中可能会有几个非线性部件。如果所有部件都有幂函数的转换特性，那么整个系统的传递函数就是一个幂函数，它的指数γ 等于所有单个部件的g 的乘积。**如果图像系统的整个γ ＝1，输出与输入就成线性关系**。这就意味在重现图像中任何两个图像区域的强度之比率与原始场景的两个区域的强度之比率相同，这似乎是图像系统所追求的目标：真实地再现原始场景。但实际情况却不完全是这样。

当这种再生图像在**“明亮环境”**下，也就是在其他白色物体的亮度与图像中白色部分的亮度几乎相同的环境下观看时，**γ ＝1的系统的确可使图像看起来像“原始场景”一样**。但是某些图像有时在“**黑暗环境”**下观看所获得的效果会更好，**放映电影和投影幻灯片就属于这种情况。在这种情况下，γ 值不是等于1而通常认为g &raquo;1.5，人的视角系统所看到的场景就好像是“原始场景”。根据这种观点，投影幻灯片的γ 值就设计为1.5左右，而不是1。**

还有一种环境称为中间环境的**“暗淡环境”，**这种环境就像房间中的其他东西能够看到，但比图像中白色部分的亮度更暗。**看电视的环境和计算机房的环境就属于这种情况。在这种情况下，通常认为再现图像需要γ &raquo;1.25才能看起来像“原始场景”。**

（二）γ校正

 所有CRT显示设备都有幂-律转换特性，如果生产厂家不加说明，那么它的γ 值大约等于2.5。用户对发光的磷光材料的特性可能无能为力去改变，因而也很难改变它的γ值。**为使整个系统的γ 值接近于使用所要求的γ 值，起码就要有一个能够提供γ 校正的非线性部件，用来补偿CRT的非线性特性。**

        在电视和图形监视器中，显像管发生的电子束及其生成的图像亮度并不是随显像管的输入电压线性变化，电子流与输入电压相比是按照指数曲线变化的，输入电压的指数要大于电子束的指数。这说明暗区的信号要比实际情况更暗，而亮区要比实际情况更高。所以，要重现摄像机拍摄的画面，电视和监视器必须进行伽玛补偿。这种伽玛校正也可以由摄像机完成。我们对整个电视系统进行伽玛补偿的目的，是使摄像机根据入射光亮度与显像管的亮度对称而产生的输出信号，所以应对图像信号引入一个相反的非线性失真，即与电视系统的伽玛曲线对应的摄像机伽玛曲线，它的值应为1/γ，我们称为摄像机的伽玛值。电视系统的伽玛值约为2.2，所以电视系统的摄像机非线性补偿伽玛值为0.45。彩色显像管的伽玛值为2.8，它的图像信号校正指数应为1/2.8＝0.35，但由于显像管内外杂散光的影响，重现图像的对比度和饱和度均有所降低，所以现在的彩色摄像机的伽玛值仍多采用0.45。在实际应用中，我们可以根据实际情况在一定范围内调整伽玛值，以获得最佳效果。　　

**在所有广播电视系统中，γ 校正是在摄像机中完成的。最初的NTSC电视标准需要摄像机具有γ ＝1/2.2＝0.45的幂函数，现在采纳γ＝0.5的幂函数**。PAL和SECAM电视标准指定摄像机需要具有γ ＝1/2.8＝0.36的幂函数，但这个数值已显得太小，因此实际的摄像机很可能会设置成γ ＝0.45或者0.5。使用这种摄像机得到的图像就预先做了校正，在γ ＝2.5的CRT屏幕上显示图像时，屏幕图像相对于原始场景的γ 大约等于1.25。这个值适合“暗淡环境”下观看。

过去的时代是“模拟时代”，而今已进入“数字时代”，进入计算机的电视图像依然带有γ ＝0.5的校正，这一点可不要忘记。虽然带有γ 值的电视在数字时代工作得很好，尤其是在特定环境下创建的图像在相同环境下工作。可是在其他环境下工作时，往往会使显示的图像让人看起来显得太亮或者太暗，因此在可能条件下就要做γ 校正。

在什么地方做γ 校正是人们所关心的问题。从获取图像、存储成图像文件、读出图像文件直到在某种类型的显示屏幕上显示图像，这些个环节中至少有5个地方可有非线性转换函数存在并可引入γ 值。例如：

camera_gamma：摄像机中图像传感器的γ (通常γ ＝0.4或者0.5) 

encoding_gamma：编码器编码图像文件时引入γ 

decoding_gamma ：译码器读图像文件时引入γ

LUT_gamma：图像帧缓存查找表中引入γ

CRT_gamma：CRT的γ (通常g ＝2.5) 

在数字图像显示系统中，由于要显示的图像不一定就是摄像机来的图像，假设这种图像的γ 值等于1，如果encoding_gamma＝0.5，CRT_gamma＝2.5和decoding_gamma，LUT_gamma都为1.0时，整个系统的γ 就近似等于1.25。

　　根据上面的分析，为了在不同环境下观看到“原始场景”可在适当的地方加入γ 校正。

﻿﻿



