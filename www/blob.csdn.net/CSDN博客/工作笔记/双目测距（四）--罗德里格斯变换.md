# 双目测距（四）--罗德里格斯变换 - 工作笔记 - CSDN博客





2016年07月26日 10:27:32[Eason.wxd](https://me.csdn.net/App_12062011)阅读数：7753
所属专栏：[机器视觉](https://blog.csdn.net/column/details/33959.html)








原文：http://blog.sina.com.cn/s/blog_5fb3f125010100hp.html从今天开始，把自己学习OpenCV的心得记录下来，以系列的形式贴到博客中，以期交流与备查之用，笔记内容主要偏向于算法的理解。
    处理三维旋转问题时，通常采用旋转矩阵的方式来描述。一个向量乘以旋转矩阵等价于向量以某种方式进行旋转。除了采用旋转矩阵描述外，还可以用旋转向量来描述旋转，旋转向量的长度（模）表示绕轴逆时针旋转的角度（弧度）。旋转向量与旋转矩阵可以通过罗德里格斯（Rodrigues）变换进行转换。
     算法过程如下：

![](https://img-blog.csdn.net/20171225130904253)


式中，norm为求向量的模。反变换也可以很容易的通过如下公式实现：

![](https://img-blog.csdn.net/20171225131000384)


OpenCV实现Rodrigues变换的函数为

intcvRodrigues2( constCvMat*src,CvMat*dst,CvMat*jacobian=0 );

src为输入的旋转向量（3x1或者1x3）或者旋转矩阵（3x3）。


dst为输出的旋转矩阵（3x3）或者旋转向量（3x1或者1x3）。


jacobian为可选的输出雅可比矩阵（3x9或者9x3），是输入与输出数组的偏导数。

  可以用上述方式法验证以下例子

![](https://img-blog.csdn.net/20171225131009187)




验证代码如下：

#include< stdio.h>
#include< cv.h>

voidmain()
{
int
i;
double
r_vec[3]={-2.100418,-2.167796,0.273330};
double
R_matrix[9];
CvMat
pr_vec;
CvMat
pR_matrix;

cvInitMatHeader(&pr_vec,1,3,CV_64FC1,r_vec,CV_AUTOSTEP);
cvInitMatHeader(&pR_matrix,3,3,CV_64FC1,R_matrix,CV_AUTOSTEP);
cvRodrigues2(&pr_vec,&pR_matrix,0);

for(i=0;i<9;i++)
{
printf("%f\n",R_matrix[i]);
}
}




