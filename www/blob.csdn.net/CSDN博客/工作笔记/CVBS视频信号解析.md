# CVBS视频信号解析 - 工作笔记 - CSDN博客





2014年02月19日 09:46:46[Eason.wxd](https://me.csdn.net/App_12062011)阅读数：71923
所属专栏：[机器视觉](https://blog.csdn.net/column/details/33959.html)









 在我们的电视天线信号线里就只有两跟线，中间有一根很粗的线，外围包着一层的线，这是为了防止外界信号的干扰。在这两根线中一个是地线，一根是全电视信号线，外围的是地线。

    做视频处理很难免要接触电视信号，了解全电视信号的原理。当我们把电视的信号线接到示波器上看其波形时会发现其波形很乱，但总是有一些规律可循：每隔一段特别乱的波形之后有一个很小的低电平。在这其中，中间那些特别乱的波形其实就是有效像素电平的高低信号，那些很小的电平信号就是一些同步信号。

1、关于像素时钟：大约在13.5MHz，由采样定理得出的采样信号为27MHz，像素时钟就是来同步像素有效信号的，每一个像素时钟来一个像素值；

2、关于行同步信号：顾名思义就是同步行扫描的信号，每行来一次，低电平有效（对于正电视信号而言），每来一次行同步信号就意味着本行扫描结束，新的一行就要开始了；

3、关于场同步信号：顾名思义就是同步场扫描的信号，每场来一次，低电平有效，每来一次就意味着本场扫描结束新的一场就要开始；

4、关于场、帧的概念：从屏幕上头扫到下头叫做一场，但是并不等同于一帧，一帧图像是指能够组成完整画面的图像数据，在隔行扫描中一帧包括两场：奇场和偶场；

5、关于CVBS波形电平的解析：（假设为正电视信号）设最低电平为0,最高电平为1,在两者之间有一合理的分界值x，认为x到1之间的为像素值，将这个区间划分为256份（假设精度为8位），每一个值对应一个灰度值，其中x代表黑色，1代表白色，中间为各级灰度。(一个电平就可以表示一个256之内的数字，模拟电平)x以下的电平不是有效地像素值也可以说是黑色，那些同步信号就融合在其中，包括行同步信号和场同步信号，场同步信号比行同步信号要宽很多，具体的都有自己的时间长短定义，这样才能保持发送和接收段信号的一致性，才能够恢复原来的图像；

6、关于奇偶场的概念；就是一帧分两场扫描，先扫描奇场再扫描偶场，两场组成一帧。

7、关于场消隐和行消隐：跟在场同步和行同步之后，当一行扫到屏幕的最右头或者一场扫描到屏幕的最底端时，必须返回进行下一行或者下一场的扫描，但是又不能让人眼看出来，因此就诞生的场消隐和行消隐信号，在此期间回扫器件，虽然也是在扫描但是看不出来就像隐藏的一样。

8. 视频信号电平



视频信号电平定义了视频信号不同部分的电平和范围。用于定义视频信号电平的组织是IRE（无线电工程师协会）。消隐电平对应0 IRE，白色电平对应+ 100 IRE。消隐电平是视频信号的参考级别（通常为0 V），如下面的图6所示，如果对信号进行一定的设置，消隐电平和黑色电平是不同的。

![](http://www.ni.com/cms/images/devzone/tut/a/f19f8d1a1014.gif)

**图6：视频信号电平**



对于NTSC而言，通常应用7.5 IRE设置，将黑色电平提高为+ 7.5 IRE。对于PAL和SECAM，黑色电平与消隐电平一致，均为0 IRE。

下表根据视频格式显示了不同的视频信号电平。
|**视频格式**|**同步电平**|**消隐电平**|**黑色电平**|**白色电平**|**峰值电平**|**突发幅值**|
|----|----|----|----|----|----|----|
|NTSC|–40 IRE|0 IRE|+7.5 IRE|+100 IRE|+120 IRE|20.0 IRE|
|PAL|–43 IRE|0 IRE|0 IRE|+100 IRE|+133 IRE|21.5 IRE|
|SECAM|–43 IRE|0 IRE|0 IRE|+100 IRE|+130 IRE|N/A|

模拟合成视频信号使用75 Ω的输出阻抗定义为电压源。当带75 Ω阻抗的负载时，白色电平同步通常为1 V峰峰值。因此，无负载信号名义上为2 V峰峰值。

![](https://img-blog.csdn.net/20140219110835796)

也就是140IRE = 1Vp-p

9. 理解复合视频信号

复合视频信号是所有需要生成视频信号的成分组合在同一信号中的信号。构成复合信号的三个主要成分如下：
- 亮度信号——包含视频图像的强度（亮度或暗度）信息
- 色彩信号——包含视频图像的色彩信息
- 同步信号——控制在电视显示屏等显示器上信号的扫描

单色复合信号是由两个成分组成的：亮度和同步。图1显示了这个信号（通常成为Y信号）。

![](http://www.ni.com/cms/images/devzone/tut/a/f19f8d1a1007.gif)
**图1：单色复合视频信号（亮度从白过渡到黑）**



色彩信号通常被称为C信号，在图2中示出。

![](http://www.ni.com/cms/images/devzone/tut/a/f19f8d1a1008.gif)

**图2：彩色条的色彩信息信号（包括颜色突发）**



复合彩色视频信号通常成为彩色视频、消隐与同步（CVBS）信号示Y与C之和，如图3所示。

*CVBS = Y + C*

![](http://www.ni.com/cms/images/devzone/tut/a/f19f8d1a1009.gif)

**图3：彩色条的彩色复合视频信号**



两个组成部分Y与C可以作为两个独立信号分开传输。这两个信号合称为Y/C或S视频。

10. 视频信号组成

复合视频信号的概念

在一个信号中包含了亮度信号、色度信号与同步信号（包括场同步、行同步信号及行场消隐信号） ，称为复合视频信号。 

又称为CVBS，表示Color，Video，Blanking，Sync，或者composite video baseband signal。

复合视频信号把亮度、色度与同步信号复合在一个信号通道上传输，也就是在传输前需要把色度信号与亮度信号“合成”在一个信号里，在传输后再将色度信号与亮度信号“分离”开来，送到显示电路处理。

在色度信号与亮度信号的“合成”与“分离”过程中，因为亮度信号与色度信号之间的相互干扰以及复合视频信号本身带宽的限制等，影响了图像的质量。复合视频信号，没有象射频电视广播信号那样经过调制、音/视频混合/分离、放大、检波、解调等过程，传输的图像质量，相对射频电视广播信号要好一些，但相对其它视频信号，传输的图像质量是比较差的，水平分辨率一般可达 350-450 线。

在复合视频信号的波形中，亮度与同步信号加在一起，称为亮度信号Y(Luminance，Luma)。色调与色饱和度通过一定的转换，转换成色差信号，然后调制在色副载波上，已调色差信号即为色度信号C (Chrominance，Chroma)。色度信号的相位代表色相，即颜色，其幅度代表色饱和度。

单一水平视频行信号由水平同步信号、后沿、活动象素场以及前沿组成，其中，水平同步，后沿，前沿，组成水平消隐，如图4所示。



![](http://www.ni.com/cms/images/devzone/tut/a/f19f8d1a1010.gif)

![](https://img-blog.csdn.net/20140508140937140)
**图4：视频信号组成**


|水平同步（HSYNC）信号表示每条新的视频行的开始。其后是后沿，用来作为从浮地（交流耦合）视频信号去除直流分量的参考电平。这是通过单色信号的钳制间隔实现的。对于合成彩色信号，钳制发生在水平同步脉冲中，由于大部分后沿用于色彩突发，它提供了信号色彩成分解码信息。色彩信息可以包含在单色视频信号中。复合色彩信号包含标准单色信号（RS-170或CCIR），并加入了以下成分：- **色彩突发：位于后沿，这是提供后续色彩信息相位和幅值参考的高频场。**- **色彩信号：这是实际的色彩信息。它由两个以色彩突发频率调制到载波的象限成分组成。这些组成部分的相位和幅值决定了每个象素的色彩内容。**|
|----|

VBI:场消隐间隔：

![](https://img-blog.csdn.net/20140219132433140)


![](https://img-blog.csdn.net/20140219132533578)

视频信号的另一方面是垂直同步（VSYNC）脉冲。这实际上是在场之间发生的脉冲序列，用于通知显示器，完成垂直重跟踪，准备扫描下一场。在每个场中都有几行是不包含活动视频信息的。有些只包含HSYNC脉冲，而其他包含均衡与VSYNC脉冲序列。这些脉冲是在早期的广播电视中定义的，所以从那以后构成了标准的一部分，虽然之后的硬件技术能够避免部分附加脉冲的使用。在图5中给出了复合RS-170交叉信号，其中包括垂直同步脉冲，为了简单起见，下面给出了一个6行帧：



![](http://www.ni.com/cms/images/devzone/tut/a/f19f8d1a1011.gif)

**图5：VSYNC脉冲**




应当理解对于从模拟相机得到的图片，其垂直尺寸（以象素为单位）是由帧接收器对水平视频行采样的速率所决定的。而这个速率是由垂直行速率合相机的体系结构所决定的。相机CCD阵列的结构决定了每个象素的大小。为了避免图像失真，您必须对水平方向，以一定速率进行采样，将水平的活动视频场分割为正确的象素点数。下面是RS-170标准的实例：


感兴趣参数：
- 行/帧数：525（其中包括用于显示的485线；其余是每两个场之间的VSYNC行）
- 行频率：15.734 kHz
- 行持续时间：63.556微秒
- 活动水平持续时间：52.66微秒
- 活动象素/行数：640

现在，我们可以进行一些计算：
- 象素时钟频率（每个象素达到帧接收器的频率）：

	640象素/行 / 52.66 e-6 秒/行 = 12.15 e6 象素/行（12.15 MHz）
- 活动视频的象素行长度 + 定时信息（称为HCOUNT）：

	63.556 e-6 秒 * 12.15 e6 象素/秒 = 772 象素/行
- 帧率：

	15.734 e3 行/秒 / 525 行/帧 = 30 帧/秒

11. 不同的视频格式

以下表格描述了常用标准模拟视频格式的一些特征：


NTSC：美国国家电视标准委员会

PAL：逐行倒相

SECAM: Systeme Electronic Pour Coleur Avec Memoire
|**格式**|**应用国家和地区**|**模式**|**信号名称**|**帧速率，扫描速度（帧/秒）**|**垂直分辨率**|**行速率（线/秒）**|**图像尺寸（宽×高）象素**|
|----|----|----|----|----|----|----|----|
|NTSC|北美洲、中美洲、日本|单色|RS-170|30|525|15,750|640x480|
|彩色|NTSC Color|29.97|525|15,734| | | |
|PAL|欧洲（除法国）、澳大利亚、非洲与南美洲部分地区|单色|CCIR|25|405|10,125|768x576|
|彩色|PAL Color|25|625|15,625| | | |
|SECAM|法国、东欧、俄罗斯、中东与非洲部分地区|单色|![](http://www.ni.com/cms/images/devzone/tut/fidmbzbv1042151929740194565.gif)|25|819|20,475|N/A|
|彩色|![](http://www.ni.com/cms/images/devzone/tut/fidmbzbv1042151929740194565.gif)|25|625|15,625| | | |
`12. 彩色编码`
对于所有的PAL和NTSC格式而言，**编码是基于正交调幅（QAM）概念的，其中将两个彩色成分通过象限幅度调制之后，合并在一起。调制必须经过解码，因此跟踪绝对相位需要对彩色信息进行解码。称为彩色突发的参考信号被插入到每行的开始处，它位于水平同步脉冲之后（参阅上述图3与图4）**。

对于所有的SECAM格式，两个彩色成分使用两个不同的子载波频率进行频率调制，之后顺序分步在不同的视频行上。SECAM格式不需要彩色突发信号。

13. 隔行扫描概念

所有复合视频系统使用隔行扫描技术在电视屏幕上显示视频图像。图7显示了隔行扫描概念。

![](http://www.ni.com/cms/images/devzone/tut/a/f19f8d1a1015.gif)

**图7：电视屏幕上的隔行扫描**



模拟视频信号包含控制扫描从左到右逐行以及从上到下逐场进行扫描。控制逐行扫描的脉冲称为水平同步脉冲（H-Sync）。控制垂直扫描的脉冲称为垂直同步脉冲（V-Sync）。

两个交叉场合成一个完整帧。第一个场称为奇数场，对视频图像的奇数行进行扫描。第二个场称为偶数场，对视频图像的偶数行进行扫描。整个过程对每帧进行重复。

### 7. 活动图像



扫描得到的活动视频图像总是具有4/3的尺寸比例（水平/垂直），它与视频格式无关。彩色复合视频信号表明扫描过程要求在每行的左侧和右侧需要一些附加空间，在活动视频图像场的顶部和底部也同样如此。这个额外的空间包含同步信号、彩色突发以及其他例如ITS等格式特定的信息，这并不是活动视频图像的一部分。大约所有行的90％以及每行的80％都能够传送活动图像信息。如下表所示，精确的数值依赖于视频格式。
|**视频格式**|**行/帧**|**活动行**|**帧速率**|**行持续时间**|**活动行持续时间**|
|----|----|----|----|----|----|
|NTSC|525|480/486|29.97 帧/秒|63.55 *µ*s|52.2 *µ*s|
|PAL/SECAM|625|576|25.00 帧/秒|64.00 *µ*s|52.0 *µ*s|

活动行代表了实际用于传送图像和信息的行数。举例而言，在NTSC中，每帧的525行中只有480行是传送图像信息的。同样，在每行中，只有在活动行序列中才传送图像信息，这比整行的持续时间短。举例而言，在NTSC中，63.55 *µ*s中只有52.2*µ*s是活动行持续时间。帧速率是扫描速度。

### 8. 灰度图像和提取线谱轮廓



假设以下条件满足，下一小节中的完整NTSC帧扫描图像对在电视屏幕上可能出现的视频显示进行了模拟：
- 电视能够显示整条线，而不仅仅是活动图像部分。
- 电视并非将两个场进行隔行扫描得到完整的图像帧，而是对整个帧逐行扫描。



扫描从代表偶数场垂直同步模式的几行开始扫描（从上到下逐行）。在偶数场的垂直同步模式之后插入可选的测试信号（ITS）。最后显示实际的奇数场活动图像。

这个过程对偶数场重复，构成完整的帧。


|![](http://www.ni.com/cms/images/devzone/tut/a/f19f8d1a1016.gif)|**说明：**大多数行从水平同步脉冲开始，随后是色彩突发模式信号。之后的活动图像（或ITS）显示强度变化，其中较高的信号电平代表更高的亮度。|
|----|----|

位于图8和图9底部的提取谱线轮廓显示了从偶数场提取的活动视频信号行。关于视频电平的更多信息，等参阅之前的视频信号小节。

水平同步脉冲一般是简单的负脉冲，这些脉冲电平低于亮度信号电平。但是，垂直同步信号由分步在多行上的脉冲序列构成，脉冲序列对于奇数场和偶数场而言是不同的。图8和图9显示了用于两种场和三种主要视频格式的垂直同步模式。


![](http://www.ni.com/cms/images/devzone/tut/a/f19f8d1a1017.gif)

**图8：用于NTSC的场消隐与同步信号**

![](http://www.ni.com/cms/images/devzone/tut/a/f19f8d1a1018.gif)
**图9：用于PAL和SECAM的场消隐与同步信号**

### 9. 完整的NTSC帧扫描

图10显示了对构成完整NTSC帧的525行进行扫描的结果。

![](http://www.ni.com/cms/images/devzone/tut/a/f19f8d1a1019.gif)

**图10：完整的NTSC帧扫描**



图10是一个灰度图像，由于它代表了原始NTSC视频波形的强度图。色彩信息嵌入到这个波形中，还没有进行编码。

您可以看到左边的信号色彩突发。点状模式代表了正弦节拍的强度图，构成色彩突发波形。在解码之后，色彩突发看上去像是单色的表面（如果在电视显示器上可见）。





﻿﻿

﻿﻿

﻿﻿

﻿﻿

﻿﻿



