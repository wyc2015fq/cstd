# 汇编学习--7.10--程序编写 - 工作笔记 - CSDN博客





2012年07月10日 12:04:38[Eason.wxd](https://me.csdn.net/App_12062011)阅读数：5402







伪指令：由编译器执行的指令，编译器根据伪指令来进行相关的编译工作。segment、ends伪指令：功能是定义一个段，segment说明一个段的开始，ends说明一个段的结束。一个段必须有一个标识名来标识，格式为：

段名 segment

……

段名 ends
 注意：ends理解为是“end segment”的缩写。

             segment 和 ends 总是成对使用，是在编译器编译汇编程序时必须用到的一对伪指令。

             一个有意义的汇编程序中至少有一个代码段。
end伪指令：结束对源程序的编译，是汇编程序结束标志。
assume伪指令：功能是用assume将有特定用途的段和相关的寄存器相关联起来，格式为：

assume 段寄存器：段名源程序：源程序文件中所有的内容成为源程序。

程序：源程序中最终由计算机执行、处理的指令或数据称为程序，即不包括伪代码等。
标号：一个标号指代了一个地址，比如，一个段的段名最终将被编译、连接程序处理为一个段的段地址。
程序返回：一个程序结束后，将CPU的控制权交还给使它得以运行的程序，这个过程就是程序返回。
程序返回指令：（在程序的末尾使用这两条指令实现程序返回）

mov ax,4c00H

int 21H
语法错误：程序在编译时被编译器发现的错误，比较容易发现并解决。例如，缺少ends。

逻辑错误：在原程序编译后，在运行时发生的错误。例如，缺少程序返回指令。
编辑源程序：运行“edit”指令，或者运行“command”——“edit”指令，可以在DOS环境下的Edit编辑源程序，同样可以用ALT+ENTER切换全屏窗口。最后将其保存为
 d : \ *****.asm 等等。

编译和连接，略。。。可执行文件(.exe)的执行过程：command——.exe——command

1、此时正在运行的command将.exe文件中的程序加载入内存；

 2、command设置CPU的CS:IP指向程序的第一条指令（即程序的入口），从而使程序得以运行；

3、程序运行结束后，返回到command中，CPU继续执行command。

-----------------------------------------------------------------------------------------------------------------------------            

用debug跟踪一个程序的运行过程：在程序文件目录下执行 debug ***.exe，其中CX寄存器存放程序的长度（字节数）。进入了dubug后，可以用R命令和U命令查看一下寄存器初始状态和其他指令；然后，用T命令一步一步执行；然后，用P命令返回debug中；最后以Q命令退出debug，返回到command中。

注意：在DOS中运行程序时，是command将程序加载入内存，所以程序运行结束后返回到command中；而在这里是Debug将程序加载入内存，所以程序运行结束后要返回到Debug中，而Debug是由command加载运行的，所以继续返回到command中：command——debug——.exe——debug——command。

-----------------------------------------------------------------------------------------------------------------------------            

DOS系统中.EXE文件中的程序加载入内存：程序加载后，ds存放程序所在的内存区的段地址，若这个内存区的偏移地址为0，则程序所在内存区的地址为ds:0。这个内存区前256字节中存放PSP，在DOS中用来和程序进行通信，然后的空间存放程序，因此，程序物理地址为（ds+16）*16+偏移地址，256字节即100H字节，因此如果DS=129E，则程序地址为12AE:0（129E+10H）。



