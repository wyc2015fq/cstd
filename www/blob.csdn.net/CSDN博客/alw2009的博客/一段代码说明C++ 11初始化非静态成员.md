# 一段代码说明C++ 11初始化非静态成员 - alw2009的博客 - CSDN博客





2019年01月22日 23:17:53[traveler_zero](https://me.csdn.net/alw2009)阅读数：12








### **一、结论**

1.  非静态成员按照声明的顺序初始化。

2.  尽量在声明的地方初始化。

3. 尽量避免在构造函数的代码块做初始化。



### 二、代码实例

```cpp
#include <iostream>
#include <string>

using namespace std;

struct Object {
    static int seq;

    Object() {
        cout << "defualt construct Object:" << seq++
             << "(" << this << ")" << endl;
    }

    Object(int a) {
        cout << "converstion construct Object " << seq++
             << "(" << this << ")" << endl;
    }

    Object& operator=(const Object& other) {
        cout << "copy construct Object " << seq++
             << "(" << this << ")" << endl;
        return *this;
    }
};

int Object::seq = 0;

struct User {
    Object obj1 = 0;
    Object obj2;
    Object obj3;
    Object obj4;

    User():
        obj2(1),
        obj4(2)
    {
        cout << "asignment initialize non static member\n";
        obj3 = Object(2); // bad initialization.

        cout << "object address:\n"
             << "obj1:" << &obj1 << endl
             << "obj2:" << &obj2 << endl
             << "obj3:" << &obj3 << endl
             << "obj4:" << &obj4 << endl;
    }
};

int main(int argc, char *argv[])
{
    User u;
    return 0;
}
```



### 三、程序输出

```bash
converstion construct Object 0(0x7ffe18e6e63c)
converstion construct Object 1(0x7ffe18e6e63d)
defualt construct Object:2(0x7ffe18e6e63e)
converstion construct Object 3(0x7ffe18e6e63f)
asignment initialize non static member
converstion construct Object 4(0x7ffe18e6e60f)
copy construct Object 5(0x7ffe18e6e63e)
object address:
obj1:0x7ffe18e6e63c
obj2:0x7ffe18e6e63d
obj3:0x7ffe18e6e63e
obj4:0x7ffe18e6e63f
```





