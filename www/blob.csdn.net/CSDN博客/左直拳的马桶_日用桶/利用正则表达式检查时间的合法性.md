# 利用正则表达式检查时间的合法性 - 左直拳的马桶_日用桶 - CSDN博客
2006年04月20日 16:39:00[左直拳](https://me.csdn.net/leftfist)阅读数：3045标签：[正则表达式																[javascript																[datagrid																[服务器																[function																[浏览器](https://so.csdn.net/so/search/s.do?q=浏览器&t=blog)](https://so.csdn.net/so/search/s.do?q=function&t=blog)](https://so.csdn.net/so/search/s.do?q=服务器&t=blog)](https://so.csdn.net/so/search/s.do?q=datagrid&t=blog)](https://so.csdn.net/so/search/s.do?q=javascript&t=blog)](https://so.csdn.net/so/search/s.do?q=正则表达式&t=blog)
个人分类：[.NET																[JavaScript](https://blog.csdn.net/leftfist/article/category/94500)](https://blog.csdn.net/leftfist/article/category/94497)
利用正则表达式检查时间的合法性
左直拳
许多时候，少不得要检测一下用户输入的时间格式是否正确。对于B/S结构程序而言，既可以在服务器端检查，也可以在浏览器端检查，将错误封杀于提交之前，免得拿这些小事去烦服务器。
我有个WEB应用程序，需要在一个datagrid里面输入时间。决定在提交前检测时间合法性。
思路如下：
1、设置一个可使用自定义的javascript函数的数据检查控件CustomValidator指向时间输入文本框txtTime；
2、编写一个检测时间的javascript函数CheckTime；
3、将CustomValidator的属性ClientValidatorFunction设为CheckTime。
关键是函数CheckTime该怎么写。
用正则表达式。
正则表达式是个好东西，看起来相当复杂，却真的很好用（痘痘真的不再长）。比如，检测邮箱合法性，用的就是一串长长的，神秘的正则表达式。
时间的格式形如：hh:mm。除了分隔符“:”外，只能是数字。并且小时不能>23，分钟不能>59。构造正则表达式如下：
var pattern = /(/d|([0-1]/d)|(2[0-3])):(/d|([0-5]/d))/;
其中，“/d”代表0~9的任意一位数字；“|”表示“或”的关系；“()”就跟平常用的括号没什么两样。用意很明显。
可是在测试的时候发现，象9:89，67:5a，b01:00这样的串放上去都显示合法。原来是没有标明串的开头和结尾，比如9:89，其中9:8确实是符合表达式的，并没有错。加上开头标志符“^”和结尾标志符“$”就搞定了。修正后的正则表达式
var pattern = /^(/d|([0-1]/d)|(2[0-3])):(/d|([0-5]/d))$/;
完整的检测时间函数
//检测时间的合法性
function CheckTime(source,args)
{
var time = args.Value;
var pattern = /^(/d|([0-1]/d)|(2[0-3])):(/d|([0-5]/d))$/;
if( time != "" && !pattern.test(time) ) 
{
args.IsValid = false;
return;
}
args.IsValid = true;
}
