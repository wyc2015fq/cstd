# 下载防盗链图片的关键 - 左直拳的马桶_日用桶 - CSDN博客
2012年07月04日 16:10:03[左直拳](https://me.csdn.net/leftfist)阅读数：2029
下载防盗链图片的关键在于设置 Request.Referer 属性。
主要是伪装成是图片所在页面发出的请求。
假设
图片所在页面地址为urlPage
图片地址为 srcImg
那么应该
```
// 创建一个URL请求
            Uri uriImg = new Uri(srcImg);
            HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uriImg);
            // 定义客户机可以处理的文件类型
            req.Accept = "image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, application/msword, application/vnd.ms-excel, application/x-shockwave-flash, application/vnd.ms-powerpoint, */*";
            // 标明产生请求的初始资源
            Uri uriPage = new Uri(urlPage);
            req.Referer = "http://" + uriPage.Host;
            // 定义用于产生请求的软件类型
            req.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; SV1;)";
            req.KeepAlive = true;
            req.Timeout = 60000;
            return req;
```
