# 预编译头文件(stdafx.h) - yixianfeng41的专栏 - CSDN博客
2015年12月03日 19:33:16[第2梦](https://me.csdn.net/yixianfeng41)阅读数：733
所属专栏：[C++编程](https://blog.csdn.net/column/details/14514.html)
## 1、概念
所谓的预编译头文件，这里的头文件一般就是我们常见的的“stdafx.h",这个名字是微软默认的，英文全称：Standard Application Framework Extensions.名字可以改，内容也可以改。它通常就是把一个工程中使用的一些MFC标准头文件（如windows.h,afxwin.h)进行预先编译。以后工程编译时，不在编译这部分头文件，仅仅使用编译的结果。注意，头文件是不能被编译的，因此，会有一个stdafx.cpp文件，这个文件中一开始可以没有内容，但是必须加上一句”include“stdafx.h",然后编译一下，就会出现一个(.pch)文件，这个就是我们常说的预编译头文件。
## 2、使用
为什么使用预编译头文件了？原因很简单，这么做的目的就是减少预编译时间。因为如果不这样做的话，引入得那几个文件被很多项目文件使用，在编译的时候，一次又一次的编译，很费时。而有了预编译头文件，我们就把频率很高的那部分东西已经编译好了，就像一个通用零件，已经做好了，拿来直接用。这样可以利用编译好的结果，从而可以节约编译时间。具体使用，编译器通过引用stdafx.h来使用预编译头文件。编译器认为所有在指令#include"stdafx.h"前的都是预编译的，它跳过#include'stdafx.h"这条指令，编译其后代码。
### 什么时候使用：
1）一些大型程序用这个比较好，但是一些小型的不点行的程序还是不要用预编译头文件的好，因为Create一个预编译头文件本身也是要时间的。
2）预编译头文件中一般只放系统头文件。比如说你使用MFC，很多的头文件就必须要来回地用，这时，不要你操心，系统就会默认地给你弄个预编译头文件，来成倍地节约编译时间。
3）自己编的一些很常用的基本固定不变的头文件。就是我们自己搞一个预编译头文件，用自己的名字，然后可以把系统的Stdafx.h包含进去。注意这么做的话，千万要用自己的另外定义的名字。如果你在Stdafx.h里面包含自己的头文件，结果会把下家（看程序的人）迷糊了，因为我们习惯上在自己编的头文件中以“另可错杀一百，不可放过一个”的原则来包含预编译头文件，假如别人来使用这个头文件，那他可惨了，编译器会把这个当普通文件编的，那可不是节约时间了，那是在浪费时间。
### 选择：
在项目或者项目里某个文件点击右键，属性-》c/c++-》预编译头，可以选择创建、使用和不使用。
## 3、错误
有没有遇到这个错误过，error C1010: 在查找预编译头时遇到意外的文件结尾。是否忘记了向源中添加“#include "stdafx.h"”?  或者 fatal error C1010: unexpected end of file while looking for precompiled header directive 
### 解决办法：
1）检查出错文件是否忘记了添加#include”stdafx.h"，如果忘记了，加上；
2）要注意下类和结构结束要加分号，要是忘了也会出错。
3）#include”stdafx.h"一定要放在最开头。
4）开始没错误，如果是添加了几个文件进当前项目，添加了#include”stdafx.h",还是出现了这个问题，退而求其次，可以选择在解决方案目录下，右键击出错的文件，属性-》c/c++-》预编译头文件-》不使用。
