# hdu1437——天气情况 - westbrook1998的博客 - CSDN博客





2018年07月26日 15:59:57[westbrook1998](https://me.csdn.net/westbrook1998)阅读数：30








> 
如果我们把天气分为雨天，阴天和晴天3种，在给定各种天气之间转换的概率，例如雨天转换成雨天，阴天和晴天的概率分别为0.4,0.3,0.3.那么在雨天后的第二天出现雨天,阴天和晴天的概率分别为0.4,0.3,0.3.现在给你今天的天气情况,问你n天后的某种天气出现的概率. 

  Input 

  我们这里假设1,2,3分别代表3种天气情况,Pij表示从i天气转换到j天气的概率.  

  首先是一个数字T表示数据的组数.  

  每组数据以9个数开始分别是P11,P12,P13,……,P32,P33,接着下一行是一个数字m，表示提问的次数。每次提问有3个数据，i,j,n,表示过了n天从i天气情况到j天气情况(1<=i,j<=3 1<=n<=1000)。  

  Output 

  根据每次提问输出相应的概率(保留3位小数)。 

  Sample Input 

  1 

  0.4 0.3 0.3 0.2 0.5 0.3 0.1 0.3 0.6 

  3 

  1 1 1 

  2 3 1 

  1 1 2 

  Sample Output 

  0.400 

  0.300 

  0.250 

  Hint:如果GC提交不成功，可以换VC试试
不是很难 本来以为要dfs啥的 后来觉得循环模拟一遍就好了 

不过还是wa了几次 因为没有用一个最终结果变量来存 只是在循环里更新pa 

这就导致了pa已经更新 但是pb要更新的时候也需要之前的pa 但是pb已经更新了
代码：

```cpp
#include <cstdio>
#include <algorithm>
#include <cstring>
using namespace std;
double m[4][4];
int main(void){
    int t;
    scanf("%d",&t);
    while(t--){
        memset(m,0.0,sizeof(m));
        for(int i=1;i<=3;i++){
            for(int j=1;j<=3;j++){
                scanf("%lf",&m[i][j]);
            }
        }
        int q;
        int a,b,n;
        scanf("%d",&q);
        while(q--){
            scanf("%d%d%d",&a,&b,&n);
            double pa,pb,pc;
            double ans_a=pa=m[a][1];
            double ans_b=pb=m[a][2];
            double ans_c=pc=m[a][3];
            for(int i=1;i<n;i++){
                ans_a=pa*m[1][1]+pb*m[2][1]+pc*m[3][1];
                ans_b=pa*m[1][2]+pb*m[2][2]+pc*m[3][2];
                ans_c=pa*m[1][3]+pb*m[2][3]+pc*m[3][3];
                pa=ans_a;
                pb=ans_b;
                pc=ans_c;
            }
            if(b==1){
                printf("%.3lf\n",ans_a);
            }
            else if(b==2){
                printf("%.3lf\n",ans_b);
            }
            else{
                printf("%.3lf\n",ans_c);
            }
        }
    }
    return 0;
}
```






