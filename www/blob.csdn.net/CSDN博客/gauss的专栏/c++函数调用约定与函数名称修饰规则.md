# c++函数调用约定与函数名称修饰规则 - gauss的专栏 - CSDN博客
2011年12月18日 08:58:34[gauss](https://me.csdn.net/mathlmx)阅读数：490
函数调用约定(calling convention)
函数调用约定不仅决定了发生函数调用时函数参数的入站顺序，还决定了是由调用者函数还是被调用者函数负责清除栈中的参数，还原堆栈.
函数调用约定有很多方式，除了常见的_cdel,  _stdcall和_fastcall之外，c++的编译器还支持thiscall方式，不少c/c++编译器还支持naked call方式，
下面我们来说说各种修饰方式
**1:_cdel**
编译器的命令行参数是/Gd,_cdel方式是c/c++编译器默认的函数调用约定,所有的非c++成员和那些没有用_stdcall或_fastcall声明的函数都默认是_cdel方式，它使用c函数调用方式，函数参数按从右到左的顺序入栈，函数调用者负责清除栈中的参数,由于每次函数调用都要由编译器产生清除(还原)堆栈的代码，所以使用_cdel方式编译的程序比使用_stdcall约定方式编译的程序要大一些.但_cdel调用方式是由函数调用者负责清除栈中的函数参数，所以这种方式支持可变参数.像我们常用的sprintf,scanf这些函数就可以支持可变参数.
**2:_fastcall**
编译器的命令行参数是/Gr,_fastcall函数调用约定在可能的情况下使用寄存器传递参数，通常是前面两个DWORD类型参数和较小的参数使用EDX和ECX寄存器传递，其余的参数按照从左向右顺序入栈，被调用者在函数返回之前负责清除栈中的参数，编译器使用两个@@修饰函数名字，后跟一个数字表示函数参数大小
例如:
@function_name@number。
**3:_stdcall**
编译器命令行参数是/Gz, _stdcal是pascal程序缺省的调用约定,大多数Windows的API也是_stdcall调用约定._stdcall函数调用约定将函数参数从右向左方式入栈，除非使用指针或引用类型的参数，所有的参数采用传值的方式，由被调用这负责清除栈中的参数.
**4:thicall**
thicall只用在c++成员函数的调用,函数参数按照从右向左顺序入栈，类实例的this指针通过调用ECX寄存器传递，需要注意的是thicall不是C++的关键字,不能使用thicall声明函数，它只能由编译器使用.
**5:naked call**
前面几种函数调用的约定方式，编译器会在必要的时候自动在函数开始添加保存ESI,EDI,EBX,EBP寄存器的代码，在函数退出的时候恢复这些寄存器的内容，使用naked call
方式声明的函数不会添加这样的代码，naked call也不是类型修饰符，只能和_declspec共同使用哦.
