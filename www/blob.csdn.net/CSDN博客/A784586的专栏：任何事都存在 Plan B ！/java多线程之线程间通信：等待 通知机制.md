# java多线程之线程间通信：等待/通知机制 - A784586的专栏：任何事都存在 Plan B ！ - CSDN博客





2017年04月08日 16:10:19[QuJack](https://me.csdn.net/A784586)阅读数：348








 java多线程之线程间通信：等待/通知机制

1.不使用等待通知机制实现线程间的通信：

 while(true)+sleep()实现；一个线程中sleep().一个线程中while（）检查。while轮训机制来检查某一条件，这样浪费CPU资源；需要一种机制减少CPU的资源浪费，而且还可以实现多个线程间的通信，这就是“wait/notify”机制；

2.等待/通知机制的实现

**wait():**使处于临界区的线程进去等待状态，释同步对象的放锁；进入等待队列等待被唤醒；

**notify():**唤醒一个调用wait()而处于等待状态的线程，使其进入就绪状态；从等待队列进入可运行状态；

**notifyAll():**唤醒所有；

java为每个Object都实现了wait(),notify(),他们**必须在synchronized同步的Object的临界区内使用**。

wait()释放锁，notify()必须执行所在同步代码块后才释放锁；sleep()是Thread的方法，也不释放锁；

wait()遇到异常interrupt(),锁会被释放；

wait(1000):超过一定时间自动唤醒；

-----------------------------------------------



多线程的程序一般框架：

1.**一个服务类A**，用于生成对象a，a中包含多个的同步方法或者同步块；a.method1(); a.mothod2();

2.**多个线程类**：线程类ThreadA，线程类ThreadB；含有一个A类型的私有变量,构造函数中对其赋值；

Run中调用a中的同步方法；

3.**主程序**：将类A的对象a通过构造函数给ThreadA/ThreadB的A类型的成员，启动线程。






