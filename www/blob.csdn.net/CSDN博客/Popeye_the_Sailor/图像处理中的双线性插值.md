# 图像处理中的双线性插值 - Popeye_the_Sailor - CSDN博客
2018年08月28日 20:37:10[_Sailor_](https://me.csdn.net/lz0499)阅读数：61
###                                              图像处理中的双线性插值
**1.为什么要用图像的插值？**
在图像的放大和缩小的过程中，需要计算新图像像素点在原图的位置，如果计算的位置不是整数，就需要用到图像的内插，我们需要寻找在原图中最近得像素点赋值给新的像素点，这种方法很简单是**最近邻插法，**这种方法好理解、简单，但是不实用，会产生是真现象，产生棋盘格效应，更实用的方法就是**双线性内插。**
**2.一维线性插值**
![](https://img-blog.csdn.net/20170225143753924?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzM1NTgyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)
我们已经知道（x0，y0）与（x1, y1）的值，并且已知 x 的值，要求 y 的值。根据初中的知识：
我们可以得到:![](https://img-blog.csdn.net/20170225144358234?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzM1NTgyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center).     
令：![](https://img-blog.csdn.net/20170225144407073?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzM1NTgyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)
则：![](https://img-blog.csdn.net/20170225144414808?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzM1NTgyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)
以上公式可以理解为：最终生成的y值是y0 y1乘以相应权重之和。相应的权重值可以按照X与起始点的距离和终点与起始点距离的 比例确定其权重。假设x离x0比较近，那么插值生成的y中，y0所对应的权重值更大，因为y更靠近y0;相类似的；当x靠近x1的时候，那么插值生成的y中，y1所对应的权重值更大。
**2.双线性插值**
在数学上，双线性插值是有两个变量的插值函数的线性插值扩展，其核心思想是在两个方向分别进行一次线性插值[1]。见下图：
![clip_image001](http://images.cnitblog.com/blog/362399/201403/281607508919268.png)
双线性插值，又称为双线性内插。在[数学](http://zh.wikipedia.org/wiki/%E6%95%B0%E5%AD%A6)上，双线性插值是有两个变量的[插值](http://zh.wikipedia.org/wiki/%E6%8F%92%E5%80%BC)函数的[线性插值](http://zh.wikipedia.org/wiki/%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC)扩展，其核心思想是在两个方向分别进行一次线性插值。
假如我们想得到未知函数 ![f](http://upload.wikimedia.org/math/8/f/a/8fa14cdd754f91cc6554c9e71929cce7.png) 在点 ![P=\left( x, y\right)](http://upload.wikimedia.org/math/0/5/0/0506a08cb42636e5b8d212adf5c434db.png) 的值，假设我们已知函数 ![f](http://upload.wikimedia.org/math/8/f/a/8fa14cdd754f91cc6554c9e71929cce7.png) 在 ![Q_{11} = \left( x_1, y_1 \right)](http://upload.wikimedia.org/math/b/c/8/bc8f0dc01985190cd254a183461bd65e.png), ![Q_{12} = \left( x_1, y_2 \right)](http://upload.wikimedia.org/math/b/8/e/b8ec98846a7d0e35f30c147de66f1a34.png), ![Q_{21} = \left( x_2, y_1 \right)](http://upload.wikimedia.org/math/d/b/8/db8a8cb1b575e228dfdea51cbc1bb75c.png), 及 ![Q_{22} = \left( x_2, y_2 \right)](http://upload.wikimedia.org/math/f/f/8/ff8e7258cb51b54837c6e1aaf4b7e25f.png) 四个点的值。
首先在 x 方向进行线性插值，得到
![f(R_1) \approx \frac{x_2-x}{x_2-x_1} f(Q_{11}) + \frac{x-x_1}{x_2-x_1} f(Q_{21}) \quad\mbox{Where}\quad R_1 = (x,y_1),](http://upload.wikimedia.org/math/0/0/1/0014695061f06ae99b2a88885448f7fb.png)
![f(R_2) \approx \frac{x_2-x}{x_2-x_1} f(Q_{12}) + \frac{x-x_1}{x_2-x_1} f(Q_{22}) \quad\mbox{Where}\quad R_2 = (x,y_2).](http://upload.wikimedia.org/math/6/c/c/6ccb0faa10648961b7bc26f2656c3cf6.png)
然后在 y 方向进行线性插值，得到
![f(P) \approx \frac{y_2-y}{y_2-y_1} f(R_1) + \frac{y-y_1}{y_2-y_1} f(R_2).](http://upload.wikimedia.org/math/4/8/e/48efbc5513d6b06bf0a02780cacf35a3.png)
这样就得到所要的结果 ![f \left( x, y \right)](http://upload.wikimedia.org/math/d/1/d/d1d5f9036a25bed99ceaae9d63a20750.png),
![f(x,y) \approx \frac{f(Q_{11})}{(x_2-x_1)(y_2-y_1)} (x_2-x)(y_2-y) + \frac{f(Q_{21})}{(x_2-x_1)(y_2-y_1)} (x-x_1)(y_2-y)](http://upload.wikimedia.org/math/3/e/7/3e71fff610681c8e4932669a2076009c.png)
![+ \frac{f(Q_{12})}{(x_2-x_1)(y_2-y_1)} (x_2-x)(y-y_1) + \frac{f(Q_{22})}{(x_2-x_1)(y_2-y_1)} (x-x_1)(y-y_1).](http://upload.wikimedia.org/math/6/7/e/67e587b52822e9ac2714395548ce7024.png)
如果选择一个坐标系统使得 ![f](http://upload.wikimedia.org/math/8/f/a/8fa14cdd754f91cc6554c9e71929cce7.png) 的四个已知点坐标分别为 (0, 0)、(0, 1)、(1, 0) 和 (1, 1)，那么插值公式就可以化简为
![f(x,y) \approx f(0,0) \, (1-x)(1-y) + f(1,0) \, x(1-y) + f(0,1) \, (1-x)y + f(1,1) xy.](http://upload.wikimedia.org/math/1/8/3/1831a0c3c97e1a3deaa44f68cc752f6d.png)
或者用[矩阵](http://zh.wikipedia.org/wiki/%E7%9F%A9%E9%98%B5)运算表示为
![f(x,y) \approx \begin{bmatrix}1-x & x \end{bmatrix} \begin{bmatrix}f(0,0) & f(0,1) \\f(1,0) & f(1,1) \end{bmatrix} \begin{bmatrix}1-y \\y \end{bmatrix}](http://upload.wikimedia.org/math/f/c/2/fc2e1aee4d7434cc6c90fd34e0b2cbd4.png)
与这种插值方法名称不同的是，这种插值方法的结果通常不是线性的，它的形式是
![b_1 + b_2 x + b_3 y + b_4 x y. \,](http://upload.wikimedia.org/math/3/5/4/354506ed47c0513268e319bddb12a7c3.png)
常数的数目都对应于给定的 f 的数据点数目
![b_1 = f(0,0)](http://upload.wikimedia.org/math/b/b/5/bb57247ee546847ac73941455c43aee4.png)
![b_2 = f(1,0) - f(0,0)](http://upload.wikimedia.org/math/1/8/9/189328b02b979a42a045eee9afdfe9bf.png)
![b_3 = f(0,1) - f(0,0)](http://upload.wikimedia.org/math/3/5/c/35cc19c91f5378cf0df431f4b7823bec.png)
![b_4 = f(1,1) - f(1,0) - f(0,1) + f(0,0)](http://upload.wikimedia.org/math/3/f/9/3f923d2632e09c9b9470122bf179a9ba.png)
线性插值的结果与插值的顺序无关。首先进行 y 方向的插值，然后进行 x 方向的插值，所得到的结果是一样的。
参考资料：
[http://www.cnblogs.com/xpvincent/archive/2013/03/15/2961448.html](http://www.cnblogs.com/xpvincent/archive/2013/03/15/2961448.html)
[https://blog.csdn.net/u013355826/article/details/56680521](https://blog.csdn.net/u013355826/article/details/56680521)
