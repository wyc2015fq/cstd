# 图层寄宿图 - weixin_33985507的博客 - CSDN博客
2017年06月05日 12:57:00[weixin_33985507](https://me.csdn.net/weixin_33985507)阅读数：6
# 2.0 寄宿图
寄宿图 ： 图层(CALayer) 中包含的图。
# 2.1 contents 属性
CALayer有一个属性叫做 `contents`，这个属性的类型被定义为`Any`，意味着它可以是任何类型的对象。(如果是非指定类型，得到的是一个空白的图层)
UIImage有一个 `CGImage` 属性，可以赋值给CALayer的 `contents`。(图层的寄宿图赋值)
```
let image = UIImage(named: "Green.png")
layer.contents = image?.cgImage
```
CALayer有个属性叫做 `contentsGravity` ,决定内容(寄宿图)在图层的边界中怎么对齐,同时它还能在图层中等比例拉伸以适应图层的边界。
contentsGravity可选的常量值有以下一些：
```
kCAGravityCenter
kCAGravityTop
kCAGravityBottom
kCAGravityLeft
kCAGravityRight
kCAGravityTopLeft
kCAGravityTopRight
kCAGravityBottomLeft
kCAGravityBottomRight
kCAGravityResize
kCAGravityResizeAspect
kCAGravityResizeAspectFill
```
```
layer.contentsGravity = kCAGravityResizeAspect
```
CALayer有个属性叫做 `contentsScale` ,定义了寄宿图的像素尺寸和视图大小的比例，默认情况下它是一个值为1.0的浮点数。(contentsScale的效果并不是那么明显。它并不是总会对屏幕上的寄宿图有影响。)
```
layer.contentsScale = (image?.scale)!
```
UIView有一个 `clipsToBounds` 属性，可以决定是否显示超出边界的内容，CAlayer对应的属性是 `masksToBounds` ,设置为 `true` 不显示超出边界的内容。
```
layer.masksToBounds = true
```
CALayer的 `contentsRect` 属性允许我们在图层边框里显示寄宿图的一个子域，默认的contentsRect是{0, 0, 1, 1}。
```
layer.contentsRect = CGRect(x: 0, y: 0, width: 0.5, height: 0.5)
```
`contentsCenter` 是一个CGRect类型，它定义了一个固定的边框和一个在图层上可拉伸的区域。默认情况下，contentsCenter是{0, 0, 1, 1}，如果大小改变了,那么寄宿图将会均匀地拉伸开。
```
layer.contentsCenter = CGRect(x: 0.25, y: 0.25, width: 0.5, height: 0.5)
```
# 2.2 Custom Drawing
除了给 contents 赋 CGImage类型的值设置寄宿图，还可以直接用 `Core Graphics` 绘制寄宿图。
- 通过继承 `UIView` 并实现 `drawRect` 方法来自定义绘制。
- 遵循 `CALayerDelegate` 协议可以直接设置 CALayer 的 contents(寄宿图)属性：
```
//实现 CALayerDelegate协议中的 draw 方法
func draw(_ layer: CALayer, in ctx: CGContext) {
        ctx.setLineWidth(5)
        ctx.setStrokeColor(UIColor.red.cgColor)
        ctx.strokeEllipse(in: layer.bounds)
    }
```
```
layer.delegate = self
layer.display()
```
