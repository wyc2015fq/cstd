# 依赖注入 概念演示示例 - weixin_33985507的博客 - CSDN博客
2019年01月07日 22:56:57[weixin_33985507](https://me.csdn.net/weixin_33985507)阅读数：5
最近开始研究依赖注入。刚刚开始研究这个东西，遇到不少问题。首先，概念就理解的不是很清楚，更不要说代码实现点什么了。
Google之下找到一片好文：[http://tech.it168.com/w/d/2007-07-10/200707100933943.shtml](http://tech.it168.com/w/d/2007-07-10/200707100933943.shtml)
看了下，对依赖注入理解清晰了不少。
      不过，感觉作者为了简单，把所有的代码文件都放在了一个dll中。我觉得这样并不会
对读者理解依赖注入有帮助，所以重新整理了下，放在这里和大家分享。欢迎提出批评意见！
[代码](http://files.cnblogs.com/sunshine-anycall/IoCTest.rar)
以下是代码清单：
接口层 
```
1![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)namespace IoCTest.Interface
2![ExpandedBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockStart.gif)![ContractedBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedBlock.gif)![](https://www.cnblogs.com/Images/dot.gif){
3![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)    public interface IWeatherReader
4![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)    ![](https://www.cnblogs.com/Images/dot.gif){
5![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        string Current ![](https://www.cnblogs.com/Images/dot.gif){ get; set; }
6![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)    }
7![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockEnd.gif)}
```
接口的实现部分
```
1![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System;
 2![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Collections.Generic;
 3![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Linq;
 4![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Text;
 5![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using IoCTest.Interface;
 6![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)
 7![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)namespace IoCTest.Implementation
 8![ExpandedBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockStart.gif)![ContractedBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedBlock.gif)![](https://www.cnblogs.com/Images/dot.gif){
 9![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)    public class WeatherReaderImpl : IWeatherReader
10![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)    ![](https://www.cnblogs.com/Images/dot.gif){
11![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        private string _weather;
12![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        public WeatherReaderImpl(string weather)
13![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        ![](https://www.cnblogs.com/Images/dot.gif){
14![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            this._weather = weather;
15![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)        }
16![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
17![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        public string Current
18![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        ![](https://www.cnblogs.com/Images/dot.gif){
19![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)            get ![](https://www.cnblogs.com/Images/dot.gif){ return _weather; }
20![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)            set ![](https://www.cnblogs.com/Images/dot.gif){ _weather = value; }
21![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)        }
22![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)    }
23![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockEnd.gif)}
```
依赖注入容器
类型字典接口
```
1![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System;
 2![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Collections.Generic;
 3![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Linq;
 4![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Text;
 5![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)
 6![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)namespace IoCTest.Container
 7![ExpandedBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockStart.gif)![ContractedBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedBlock.gif)![](https://www.cnblogs.com/Images/dot.gif){
 8![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)    public interface ITypeMap
 9![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)    ![](https://www.cnblogs.com/Images/dot.gif){
10![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        TypeConstructor this[Type type] ![](https://www.cnblogs.com/Images/dot.gif){ get; }
11![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)    }
12![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockEnd.gif)}
```
类型字典接口的实现
```
1![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System;
 2![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Collections.Generic;
 3![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Linq;
 4![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Text;
 5![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using IoCTest.Implementation;
 6![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using IoCTest.Interface;
 7![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)
 8![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)namespace IoCTest.Container
 9![ExpandedBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockStart.gif)![ContractedBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedBlock.gif)![](https://www.cnblogs.com/Images/dot.gif){
10![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)    public class MemoryTypeMap : ITypeMap
11![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)    ![](https://www.cnblogs.com/Images/dot.gif){
12![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        private Dictionary<Type, TypeConstructor> _dicType = new Dictionary<Type, TypeConstructor>();
13![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        private static ITypeMap _typeMapInstance;
14![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
15![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        private MemoryTypeMap() ![](https://www.cnblogs.com/Images/dot.gif){ }
16![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
17![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        static MemoryTypeMap()
18![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        ![](https://www.cnblogs.com/Images/dot.gif){
19![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            MemoryTypeMap singleton = new MemoryTypeMap();
20![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            singleton._dicType.Add(typeof(IWeatherReader), new TypeConstructor(typeof(WeatherReaderImpl), "s"));
21![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            _typeMapInstance = singleton;
22![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)        }
23![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
24![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        public static ITypeMap Instance
25![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        ![](https://www.cnblogs.com/Images/dot.gif){
26![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)            get ![](https://www.cnblogs.com/Images/dot.gif){ return _typeMapInstance; }
27![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)        }
28![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
29![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        public TypeConstructor this[Type type]
30![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        ![](https://www.cnblogs.com/Images/dot.gif){
31![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            get
32![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)            ![](https://www.cnblogs.com/Images/dot.gif){
33![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)                TypeConstructor constructor;
34![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
35![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)                if (!_dicType.TryGetValue(type, out constructor))
36![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)                ![](https://www.cnblogs.com/Images/dot.gif){
37![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)                    return null;
38![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)                }
39![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)                else
40![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)                ![](https://www.cnblogs.com/Images/dot.gif){
41![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)                    return constructor;
42![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)                }
43![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)            }
44![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)        }
45![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)    }
46![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockEnd.gif)}
```
 类型示例创建相关类
```
1![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System;
 2![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Collections.Generic;
 3![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Linq;
 4![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Text;
 5![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)
 6![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)namespace IoCTest.Container
 7![ExpandedBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockStart.gif)![ContractedBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedBlock.gif)![](https://www.cnblogs.com/Images/dot.gif){
 8![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)    public class TypeConstructor
 9![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)    ![](https://www.cnblogs.com/Images/dot.gif){
10![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        private Type _type;
11![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        private object[] _parameters;
12![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
13![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        public Type GetType
14![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        ![](https://www.cnblogs.com/Images/dot.gif){
15![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)            get ![](https://www.cnblogs.com/Images/dot.gif){ return _type; }
16![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)        }
17![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
18![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        public object[] Parameters
19![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        ![](https://www.cnblogs.com/Images/dot.gif){
20![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)            get ![](https://www.cnblogs.com/Images/dot.gif){ return _parameters; }
21![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)        }
22![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
23![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        public TypeConstructor(Type type, params object[] parameters)
24![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        ![](https://www.cnblogs.com/Images/dot.gif){
25![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            _type = type;
26![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            _parameters = parameters;
27![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)        }
28![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
29![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        public TypeConstructor(Type type):this(type,null)
30![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        ![](https://www.cnblogs.com/Images/dot.gif){
31![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            
32![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)        }
33![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)    }
34![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockEnd.gif)}
```
实例生成类
```
1![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System;
 2![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Collections.Generic;
 3![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Linq;
 4![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Text;
 5![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)
 6![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)namespace IoCTest.Container
 7![ExpandedBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockStart.gif)![ContractedBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedBlock.gif)![](https://www.cnblogs.com/Images/dot.gif){
 8![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)    public class Assembler<T> where T : class
 9![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)    ![](https://www.cnblogs.com/Images/dot.gif){
10![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        private static ITypeMap _typeMap = MemoryTypeMap.Instance;
11![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
12![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        public T Create()
13![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        ![](https://www.cnblogs.com/Images/dot.gif){
14![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            TypeConstructor constructor = _typeMap[typeof(T)];
15![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
16![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            if (constructor != null)
17![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)            ![](https://www.cnblogs.com/Images/dot.gif){
18![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)                if (constructor.Parameters == null)
19![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)                    return (T)Activator.CreateInstance(constructor.GetType);
20![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)                else
21![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)                    return (T)Activator.CreateInstance(constructor.GetType, constructor.Parameters); 
22![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)            }
23![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            else
24![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)            ![](https://www.cnblogs.com/Images/dot.gif){
25![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)                return null;
26![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)            }
27![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)        }
28![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)    }
29![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockEnd.gif)}
30![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)
```
调用模块
```
1![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System;
 2![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Collections.Generic;
 3![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Linq;
 4![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Text;
 5![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using IoCTest.Interface;
 6![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)
 7![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)namespace IoCTest.Client
 8![ExpandedBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockStart.gif)![ContractedBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedBlock.gif)![](https://www.cnblogs.com/Images/dot.gif){
 9![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)    public class Client
10![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)    ![](https://www.cnblogs.com/Images/dot.gif){
11![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        private IWeatherReader _reader;
12![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        public Client(IWeatherReader reader)
13![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        ![](https://www.cnblogs.com/Images/dot.gif){
14![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            this._reader = reader;
15![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)        }
16![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
17![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        public string Weather
18![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        ![](https://www.cnblogs.com/Images/dot.gif){
19![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)            get ![](https://www.cnblogs.com/Images/dot.gif){ return _reader.Current; }
20![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)        }
21![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)    }
22![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockEnd.gif)}
```
 Console调用部分
```
1![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System;
 2![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Collections.Generic;
 3![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Linq;
 4![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Text;
 5![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using IoCTest.Container;
 6![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using IoCTest.Interface;
 7![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)
 8![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)namespace IoCTest
 9![ExpandedBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockStart.gif)![ContractedBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedBlock.gif)![](https://www.cnblogs.com/Images/dot.gif){
10![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)    class Program
11![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)    ![](https://www.cnblogs.com/Images/dot.gif){
12![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        static void Main(string[] args)
13![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        ![](https://www.cnblogs.com/Images/dot.gif){
14![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            IWeatherReader reader = new Assembler<IWeatherReader>().Create();
15![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            IoCTest.Client.Client client = new IoCTest.Client.Client(reader);
16![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
17![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            Console.WriteLine(reader.Current);
18![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)        }
19![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)    }
20![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockEnd.gif)}
```
 NUnit测试用代码
```
1![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System;
 2![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Collections.Generic;
 3![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Linq;
 4![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using System.Text;
 5![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using IoCTest.Client;
 6![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using IoCTest.Container;
 7![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using IoCTest.Implementation;
 8![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using IoCTest.Interface;
 9![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)using NUnit.Framework;
10![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)
11![](https://www.cnblogs.com/Images/OutliningIndicators/None.gif)namespace UnitTest
12![ExpandedBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockStart.gif)![ContractedBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedBlock.gif)![](https://www.cnblogs.com/Images/dot.gif){
13![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)    [TestFixture]
14![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)    public class UnitTest
15![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)    ![](https://www.cnblogs.com/Images/dot.gif){
16![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        [SetUp]
17![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        public void Init()
18![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        ![](https://www.cnblogs.com/Images/dot.gif){
19![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            
20![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)        }
21![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
22![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        //[Test]
23![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        //public void TestWhatWeather()
24![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        //{
25![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        //    IoCTest.Client.Client client = new IoCTest.Client.Client();
26![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
27![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        //    Assert.AreEqual(client.Weather, "unknown");
28![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        //}
29![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
30![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        [Test]
31![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        public void TestIsNull()
32![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        ![](https://www.cnblogs.com/Images/dot.gif){
33![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            IWeatherReader reader = new Assembler<IWeatherReader>().Create();
34![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            Assert.IsNotNull(reader);
35![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            Assert.AreEqual(typeof(WeatherReaderImpl), reader.GetType()); 
36![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)        }
37![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)
38![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        [Test]
39![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)        public void ConstructorTest()
40![ExpandedSubBlockStart.gif](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif)![ContractedSubBlock.gif](https://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif)        ![](https://www.cnblogs.com/Images/dot.gif){
41![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            IWeatherReader reader = new Assembler<IWeatherReader>().Create();
42![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            IoCTest.Client.Client client = new IoCTest.Client.Client(reader);
43![](https://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif)            Assert.IsNotNull(client); 
44![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)        }
45![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif)    }
46![](https://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockEnd.gif)}
```

