# 创建自己的控件 - weixin_33985507的博客 - CSDN博客
2013年05月31日 17:32:00[weixin_33985507](https://me.csdn.net/weixin_33985507)阅读数：3
Insus.NET一直想写一个自己的控件，不是用户控件(UserControl)。这几天看了很多相关的知识，只是了解一点点而已。踏出第一步，是最关键的，下面就来练习练习。
写自定义控件，能学习到一个重要的方法，就是：
```
protected override void Render(System.Web.UI.HtmlTextWriter writer)
{
         //write render code.
}
```
本练习是，自定义控件接收一个数据源，目的是能让自定义控件有实例化时，接收一个数据源。
在网站的App_Code创建一个类[LinkControl]，其继承(Inheritance) WebControl。还要引用三个命名空间，参考下图
![](https://images0.cnblogs.com/blog/28036/201305/31161952-05f1c2c306e9440c9df181cc09400fbc.jpg)
写一个只写属性(set)，只接收值。
![](https://images0.cnblogs.com/blog/28036/201305/31163302-49813b57c6a34f8599d278ca7980ffe3.jpg)
Ok, 下面我们写override void Render(System.Web.UI.HtmlTextWriter writer):
![](https://images0.cnblogs.com/blog/28036/201305/31163847-e1f54db42d474fa2a83c74f96f6ccf5d.jpg)
上图中，第28行代码，是判断数据源是否为空，如果为空，将返回，跳过下面的Render的执行。
第30与44行，将产生标签UL，第34与41行代码，产生LI标签。
自定义控件写好了。
在网站点创建一个网页，在.aspx拉一个PlaceHolder控件，将用来装载自定义的new实例。
![](https://images0.cnblogs.com/blog/28036/201305/31164536-d06f7d6fb298473d9384dc62fcc074f8.jpg)
在.aspx.cs准备好数据源：
![](https://images0.cnblogs.com/blog/28036/201305/31164820-7b349fc22f6b4f37bf30bdd9986d8117.jpg)
在.aspx.cs的Page_Load事件，实例化自定义控件ListControl，并绑定数据，然后装载于PlaceHolder控件内：
![](https://images0.cnblogs.com/blog/28036/201305/31165234-b53f00152b114f76878f697fb95fee24.jpg)
跑跑看：
![](https://images0.cnblogs.com/blog/28036/201305/31173006-6ef364e6689a489c9a63401152c20ec4.gif)
