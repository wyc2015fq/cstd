# 关于纳尔逊的内集理论 - 袁萌专栏 - CSDN博客
2019年01月08日 14:19:29[yuanmeng001](https://me.csdn.net/yuanmeng001)阅读数：129
上世纪后半叶，1977年，美国数理逻辑学家纳尔逊创立“内集理论”，作为引入鲁宾逊非标准分析的新方法，国内无人关注，特写此文。。
   纳尔逊（EDWARD NELSON，1932-2014）后半生专注于数学基础与数理逻辑的研究，贡献颇丰。
   至于什么是“内集理论”？由于涉及许多公理化概念，在此，不能深入介绍。请参阅本文附件。  
袁萌  陈启清  元月8日
附件：1977年，美国数理逻辑学家纳尔逊创立“内集理论”，作为引入鲁宾逊非标准分析非新方法
THE AMERICAN MATHEMATICAL SOCIETY Volume 83, Number 6, November 1977
INTERNAL SET THEORY: A NEW APPROACH TO NONSTANDARD ANALYSIS
EDWARD NELSON
1. Internal set theory. We present here a new approach to Abraham Robinson's nonstandard analysis [10] with the aim of making these powerful methods readily available to the working mathematician. This approach to nonstandard analysis is based on a theory which we call internal set theory (1ST). We start with axiomatic set theory, say ZFC (Zermelo-Fraenkel set theory with the axiom of choice [1]). In addition to the usual undefined binary predicate E of set theory we adjoin a new undefined unary predicate standard. The axioms of 1ST are the usual axioms of ZFC plus three others, which we will state below. All theorems of conventional mathematics remain valid. No change in terminology is required. What is new in internal set theory is only an addition, not a change. We choose to call certain sets standard (and we recall that in ZFC every mathematical object-a real number, a function, etc.-is a set), but the theorems of conventional mathematics apply to all sets, nonstandard as well as standard. In writing formulas we use A for and, V for or, ~ for not, =* for implies, and <=> for is equivalent to. We call a formula of 1ST internal in case it does not involve the new predicate "standard" (that is, in case it is a formula of ZFC); otherwise we call it external. Thus "x standard" is the simplest example of an external formula. To assert that x is a standard set has no meaning within conventional mathematics-it is a new undefined notion. The fact that we have adjoined "standard" as an undefined predicate (rather than defining it in terms of E as is the case with all of the predicates of conventional mathematics) requires a readjustment of an engrained habit. We are used to defining subsets by means of predicates. In fact, it follows from the axioms of ZFC that if A(z) is an internal formula then for all sets x there is a set y = {z E x: A(z)} such that for all sets z we have z&y<&zExA A(z). However, the axioms of ZFC say nothing about external predicates. For example, no axioms allow us to assert that there is a subset S of the set N of all natural numbers such that for all n we have «€S <=> n E N A n standard. We may not use external predicates to define subsets. We call the violation of this rule illegal set formation. We adopt the following abbreviations: Vstx for \/x(x standard) =», 3six for 3x(x standard) A Vfinx for \/x(x finite) =>, 3finjc for 3x(x finite) A
This is an expanded version of an invited address given at the Summer 1976 Meeting of the Society in Toronto, Ontario, Canada; received by the editors November 19, 1976. AMS (MOS) subject classifications (1970), Primary 02-02, 02H20, 0H25, 02H10, 26A06, 26A98, 60A05, 60F11 1 The research was supported in part by National Science Foundation Grant NSF-MCS 75-09836. © American Mathematical Society, 1977 1165
1166 EDWARD NELSON
Vst finjc for Vsix(x finite) =>, 3st finx for 3six(x finite) A
VJC E y for \fx(x E y) =>, 3.x E ƒ for 3X(JC E J) A .
Here "JC finite" has its usual meaning: it is an abbreviation for the internal formula which asserts that there is no bijection of x with a proper subset of itself (or equivalently that there is a bijection of x with {m E N: m < n) for some natural number n). The axioms of 1ST are the axioms of ZFC together with three additional axiom schemes which we call the transfer principle (T), the principle of idealization (I), and the principle of standardization (S). They are as follows. Let A(x, tx,..., tk) be an internal formula with free variables x, t\, ..., tk and no other free variables. Then
(T) V8^ • • • VsVVstx A(x, tx,..., tk) => \/x A(x9 4,..., tk)).
Let B(x,y) be an internal formula with free variables x9 y and possibly other free variables. Then
(I) Vst ûnz3x\/y E z B(x,y) «=> 3xVsiy B(x,y).
Finally, let C(z) be a formula, internal or external, with free variable z and possibly other free variables. Then
(S) \/stx3siyVsiz(z E y <=> z E x A C{z)).
This completes the description of internal set theory. A statement is a formula with no free variables. Let A be an internal statement and let Asi be the statement obtained by replacing each occurrence of 3x by 3six and each occurrence of Vx by Vstx, for all variables x occurring in A. We call Ast the relativization of A to the standard sets. By successive applications of (T) (working from outside in) we see that A <=> Asi. Thus all theorems of conventional mathematics also hold when relativized to the standard sets. Conversely, to prove an internal theorem it suffices to prove its relativization to the standard sets. So far we have made no mention of constants (such as 0 for the empty set and R for the set of all real numbers). Constants are a matter of convenience. If we introduce them into the theory then all of our axioms remain valid for formulas containing constants, except that the transfer principle is only valid if all of the constants occurring in the formula are standard. Before applying transfer to an assertion, we must verify two things: that the assertion is internal and that all parameters in it have standard values. We call the violation of this rule illegal transfer. It is the most insidious pitfall awaiting the mathematician who wants to use nonstandard analysis. Suppose that there exists a unique x such that A(x), where A(x) is an internal formula whose only free variable is x. Then that x must be standard, since by transfer 3x A(x) =» 3six A(x). For example, the set N of all natural numbers, the set R of all real numbers, the real number *r, and the Hubert space L2(R) are all standard sets, since they may be uniquely described in conventional mathematical terms. Every specific object of conventional mathematics is a standard set. It remains unchanged in the new theory. For example, in internal
INTERNAL SET THEORY 1167
set theory there is only one real number system, the system R with which we are already familiar. Let B(x,y) be an internal formula with free variables x and >> and possibly others. Then (I) asserts that the relation is simultaneously satisfiable for all standard^ if and only if it is simultaneously satisfiable on every standard finite set. Whether or not the latter is true may depend on the other free variables, if any.
THEOREM 1.1. Let X be a set. Then every element ofX is standard if and only if X is a standardf inites et.
PROOF. Let B(x,y) be x G X A x ¥= y. Then the right-hand side of (I) is equivalent to 3x G X ~ (x standard). Taking negations, we have
Vx G X(x standard) <=> 3st MzVx3y G z(~ (* e X) V JC = y) <=>3stfinz(* Cz).
If A" is a standard finite set then every element of it is standard, because we may take z = X. Conversely, if every element of X is standard then ICz, where z is a standard finite set. Hence X G P(z), where P(z), the power set of z, is also a finite set. By what we have already proved, this means that X is standard, and it is finite since it is a subset of a finite set. Q.E.D. In particular, every infinite set has a nonstandard element. Thus there exists a nonstandard natural number. On the other hand, by transfer, 0 is a standard natural number, and for all natural numbers n, if n is standard then n + 1 is standard. This does not contradict the induction theorem (which says that if S is a subset of N, such that 0 G S and such that for all n we have n G S =» (n + 1) G S, then S = N)-it merely shows that there does not exist a subset S of N such that a natural number is in S if and only if it is standard.
THEOREM 1.2. There is a finite set F such that for all standard x we have x G F.
PROOF. Apply (I) to B(F,X) given by (x G F A F finite). Q.E.D. Such a set F cannot be standard, for if it were then by transfer it would contain all sets x. Also, there is no smallest such F. If we attempt to define the intersection of all such F we are engaging in illegal set formation, because we may only define intersections of sets of sets and we cannot use an external predicate to define the set of sets to be intersected. Although we cannot use external predicates to define subsets, the principle of standardization provides a substitute. Two sets are equal if they have the same elements. By transfer, two standard sets are equal if they have the same standard elements. Thus the set y given by (S) is unique. We denote it by s{z G x: C(z)}. This may be read as "the standard subset of x whose standard elements are those which satisfy C". Do not read it as "the set of all standard elements in x which satisfy C" because this is illegal set formation. When a standard set is defined by the standardization principle, the criterion for set membership applies only to standard elements. The standardization principle does not give a direct criterion for deciding whether a nonstandard element z of x is in y = (z G x: C(z)} or not. It may happen that z G y but ~ C{z\
1168 EDWARD NELSON
and it may happen that z & y but C(z). For example, let « be a nonstandard natural number. We claim that s{z E N: z < w} == N (although there are z in N which do not satisfy z < n). To see this, it is enough, by transfer, to show that the two sets have the same standard elements, since both sets are standard. That is, we must show that if z is a standard natural number then z < n. But {w E N: w < z) is a standard finite set. By Theorem 1.1 every element of it is standard, so that it does not contain n. In the same way we see that s{z E N: z > n} = 0 (although there are natural numbers z with z>n). In the above example the predicate C(z) given by z < n is internal, so that we may also form the set {z E N: z < n}. This is a nonstandard set which is a proper subset of N. Someone might object: "How can we form this set if n is nonstandard, since nonstandard is an external notion?" The objection has no merit. The formula z < n is internal. For every natural number n we can form{z E N: z < «}. The principle of standardization may be used to show the existence of standard functions. In the following theorem A(x9y) is a formula, internal or external, with free variables x and y and possibly others.
THEOREM 1.3. Let X and Y be standard sets and suppose that f or all standard x in X there is a standard y in Y such that A(x9y). Then there is a standard function y: X -» Y such that for all standard x in X we have A(x9y(x)).
PROOF. If for all standard x in X there is a uniaue standard ƒ in Y such that A(x9y)9 then this is immediate: the standard set {(x,y) E X X Y: A(x9y)} is, by (T), a function y : X -> Y and, by definition, A(x9 y(x)) for all standard x in X. Now consider the general case. Let P(Y) be the power set of Y (the set of all subset of Y). This is a standard set since y is a standard set. For all x in X there is a unique standard set Tin P(Y) such that T = s{y Œ Y: A(x9y)}. By what we have just shown in the previous paragraph, there is a standard function T: X -* P(Y) such that for all standard x in X we have f(x) = 5{}/G Y: A(x9y)}. By hypothesis f (x) # 0 for all standard x in X. By the axiom of choice relativized to the standard sets, there is a standard function y : X -> Y such that for all standard x in X we have y(x) E f (x) and, consequently, A(x9y(x)). Q.E.D. A real number x is called infinitesimal in case \x\ < e for all standard e > 0, limited in case \x\ < r for some standard r9 and unlimited in case it is not limited. Notice that 0 is infinitesimal. By (T) it is the only standard infinitesimal, but by (I) there exist nonzero infinitesimals and there exist unlimited real numbers. We emphasize again that we are talking about the ordinary real number system R with which we are familiar and that everything we know about R remains valid. For example, if x ^ 0 then there is a integer n such that nx > 1. The integer n will be unlimited if x is infinitesimal, but this is an additional piece of knowledge which does not change anything we already know. Two real numbers x and y are called infinitely close, denoted by x c* y9 in case x - y is infinitesimal. (Some people say "infinitesimally close", but they are not saying what they mean. Can you imagine gazing into the eyes of someone you love and saying, "I feel infinitesimally close to you"?)
INTERNAL SET THEORY 1169
THEOREM 1.4. Every limited real number is infinitely close to a unique standard real number.
PROOF. Let x be a limited real number, so that there is a standard real number r with |JC| < r. Let E = s{t E R: t < x}. Then E is by definition a standard set, and for all standard / in E we have / < r. By transfer, for all / in E we have / < r. Therefore E is bounded above. The set E is nonempty since -r G E. Therefore E has a least upper bound a. Since E is standard, a is standard, by transfer. Suppose that x - a > e for some standard 6 > 0. Then a + e < JC, and since a + e is standard, a + e is in E, which contradicts the fact that a is an upper bound for E. Suppose that a - x > e f or some standard e > 0. Then JC < a - e, so that for any standard t in E we have f < a - e and by transfer (since E and a - e are standard) for all t in IT we have / < a - e, which contradicts the fact that a is the least upper bound of E. Consequently x c^ a. The uniqueness is clear from the fact that 0 is the only standard infinitesimal. Q.E.D. Let us point out several places where we might have gone wrong in the argument. Suppose we had said that E — s{t E R: / < x] is bounded above by x or that E is nonempty since x E E. There is no justification for either of these assertions; they involve misapplication of (S). For example, let x be a nonzero infinitesimal and let E = {t E R: / < *}. Then E = {/ E R: t < 0} if x > 0 and E = {t E R: t < 0} if x < 0. In the former case x is not in E and in the latter case x is not an upper bound for E. Suppose we had said that for all standard tin E we have t < x and therefore for all t in E we have / < x. This is illegal transfer since x is not necessarily standard. Part of the art of reasoning in nonstandard analysis consists of weakening assertions to a point at which transfer becomes applicable. If x is a limited real number, the standard real number which is infinitely close to it is called its standard part and is denoted by st x. Notice that if a and b are standard real numbers and x is in the closed interval [a, b], then x is a limited real number and st x E [a, b]. More generally, if E is a standard closed and bounded subset of R and x E £, then x is limited and st x E E. One of the chief uses of the principle of standardization is in making definitions. For example, let/: R -» R and x E R. We say that ƒ is continuous at x in case (for ƒ and x standard) for all y if y c* x then f (y) c* f(x). It is understood when we use locutions such as "in case (for ƒ and x standard)" that we are defining a standard relation by means of (S). Let RR denote, as usual, the set of all functions from R to R. This is a standard set. The above definition is the same as saying that < ƒ, x) is an element of s{(fx) E RR X R: Vy(y =* x ^f(y) « ƒ(*))}. This defines, somewhat implicitly, what it means for an arbitrary (not necesarily standard) ƒ to be continuous at an arbitrary x. Similarly, we define ƒ to be uniformly continuous on the set E in case (for ƒ and E standard) for all x ànd y in E, if y ^ x then ƒ (y) c* f(x). We will show in the next section that these definitions are equivalent to the usual definitions. The point is that these external criteria of continuity and uniform continuity are considerably easier to work with than the familiar internal e — S criteria. Part of the power of nonstandard analysis is due to the fact that a complicated internal notion is frequently equivalent, on the standard sets, to a simple external notion.
1170 EDWARD NELSON
THEOREM 1.5. Iff is continuous at each point of a closed and bounded subset E of R then ƒ is uniformly continuous on E.
PROOF. By transfer, we may assume that ƒ and E are standard. Let x andj> be in E with x c~ y. Then st x E E, and x ca st x, y c~ st x so that ƒ (x) « ƒ (st x), f(y) c* ƒ (st x) and thus ƒ (x) ^ ƒ(>>). Q.E.D. Someone might reasonably ask, "How is the transfer principle applicable, since the given definitions of continuity of ƒ at x and uniform continuity of ƒ on E involve external formulas?" The answer is as follows: The transfer principle tells us that
VstCVstf/[Vst/Vst^(V^(x E £=*<ƒ,*> E C) =*<ƒ,£> E U)
=* VfVE(\/x(x EE=* (fx) G C) => <ƒ,£> G U)].
Now
C - *{<ƒ,*> E RR X R: Vy(y c* * =*ƒ(>>) ^ ƒ(*))}, (/ = *{<ƒ,£> E RR X P(R): VJC E £Vy E E(y ^ X =*f(y) ^ ƒ(*))}
are, by definition, standard sets, so the result for standard ƒ and E implies the result for general ƒ and E. We will not spell out such an argument ever again. Anticipating the result of the next section that our definitions of continuity and uniform continuity are equivalent to the usual ones, we have in Theorem 1.5 our first example of a proof of an internal theorem by means of 1ST. The question arises as to whether proofs by means of internal set theory are legitimate. In the Appendix we present the result, due to William C. Powell, that every internal theorem of 1ST is a theorem of ZFC. Internal set theory may be used freely in proving conventional theorems. This result also shows that it is always possible to avoid such methods. One may use them or not as one chooses.
2. A lexicon of nonstandard analysis. Nonstandard analysis involves an interplay of internal and external notions. Some of the theorems which we prove are external. Can we reformulate them so that they become internal? Definitions of standard objects made by means of (S) may involve external notions. Can we find equivalent internal formulations of such definitions? We will show that the answer to both questions is yes by exhibiting an algorithm which reduces any external formula of 1ST to an internal formula, with the same free variables, which is equivalent to it for all standard values of the free variables (subject to a technical qualification mentioned below). Our point of view is a syntactical one. In 1ST we have two new quantifiers, Vst and 3st, which we call external quantifiers as contrasted with the internal quantifiers V and 3, and (I), (S), (T) are essentially rules for handling these quantifiers. Judging from the author's experience, it will be well to review informally the rules for handling internal quantifiers. We assume that displayed variables do not occur except where displayed (e.g. in (2.3) below, x does not occur in 5). The basic rules are:
INTERNAL SET THEORY 1171
(2.1) ~ Vx A(x) <=> 3X ~ A(x)9
(2.2) VxVy A(x9y) <^> \fy\fx A(x9y)9
(2.3) Vx A(x) A 5 => VX(^(JC) A 5),
(2.4) 3x A(x) A 5 <=» 344(JC) A 5).
The rules for forming negations induce a duality; for example, corresponding to (2.2) we have 3x3y B(x9y) <=> 3y3x B(x9y). These rules imply some others, for example:
(2.5) [V* A{x) =* B] <=» [3x(A(x) => B)].
("All men are dishonest implies Diogenes was right" is equivalent to "There is a man such that if he is dishonest then Diogenes was right".)
(2.6) [A => VJC B(X)] ** [Vx{A => B(x))]
and similarly [3x A(x) => B]<* [\/x(A(x) => B)] and [A =» 3x B(x)] «=> [3x(A => B(x))]. Also
(2 ?) [VJC i4(x) =* V>> £(>>)] « [3x\/y(A(x) => B(y))] <* [Vy3x(A(x) =* B(y))l
[\/x A(x) <=> Vy B(y)] <=> [(Vx ;4(JC) => Vy 5( ƒ))
(28) A(Vw#(w)=*V^))]
«* 3x3wVyVz[(^(x) =» £(>>)) A (B(w) => ^t(z))]
<=» VyVz3x3w[(i4(x) => B(y)) A (5(w) => A(z))].
These rules may be used to rewrite any formula as an equivalent formula of the form Q\XX — - QnxnA9 where each Qi is V or 3 and A is a formula without quantifiers. Rules (2.1)—(2.8) obviously apply to the external quantifiers Vst and 3st as well. By Theorem 1.3 we have
(S') Vstx3sV A(x9y) <* 3sxy\fsix A(x9y(x))9
where A(x,y) may be internal or external and may have other free variables and, by duality,
3stxVsV A(x9y) <=> VsXy3six A(x9y(x))9
with the tacit understanding that x and y range over a standard set V. (This is the technical qualification mentioned before. In practice it is not restrictive because in concrete mathematics we are usually talking about something. To avoid further discussion we make the blanket assumption that whenever (S') is used the variables in question range over a fixed standard set V.) We remark that
(2.9) VxVsV A(x9y) <* VstjA/jc A(x9y)
1172 EDWARD NELSON
and, by duality, 3x3$iy A(x9y) *=> 3sty3x A(x9y). We introduce the notation A SE B to mean that for all standard values of the free variables in A and B we have A «=> B. With this notation we may rewrite (T) as
(T') Vstx A(x) SE \/x A(x)9 A internal, and, by duality, 3stx A(x) = 3x A(x)9 again provided that A is internal. In these formulas, A(x) may have other free variables, but equivalence is only asserted when they have standard values. Now we can describe the reduction algorithm. Step 1. Replace all external defined predicates (such as infinitesimal or ^) by their definitions, until the only remaining external predicate is "standard". Step 2. If necessary, rewrite the formula so that "standard" appears only in the external quantifiers, replacing (x standard) by 3siy (y = x). Step 3. Using rules (2.1)—(2.8), rewrite the formula in the form Q\ x\ "•QnxnA{x\,..*>xn) where A(x{,..., xn) is internal and each g, is V, 3, Vst, or 3st. We say that the formula is of rankj in case there are j internal quantifiers followed (on the right) by at least one external quantifier. Step 4. If the rank of the formula is y > 0, let Qt be the rightmost internal quantifier followed by at least one external quantifier. Say Qt is V. It is followed by a string of external quantifiers and then an internal formula. If it is followed only by universal external quantifiers, use the trivial rule (2.9) to pull them through to the left, thereby reducing the rank toy — 1. If it is followed by both universal and existential external quantifiers, use (SO and (2.9) to pull the universal external quantifiers through to the left. Then it is followed by a string of existential external quantifiers, which may be treated as one by taking an ordered tuple, and an internal formula. Use (I) to pull the existential external quantifier to the left, so that Qi is followed only by an internal formula and the rank is reduced toy - 1. (If Qt is 3 proceed by duality.) Step 5. Repeat Step 4 until a formula of rank 0 is obtained. Step 6. Use (T') to replace all external quantifiers by the corresponding internal quantifiers. This gives an internal formula, with the same free variables as the original formula, which is equivalent to the original formula for all standard values of the free variables. We remark that it is not always necessary to carry out Step 3 fully, and that doing so may introduce needless complications. In the following lexicon, A and B are internal formulas. We give the reductions of the frequently occurring patterns V3stVst, V3Vst, V(Vst => Vst), V(Vst <=> Vst), and V(Vst =» 3Vst).
Lexicon Vx3siyV$izA(x,y>z) s Vz3fin/Vx3/ 6 / A(x9y9z(y))9
Vx3yVsizA(x9y9z) s VxVfinz'3>>Vz e z'A(x,y,z),
Vx(VsV A(x9y) => Vstz B{x9z))
= Vz3fin/V;c(ty e / A(x9y) => B{X9Z)\
INTERNAL SET THEORY 1173
Vf(VstJC A{t9x) <=> VSV B(t9y)) s Vy\fz3ûnx'3ûnw'\/t[(\/x E xf A{t9x) => B(t9y))
A (Vw> E w' fi(f,w) =>A(t9 z))]f
Vx(VsV ;*(*,>>) => 3zVstw 5(x,z, w)) = Vfinw'3fin/Vx(Vy E ƒ A(x9y) =» 3zVw E w' 5(x,z, w)).
Of these, the first four are straightforward applications of the reduction algorithm. Let us reduce the last one, V(Vst => 3Vst), to illustrate the above remark about not carrying out Step 3 fully. By (I), the formula 3zVstw B(x9z9w) is equivalent to Vstfinw'3zVw E W B(x9z9w). Then VstfilV pulls through all the way to the left, and VSV may be pulled out of the parentheses as 3siy. Therefore the formula is equivalent to
Vstfinw'\/x3siy(A(x,y) => 3zVw E w' B(x9z9w)).
By (I) again this is equivalent to
Vstfinw3stfinyV;a>? e y(A(x9y) =» 3zVw E w' B(x9z9w)\
We choose to push 3y E / back inside the parentheses, where it becomes Vy E y\ Then by (T) we have the asserted result. We will give several illustrations here, and there will be more in §4. Consider the formula Vy(y c* x =»ƒ(>>) ~ ƒ(*)). Here the free variables are a function ƒ : R ~> R and a point x in R, and the bound variable y ranges over R. Replacing ^ by its definition, we see that this is equivalent to
Vy(VstS \y - x\< 8 => Vst6 \f(y) -f(x)\ < e) where 8 and e range over the strictly positive real numbers. By V(Vst => Vst) in the lexicon, this is equivalent (for ƒ and x standard) to
Ve3fin8'V)/(V8 E 8' \y - x\ < 8 => \f(y) -f(x)\ < e).
For 8' a finite set, V8 E 8'|y - x| < 8 is the same as |y - x\ < 8 for 8 = min 8', and so our formula is equivalent (for ƒ and x standard) to
Ve38Vy(\y - x\ < 8 => \f(y) - f(x)\ < e).
Thus the definition given in § 1 of ƒ being continuous at x is equivalent to the usual one, and similarly for ƒ being uniformly continuous on E. We say that a function ƒ: R ~» R is S-continuous at the point x in R in case Vy(y — x =>f(y) s* ƒ(*)). If ƒ and x are standard, then ƒ is S-continuous at x if and only if ƒ is continuous at x. This is not true in general, however. Let ƒ (x) = x2 for all # in R. Then ƒ is continuous at all x in R. Let x be an unlimited real number and let y = x + AT *• Then >> es x but .y2 = x2 + 2 4- x~2 is not infinitely close to x29 so that ƒ is not S-continuous at x. Again, let f(x) = a/(a2 -f x2) where a # 0. The function ƒ is continuous at all real x. However, if a is infinitesimal then ƒ is not S-continuous at 0. If we apply the reduction algorithm to Theorem 1.2 we obtain the following
1174 EDWARD NELSON
triviality: For all finite sets xf there exists a finite set F such that for all x in x' we have x E F. This helps remove any aura of paradox surrounding this theorem. Theorem 1.4 implies that every limited real number is infinitely close to a standard real number:
Vx(3str M < r => 3staVste \x - a\ < e).
Here e is restricted to strictly positive values. This is equivalent to VstrVx3staVste(|jc| < r => |JC - a\ < e). Treat rasa standard parameter and refer to V3stVst in the lexicon. Thus we obtain
VrV~e3ûnaVx3a G a'{\x\ < r =» |JC - a\ < 2(a)),
which is the Heine-Borel theorem for intervals [—r, r]. There are two general principles which we can deduce from the form of the reduction algorithm. Notice that the reduction of V;c3>>Vstz A(x9y,z) is the same as the reduction of Vsix3y\/Siz A(x,y,z). Therefore from the latter we may infer the former, even though the transfer principle is not applicable since 3y\/siz A(x9y9z) is an external formula. We call a formula universally semi-internal in case, when it is written in the form of Step 3 above, the only external quantifiers are Vst, and we define existentially semi-internal similarly.
THEOREM 2.1 (GENERAL TRANSFER PRINCIPLE). LetA(pc, tv..., tk)be a universally semi-internal formula with free variables x, tv . . . , tk and no other free variables. Then
(2.10) Vst^ • • • Vst^(Vst;c A(x,tl9. ..,/*)=> V* A(x,tl9.. .,/*)).
PROOF. When we apply the reduction algorithm to A(x, tx,..., tk) we get a string of quantifiers Vst followed by an internal formula. We may push Vstjc past them, change it to VJC by (T), and then pull it back to the left. (Notice that (S') is not used in the reduction, so we do not need to worry about relativization.) Q.E.D. By duality, if A(x) is an existentially semi-internal formula then 3x A(x) « 3sixA(x). We pointed out in §1 that, because of the transfer principle, if A(x) is an internal formula whose only free variable is x and there exists a unique x such that A(x) then that x is standard. Next we show that this remains true even if A(x) is an external formula.
THEOREM 2.2 (UNIQUENESS PRINCIPLE). Let A(x) be a formula of 1ST (relativized to a standard set V, which we treat as a constant), internal or external, whose only free variable is x. If there exists a unique x such that A(x) then there exists a standard x such that A(x).
PROOF. Apply the reduction algorithm to A(x) through Step 5 but omitting the last step. By repeated applications of (S') and taking tuples, we may write A(x) in the form \fstu3siv B(x,u9v) where B(x9u,v) is an internal formula
INTERNAL SET THEORY 1175
whose only free variables are x, u, and v. Suppose that there is a unique x such that A(x), and let x be the set such that A(x). Then Vstw3sti/ B(x,u,v) or, equivalently,
(2.11) 3st£Vstw B(x,u,v(u)). Also Vy(Vstw3sti/ B(y,u,v) => y = x)9 which reduces to
(2.12) Vst£3stfiVVy(Vw G u' B(y,u,v(u)) =* y = x).
Let v be a standard function such that
(2.13) Vstw B(x9u90(u)).
This is possible by (2.11). Let u' be a standard finite set such that
(2.14) Vy(Vw G M' 5(y,w,îJ(w)) =>ƒ = x).
This is possible by (2.12). By Theorem 1.1 every element u of u' is standard, so by (2.13) we have Vw G w' B(x9u9v(u))9 which implies that
(2.15) 3^Vw G w'5(7,w,i7(i/)).
But Vw E u' B(y9if9v(u)) is an internal formula whose only free variables are y, w', and v9 and since u' and v have standard values we may apply the transfer principle to conclude that (2.16) 3sVVw G u' B{y9u9v{u)). By (2.16) and (2.14) we have 3siy (y = x), and so x is standard. Q.E.D. If A(x) contains other free variables then the theorem remains true for all standard values of them by the same proof (or equivalently we may allow A(x) to contain standard constants).
3. External sets. The usual presentations of nonstandard analysis have an advantage which internal set theory lacks; namely, that external predicates may be used to define subsets. It is an easily proved theorem of 1ST that for all limited real numbers x and y and all infinitesimals a and /? we have that x + y and xy are limited, a + j8 and xa are infinitesimal, and if x is not infinitesimal, then x~l is limited. How much simpler it would be to say that the limited real numbers are an integral domain in which the infinitesimals are a maximal ideal, but this is illegal set formation and cannot be formulated within 1ST. There is a simple way in which we may achieve the freedom to use such language. Powell showed that 1ST is a conservative extension of ZFC (see the Appendix). If we assume that ZFC is consistent we conclude that 1ST is consistent, and so by GödePs completeness theorem [1], 1ST has a model. Consider a model of 1ST. We want to continue referring to the entities of 1ST as sets, and we want to continue to denote the elementhood relation in 1ST by G. To avoid confusion, we will refer to the "sets" of the set theory in which the model is being considered as external sets, and we will denote the elementhood relation between external sets by E. Also, we will use bold-face type when forming ordered pairs, etc. of external sets.
1176 EDWARD NELSON
Thus a model of 1ST consists of an external set I, an external subset S of I, and an external subset T of I X I such that with the interpretations <x, y > ET for x G y, x ES fotx standard, all of the axioms of 1ST hold for L If x G I we let *x* [x eh y Gx) so that for all y 6 I we have y E *x*>y E x. An external set which is of the form *x for some x E S is called standard, an external set which is of the form *x for some x E I is called internal, and an external set which is not internal is called strictly external. Let R be the real numbers, and consider a model of 1ST. Then *R is a standard external set. We define the external sets MQ, M,, and Rst by M0 «= {x E *R: x is limited J, M, » lx E *R: x is infinitesimal Jf R8t =* [x E *R: x is standard!. With the zero element 0, unity 1, addition defined by {^^nx-f;, multiplication defined by <x, y}\-+>xy, and the order relation {<*, y} E *R X *R: x < y}, it is clear that *R is an ordered field. It is not an Archimedean ordered field, for if x is any infinitesimal with x > 0, then for every external natural number n we have that nx < 1, as is easily seen by induction. The external set M0 is strictly external, for if it were of the form *X then X would be a proper subring of R containing the unit interval. If M, were internal then M0 would be internal, since M0 « [x E *R: Vy E Mxxy E M,), and if Rgt were internal then M0 would be internal, since M0 = j x E *R: 3r E R8t|x| < r). Thus MQ, M|, and Rst are all strictly external It is easily seen that M0 is an integral domain in which Mx is a maximal ideal, and that the quotient field MQ/MJ is isomorphic to Rst under the isomorphism x H* st x. Model theory is a powerful subject which has had stunning applications to algebra and number theory. In this paper we are concerned with those aspects of nonstandard analysis which do not involve model theory. We will work within 1ST but we shall on occasion make use of the extra freedom and simplicity which the language of external sets affords. We will be pedantic about the distinction between sets and external sets, for it must be borne in mind that external sets are not entities of 1ST.
4. A grab-bag of nonstandard analysis. This section consists of miscellaneous examples which illustrate the use of (I), (S), (T), the reduction of external definitions and theorems, and the notion of an external set. Since the reader may wish to work some things out, we have broken the discussions in two. The conclusions will be found at the end of this section, with the same numbering. EXAMPLE 1. THEOREM. Let f: E ~» R be continuous, where E is a closed and bounded subset ofR. Then f achieves its maximum. PROOF. We may assume that ƒ and E are standard. Let F be a finite subset of E containing all the standard
INTERNAL SET THEORY 1177
points in E9 and let x be an element of F at which the restriction of ƒ to F achieves its maximum .... EXAMPLE 2. THEOREM. Let ƒ: [a, b] ~> R be continuous, with f (a) < 0 and f(b) > 0. Then there is a c in [a,b] with f (c) = 0. PROOF. We may assume that ƒ, a, and b are standard. Let F be a finite subset of [a, b] containing all the standard points, and let x be the least element of F such that ƒ (x) > 0.... EXAMPLE 3. Which is more intuitive, the conventional definition of continuity or the nonstandard definition? Here is an unfamiliar notion with the same level of difficulty as the notion of continuity. We present it in two equivalent forms: (i) A function ƒ: R -* R is suounitnoc at the point x in case for all e there is a 8 such that for all y, if |y - x\ < e then \f(y) — f(x)\ < 8. (ii) A function ƒ: R -> R is suounitnoc at the point x in case (for ƒ and x standard) for ally, if y — x is limited then ƒ (y) — f(x) is limited. Using either definition, show that if a function is suounitnoc at one point then it is suounitnoc at all points EXAMPLE 4. A graph is a set G and a subset R of G x G. If k is a natural number, a k-coloring of the graph (G9R) is a function/: G -» {1,... ,/c} such that for all (x, y) E i? we have ƒ (*) # ƒ(ƒ). THEOREM. If everyf inites ubset of a graph has a k-coloring then the graph has a k-coloring. PROOF. We may assume that G, R9 and k are standard. Let F be a finite subset of G containing all the standard points EXAMPLE 5. The prefix S- is used in defining an external relation which for all standard values of the arguments agrees with the familiar internal relation which is being generalized. An example of this is the definition given in §2 of what it means for ƒ to be ^-continuous at x. Let "nice" denote some familiar internal «-ary relation. Whenever we define <Xj,... ,xn) to be S-nice in case A(x{9.. ,9xn) we have the moral obligation to prove that for all standard X\9 ..., xn we have A{x\9... 9xn) if and only if (x\,... ,xn} is nice. DEFINITIONS. Let s: N -> R and let a be in R. Then the sequence s S<onverges to a in case sn cs a for all unlimited n, and a is limited. The sequence s is S-Cauchy in case sn cz sm for all unlimited natural numbers n and m .... EXAMPLE 6. THEOREM. If S is any subset of N which contains all unlimited natural numbers then the complement of S is a standard finite set.... EXAMPLE 7. The sequence sn = \/n (for n > 0) is infinitesimal for all unlimited natural numbers n. May we conclude from Example 6 above that \/n is infinitesimal except on a standard finite set? EXAMPLE 8. THEOREM. Let s: N -» R and suppose that sn is infinitesimal for all limited natural numbers n. Then there exists an unlimited natural number v such that sn is infinitesimal f or all n < v. PROOF. Apply the reduction algorithm to the conclusion 3^{(Vstm(^ > m)) A Vn(n <p*> Vste > 0 \sn\ < e)}....
EXAMPLE 9. Let A* be a standard ordered field. Then the definitions of infinitesimal, limited element of K9 unlimited element of AT, and infinitely close make sense in K. THEOREM. A standard orderedf ieldK  is isomorphic to the field R of real numbers if and only if every limited element of K is infinitely close to a standard element of K. PROOF. Necessity was proved in Theorem 1.4. To prove sufficiency, we need only show that the least upper bound axiom holds. Let E
1178 EDWARD NELSON
be a nonempty subset of K which is bounded above EXAMPLE 10. Let A(n) be a formula, internal or external, with free variable n and possibly others. THEOREM (EXTERNAL INDUCTION).Suppose that A(0) and for all standard natural numbers n, if A(n) then Ain + 1). Then for all standard natural numbers n we have A(n) EXAMPLE 11. Let X be a standard set, let y be a subset of AT, and let Z = s{z e X:z E y). Then Z is a standard subset of X such that for all standard z in X we have z E Z <=» z E Y. Thus we have the following Vst*Vy E P(AT)3stZ ^ P(X)Vstz GX(z E Z«*z E y). If we refer to V3st Vst in the lexicon of §2, treating X as a standard parameter, we obtain the following internal theorem: Let A' be a set and let/: P(X) -> X. Then there is a finite number Zx, ..., Zn of subsets of A' such that for all subsets y of A" we have
(f(Z{) E Y^f{Zx) EZ{)V ... V (/(Z„) E y«/(Zj E Z„).
It is amusing to find a conventional proof of this EXAMPLE 12. Let AT be a set. A filter on A" is a family §oî subsets of X such that 0 £ % X E #, and for all subsets £ and F of Ar we have E E <$ A F Gf^fn^ef and £efA£CF^FG?. A filter f is called principal in case it contains a minimal element M, in which case ^consists of all supersets of M. Let A" be a standard set and let ^be a standard filter on X. Then the monad /i^) is the external set
£ standard
An element F of ^ is called infinitesimal in case *F C /A(3F). THEOREM. Every standardf ilterh as infinitesimal elements .... EXAMPLE 13. THEOREM. Let ®fbe a standardf iltero n the standard set X. If the monad of 9 is internal then it is standard, and $ is principal. PROOF. Suppose that pfô) = *M for some subset M of X, By Example 12 above, there is an F in ^ with *F C *M, so that F C M and thus M E & Then M may be characterized as the largest infinitesimal element of <$ EXAMPLE 14. THEOREM. Let ®ïbe a standardf iltero n the standard set X. If an internal set intersects *Efor every standard element E of <$ then it intersects /*($"). PROOF. Formulate this as a statement of 1ST and refer to the lexicon EXAMPLE 15. If x is a point in the topological space X then the family %x of all neighborhoods of x is a filter on X, and it is standard if x and X are standard, in which case /A(9L^) is called the monad of x and is denoted by /A(X). If E is a subset of X, we define the standard part of E, denoted st E, by st E = s{y E X: *E n [i(y) =#=0). THEOREM. Let E be a subset of the standard topological space X. Then st E is closed.... EXAMPLE 16. What do you get if you apply the reduction algorithm to the theorem of Example 15 above? ... CONCLUSIONS ... 1. Then st x is in E and consequently in F. By continuity, f(x) ~ /(st x). Therefore, for all standard y in E we have/(st x) > f(y) + a where a ^ 0, since ƒ (x) > ƒ(>>). Since both/(st x) and ƒ(>>) are standard, we must have/(st x) > f(y). By transfer, ƒ (st x) > ƒ(>>) for all >> in £. Q.E.D.
INTERNAL SET THEORY 1179
... 2. Then st x is in [a, b] and by continuity ƒ (st x) ca ƒ (JC), so that ƒ (st x) > a where a ^ 0. Since ƒ (st x) is standard, ƒ (st x) > 0. Let y be the element of F preceding x. We must have y ^ x since F contains all standard elements of [a, b\ and consequently ƒ (y) ^ ƒ (st x). But f(y) < 0 and so we conclude that/(st x) < 0. Therefore ƒ (st x) = 0. Q.E.D. ... 3. We use (ii). Since x and j(x) are standard, they are limited. Thus to say thatj> - x is limited is the same as saying that^ is limited, and to say that f(y) — ƒ (x) is limited is the same as saying that fly) is limited. Thus the standard function ƒ is suounitnoc at the standard point x if and only if it is limited at all limited points, a characterization which does not involve the point x. By transfer, if a function is suounitnoc at one point it is suonitnoc at all points. Q.E.D. If we apply the reduction algorithm to the assertion that ƒ is limited at all limited points, we see a function is suounitnoc if and only if it is bounded on all bounded sets. The reduction algorithm also shows that (i) and (ii) are equivalent. ... 4. By hypothesis, F has a A>coloring ƒ: F -» {1,..., k}. By (S) there is a standard function g: G -> (1,..., k) such that Vstx g(x) = f(x). By transfer, g is a ^-coloring. Q.E.D. ... 5. The sequence s 5-converges to a if and only if
Vrt[(Vstm n > m) => Vste > 0 \sn - a\ < e]. Pulling out the quantifiers, we obtain Vste > 0 V«3stw, and applying (I) to V«3stm and then (T) (for s and a standard) we obtain the usual definition. The reduction of the notion S-Cauchy follows the same pattern. ... 6. This follows immediately from Theorem 1.1, since every element of the complement of S is standard. ... 7. No. If we try to form "the set of all natural numbers n > 0 such that l/n is infinitesimal" we commit illegal set formation. ... 8. We obtain, using (I) and the facts that the smallest e of a finite set and the largest m of a finite set are just as forceful as the whole finite set,
Vste > 0Vstm3K(*> > m) A Vn(n < v =* \sH\ < e)}.
But this is true by hypothesis (take v = m). Q.E.D. ... 9. We may assume that E is standard. Let F be a finite subset of E containing all the standard points, and let x be the largest element of F. Since E is standard and bounded above, it is bounded above by a standard element r, by (T). Since E is standard and nonempty, it contains a standard element s, by (T). Therefore s < x < /, so that x is a limited element. By hypothesis, x is infinitely close to a standard element a. One verifies easily that a is the least upper bound of F. Q.E.D. ... 10. This is an immediate consequence of the induction theorem applied to s{n G N: A(n)}. ... 11. We can, in fact, choose n = 2. If we can find Zx and Z2 with f{Zx) = f(Z2) and f(Z{) G Zx but f(Z2) € Z2, then we are done, because if f(Zx) G y then ƒ (Zi) G Y^f{Zx) G Zj, while iff(Zx) = f(Z2) & Y then f(Z2) G Y <^> f{Z2) G Z2. Suppose that there do not exist such sets Zx and
1180 EDWARD NELSON
Z2. Then the range of ƒ must be the disjoint union of two sets, say V and W, such that for all subsets Y of X we have ƒ(Y) E V=*f(Y) E Y and f (Y) E W=*f(Y) £ y. But then ƒ (M^) E ^=»/(»0 $ fF, so we must have/(H0 g W, so that /(Jf) E F, which implies that/(^) E W, which is a contradiction. Notice the similarity to Russell's paradox. ...12. To say that *FC pH$) is the same as saying that VstE E f(FC E), and since fis closed under the formation of finite intersections it is an immediate consequence of (I) that every standard filter has infinitesimal elements. ... 13. By the uniqueness principle (Theorem 2.2), M is standard. Now we may use (T) and conclude that VE E f (M CE), so that 9 is principal. Q.E.D. The uniqueness principle may also be used to show that M0, Mj, and R^t of §3 are strictly external (because they are not standard, but if of the form E then E is uniquely describable within 1ST). ... 14. Letting E and F range over f and letting Y and Z range over P(X), we may reformulate the theorem as vy(vst£(£ n y # 0) => azvstF(z c F A y n z # 0)). This is of the form V(Vst =» 3Vst) in the lexicon of §2, and so is equivalent to the assertion that if Fx, ..., Fn are in f then there exist Ex, ..., Em in 3F such that for all subsets Y of X we have
yn£1^0A--.Ayn£'m#0
=> 3Z(Z CF1A-AZCF,AmZ#0),
But this is a true statement: take m = 1 and take Ex = Z = /J fl • • • n Fn. Q.E.D. ... 15. PROOF. Let z be a standard point in the closure of st E. Let U be a standard open neighborhood of z. Then U intersects st E, so by (T) there is a standard point y in £/ fl st £. By definition of st E we have that *E intersects /*(>>), and /*(>>) C *£/ so that *E intersects *£/. Since this is true for all standard open neighborhoods U of z, we have, by Example 14 above, that *E intersects JUI(Z), so that by definition of st E we have z E st E. Thus every standard point in the closure of st E is in st E, and by transfer every point in the closure of st E is in st E, so that st E is closed. Q.E.D. ... 16. Letting capital letters range over subsets of the standard topological space X and small letters range over points of X, we may formulate the theorem of Example 15 as VE\fsiF{[F « st E] => F closed}; that is, as
V£VstF{[VsV(>> ef^Bz (VsiN(N neighborhood of y => z E N) A z E £))] => F closed}.
If you apply the reduction algorithm to this you get a mess.
5. Infinitesimal calculus. The purpose of this section is to show how simple the calculus becomes when one uses nonstandard analysis. It should be read only by mathematicians who have struggled to do an honest job of teaching the mean value theorem to freshmen, for only they appreciate the difficulties
INTERNAL SET THEORY 1181
of motivating and explaining the traditional approach to the calculus. One technical point should be commented on before we begin: Newton had an awkward notion of derivative. For him the derivative of ƒ at x is the limiting value of the slope of a line through (x9f(JC)> and a nearby point on the graph. A much better definition is that the derivative of ƒ at x is the limiting value of the slope of a line through two nearby points (neither of which has to be held fixed at <*, ƒ (*))). This more restrictive notion of smoothness of a function at a point together with the basic notions of nonstandard analysis make possible an approach to the calculus in which intuition and rigor are fully compatible. To avoid misunderstanding, we declare that the following exposition is not intended for freshmen. Let/: I -> R, where I is an interval, and let x E I. We say that ƒ is derivable at x in case (for ƒ and x standard) there is a standard number f'(x) such that whenever xx and x2 are distinct points in I infinitely close to x we have
(5.1) /(*2)-/(*i)^m
Letting x2 = x\ + h, we may restate this as: whenever x{ c* x and h at 0, with xx and xx + h in ƒ, we have
(5.2) f{xx + h) = f(xx) + f'(x)h + ah
where a ^ 0. The number ƒ '(*) is unique; it is called the derivative of ƒ at x. If we let xx = x in (5.2) we see that if ƒ is derivable at x then it is continuous at x. We say that ƒ is derivable in case it is derivable at all points in /.
THEOREM 5.1. Let f and g be derivable at x. Then so are f + g and f g, with
(5.3) (f+g)'(x)=f'(x) + g'(x),
(5-4) (fg)'(x) = ƒ'(*)*(*) + f(x)g'(x),
and so is f/g provided that g(x) ¥* 0, with
,<<x /7VM_/'(*)g(*)-/(*)g'(*) (5.5) Vi7W_ g(x)2
Let g be derivable at x and let f be derivable at g(x). Then f o g is derivable at x, with
(5.6) (fo8)'(x)=r(g(X))g'(x).
PROOF. We may assume that ƒ, g, and x are standard. Let xx m x and h ^ 0. Then
f(xl+h)=f(xl)+f'(x)h + ah,
g(x, + A) = g(xx) + g'(*)* + 0/i,
with «^0 and /? =s* 0. Therefore
ƒ(*! + A) + gfr + h)= ƒ(*,) + g(x,) + [ƒ'(*) + g'(x)]h + {<* + j8}A.
1182 EDWARD NELSON
Since a + /} is infinitesimal, ƒ + g is derivable at x and (5.3) holds. Also
ƒ(*! + %(*! + A) »/(*i)g(*!) + [ƒ'(*)*(*! ) + ƒ(*!>*'(*)] A
The term in brackets is infinitely close to ƒ'(*)?(*) + ƒ(*)#'(*)> by the continuity of ƒ and g at JC, and the term in braces is infinitesimal, so that fg is deribable at x and (5.4) holds. Suppose that x{ and x2 are distinct points infinitely close to x, and suppose that g(x) ¥* 0. Since g(x) is standard and g(*i) — g(x) — gfoX we have that g(*i) ^ °> gfe) ^ ° and
[l/g(*2)]~[l/g(*i)] Œ 1 g(*i)-g(*2) ^ !_ ,(jc) *2 - *1 S(*2)*(*l) *2 ~ *1 g(x)2 Thus 1/g is derivable at x with derivative - g(x)/g(x)2. By (5.4), f/g = /(1/g) is derivable at x with derivative given by (5.5). Finally, suppose that g is derivable at x9 ƒ is derivable at g(x\ xY c* JC, and /i cz 0. Then there are infinitesimals a and /? such that
ƒ(*(*! + A)) = /(*(*i) + [*'(*)A + 0A])
= f(g(*i)) +f'(g(x))[g'(x)h + jSA] + a[g'(*)A + j8A]
- ƒ(*(*!» +/'(*(*))*'(*)A + {/'(*(*))j8 + ag'(x) + a/?}/*.
Since the term in braces is infinitesimal, ƒ o g is derivable at x and (5.6) holds. Q.E.D. THEOREM 5.2. Let f with domain [a,b], be derivable, (i) If f'{x) > 0 for all x in [a,b] then ƒ is a strictly increasing function from [a,b] onto [f(a),f(b)]9 and the inverse function is derivable. (ii) Iff'(x) > 0 for all x in [a, b] then f is an increasing function from [a, b] onto [ƒ(«),ƒ (b)]. (iii) Iff'{x) = 0 for all x in [a,b] then f is a constant function on [a,b]. PROOF. TO prove (i) we may assume that ƒ, a, and b are standard. Let n be an unlimited natural number and divide [a, b] into n equal subintervals, so that the division points Xj are given by Xj = a +jh for 0 </ < n where h «= (b — a)In. Then we have
/(*/+i) = f(xj) + /'(st xj)h + ctjh, 0< y < « - 1,
where a,- ^ 0. Then |o^| < /'(st x,), since /'(st xy) > 0 is standard, and so f(xj) < /(x/+i). By induction, ƒ (a) </(ft). By the same argument applied to any closed subinterval, we see that ƒ is strictly increasing. To show that ƒ maps [a, 6] onto [ƒ(#), ƒ(&)], let c be any standard number with ƒ (a) < c < ƒ (ft). We need only produce an x in [a, b] with ƒ (JC) = c. Let Xj be the largest division point with f(xj) < c. Then ƒ(*,•+! ) > c. We have /(st JC,) ^ ƒ(.*,•) and/(st Xj) —/(*/+i)> so ^at /(st *,•) ci c and, consequently, /(st J^) = c since both numbers are standard. Now, changing notation, let X\ and x2 be any two distinct points in [a,b] and let yx = f{x\), y2 = f(x2). If *i and x2 are not infinitely close, there are two distinct standard numbers between them and ƒ
INTERNAL SET THEORY 1183
gives two distinct standard numbers between^ andy2. That is, if y{ ^ y2 then X\ e* x2. Suppose that y\ ^ y2 and let x = st x\. Then (y2 — .y^/fo — A:!) ~ f'(x) so that (x2 — x\)/{y2 — yx) c^ \/f'{x). This proves that the inverse function g is derivable, with g'(y) = \/f \g{y)\ and (i) is proved. To prove (ii), again assume that/, a, and 6 are standard. Let a be a strictly positive infinitesimal and let F(x) = f(x) + ajc. Then F satisfies the hypotheses of (i), and using the fact that a ^ 0 we immediately derive (ii) for/. Finally, (iii) is an immediate consequence of (ii) applied to ƒ and —ƒ. Q.E.D. We define /<°) =/,/(1) = ƒ' if ƒ is derivable, and by induction /^+1> = ƒ Wr if ƒ W is derivable. Recall (Example 1 of §4) that a continuous function on a closed interval attains its maximum.
THEOREM 5.3. Let f: I -> R, where I is a closed interval, be such that f ^ is derivable, and let a E L Define Rnya(x)for x in I by
f(x) = ƒ (a) + f'(a)(x - a) + • • • + ^/ <»>(«)(* - af + R„(x).
Then
(5.7) 1*„,«*)1 < ÇpHjj m|x|/(»+')(^)| |x - ar+1.
PROOF. Let/>(x) be the polynomial ƒ (x) - Rnia(x), let
c = max|/("+1)(>>)|,
and let
d{x) = {^TTy.c{x " a)*+1 + ;?w " /w = {^hy.c{x " ö)"+1 " *«>«wThen rffa) = </'(*) = • • • = d^n\a) = 0 and ^+1)(JC) = c -f(n+l)(x) > 0. Since d^ > 0 and rfW(a) = 0, by Theorem 5.2 we have </M > 0 to the right of a. But d^n~l\a) = 0, so by the same argument d^n~x\a) > 0 to the right of a. By induction, d > 0 to the right of a. A similar argument works to the left of a, which establishes the required upper bound for Rni0(x)9 and a similar argument establishes the lower bound, so that (5.7) holds. Q.E.D. It often happens that for unlimited degree n the remainder term Rnia(x) is infinitesimal, in which case the standard part of the polynomial p(x) (of unlimited degree n) gives the exact value of j{x).
THEOREM 5.4. Let ƒ: I -» R, where I is an interval, be continuous, and let a E I. Then there is a unique derivable function F on I, which we denote by
(5.8) F(x) = (Xf(t)dt, Ja such that F(a) = 0 and F'(x) = f(x) for all x in I. If f a, and x are standard, with a < x and x E I, and h > 0 is infinitesimal, then (5.9) (Xf(t)dt = st 2 f{jh)h.
1184 EDWARD NELSON
PROOF, Let/, a, and x be standard with x E L For brevity we consider only the case a < x. Let A be a strictly positive infinitesimal Then the sum in (5.9) is limited, since it is bounded by (x - a)max{|/(,y)|: y E [a,b]}9 and so it has a standard part. We take (5.9) as the definition of the left-hand side (for/, a, and x standard), and define F by (5.8). If xx and x2 are standard points in I with a < x\ < x2 then
(5.10) F(x2)-F(xx)~r2f(t)dt,
(5.11) (*2 " *i) min f(t) < [X2f(t)dt < (x2 - xt) max ƒ(*),
so by transfer these relations hold for all xx and x2 in I with a < xj < x2. Now let x{ cz x2cz x where * is standard. By (5.10) and (5.11), W-^i))/fc-*i)*/W so that Fis derivable with derivative/, and clearly F(a) = 0. The uniqueness of such a function follows from (iii) of Theorem 5.2, and, consequently, the construction is independent of the choice of A.
THEOREM 5.5. Let ƒ: R-*Rbe bounded and continuous. For all JC0 in R there is a derivable function x: R -* R .swcA f/wtf x'(0 = ƒ (*(0) for all t in R and *(0) = *oPROOF. We may suppose that ƒ and x0 are standard. Let h > 0 be infinitesimal, and define £ inductively for integral multiples of h by
m ~ x0, {((a + 1)*) - {(IIA) +f{Z{nh))K n > 0,
and similarly for n < 0. For f not an integral multiple of h let {(*) = £([f/A]A). Let c be a standard bound for ƒ. Then |£((« + 1)A)| < \£(nh)\ + cA, so that l£(01 < c(|f | + 1) + |*o I* Therefore £(f) is limited for limited t (that is, £ is suounitnoc). Using (S), let x be the standard function which for standard t is given by x(t) = st £(f)* We have the estimate \£(t) - £(s)| < c|f — $| + a where a c* 0, so that for standard t and s (and, consequently, for all t and s) we have |x(f) - x(s)\ < c|f — s\9 and x is continuous. For s and f standard we have
x{i) - x{s) a €(0 - £(5) - 2 ƒ(€(«*))* « 2 /WnA))A
by the continuity of ƒ, where the sums are over those n such that nh lies between s and f. Taking standard parts we have
x{t)-x(s)=fj(x(r))dr
so that x is derivable with x\i) = f(x(t))9 and x(0) «* *0. Q.E.D. The same proof works for time-dependent systems of ordinary differential equations. Notice that Ascoli's lemma, which is the difficult part of the conventional proof, is completely by-passed in the nonstandard approach. The widely held belief that one cannot get something for nothing is a superstition.
INTERNAL SET THEORY 1185
We conclude this section with an argument which illustrates the use of the generalized transfer principle (Theorem 2.1).
THEOREM 5.6. Let ƒ: I -» R where I is an interval If J is derivable on I then f is continuous on L
PROOF. We may assume that ƒ is standard. Let xx, x2, and x range over L We know that
\fsix\fxl\fx2(xl « x A x2 s* x A xx * x2 =»^)-/(^) -ƒ'(*)).
This implies the weaker statement,
(5.12) ^six3S>0\/xl\fx2
||JCI - jc] < 8 A \x2 - x|< 6 A jq # x2 =»/(^I^Xl) a ƒ'(*)},
since any infinitesimal 5 > 0 will do. But the formula following Vstx in (5.12) is universally semi-internal (recall that a es b means Vste > 0 \a - b\ < e) and ƒ and ƒ ' are standard, so by the generalized transfer principle we may replace Vstx by Vx in (5.12). Now let x0 be a standard point in ƒ, let x c=< x0, and let x{ and x2 be distinct points within 8 of x and infinitely close to x0. Then (/(*2) ~ f(x\))/(x2 — -xri) is infinitely close both to ƒ'(.*) and tof'(x0), so that f'(x) es ƒ'(*o)- Therefore/' is continuous. Q.E.D.
6. Near-standard points. Let X be a standard topological space. A point x in X is called near-standard in case there is a standard point yinX such that x is in the monad of y\ that is, such that x 6 (/for all standard neighborhoods U of >\ If X is Hausdorff and x is a near-standard point of X then there is a unique standard point ƒ such that x E jüi(>>)-we call y the standard part of x and denote it by st x. If ƒ is standard and x E fi(y) we also say that x is infinitely close to >?.
THEOREM 6.1. Let X be a standard topological space. Then X is compact if and only if every point of X is near-standard. PROOF. Look up Vx3sVVst£7 (jj neighborhood of y => x E V) in the lexicon of §2. Q.E.D.
THEOREM 6.2. Let T be a set, let Xt for each t in T be a compact topological space, and let S be the Cartesian product ti = Ilrer %tw^ the product topology. Then £2 is compact.
PROOF. We may assume that / h» Xt is standard. Let w 6 Û. By Theorem 6.1 we need only show that w is near standard. For all standard t there is a standard point TJ(0 m %t such ^at ^(0 e /*(*?('))> S0 by Theorem 1.3 there is a standard element TJ of Q such that for all standard t we have <o(/) E /*(T?(0 )• By definition of the product topology, co E jm(rç). Q.E.D. The external characterization of compactness given by Theorem 6.1 is the basis for many applications of nonstandard analysis. We have seen a number of examples of this already.
1186 EDWARD NELSON
Frequently in analysis we wish to construct an object x satisfying certain conditions. Using nonstandard analysis, it is often easy to modify the conditions infinitesimally and to show the existence of an object x which satisfies the modified conditions. However, unless we can show that x is nearstandard but is not infinitely close to a trivial object, we have not achieved much of interest. We will exemplify these general remarks by discussing a problem of interest in quantum mechanics. We omit some details of a functional analytic nature-for a full discussion in conventional terms see the original accounts by Charles N. Friedman [3], [4]. Let A be the Laplace operator on L2(Rn) with the usual domain which makes it a selfadjoint operator and let H0 = —A. The one-parameter unitary group 11-> e~ltH° describes the motion of a free Schrödinger particle in Rn. The question is whether a Schrödinger particle can feel the effect of a force concentrated at a single point, the origin. Let F be a bounded real measurable function (whose bound may be unlimited) which vanishes outside an infinitesimal neighborhood of the origin. We will also use the letter V to denote the bounded selfadjoint operator of multiplication by the function V. Then H = #0 + V is also a selfadjoint operator and t f-> e~ltH is a one-parameter unitary group describing the motion of a Schrödinger particle which feels the effect of a force concentrated in an infinitesimal neighborhood of the origin. However, it may be near-trivial. We define a topology on the set of all (possibly unbounded) selfadjoint operators H on a Hubert space % by requiring (for nets) that Ha -> H if and only if for all t in R and \p in % we have e~ltHa\fy -» e~ltH\(/. Then it may happen that H = H0 + V is infinitely close to HQ. In fact, this happens for n > 4, the reason being that the set of $ in the domain of H0 which vanish in a neighborhood of the origin is a domain of essential selfadjointness for H0. In three dimensions the situation is different. Let V(x) = 3/47re2 for |JC| < e and V{x) = 0 otherwise, where e > 0 is infinitesimal. Notice that as a distribution e"1 V is infinitely close to the Dirac 8 on R3, so that as a distribution V itself is infinitely close to 0. Despite this, certain multiples of V have a profoundly disturbing effect on the motion of a Schrödinger particle. THEOREM 6.3. Let H0 and V be as above on L2(R3) and let H (a) = H + aV with a standard. Then the selfadjoint operator H (a) is near-standard, and it is infinitely close to HQ if and only if a is not of the form —TT3(2A? 4- 1) /3 for some integer n. PROOF. On the orthogonal complement of the radial functions in L2(R3), the set of all ^ in the domain of H0 which vanish in a neighborhood of the origin is a domain of essential selfadjointness for //0, and we need only consider the subspace of radial functions in L2(R3). But this space is unitarily equivalent to L2(0, oc) in such a way that H0 corresponds to —d2/dr2 on the domain of all \p in L2(0, oc) which are such that the distribution —d2\p/dr2 is in L2(0, oo) and such that \p(0) = 0, and V corresponds to multiplication by (3/477£2)x[o,e] • Let ji2 = -3a/47r, so that /? is also standard. We may write our operator as -d2/dr2 - (/?2/e2)x[o,e] • Let À = ±i and let v^ have Re \/X > 0. Let G\ be the Green's function; that is, Gx(r,s) is the kernel of the integral operator (-A - d2/dr2 - (/32/e2)x[o,e])-1- ^ ^s possible, but tedious and
INTERNAL SET THEORY 1187
unnecessary, to compute G\ explicitly. Fix s to be noninfinitesimal. On [s, oo), G\(r,s) must be of the form C exp(—\Ar)> on le>s] ** must be of the form A exp(\/Xr) + B exp(-\/XA-), and on [0,e] it must be of the form a sin \//?2/e2 - Xr because of the zero boundary condition at the origin. The Green's function is continuous in r, and continuously differentiate except at r = s. It is easy to see that A, B, and C must be limited since the norm of the resolvent is 1. Therefore Gx(e,s) and G\(e,s), where the prime denotes differentiation with respect to the first variable, must be limited. That is, a sin "\/>82/e2 - Xe and a^fi2/e2 - X cos ^Jfi2/z2 -Xe must be limited, and so a sin /? and afie~l cos ft must be limited. But /fe"""1 cos /? is unlimited unless cos /? = 0; that is, unless a is -773/3 times the square of an odd integer. If cos /? =5^ 0 then a must be infinitesimal, and Gx is infinitely close to the Green's function for the unperturbed operator, so that H(a) is infinitely close to H0. If cos /? = 0 then G\(e,s) = 0 and so G\ is infinitely close to the Green's function for -d2/dr2 with the boundary condition $'(0) = 0 instead of iKO) = 0. Q.E.D. The study of partial differential equations with singular coefficients is an important but relatively unexplored field. Distributions may not be the appropriate coefficients to consider. Using nonstandard analysis, we may allow the coefficients to be qualitatively as smooth as we wish but not require them to be standard. For a well-posed boundary value problem with standard data, when is the solution near-standard? When does a slight change in the coefficients produce an abrupt change in the solution?
7. Finite probability spaces. A finite probability space is a finite set fi and a function pr: fi -> [0,1] such that
2 pr(co) = 1.
Let <ÏÏ, pr) be a finite probability space. An event is a subset A of £2, the probability of an event A is
?rA = 2 pr(co), Ù)EA
a random variable is a function X: S2 -> R, the expectation or mean of a random variable X is
EX = 2 *(oo)pr(<o),
and the variance of a random variable X is
Var* = E(X- EX)2.
If v4(io) is an internal formula we will frequently abbreviate (co E £2: ,4(<o)} by {v4}. The random variables Àj, ..., Xn are called independent in case for all real Xx, ..., Xn we have
Pr{Ai = À! A ••• A Xn = X,} = Pr{*i = ^} • • • Prfo = Xn}.
It is obvious that if ft: R -» R and the AJ are independent then the ƒ (A^) are independent. More generally, if ft : R^' -> R and the A) are independent then
1188 EDWARD NELSON
the random variables fx(XY,... ,Xkl)9 /2(A*1+1,... ,A*|+ife2), .. • are independent The probability distribution fx of a random variable X is the function on R defined by
fx(\) = Pr{* - X). Clearly^ is 0 except on a finite set and 2 fxW = !• Ktwo random variables have the same probability distribution/then they have the same mean,
and variance,
O2 = 2(*-M)2/(A). Finite probability spaces are usually used in the discussion of elementary combinatorial problems, such as drawing balls of various colors from urns. We shall attempt to show that if we use nonstandard analysis then the deeper aspects of probability theory may also be formulated in terms of finite probability spaces. The key notion is the following. Let A(o)) be a formula, internal or external, with w as free variable and possibly with other free variables. We say that A(u>) holds nearly everywhere (n.e,) on the finite probability space <Q, pr) in case for all standard e > 0 there is an event N with Pr(JV) < e such that for all <o in Q\N we have A(u>). The intuitive meaning of the statement that A(o>) holds nearly everywhere is that A(u>) is certain to hold (well, nearly certain). Let X\, ..., Xv be a finite sequence of random variables on a finite probability space. We say that the weak law of large numbers holds in case for all unlimited natural numbers n < v we have
(*, + ••• + Xn)/n se E(Xl + • • • + Xn)/n n.e.
We say that the strong law of large numbers holds in case n.e. for all unlimited n < v we have
(^ + -..+*„)/* ^ E(Xy + ...+*,)/!!.
Thus for the weak law the exceptional set is allowed to depend on n whereas for the strong law it is not. It is the difference between saying that on any specific date in the future it is very unlikely that there will be an earthquake in San Francisco, and saying that it is very unlikely that there will ever be an earthquake in San Francisco.
THEOREM 7.1. Let Aj, ..., Xv be independent random variables on a finite probability space, with the same probability distribution, such that their variance a2 is limited. Then the weak law of large numbers holds.
PROOF. The proof is based on Chebyshev's lemma, which asserts that if X is a random variable and À > 0 then
?r{X > A} < EX2/\2.
To see this, observe that
INTERNAL SET THEORY 1189
EX2 = 2 *(<o)2pr(<o) > 2 *(co)2pr(<o) > A2Pr{X > A}. <* u:\X(w)\>\
To apply this, let n be unlimited with n < p, let À > 0 be standard, let Sn = X\ + • • • + A^, and let ft be the mean of the X(. Then •KIH^^-B /iA2 Let e > 0 be standard and let A be the set of all A > 0 such that Pr{|S„//i - n\ > A} < e. Since A contains all standard A > 0 it contains an infinitesimal A > 0 by (I). By definition, Sjn ca p n.e. Q.E.D. The argument used at the end of the proof is worth recording: if for each standard A > 0 we have Vr{\X\ > A} a* 0 then X ex 0 n.e. (and conversely). Recall from Example 5 of §4 the notion of S-convergence. This notion also applies to a finite sequence xx,..., xv : we say that it S-converges to a in case xn ex a for all unlimited n < v, and a is limited. With a slight abuse of language we say that a finite series 2f= i xt S-converges to « in case the sequence of partial sums sn — x\ + •*• + xn S-converges to a. These notions are trivial unless v is unlimited. Notice that the strong law of large numbers holds f or Xx, ...9X9 if and only if it holds for X{ - EXX,..., Xv - JEYr and that it holds f or Xx, ..., Xp with means 0 if and only if the sequence Sn/n Sconverges to 0 n.e., where Sn = X\ -f • * • -f Xn. The next theorem gives a criterion for a sequence of random variables to S-converge to 0 n.e.
THEOREM 7.2. Let X\, ..., Xp be random variables on a finite probability space. Then they S-converge to 0 n.e. if and only if for all standard A > 0 and unlimited n > v we have
Prf max |X| > A! ex 0.
PROOF. Suppose that X\, ..., Xp S-converges to 0 n.e. Then for all standard e > 0 there is an event N with Pr(iV) < c such that for all u in ti\N, if n is unlimited with n < v then Xn(u) ex0. If A > 0 and w < y let
M(AI,A) = { max |*,| > A\
Then M(n9X) C JV if A is standard and « is unlimited, so that Pr M(n9\) < e. Since 6 is an arbitrary standard strictly positive number, Pr M(n,A) ex 0. Conversely, suppose that Pr M(n9X) ex 0 f or n unlimited and A standard. Let e > 0 be standard. Then for all standard natural numbers/ > 0 we have
(7.1) Pr M(n, !//)< e/V
for all unlimited n. Let nj be the least natural number for which (7.1) holds (note that (7.1) is internal). Thus itj is standard if y is. Let N-ûM^y
1190 EDWARD NELSON
Then Pr N < 6, and for all co in Q\N and unlimited n < v we have Xn(o)c~0. Q.E.D. Our goal is to prove that the strong law of large numbers holds under hypotheses weaker than those of Theorem 7.1. We will need some preliminary results, the first of which is Kolmogorov's inequality:
THEOREM 7.3. Let Xx, ..., Xn be independent random variables on a finite probability space with means 0 and variances of. Then for all X > 0 we have
(7.2) Prfmax|*i + • • • + Xt\ > x\ < £ of/X2.
PROOF. Let S,f = Xx + • • • + Xh let A = {max^JS^ > X}, and let Aj = {15/1 < X for all / <j and |S}[ > X} f or j = 1, ..., «. Then A is the disjoint union of the Ay Since EX( = 0 we have
2 a? = £S„2 > £(S„2XJ = 2 E(S*XAJ) J = 1 jf= 1 7
= .2 E((Sj + (5, - 5,))2x^.)
= .2 [£(*ƒ X^) + 2£((5„ - SJ)SJXAJ) + *(($, - SJ)2XAJ)].
The third term in the brackets is positive. The second term in the brackets is 0, since (Sn — Sj) and SJXA are independent (because they are functions of Xj+i, ..., Xn and of Xx, ..., Ay, respectively) so that
E((Sn - Sj)SjXAj) = E(Sn - Sj)E(SjXAj) - 0 E(SjXAj) = 0.
The first term in the brackets is > }?EXA - Therefore
2 af> 2 tfExA-tfPrA, i= 1 j—\
which is (7.2). Q.E.D.
THEOREM 7.4. Le/ X\, ..., Xv be independent random variables on a finite probability space with means 0 and variances of. ïf 2£= i of S-converges then 2?=i %i S-converges n.e.
PROOF. Let X > 0 be standard and let n < v be unlimited. By Kolmogorov's inequality
Pr { max I £ x\ > x\ < 2 of/x2 ^ 0.
By Theorem 7.2 the sequence Sv- Sn, where Sn = Xx + • • • + Xn as usual, 5converges to 0 n.e., so that the series 2f=i AJ S-converges n.e. (It is easy to see that the sum is limited n.e.) Q.E.D.
THEOREM 7.5. Let Xx, ..., Xv be independent random variables on a finite
INTERNAL SET THEORY 1191
probability space with means 0 and variances af. /ƒ 2/'=i <*/A2 S-converges then the strong law of large numbers holds.
PROOF. Let Yi = AJ// and let Tj = 1^ + • • • + 1^, so that
(7.3) X1 + - + A; = _I^ ^i
By Theorem 7.4 the sequence Tn S-converges n.e. Let X be positive and unlimited. By Kolmogorov's inequality
Pr{max|^|>x}<^i^^0,
and from this it follows by a now-familiar argument that nearly everywhere the Tj are all limited. But if a sequence of limited real numbers S-converges to a real number /, it is easy to see that the sequence of averages also S-converges to /. Therefore the right-hand side of (7.3) S-converges to 0 n.e. Q.E.D. Notice that if ÀJ, ..., Xv satisfy the hypotheses of Theorem 7.1 they also satisfy the hypotheses of Theorem 7.5 (after subtracting the mean), so that actually the strong law of large numbers holds under the hypotheses of Theorem 7.1. We can, in fact, weaken the hypotheses, as follows. If X is a radom variable on a finite probability space <S2, pr> and a is a positive real number, we define the truncated random variable X™ by *w<*>={Tl \X(a)\ < a, \X(a)\ > a, and we let L1 be the external set of all random variables X on <R, pr) such that E\X\ is limited and E\X - X^\ ex 0 for all unlimited a > 0. In terms of the probability distribution fx, this is the same as requiring that the sequence 2|A|<„ WfxQÜ S-converge. THEOREM 7.6. Let X\, ..., X, be independent random variables on a finite probability space which are E L and have a common probability distribution ƒ. Then the strong law of large numbers holds.
PROOF. Let /i,. = EXP and write Xt as
(7.4) A) «ft+ (*,-*/'>) + (*/'>-ft). Then /A, = 2)x|</ A/(A), so that the /x, S-converge to \i = 2 A/(A), and since they are limited (being bounded in absolute value by 2 M/(A)), their averages also S-converge to [i. We need only show that for each of the remaining two terms on the right-hand side of (7.4) the averages S-converge toO. For any n < v we have
Yx{Xi - XP * 0 for some i with n < / < v) < 2 Pr{|A}| > i} I—J!
= S2/(A)< 2 W/(A). i-n \\\>i \\\>n
1192 EDWARD NELSON
Let e > 0 be standard. Then there is a limited n such that this is < e. It is easy to see that for n limited Xi - X^ are limited for all / = 1, . •., n nearly everywhere. Therefore the averages of the Xt — xf' ) S-converge to 0 n.e. By Theorem 7.5 we need only show that 2 E(xf^ - /A,-)2/1'2 S-converges. But 2 \E(XP - ixf < i-2E(xP)2
= 2^2 A2/(A) < 2 A2/ (A) 2 i /«*r|x|</ x *>|x|i
~ 2 A2/(A) 2^+2 A2/(A) 2 ~ |\|<„i/2 />«r |x|>/iV2 i>|x|r <2«1/2|A|/(A)^U 2 |A|/(A)^. A ° " |X|>/ï»/2 O
This is limited for n = 1 and infinitesimal for n unlimited, so that the series S-converges. Q.E.D. Once I went with a colleague to give an oral examination in probability theory to a graduate student in engineering. My colleague's first question was, "What is a random variable?" to which the student replied: "Given a set fi, given a family S of subsets of S2 containing Ü itself and closed under the formation of countable unions and complementation, and given a function /i, from S to the positive reals such that /x(fi) = 1 and whenever E in S is the disjoint union of a sequence of sets En in S then /A(£) is the sum of the series 2 fi(£ff )> then a random variable is a function from fi to the real numbers such that the inverse image of any interval is an element of S'\ The approach to probability theory which we initiated above is simpler, and the scientific content of the theorems we have proved is the same as that of their conventional forms. One can do a vast amount of probability theory within this framework, and one can if one wishes deduce the conventional forms of the theorems from their analogues on finite probability spaces, but we will not pursue the topic further here.
8. Appendix: The conservation theorem. This appendix is devoted to showing that 1ST is a conservative extension of ZFC; that is, every internal statement which can be proved in 1ST can be proved in ZFC. We recall that a filter %ona set ƒ is a family of subsets of I not containing 0, containing ƒ, closed under the formation of finite intersections, and containing every superset of every set in it. Af iltert yl is called an ultrafilter in case for all subsets E of I either E E % or I \E E <&. Let F be a set and let % be an ultrafilter on a set /. Two functions, / H» xt and i h* yi9 in V1 are called equivalent modulo % in case {/ E /: xt = yt) E 9l. It is easily seen that this is an equivalence relation. We define the ultrapower *V = V1/^ to be the set of all equivalence classes modulo % of functions from I to V. The constant functions give a natural injection of V into V1 and this induces a natural injection of V into *V. If E C V and i H» xi9 i H-» yi are equivalent modulo % then {/ E /: xt E E) E %if and only
INTERNAL SET THEORY 1193
if {/ G I: yi G E) G %. We define *E to be the set of all equivalence classes modulo % of functions i H» xt such that {/ G /: xt G E} G %. We call *£ the extension of i?.
THEOREM 8.1. Let *V be an ultrapower of V. Then the mapping E\-+*E of P(V) -* P(*K) w an isomorphism of the Boolean algebra P(V) onto a Boolean subalgebra of P(*V).
PROOF. Clearly the empty set goes to the empty set and V goes to *K. We have that {/ G /: xt G E n F) G %if and only if {/ G /: xf. E E} E 9land {/ G /: Xf E F] E % since % is a filter, so that *(E D F)=*En *F. Let c denote complementation in For *K. Since % is an ultrafilter, {/ G /: *,• G £c} is in <?l if and only if its complement {/ G /: xt E E] is not in % so that *(£c) = (*£)c. Q.E.D. If n is a natural number we may identify (V)1 with (V1)", and if / H» AT',...,/ H> Jc? are equivalent modulo % to i H»yj, ..., i H» >>", respectively, then i i-> <x/,..., x" ) is equivalent modulo % to / H> <>>',...,.y" >, and conversely. Therefore we may identify *(V") with (*K)". We define 7K: P(j/") _^ p(v"-x) by
*j(£) = {<*',... ,xJ~l,xJ+l,... ,x") E F"-1 : for some x^'in F we have <x' xJ~\ xJ, xJ+l,...,x") £ £} and we define my P{*Vn) -» P( V~') similarly.
THEOREM 8.2. Lef *F be an ultrapower of V. If E C K" f/w?/i \(E)
PROOF. We write x for xy, ƒ for (xl,..., xJ~l, xy+l,..., xn>, and (x, >/) for (x1,... ,^"1, JC', JC^'+1, ... ,*">. Let E C K\ Then *T^(£') is the set of all equivalence classes modulo % of functions i H> yt such that {/ G ƒ : for some Xi in F we have (xi9yj) E E] is an element of %. But this is equal to the set of all equivalence classes modulo % of functions i H» yt such that there is a function i H> xt such that {/: (x,-,^-) G £} is an element of % and this is vj(*E). Q.E.D. If£CFwandxE F we define Exj by
F = //yl W""* V./ + 1 VW\ X,j iV* ) • • • 5 •* 5 ** , • . • , A /
and similarly for a subset of *Vn and a point in *K.
THEOREM 8.3. Lef *F 6e aw ultrapower of V, and identify V as a subset of *V by means of the natural injection. If E C Vn and x E Vthen*(Exj)
PROOF. This is obvious. Q.E.D. An Az-ary relation on F is a subset of Vn. Logical connectives among relations, such as negation, implication, etc., are expressed by means of the Boolean operations. Existential quantifiers are expressed by means of the projection operators mp and universal quantifiers are expressed by a combina
1194 EDWARD NELSON
tion of them and complementation. Therefore Theorems 1 and 2 have the consequence that any elementary statement about V (any statement involving a fixed finite set of finitary relations and involving quantification only over the elements of V) is true if and only if the corresponding statement about *V, involving the extensions of the given relations, is true. By Theorem 3 the same holds for formulas involving free variables, for all values of the free variables in V. This is the transfer principle for ultrapowers. Let F be a set. We denote the set of all ultrafilters on V by V. Let *V be an ultrapower of V. For £ in *F let t(£) be the family of all subsets E of V such that I E *£. By Theorem 8.1, t(£) is an ultrafilter on V. Thus we have a natural mapping t: *V -» V. We call *V an adequate ultrapower of V in case the mapping t is surjective.
THEOREM 8.4. Let V be a set. Then there exists an adequate ultrapower of V.
PROOF. We use Pfin to denote the set of all finite subsets of a given set. Let ƒ = Pûn(P(V)). For EC F let £ = {/ E I: E E /}. The intersection Ëx fl • • • f) Ën is always nonempty, since i = {Ex,..., En] is an element of it, so that there is a filter on / containing all sets of the form Ë. We claim that if f is any filter on a set / then there is an ultrafilter °li containing f. If fis not an ultrafilter, let G be a subset of / such that neither G nor I\G is in f. It is easy to verify that the family § of all supersets of sets of the form FOG with Fin f is a filter properly containing f. Also, the union of an increasing chain of filters is again a filter. By Zorn's lemma, therefore, f is contained in an ultrafilter, which establishes the claim. Let % be an ultrafilter on / containing all sets of the form É, and let *V = Vll%. Let T be an ultrafilter on V. For each i in I let At be the intersection of all elements of i which are in % Then At # 0. For each i in I choose an element xt of Ai9 and let £ be the equivalence class modulo % of the function i H> JC,-. We will show that t(£) = % Let E E % If i is such that E E i then Al• <Z E so that x, E £. That is, £ C {/ E /: xw E F} and since Ë is in % its superset {i E /: xé; E £} is in %. That is, £ E *E and by the definition of t this means that E E /(£)• Since E is an arbitrary element of T we have T c t(i-), since Tand f(£) are both ultrafilters we have T = f(£), and since Tis an arbitrary ultrafilter on V we have that f is surjective. Q.E.D. THEOREM 8.5. Let *V be an adequate ultrapower of V and let R C V2 be such that for all finite subsets F of V there is an x in *V with (x,y} E *Rfor all y in F. Then there is a £ in *V with (£9y) E *R for ally in V. PROOF. Let F = {y{,... 9yn) be a finite subset of V. By Theorems 8.1 and 8.3,
{x E *F: (x9y{y € *R A • • • A (x,yn} E *R}
= *{x E K: <x,^> E H A • • • A (x,yn) E *}.
By hypothesis, sets of this form are nonempty, so there is a filter on V containing all sets of the form {x E V: (x,y) E R}, where y E V, and therefore, as shown in the proof of Theorem 8.4, there is an ultrafilter Ton V containing all sets of this form. Since *F is adequate there is a £ in *F such
INTERNAL SET THEORY 1195
that t(£) = % This means that £ G *{X G V: (x9y) G #} or in other words that <£ƒ> G *R, for all j in V. Q.E.D. Theorem 8.5 is the restricted idealization principle for adequate ultrapowers, restricted because there are no free variables ranging over *V. To obtain the unrestricted idealization principle we turn to the notion of adequate ultralimits. Let V = V be a set, let lV be an ultrapower of °V9 let V be an ultrapower of XV9 and so on by induction for every natural number n. Letyw: nV -» n+lV be the natural injection and let *V be the direct limit of the sequence
If we identify each nV as a subset of n+lV via the injectiony), then *K is simply the union of the nV. We call *V an ultralimit of V, and if for each n the ultrapower n+lV is an adequate ultrapower of nV then we say that *K is an adequate ultralimit of K. By Theorem 8.4 every set V has an adequate ultralimit. For E C V, let !E be the extension of E in lV9 let 2£ be the extension of lE in 2K, and so on, and let *E be the union of the nE. We call *E the extension of £". We may identify the ultralimit of a Cartesian product with the Cartesian product of the ultralimits, and Theorems 8.1, 8.2, and 8.3 carry over immediately to ultralimits: the mapping E h» *E is an isomorphism of the Boolean algebra P(V) onto a Boolean algebra of P(*V) which commutes with projections and sections in Cartesian products (the transfer principle for ultralimits). THEOREM 8.6. Let *V be an adequate ultralimit of V and let R C V1+k. For all t\, ..., tk in *V, if for all finite subsets F of V there is an x in *V with (x,y, tx,...,tk) G *Rfor ally in F then there is a £ in *V with (£,y, tu...,tk) G *R for all y in V. PROOF. Since t\, ..., tk are in *F they are in nV for some n. Let S C nV X nV be defined by S = {(x,y} Œ"VX"V:y G V^ (x9y9tl9... ,tk) G nR}. Let G = {yX9... ,ym] be a finite subset of nV9 and regard *V as an ultralimit of nV. By Theorems 8.1 and 8.3 for ultralimits,
{x G V: (x9yx) G *5 A ... A <x,.ym> G *5} =* {x G WF: <x,^> G S A ... A (x9ym) G 5}.
By hypothesis, sets of this form are nonempty (the condition Ocfy) G *S is trivially satisfied if yj ÇÉ F) so there is an JC in "K, and consequently in w4~y, such that (s9yx ) G S A • • • A <JC,^W) G 5. By Theorem 8.5 for the adequate ultrapower w+V of nV9 there is a £ in "+1F, and consequently in *V, such that <£,^> G *5, and consequently (&9y, tl9...9tk) E*R9 for all y in K Q.E.D. Theorem 8.6 is the idealization principle for adequate ultralimits. If only we could take an adequate ultralimit of the universe we would be through. Instead, we let R(0) = 0 and by transfinite induction for all ordinals a we let
1196 EDWARD NELSON
/?(<*) - U P(R(fi)).
Every set x is in R(a) for some ordinal a. Let ^4 be a statement of ZFC. The relativization of A to V is the formula y4K with free variable V obtained by replacing Vx by Vx{x E F) => and 3.x by 3A:(X E K) A, for every variable x occurring in A* In the following theorem, Ax,..., An are a finite number of statements of ZFC.
THEOREM 8.7. There is an ordinal a such thaï
(8.1) (4«*4*<a>)A... A(^~4«a>).
PROOF. Since (~ ^4)K <=> ~ (^F) it is immaterial, for each / = 1, ..., n9 whether we have Ai or ^ Af. Since one of the terms in the expansion of (i4j V ~ A\) A • • • A (AnV ~ An) holds, we may, without loss of generality, assume Ax A • • • A An in the proof. We may write At as
(8.2) \fxj3yj -~V43yfBi(x},y}9...9xf9yf) for i == 1,..., it, where J9, has no quantifiers. For all F there are functions^7 on VJ such that
(8.3) Vx? E K.'-Vx? E K^JC/,^^1)^..^^^,...,*?)).
Let r{V) be the least ordinal /? such that F and the ranges of the y/ are all elements of i?(/J). Let aj « r(0), let a2 — r(^(«i)X anc* by induction am+\ =* /,(^(aw))- Then m H> am is a strictly increasing sequence of ordinals; let a be its limit. Then (8.1) holds, because if the x{ are all in R(a) they are in R(am) for some m9 and so there are solutions to (8.3), and hence to (8.2), with the y{ in R(am+{) and, consequently, in R(a). Q.E.D.
THEOREM 8.8. Every internal theorem of 1ST is a theorem of ZFC.
PROOF. Let A be an internal theorem of 1ST. The axioms of 1ST are the axioms of ZFC and the axiom schemes (I), (S), and (T). Only finitely many of the axioms of ZFC, say At, ..., An9 can be used in the proof of A within 1ST. By Theorem 8.7 there is an ordinal a such that
(8.4) (A « A*M) A A?{a) A • • • A A«*h
Let *R(a) be an adequate ultralimit of R(a)> let j: R(a) -» *R(a) be the natural injection, and let E(a) = {(x,y} E R(a) X R(a): x E y). We claim that *R(a) with the interpretations
(8.5) (x9y) E *£(«) for* E y,
(8.6) x E jR(a) for x Standard
is a model for the axiom system A{, ..., Anf (I), (S), (T). If B is a formula of 1ST let *fl be the formula of ZFC obtained by replacing each occurrence of x E y by its interpretation (8.5) and each occurrence of x standard by its interpretation (8.6), for all variables x and y. By the transfer principle and
INTERNAL SET THEORY 1197
principle of idealization for adequate ultralimits, we have*(T) and*(I). Using the fact that any subset of an element of R(a) is an element of R(a), we have*(S). From A?w, . «., A^ we have %,„.,*An. This establishes the claim. Now the proof of A from Ax, ...,An, (I), (S), (T) gives a proof of *A from %,..., ^„,*(I),*(S),*(T). Since A is internal, AR® follows from *A and so by (8.4) we have A. This gives a proof of A within ZFC. Q.E.D.
9. Notes. The axioms of internal set theory are simply the basic properties of the internal sets in the usual approach to nonstandard analysis (provided sufficient saturation has been assumed). In our approach we refer to the internal sets simply as sets. Once one recovers from the shock of being told that infinitesimals and other idealized elements were there all along in the sets with which we are familiar, and learns to avoid illegal set formation, one will find our approach very easy to use. All familiar results are available without change; they do not have to be extended to a new system. External sets are available for convenience of language. It is surprising how seldom one needs to quantify external sets: perhaps this is what distinguishes model theory from nonstandard analysis. In Robinson's book [10] only the restricted idealization principle (no internal free variables) is available. This is because he uses enlargements, which are given by adequate ultrapowers rather then adequate ultralimits. The use of the unrestricted idealization principle produces a natural closure, and allows the reduction algorithm to work. Luxemburg [7] gives examples of results which may be false for enlargements. The distinction between E and E in §3 is necessary. We cannot treat external sets on the same footing as internal sets when we are discussing all of set theory. As customarily defined in set theory, a natural number is equal to the set of all its predecessors. Let n be an unlimited natural number in a model of 1ST. Then /i, /! — 1, JI — 2, /i — 3,... is an external infinite sequence with the property that each term is E its predecessor. The axiom of regularity [1] precludes the existence of such a sequence where each term is E its predecessor, and in fact each term is E the * of its predecessor. Within 1ST, of course, the sequence is finite and terminates after n steps. For a fragment of set theory it is possible to identify E and E, but only at the cost of distinguishing types of sets and considering stratified formulas [10, pp. 19-30]. The theorem on coloring graphs in Example 4 of §4 is due to de Bruijn [2, p. 137], and the nonstandard proof we give is essentially Beth's modeltheoretic proof [8, p. 96], The theorem on internal monads of Example 13 of §4 is due to Luxemburg [7] who gives a lengthy proof which is also valid for enlargements. The theorem of Example 14, and its consequence in Example 15, are also due to Luxemburg [7]. The term "strongly differentiable" is used by Nijenhuis [9] for what we have called "derivable" in §5. We have avoided the use of "strongly differentiable" because this term has a different meaning in the context of Banach space valued functions. We have followed Lamperti [5] closely in §7.
1198 EDWARD NELSON
Theorem 8.7 is a reflection principle. Our proof is taken from an argument of A. Levy [6] who credits the method to A. Montague. Our proof uses implicitly the theorem that for all V, if Vx G V3y A{x,y) then there exists a function ƒ on F such that A(x,y(x)) f°r all x in V* If the y is unique this is an instance of the replacement axiom scheme. Let B(x,fi) be the formula: By A(x,y) and y G JR(/?) and ft is the least ordinal with this property. Then the ƒ? is unique, so there is a function j8 on V. Let y be such that the range of ft on Kis in R(y). Then Vx G VBy A(x,y) implies \/x G K3y G R(y) A{x,y\ and now we may apply the axiom of choice to obtain a function y. Many of the theorems and examples in this paper occur in Robinson's book [10]. The magnitude of Abraham Robinson's achievement is astonishing. In the last paragraph of [10] Robinson says "... from a formalist point of view we may look at our theory syntactically and may consider that what we have done is to introduce new deductive procedures rather than new mathematical entities". This is what we have tried to express by means of internal set theory. We share his hope [10, p. 5] "... that some branches of modern Theoretical Physics, in particular those that are afflicted with divergence problems, might be treated with profit by Nonstandard Analysis". I thank Carl Herz for a simpler proof of Theorem 7.6, and William C. Powell for permission to include his result, Theorem 8.8. I thank Simon Kochen, the originator of many ideas in thisf ield,f or many long conversations which, in addition to being fruitful, were great fun.
REFERENCES We wish to draw the reader's attention to a Bibliography of Nonstandard Analysis, Lecture Notes in Mathematics, no. 3, compiled by D. Randolph Johnson and complete through June 1975, which is available at one dollar per copy by writing to the Department of Mathematics and Statistics, University of Pittsburgh, Pittsburgh, Pennsylvania 15260. 1. Paul J. Cohen, Set theory and the continuum hypothesis, Benjamin, New York, 1966. MR 38 #999. 2. P. Erdös, Some remarks on set theory, Proc. Amer. Math. Soc.l (1950), 127-141. 3. Charles N. Friedman, Perturbations of the Schr'ôdinger equation by potentials with small support, semigroup product formulas, and applications to quantum mechanics, Ph. D. Dissertation, Princeton Univ., Princeton, N.J., 1971. 4. , Perturbations of the Schrödinger equation by potentials with small support, J. Functional Analysis 10 (1972), 346-360. MR 49 #5529. 5. John Lamperti, Probability, Benjamin, New York, 1966. MR 34 #6812. 6. Azriel Levy, Axiom schemata of strong infinity in axiomatic set theory, Pacific J. Math. 10 (1960), 223-238. MR 23 #A1522. 7. W. A. J. Luxemburg, A general theory of monads, Applications of Model Theory to Algebra, Analysis, and Probability (Internat. Sympos., Pasadena, Calif., 1967), Holt, Rinehart and Winston, New York, 1969, pp. 18-86. MR 39 #6244. 8. E. Mendelson, Introduction to mathematical logic, Van Nostrand, Princeton, N. J., 1964. MR 29 #2158. 9. A. Nijenhuis, Strong derivatives and inverse mappings, Amer. Math. Monthly 81 (1974), 969-980. MR 50 #13405. 10. Abraham Robinson, Non-standard analysis, 2nd éd., American Elsevier, New York, 1974. (1st éd., 1966. MR 34 #5680.)
DEPARTMENT OF MATHEMATICS, PRINCETON UNIVERSITY, PRINCETON, NEW JERSEY
