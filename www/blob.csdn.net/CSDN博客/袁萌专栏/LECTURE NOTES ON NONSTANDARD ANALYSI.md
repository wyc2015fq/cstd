# LECTURE NOTES ON NONSTANDARD ANALYSI - 袁萌专栏 - CSDN博客
2018年09月15日 17:48:09[yuanmeng001](https://me.csdn.net/yuanmeng001)阅读数：234
LECTURE NOTES ON NONSTANDARD ANALYSI
UCLA SUMMER SCHOOL IN LOGIC
ISAAC GOLDBRING
Contents
1. The hyperreals 3
1.1. Basic facts about the ordered real ?eld 3
1.2. The nonstandard extension 4
1.3. Arithmetic in the hyperreals 5
1.4. The structure of N? 7
1.5. More practice with transfer 8 1.6. Problems 9
2. Logical formalisms for nonstandard extensions 10
2.1. Approach 1: The compactness theorem 11
2.2. Approach 2: The ultrapower construction 12
2.3. Problems 16
3. Sequences and series 17
3.1. First results about sequences 17
3.2. Cluster points 19
3.3. Series 21
3.4. Problems 22
4. Continuity 23
4.1. First results about continuity 23
4.2. Uniform continuity 25
4.3. Sequences of functions 27
4.4. Problems 30
5. Di?erentiation 33
5.1. The derivative 33
5.2. Continuous di?erentiability 35
5.3. Problems 36
6. Riemann Integration 38
6.1. Hyper?nite Riemann sums and integrability 38
6.2. The Peano Existence Theorem 41
6.3. Problems 43
7. Weekend Problem Set #1 44
8. Many-sorted and Higher-Type Structures 47
8.1. Many-sorted structures 47
Date: November 10, 2014.
1
2 ISAAC GOLDBRING
8.2. Higher-type sorts 48
8.3. Saturation 51
8.4. Useful nonstandard principles 53
8.5. Recap: the nonstandard setting 54 8.6. Problems 54
9. Metric Space Topology 55
9.1. Open and closed sets, compactness, completeness 55
9.2. More about continuity 63
9.3. Compact maps 64
9.4. Problems 65
10. Banach Spaces 67
10.1. Normed spaces 67
10.2. Bounded linear maps 68
10.3. Finite-dimensional spaces and compact linear maps 69
10.4. Problems 71
11. Hilbert Spaces 73
11.1. Inner product spaces 73
11.2. Orthonormal bases and `2 75
11.3. Orthogonal projections 79
11.4. Hyper?nite-dimensional subspaces 82
11.5. Problems 83 12. Weekend Problem Set #2 85
13. The Spectral Theorem for compact hermitian operators 88
13.1. Problems 93
14. The Bernstein-Robinson Theorem 94 15. Measure Theory 101
15.1. General measure theory 101
15.2. Loeb measure 102
15.3. Product measure 103
15.4. Integration 104
15.5. Conditional expectation 104
15.6. Problems 105
16. Szemer′edi Regularity Lemma 106 16.1. Problems 108
References 110
Nonstandard analysis was invented by Abraham Robinson in the 1960s as a way to rescue the na¨?ve use of in?nitesimal and in?nite elements favored by mathematicians such as Leibniz and Euler before the advent of the rigorous methods introduced by Cauchy and Weierstrauss. Indeed, Robinson realized that the compactness theorem of ?rst-order logic could be used to provide ?elds that “logically behaved” like the ordered real ?eld while containing “ideal” elements such as in?nitesimal and in?nite elements.
LECTURE NOTES ON NONSTANDARD ANALYSIS 3
Since its origins, nonstandard analysis has become a powerful mathematical tool, not only for yielding easier de?nitions for standard concepts and providing slick proofs of well-known mathematical theorems, but for also providing mathematicians with amazing new tools to prove theorems, e.g. hyper?nite approximation. In addition, by providing useful mathematical heuristics a precise language to be discussed, many mathematical ideas have been elucidated greatly. In these notes, we try and cover a wide spectrum of applications of nonstandard methods. In the ?rst part of these notes, we explain what a nonstandard extension is and we use it to reprove some basic facts from calculus. We then broaden our nonstandard framework to handle more sophisticated mathematical situations and begin studying metric space topology. We then enter functional analysis by discussing Banach and Hilbert spaces. Here we prove our ?rst serious theorems: the Spectral Theorem for compact hermitian operators and the Bernstein-Robinson Theorem on invariant subspaces; this latter theorem was the ?rst major theorem whose ?rst proof was nonstandard. We then end by brie?y discussing Loeb measure and using it to give a slick proof of an important combinatorial result, the Szemer′edi Regularity Lemma. Due to time limitations, there are many beautiful subjects I had to skip. In particular, I had to omit the nonstandard hull construction (although this is brie?y introduced in the second weekend problem set) as well as applications of nonstandard analysis to Lie theory (e.g. Hilbert’s ?fth problem), geometric group theory (e.g. asymptotic cones), and commutative algebra (e.g. bounds in the theory of polynomial rings). Wehaveborrowedmuchofourpresentationfromtwomainsources: Goldblatt’s fantastic book [2] and Davis’ concise [1]. Occasionally, I have borrowed some ideas from Henson’s [3]. The material on Szemer′edi’s Regularity Lemma and the Furstenberg Correspondence come from Terence Tao’s blog. I would like to thank Bruno De Mendonca Braga and Jonathan Wolf for pointing out errors in an earlier version of these notes. 1. The hyperreals 1.1. Basic facts about the ordered real ?eld. The ordered ?eld of real numbers is the structure (R;+,·,0,1,<). We recall some basic properties: ? (Q is dense in R) for every r ∈R and every  ∈R>0, there is q ∈Q such that |r?q| < ; ? (Triangle Inequality) for every x,y ∈R, we have |x + y|≤|x|+|y|; ? (Archimedean Property) for every x,y ∈ R>0, there is n ∈ N such that nx > y. Perhaps the most important property of the ordered real ?eld is De?nition 1.1 (CompletenessProperty). If A ?Risnonemptyandbounded above, then there is a b ∈R such that: ? for all a ∈ A, we have a ≤ b (b is an upper bound for A);
4 ISAAC GOLDBRING ? if a ≤ c for all a ∈ A, then b ≤ c (b is the least upper bound for A). Such b is easily seen to be unique and is called the least upper bound of A, or the supremum of A, and is denote sup(A). Exercise 1.2. Show that if A is nonempty and bounded below, then A has a greatest lower bound. The greatest lower bound is also called the in?mum of A and is denoted inf(A). 1.2. The nonstandard extension. In order to start “doing” nonstandard analysis as quickly as possible, we will postpone a formal construction of the nonstandard universe. Instead, we will pose some postulates that a nonstandard universe should possess, assume the existence of such a nonstandard universe, and then begin reasoning in this nonstandard universe. Of course, after we have seen the merits of some nonstandard reasoning, we will return and give a couple of rigorous constructions of nonstandard universes. We will work in a nonstandard universe R? that has the following properties: (NS1) (R;+,·,0,1,<) is an ordered sub?eld of (R?;+,·,0,1,<). (NS2) R? has a positive in?nitesimal element, that is, there is  ∈R? such that  > 0 but  < r for every r ∈R>0. (NS3) For every n ∈N and every function f : Rn →R, there is a “natural extension” f : (R?)n → R?. The natural extensions of the ?eld operations +,· : R2 → R coincide with the ?eld operations in R?. Similarly, for every A ?Rn, there is a subset A? ?(R?)n such that A?∩Rn = A.(NS4) R?, equipped with the above assignment of extensions of functions and subsets, “behaves logically” like R. Thelastitemintheabovelistis, ofcourse, extremelyvagueandimprecise. Wewillneedtodiscusssomelogicinordertocarefullyexplainwhatwemean by this. Roughly speaking, any statement that is expressible in ?rst-order logic and mentioning only standard numbers is true in R if and only if it is true in R?. This is often referred to as the Transfer Principle, although, logically speaking, we are just requiring that R?, in a suitable ?rst-order language, be an elementary extension of R. We will explain this in more detail later in these notes. That being said, until we rigorously explain the logical formalism of nonstandard analysis, we should caution the reader that typical transferrable statements involve quanti?ers over numbers and not sets of numbers. For example, the completeness property for R says that “for all sets of numbers A that are nonempty and bounded above, sup(A) exists.” This is an example of a statement that is not transferrable; see Exercise 1.8 below. De?nition 1.3. R? is called the ordered ?eld of hyperreals. Remark. If f : A → R is a function, where A ? Rn, we would like to also consider its nonstandard extension f : A? → R?. We will take care of this matter shortly.
LECTURE NOTES ON NONSTANDARD ANALYSIS 5
1.3. Arithmetic in the hyperreals. First, let’s discuss some immediate consequences of the above postulates. Since R? is an ordered ?eld, we can start performing the ?eld operations to our positive in?nitesimal . For example,  has an additive inverse?, which is then a negative in?nitesimal. Also, we can consider π ·; it is reasonably easy to see that π · is also a positive in?nitesimal. (This will also follow from a more general principle that we will shortly see.) Since  6= 0, it has a multiplicative inverse ?1. For a given r ∈ R>0,since  < 1 r, we see that ?1 > r. Since r was an arbitrary positive real number, we see that ?1 is a positive in?nite element. And of course, ??1 is a negative in?nite element. But now we can continue playing, considering numbers like √2·?3 and so on... And besides algebraic manipulations, we also have transcendental matters to consider. Indeed, we have the nonstandard extension of the function sin : R? → R?; what is sin()? All in due time... First, let’s make precise some of the words we have been thus far freely tossing around. De?nition 1.4. (1) The set of ?nite hyperreals is R?n :={x ∈R? ||x|≤ n for some n ∈N}. (2) The set of in?nite hyperreals is Rinf := R?\R?n. (3) The set of in?nitesimal hyperreals is μ :={x ∈R? ||x|≤ 1 n for all n ∈N>0}. The notation μ comes from the more general notion of monad, which we will encounter later in the notes. Observe that μ ? R?n, R ? R?n, and μ ∩R = {0}. Also note that ifδ ∈ μ\{0}, then δ?1 / ∈R?n. Lemma 1.5. (1) R?n is a subring of R?: for all x,y ∈R?n, x±y, x·y ∈R?n. (2) μ is an ideal of R?n: μ is a subring of R? and for all x ∈ R?n and y ∈ μ, we have xy ∈ μ. Proof. (1) Fix x,y ∈R?n. Choose r,s ∈R>0 such that |x|≤ r and |y|≤ s. Then |x±y|≤ r + s and |xy|≤ rs, whence x±y, xy ∈R?n. (2) Suppose x,y ∈ μ. We need to show that x±y ∈ μ. Fix r ∈ R>0; we need |x±y|≤ r. Well, since x,y ∈ μ, we have that |x|,|y|≤ r 2. Then, |x±y|≤|x|+|y|≤ r 2 + r 2 = r. Now suppose x ∈R?n and y ∈ μ. We need xy ∈ μ. Fix r ∈R>0; we need |xy|≤ r. Choose s ∈ R>0 such that |x|≤ s. Since y ∈ μ, we have |y|≤ r s. Thus, |xy|=|x||y|≤ s· r s = r.
 A natural question now arises: What is the quotient ring R?n/μ? The answer will arrive shortly.
6 ISAAC GOLDBRING De?nition 1.6. For x,y ∈R?, we say x and y are in?nitely close, written, x ≈ y, if x?y ∈ μ. Exercise 1.7. (1) ≈ is an equivalence relation on R?, namely, for all x,y,z ∈R?: ? x ≈ x; ? x ≈ y implies y ≈ x; ? x ≈ y and y ≈ z implies x ≈ z.(2) ≈ is a congruence relation on R?n, namely, ≈ is an equivalence relation on R?n and, for all x,y,u,v ∈ R?n, if x ≈ u and y ≈ v, then x±y ≈ u±v and xy ≈ uv. Exercise 1.8. Show that R is a nonempty set that is bounded above in R? but that sup(R) does not exist in R?. Thus, the completeness property is not true for R?. The next theorem is of extreme importance. Theorem 1.9 (Existence of Standard Parts). If r ∈ R?n, then there is a unique s ∈ R such that r ≈ s. We call s the standard part of r and write st(r) = s. Proof. Uniqueness is immediate: if r ≈ s1 and r ≈ s2, with s1,s2 ∈R, then s1 ≈ s2, so s1 ? s2 ∈ μ ∩R = {0}, so s1 = s2. We now show existence. Without loss of generality, we can assume r > 0. (Why?) We then set A = {x ∈ R | x < r}. Since r ∈ R?n, A is bounded above. Also, 0 ∈ A, so A is nonempty. Thus, by the Completeness Property, sup(A) exists. Set s := sup(A). We claim that this is the desired s. Fix δ ∈R>0. Since s is an upper bound for A, s + δ / ∈ A, so r ≤ s + δ. If r ≤ s?δ, then s?δ wouldbe an upper bound for A, contradicting the fact that s was the least upper bound for A. Consequently, r ≥ s?δ. It follows that |r ?s| ≤ δ. Since δ ∈R>0 is arbitrary, it follows that r?s ∈ μ.
 Remark. In proving that standard parts exist, we used the Completeness Property for R. Later, we will show that the Completeness Property is a consequence of the existence of standard parts. Thus, an equivalent way to state the completeness property for R is that standard parts exist. Remark. Later, when we start studying metric space topology from the nonstandard perspective, we will call an element nearstandard if it is within an in?nitesimal distance from a standard element. Some metric spaces also have a natural notion of ?nite, e.g. R, and, more generally, normed vector spaces. The equivalence between ?nite and nearstandard asserted in the previous theorem will also hold for ?nite-dimensional normed spaces. In general, nearstandard points are always ?nite, but in in?nite-dimensional settings, this inclusion is often strict. This topic will be discussed later in these notes. Exercise 1.10. Let x,y ∈R?n.
LECTURE NOTES ON NONSTANDARD ANALYSIS 7 (1) x ≈ y if and only if st(x) = st(y). (2) If x ≤ y, then st(x)≤st(y). The converse of this statement is false; give an example. (3) If x ∈R, then st(x) = x. Theorem 1.11. st : R?n → R is a surjective ring homomorphism: for all x,y ∈R?n, st(x + y) = st(x)+st(y) and st(xy) = st(x)st(y). Proof. This follows immediately from Exercises 1.7(2) and 1.10(3).
 Corollary 1.12. R?n/μ ～ = R. Proof. The kernel of st is precisely μ; now use the First Isomorphism Theorem for rings.
 Corollary 1.13. μ is a maximal ideal of R?n. Proof. This follows from the fact that R?n/μ is a ?eld.
 Exercise 1.14. Give a direct proof of the last corollary, that is, show directly that μ is a maximal ideal of R?n. 1.4. The structure of N?. In this subsection, let’s take a brief look at the picture of N?. First, let’s establish that N?\N6= ?. To see this, let y ∈R? be positive in?nite. Since the statement “for all x ∈R, if x > 0, then there is n ∈ N such that x ≤ n” is true in R, the statement “for all x ∈ R?, if x > 0, then there is n ∈ N? such that x ≤ n” is true in R? by the transfer principle. Thus, there is N ∈ N? such that y ≤ N. However, if N ∈ N, then y is ?nite, a contradiction. Thus, N ∈N?\N. Also note that the same argument implies that N is positive in?nite. The last sentence of the previous paragraph holds for all N ∈ N? \N:if N ∈ N? \N, then N is positive in?nite. Indeed, the statement “for alln ∈ N, n ≥ 0” is true in R, so the statement “for all n ∈ N?, n ≥ 0” is true in R?, whence N ≥0. Also, if N ∈R?n, then there is n ∈N such that n ≤ N ≤ n +1. However, the statement “for all m ∈N, if n ≤ m ≤ n +1, then m = n or m = n+1” is true in R; applying the transfer principle to this statement, we have N = n or N = n + 1, whence N ∈ N, a contradiction. Thus, N ∈Rinf. Now that we know that all nonstandard natural numbers are positive in?nite, let’s ask the question: “How many nonstandard natural numbers are there?” To examine this question, let’s ?rst establish some notation and terminology. For N ∈ N?, set γ(N) := {N ± m | m ∈ N}, the galaxy or archimedean class of N. Clearly, N ∈ N if and only if γ(N) = Z; we call this the ?nite galaxy, while all other galaxies will be referred to as in?nite galaxies. Lemma 1.15. If N ∈N?\N, then γ(N)?N?. Proof. By transfer, N+1∈N?; by induction, this shows that N+m ∈N? for all m ∈N. We now show, also inductively, that N ?m ∈N? for all m ∈N.
8 ISAAC GOLDBRING Suppose that the result is true for a given m. Notice that N ?m 6= 0, else N = m ∈ N. Applying transfer to the statement “for all n ∈ N, if n 6= 0, then n?1∈N,” we see that (N ?m)?1 = N ?(m +1)∈N?.
 Since we know we have at least one nonstandard natural number, we now know that we have an entire galaxy of them. Notice that a galaxy looks just like a copy of Z and that γ(M) = γ(N) if and only if |M ?N|∈N. Observe that if γ(M) = γ(M0) and γ(N) = γ(N0) and γ(M) 6= γ(N),then M < N if and only if M0 < N0. Consequently, we can de?ne an ordering on galaxies: if γ(M) 6= γ(N), then we say γ(M) < γ(N) if and only if M < N. When γ(M) < γ(N), we think of M as being in?nitely less than N. What can be said about the ordering of the set of galaxies? In particular, are there more than just two galaxies? Lemma 1.16. The set of in?nite galaxies is densely ordered without endpoints, meaning: (1) there is no largest in?nite galaxy, that is, for every M ∈ N? \N, there is N ∈N?\N such that γ(M) < γ(N);(2) there is no smallest in?nite galaxy, that is, for every M ∈ N? \N, there is N ∈N?\N such that γ(N) < γ(M);(3) between any two in?nite galaxies, there is a third (in?nite) galaxy, that is, for every M1,M2 ∈N?\N such that γ(M1) < γ(M2), there is N ∈N?\N such that γ(M1) < γ(N) < γ(M2). Proof. (1) Given M ∈ N? \N, we claim that γ(M) < γ(2M). Otherwise, 2M = M + m for some m ∈N, whence M = m, a contradiction. (2) Since γ(M) = γ(M?1), we may as well suppose that M is even. Then γ(M 2 ) < γ(M) from the proof of (1); it remains to note that M 2 ∈N?\N.(3) Again, we may as well assume that M1 and M2 are both even. In this case, arguing as before, one can see that γ(M1) < γ(M1+M2 2 ) < γ(M2).
 Under suitable richness assumptions on the nonstandard extension (to be discussed later), one can go even further: if (Nα)α<κ is a descending sequence of nonstandard natural numbers, then there is N ∈ N? \N such that N < Nα for all α < κ. 1.5. More practice with transfer. In order to get some practice with the Transfer Principle, we will prove the assertion made in Remark 1.3. More precisely: Theorem 1.17. The statement “every ?nite element of R? has a standard part” implies the Completeness Property of the ordered real ?eld. Proof. Suppose that A ? R is nonempty and bounded above. We must show that sup(A) exists. Let b ∈ R be an upper bound for A. Let’s de?ne a function f : R → R as follows: If r ∈ R\N, set f(r) = 0. Otherwise, set f(n) = the least k ∈Z such that k n is an upper bound for A; such a k exists
LECTURE NOTES ON NONSTANDARD ANALYSIS 9 by the Archimedean property. Observe that, if m,n ∈ N and n ≤ m, then f(n)≤ f(m). We now consider the nonstandard extension of the function f : R? →R?.Fix N ∈ N? \N. The key idea is to understand f(N). By the transfer principle, we know that f(N) is the least element of Z? such that f(N) N is an upper bound for A?. Also, by the transfer principle applied to the last observation of the previous paragraph, if m ∈N, then f(m)≤ f(N). Claim 1: f(N) N ∈ R?n: Suppose this is not the case, so, f(N) N ∈ Rinf. Sincef (1) ≤ f(N), we must have that f(N) is a positive in?nite element. Since the statement “for all n ∈N, there is a ∈ A such that f(n)?1 n < a” is true in R, by the Transfer Principle, the statement for all n ∈ N?, there is a ∈ A? such that f(n)?1 n < a” is true in R?. Thus, we may ?x a0 ∈ A? such thatf (N)?1 N < a0. Since f(N)?1 N is a positive in?nite element (as it di?ers from the positive in?nite element f(N) N by the in?nitesimal amount 1 N), we have that a0 is also a positive in?nite element of R?. However, the statement “for all a ∈ A, we have a ≤ b” is true in R, whence the statement “for all a ∈ A?, we have a ≤ b” is true in R?. Consequently, a0 ≤ b, contradicting the fact that a is a positive in?nite element of R?.
By Claim 1 and the assumption of the theorem, st(f(N) N ) exists. Set r := st(f(N) N ). Claim 2: r is an upper bound for A: To see this, ?x a ∈ A. Then, by the transfer principle, r ≤ f(N) N , whence a = st(a)≤st(f(N) N ) = r. Claim 3: r = sup(A): To see this, ?x δ ∈ R>0. We must ?nd a ∈ A such that r?δ < a. As we showed in the proof of Claim 1, there is a ∈ A? such that f(N)?1 N < a. Since 1 N < δ, we have r?δ < f(N)?1 N , whence r?δ < a.In other words, the statement “there is a ∈ A? such that r?δ < a” is truein R?. By the transfer principle, the statement “there is a ∈ A such thatr ?δ < a” is true in R, which is precisely what we needed.
 1.6. Problems. Problem 1.1. Let x,x0,y,y0 ∈R?n. (1) Show that x ≈ y if and only if st(x) = st(y). (2) Show that if x ∈R, then x = st(x). (3) Show that x ≤ y implies st(x) ≤ st(y). Show that the converse is false. (4) Show that if st(x) < st(y), then x < y. In fact, show that if st(x) < st(y), then there is r ∈R such that x < r < y. (5) Suppose that x ≈ x0 and y ≈ y0. Show that: (a) x±y ≈ x0±y0;
10 ISAAC GOLDBRING (b) x·y ≈ x0·y0; (c) x y ≈ x0 y0 if y 6≈0. Show that (c) can fail if y,y0 ∈ μ\{0}. Problem 1.2. Suppose x,y ∈ R? and x ≈ y. Show that if b ∈ R?n, then bx ≈ by. Show that this can fail if b / ∈R?n. Problem 1.3. (1) Show that R? is not complete by ?nding a nonempty subset of R? which is bounded above that does not have a supremum. (2) Show that if A ?R is unbounded, then A has no least upper bound when considered as a subset of R?. (This may even be how you solved part (a).) Problem 1.4. Let F be an ordered ?eld. F is said to be archimedean if for any x,y ∈ F with x,y > 0, there is n ∈N such that y < nx. Show that R? is not archimedean. (It is a fact that archimedean ordered ?elds are complete, so this problem strengthens the result of the previous problem.) Problem 1.5. Construct a sequence of subsets (An) of R such that
(
∞ [ n=1
An)? 6=
∞ [ n=1
A? n.
Problem 1.6. If F is a ?eld and V is an F-vector space, let dimF(V ) denote the dimension of V as an F-vector space. (1) Observe that R? is an R?-vector space. (More generally, any ?eld F is naturally an F-vector space.) What is dimR?(R?)? (2) ObservethatR? isalsoavectorspaceoverR. ShowthatdimR(R?) = ∞. (Hint: Let x ∈R?\R. Show that {1,x,x2,...,xn,...} is an Rlinearly independent set.) (3) Show that R?n is an R-subspace of R?. What is dimR(R?n)? (4) Show that μ is an R-subspace of R?. What is dimR(μ)? (5) What is dimR(R?/R?n)? (6) What is dimR(R?n/μ)? Problem 1.7. Show that card(N?) ≥ 2?0; here card(A) denotes the cardinality of the set A. (Hint: First show that card(Q?)≥2?0). Problem 1.8. Give a direct proof that μ is a maximal ideal of R?n, that is, show that if I is an ideal of R?n such that μ ? I, then I = μ or I = R?n. 2. Logical formalisms for nonstandard extensions At this point, you might be wondering one of two things: (1) What else can I do with these wonderful postulates for nonstandard extensions? or (2) Does such a nonstandard extension exist or was everything done in Section 1 all magical nonsense?
LECTURE NOTES ON NONSTANDARD ANALYSIS 11
If you asked the former question, you can safely skip this section and discover the wonders of the nonstandard calculus to come in the following sections. (But please, at some point, return and read this section!) If you asked the latter question, we will ease your trepidations by o?ering not one, but two, di?erent logical formalisms for nonstandard extensions. The ?rst formalism will rely heavily on the Compactness Theorem from ?rst-order logic, but, modulo that prerequisite, this route is the quickest way to obtain nonstandard extensions. The second formalism is the Ultraproduct Approach, which is the most algebraic and “mainstream” way to explain nonstandard methods to “ordinary” mathematicians. Of course, at some point, some logic must be introduced in the form of L os’ (pronounced “Wash’s”) theorem, which will be discussed as well.
2.1. Approach 1: The compactness theorem. In this section, some familiarity with ?rst-order logic is assumed. We let L denote the ?rst-order language consisting of the following symbols: ? for every r ∈R, we have a constant symbol cr; ? for every n > 0 and every f : Rn → R, we have a n-ary function symbol Ff; ? for every n > 0 and every A ?Rn, we have a n-ary relation symbol PA. We let R be the L-structure whose universe is R and whose symbols are interpreted in the natural way, namely (cr)R = r, (Ff)R = f, and (PA)R = A. Let Γ = Th(R)∪{c0 < v < cr | r ∈ R>0}, a set of L-formulae. Then Γ is ?nitely satis?able: for any r1,...,rn ∈ R>0, choose r ∈ R>0 such that r < ri for i = 1,...,n. Then R |= Th(R)∪{c0 < v < cri | i = 1,...,n}JrK. By the Compactness Theorem, Γ is satis?able, say by some L-structure A and a ∈ A. Intuitively, a will be our desired positive in?nitesimal. But ?rst, we need R to be a substructure of A; some “abstract nonsense” can help take care of this.
Exercise 2.1. (1) The function h : R → A given by h(r) = (cr)A is an injective homomorphism of L-structures. (2) Use (1) to ?nd some L-structure A0 isomorphic to A such that R is a substructure of A0. By the result of the previous exercise, we may suppose that R is a substructure of A. In this case, we denote A by R? and denote the universe of R? by R?. For f : Rn → R, we let f : (R?)n → R? denote (Ff)R?. For A ? Rn, we set A? := (PA)R?. These are the extensions that axiom (NS3) postulates. Since being an ordered ?eld is part of Th(R), we have that R? is an ordered ?eld and, since R is a substructure of R?, we have that R is an ordered sub?eld of R?, verifying postulate (NS1). Let  ∈ R? be such
12 ISAAC GOLDBRING that, for every r ∈R>0, R? |= c0 < v < crJK. Then  is a positive in?nitesimal, verifying postulate (NS2). Finally, the fact that R? |= Th(R) is the rigorous, precise meaning of postulate (NS4). We have thus proven: Theorem 2.2. There is a nonstandard universe, namely R?. Exercise 2.3. Suppose that A ?Rn and f : A →R is a function. (1) Let f1 : Rn →R be an arbitrary extension of f to all of Rn. De?ne f? := f? 1|A?. Show that f? is independent of the choice of extensionf 1. (This provides a way to de?ne the nonstandard extensions of partial functions.) (2) Set Γf :={(x,y)∈Rn+1 | f(x) = y}. Show that Γ? f is the graph of a function g : A? →R?. Show also that g = f?. The following observation is very useful. Proposition 2.4. Suppose that ?(x1,...,xm) is an L-formula. Set S := {~r ∈Rm | R |= ?J~rK}. Then S? ={~r ∈(R?)m | R? |= ?J~rK}. Proof. Just observe that ?~v(PS~v ? ?(~v)) belongs to Th(R).
 Corollary 2.5. N is not a de?nable set (even with parameters) in R?. Proof. Suppose, towards a contradiction, that there is an L-formula ?(x,~y) and ~r ∈ R? such that N = {a ∈ R? | R? |= ?Ja,~rK}. Write down an L-sentence σ which says that for all ~y, if ?(x,~y) de?nes a nonempty set of natural numbers that is bounded above, then ?(x,~y) has a maximum. (Remember you have a symbol PN for the set of natural numbers.) Since R |= σ, we have R? |= σ. Now N is bounded above in R? (by an in?nite element). Thus, Nshould have a maximum inR?, which is clearly ridiculous.
 Since N? is a de?nable set in R? (de?ned by PN), we obtain the following Corollary 2.6. N?\N is not de?nable in R?. In modern nonstandard analysis parlance, the previous two results would be phrased as “N and N?\N” are not internal sets. We will discuss internal sets later in these notes. 2.2. Approach 2: The ultrapower construction. In this approach to nonstandard analysis, one gives an “explicit” construction of the nonstandard universe in a manner very similar to the explicit construction of the real numbers from the rational numbers. Recall that a real number can be viewed as a sequence of rational numbers which we view as better and better approximations to the real number. Similarly, an element of R? should be viewed as a sequence of real numbers. For example, the sequence (1,2,3,...) should represent some in?nite element of R?. However, manydi?erentsequencesofrationalnumbersrepresentthesame real number. Thus, a real number is an equivalence class of sequences of
LECTURE NOTES ON NONSTANDARD ANALYSIS 13
rational numbers (qn), where (qn) and (q0 n) are equivalent if they “represent the same real number,” or, more formally, if limn→∞(qn ?q0 n) = 0. We run into the same issue here: many sequences of real numbers should represent the same hyperreal number. For instance, it should hopefully be clear that the sequence (1,2,3,...,n,n+1,...) and (π,e,?72,4,5,6,...,n,n+1,...) should represent the same (in?nite) hyperreal number as they only di?er in a ?nite number of coordinates. More generally, we would like to say that two sequences of real numbers represent the same hyperreal number if they agree on “most” coordinates. But what is a good notion of “most” coordinates? A ?rst guess might be that “most” means all but ?nitely many; it turns out that this guess is insu?cient for our purposes. Instead, we will need a slightly more general notion of when two sequences agree on a large number of coordinates; this brings in the notion of a ?lter. De?nition 2.7. A (proper) ?lter on N is a set F of subsets of N (that is, F ?P(N)) such that: ? ? /∈F, N∈F; ? if A,B ∈F, then A∩B ∈ F; ? if A ∈F and A ? B, then B ∈F. We think of elements of F as “big” sets (because that’s what ?lters do, they catch the big objects). The ?rst and third axioms are (hopefully) intuitive properties of big sets. Perhaps the second axiom is not as intuitive, but if one thinks of the complement of a big set as a “small” set, then the second axiom asserts that the union of two small sets is small (which is hopefully more intuitive). Exercise 2.8. Set F := {A ? N | N\A is ?nite}. Prove that F is a ?lter on N, called the Frechet or co?nite ?lter on N. Exercise 2.9. SupposethatDisasetofsubsetsofNwiththe?nite intersection property, namely, whenever D1,...,Dn ∈D, we have D1∩···∩Dn 6=?. Set hDi:={E ?N | D1 ∩···Dn ? E for some D1,...,Dn ∈D}. Show that hDi is the smallest ?lter on N containing D, called the ?lter generated by D. If F is a ?lter on N, then a subset of N cannot be simultaneously big and small (that is, both it and it’s complement belong to F), but there is no requirement that it be one of the two. It will be desirable (for reasons that will become clear in a second) to add this as an additional property: De?nition 2.10. If F is a ?lter on N, then F is an ultra?lter if, for any A ?N, either A ∈F or N\A ∈F (but not both!). Ultra?lters are usually denoted by U. Observe that the Frechet ?lter onN is not an ultra?lter since there are sets A ? N such that A and N\ A
14 ISAAC GOLDBRING
are both in?nite (e.g. the even numbers). So what is an example of an ultra?lter on N? De?nition 2.11. Given m ∈N, set Fm :={A ?N | m ∈ A}. Exercise 2.12. For m ∈N, prove that Fm is an ultra?lter on N, called the principal ultra?lter generated by m. We say that an ultra?lter U on N is principal if U = Fm for some m ∈N . Although principal ultra?lters settle the question of the existence of ultra?lters, they will turn out to be useless for our purposes, as we will see in a few moments. Exercise 2.13. Prove that an ultra?lter U on N is principal if and only if there is a ?nite set A ?N such that A ∈U. Exercise 2.14. Suppose that U is an ultra?lter on N and A1,...,An are pairwise disjoint subsets of N such that A1∪···∪An ∈U. Prove that there is a unique i ∈{1,...,n} such that Ai ∈U. We are now ready to explain the ultrapower construction. Fix an ultra?lter U on N. If (an) and (bn) are in?nite sequences of real numbers, we say that (an) and (bn) are equal modulo U, written (an) ～U (bn), if {n ∈N|| an = bn}∈U. (This is the precise meaning of when two sequences agree on “most” coordinates.) Exercise 2.15. Showthat～U isanequivalencerelationonthesetofin?nite sequences of real numbers. (The “ultra” assumption is not used in this exercsie.) For an in?nite sequence (an), we write [(an)]U, or simply [(an)], for the equivalence class of (an) with respect to ～U. We let RU denote the set of ～U-equivalence classes. We want to turn RU into an ordered ?eld. The natural guess for the ?eld operations are: ? [(an)]+[(bn)] := [(an + bn)] ? [(an)]·[(bn)] := [(anbn)]. Of course, since we are working with equivalence classes, we need to make surethattheaboveoperationsarewell-de?ned. Forexample, if(an)～U (a0n) and (bn) ～U (b0n), we need to know that (an + bn) ～U (a0n + b0n) (and similarly for multiplication). However, if we set A := {n ∈ N | an = a0n} and B := {n ∈ N | bn = b0n}, then for n ∈ A∩B, an + bn = a0n + b0n; since A ∩ B ∈ U and A ∩ B ? {n ∈ N | an + bn = a0n + b0n}, this shows that (an + bn)～U (a0n + b0n). Next we de?ne an order on RU by declaring [(an)] < [(bn)] if and only if {n ∈ N | an < bn} ∈ U. One needs to verify that this is in fact a linear order. For example, to check the “linearity” axioms, ?x [(an)],[(bn)] ∈ RU. Set A := {n ∈ N | an < bn}, B := {n ∈ N | an = bn}, and C = {n ∈ N| an > bn}. Then N = A ∪ B ∪ C and A,B,C are pairwise disjoint.
LECTURE NOTES ON NONSTANDARD ANALYSIS 15 Thus, by Exercise 2.14, exactly one of A, B, C is in U, corresponding to the situations [(an)] < [(bn)], [(an)] = [(bn)], and [(an)] > [(bn)]. (This is the ?rst time that we have used the ultra- assumption.) Set 0 := [(0,0,0,...)] and 1 := [(1,1,1,...)]. Theorem 2.16. (RU,+,·,0,1,<) is an ordered ?eld. Proof. Checking the ordered ?eld axioms is mainly routine. Let us only verify the existence of multiplicative inverses. Suppose that [(an)]6= 0, that is, that {n ∈ N | an 6= 0} ∈ U. De?ne a new sequence (bn) by bn = an if an 6= 0 and bn = 1 if an = 0. (The choice of 1 is irrelevant here; all that matters is we de?ned bn 6= 0.) Observe that [(an)] = [(bn)] and bn 6= 0 for all n. Now [(an)]·[(b?1 n )] = [(bn)]·[(b?1 n )] = 1, whence [(an)] has a multiplicative inverse.
 We claim that RU (for suitable U) will serve as a nonstandard extension. First, in order to verify postulate (NS1), we need R to be an ordered sub?eld of RU. This can’t literally be true as R is not a subset of RU. Instead, we are going to de?ne an ordered ?eld embedding d : R→RU (and then, following ordinary mathematical practice, we pretend that R “is” d(R)?RU, that is, we identify R with its image d(R)). The embedding d is given by d(r) = [(r,r,r,...)]. For example, d(0) = 0 and d(1) = 1. It is straightforward to verify that d is an ordered ?eld embedding, called the diagonal embedding. In this sense, (NS1) is satis?ed. What about (NS2)? Here, we need to specify an extra condition on our ultra?lter U. To see this, we ?rst explain why principal ultra?lters are boring: Exercise 2.17. Prove that the diagonal embedding d : R→RU is surjective (that is, an isomorphism) if and only if U is principal. The whole point of nonstandard extensions is to get new elements, so principal ultrapowers (that is RU forU principal) do not help us achieve the goals of nonstandard analysis. So, we should use nonprincipal ultra?lters. But do they exist? Theorem 2.18. There exists a nonprincipal ultra?lter on N. Proof. Let F be the Frechet ?lter on N. By Zorn’s Lemma, there is a maximal ?lterU on N containingF. We leave it as an exercise to the reader to show thatU is a nonprincipal ultra?lter. (Hint: Use Exercise 2.9 to show that U is an ultra?lter.)
 For the rest of this subsection, ?x a nonprincipal ultra?lter U on N. We can now verify (NS2). For notational reasons, it will be simpler to construct a positive in?nite element α ∈ RU; then  := 1 α will be the desired positive in?nitesimal. We claim that α := [(1,2,3,...)] is a positive in?nite element. To see this, ?x r ∈ R>0; we need to verify that d(r) < α, that is, we need to verify X := {n ∈ N | r < n}∈U. Well, if X /∈U, then N\X ∈U; but
16 ISAAC GOLDBRING N\X is ?nite, whence U is principal by Exercise 2.13. Consequently X ∈U and α is in?nite. For axiom (NS3), we de?ne nonstandard extensions of sets and functions as follows: ? For f : Rn →R, we de?ne f : (RU)n →RU by f([(a1 m)],...,[(an m)]) := [(f(a1 m,...,an m))]. ? For A ?Rn, we de?ne A? ?(RU)n by ([(a1 m)],...,[(an m)])∈ A? if and only if {m ∈N | (a1 m,...,an m)∈ A}∈U. As before, one must check that these operations are well-de?ned (we leave this to the reader) and, after identifying R with d(R), these functions and relations really do “extend” the original functions and relations (again relegated to the lucky reader to verify). Finally, what about (NS4)? It is here that logic must reenter the picture in some shape or form. (Up until this point, the nonlogician aiming to use nonstandard methods via the ultrapower approach has been content.) LetL be the ?rst-order language described in the previous subsection. We make RU into an L-structure RU by interpreting Ff and PA as the extensions de?ned above. Then the precise formulation of (NS4) is the following: Theorem 2.19 (L os’). Suppose that ?(v1,...,vn) is an L-formula and [(a1 m)],...,[(an m)]∈RU. Then RU |= ?J[(a1 m)],...,[(an m)]Kif and only if {m ∈N|R |= ?Ja1 m,...,an mK}∈U.Proof. A useful exercise in logic; proceed by induction on the complexity of ?.
 Observe that, as a corollary of L os’ theorem, that RU is an ordered ?eld (as these axioms are ?rst-order). The analyst trying to refrain from logic surely avoids L os’ theorem, but in practice, ends up repeatedly verifying its conclusion on a case-by-case basis. In summary, we obtain: Theorem 2.20. RU is a nonstandard universe. 2.3. Problems. Problem 2.1. Discuss how to make de?ne the nonstandard extension of functions f : A → B with A ?Rm and B ?Rn. Problem 2.2. Let A ?Rm and B ?Rn. (1) Suppose f : A → B is 1-1. Show that if a ∈ A? \A, then f(a) ∈ B?\B. (2) Show that A is ?nite if and only if A? = A.
LECTURE NOTES ON NONSTANDARD ANALYSIS 17
3. Sequences and series 3.1. First results about sequences. OK, so let’s start doing some calculus nonstandardly. We start by studying sequences and series. A sequence is a function s : N → R. We often write (sn | n ∈ N) or just (sn) to denote a sequence, where sn := s(n). By Exercise 2.3, we have a nonstandard extension s : N? →R?, which we also often denote by (sn | n ∈N?). Notation: We write N > N to indicate N ∈N?\N. De?nition 3.1. (sn) converges to L, written (sn) → L or limn→∞sn = L, if: for all  ∈ R>0, there is m ∈ N such that, for all n ∈ N, if n ≥ m, then |sn ?L| < . We now give our ?rst nonstandard characterization of a standard concept. Theorem 3.2. sn → L if and only if sN ≈ L for all N > N. This theorem lends solid ground to the heuristic expression: sn → L if and only if, for really large N, sN is really close to L. Proof. (?) Suppose sn → L. Fix N > N. We want sN ≈ L. Fix  ∈ R>0. We want |sN ?L| < . By assumption, there is m ∈N such that R |=?n ∈N(n ≥ m →|sn ?L| < ). (Here, we are mixing formal logic with informal notation. If we were being polite, we would write R |=?n((PNn∧P≥nm)→ P<F|???|FsncLc). After seeing the formal version, hopefully you will forgive our rudeness and allow us to write in hybrid statements as above!) Thus, by the Transfer Principle, R? |=?n ∈N?(n ≥ m →|sn ?L| < ). Since m ∈N and N > N, we have N ≥ m. Thus, |sN ?L| < , as desired. (?) We now suppose sN ≈ L for N > N. Fix  ∈ R>0. We needm ∈ N such that, n ∈ N and n ≥ m implies |sn ? L| < . But how are we to ?nd such m? Well, R? knows of such an m (satisfying the ?version of the desired condition). Indeed, if m > N, then n ∈ N? and n ≥ m implies n > N, whence sn ≈ L and, in particular, |sn ?L| < . So, R? |= ?m ∈ N??n ∈ N?(n ≥ m → |sn ? L| < ). Thus, by the Transfer Principle, R |=?m ∈N?n ∈N(n ≥ m →|sn ?L| < ), as desired.
 We used transfer in each direction of the previous proof. The ?rst application is often called “Upward Transfer” as a fact from below (in the “real world”) was transferred up to the nonstandard world. Similarly, the second application is often called “Downward Transfer” for a similar reason. Theorem 3.3 (Monotone Convergence). Let (sn) be a sequence. (1) Suppose (sn) is bounded above and nondecreasing. Then (sn) converges to sup{sn | n ∈N}.
18 ISAAC GOLDBRING
(2) Suppose (sn) is bounded below and nonincreasing. Then (sn) converges to inf{sn | n ∈N}.. Proof. We only prove (1); the proof of (2) is similar. By the previous theorem, it su?ces to prove the following Claim: For any N > N, sN ∈R?n and st(sN) = sup{sn | n ∈N}. Proof of Claim: Let b be an upper bound for (sn), so R |=?n ∈N(s1 ≤ sn ≤ b). Thus, by transfer, R? |= ?n ∈ N?(s1 ≤ sn ≤ b). Thus, sN ∈ R?n for all N ∈ N?. Fix N > N and let L := st(sN). We need to show L = sup{sn | n ∈ N}. By the transfer principle applied to the nondecreasing assumption, sn ≤ sN for all n ∈ N, whence sn ≤ st(sN) = L for all n ∈ N. Why is L the least upper bound of {sn | n ∈N}? Let r be an upper bound for {sn | n ∈ N}. Then R |= ?n ∈ N(sn ≤ r). By the transfer principle, R? |=?n ∈N?(sn ≤ r); in particular, sN ≤ r, whence L = st(sN)≤ r.
 Corollary 3.4. Suppose c ∈(0,1). Then cn →0. Proof. (cn | n ∈ N) is bounded below (by 0) and nonincreasing since c ∈ (0,1). Thus, cn → L for some L. Fix N > N; by Theorem 3.2, cN ≈ L and cN+1 ≈ L. So L ≈ cN+1 = c·cn ≈ c·L. Since L,cL are both standard numbers, we have cL = L. Since c 6= 1, we have L = 0.
 De?nition 3.5. (sn) is bounded if there is b ∈ R such that |sn| < b for all n ∈N. Proposition 3.6. (sn) is bounded if and only if sN ∈R?n for all N ∈N?. Proof. The (?) direction follows immediately from transfer. For the converse, suppose that sN ∈R?n for all N ∈N?. Fix M > N. Then |sN|≤ M for all N ∈ N?, so R? |= (?M ∈ N?)(?n ∈ N?)(|sN| ≤ M). Applying the transfer principle to this statement yields a standard bound for (sn).
 De?nition 3.7. (sn) is a Cauchy sequence if for all  ∈R>0, there is k ∈N such that, for all m,n ∈N, if m,n ≥ k, then |sm ?sn| < . Lemma 3.8. If (sn) is Cauchy, then (sn) is bounded. Proof. We use the nonstandard criteria for boundedness. Fix N > N; we must show sN ∈R?n. Set A :={n ∈N? ||sn?sN| < 1}, so A is a de?nable set in R?. Since (sn) is Cauchy, there is k ∈ N such that, for m,p ∈ N, if m,p ≥ k, then |sm ?sp| < 1. Applying the transfer principle to this last statement, if n > N, then |sn ?sN| < 1. Thus, N?\N ? A. Since N?\N is not de?nable, we have N?\N ( A. In other words, there is n ∈ A∩N. Since sn ∈R for n ∈N, we see that sN ∈R?n.
LECTURE NOTES ON NONSTANDARD ANALYSIS 19 Exercise 3.9. (sn) is Cauchy if and only if, for all M,N > N, sM ≈ sN. Proposition 3.10. (sn) converges if and only if (sn) is Cauchy. Proof. The (?) direction is an easy exercise, so we only prove the (?) direction. Suppose (sn) is Cauchy; then (sn) is bounded. Fix M > N; then sM ∈ R?n. Set L := st(sM). If N > N is another in?nite natural number, then by the previous exercise, sN ≈ sM, so sN ≈ L. Thus, (sn) converges to L.
 3.2. Cluster points. If (sn) is a sequence and L ∈ R, then we say that L is a cluster point of (sn) if, for each  ∈ R>0, the interval (L?,L + ) contains in?nitely many sn’s. It will be useful for us to write this in another way: L is a cluster point of (sn) if and only if, for every  ∈R>0, for every m ∈N, there is n ∈N such that n ≥ m and |sn ?L| < . We can also recast this notion in terms of subsequences. A subsequence of (sn) is a sequence (tk) such that there is an increasing function α : N→N satisfying tk = sα(k). We often write (snk) for a subsequence of (sn), where nk := α(k). Exercise 3.11. L is a cluster point of (sn) if and only if there is a subsequence (snk) of (sn) that converges to L. Recall that (sn) converges to L if sN ≈ L for all N > N. Changing the quanti?er “for all” to “there exists” gives us the notion of cluster point: Proposition 3.12. L is a cluster point of (sn) if and only if there is N > N such that sN ≈ L. Proof. (?): Apply the transfer principle to the de?nition of cluster point. Fix  ∈ μ>0 and M > N. Then there is N ∈ N?, N ≥ M, such that |sN ?L| < . This is the desired N since N > N and  is in?nitesimal. (?): Fix N > N such that sN ≈ L. Fix  ∈R>0, m ∈N. Then R? |= (?n ∈N?)(n ≥ m∧|sn ?L| < ); indeed, N witnesses the truth of this quanti?er. It remains to apply transfer to this statement.
 We immediately get the famous: Corollary 3.13 (Bolzano-Weierstra?). Suppose that (sn) is bounded. Then (sn) has a cluster point. Proof. Fix N > N. Then since (sn) is bounded, sN ∈R?n. Let L = st(sN); then L is a cluster point of (sn) by the last proposition.
 Suppose s = (sn) is a bounded sequence. Let C(s) denote the set of cluster points of s. Then, by the previous proposition, we have C(s) ={L ∈R | sN ≈ L for some N > N}. Exercise 3.14. C(s) is a bounded set.
