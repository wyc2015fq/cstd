# PyQt5教程——布局管理（4） - YZXnuaa的博客 - CSDN博客
2018年04月27日 15:21:23[YZXnuaa](https://me.csdn.net/YZXnuaa)阅读数：71
布局管理是GUI编程中的一个重要方面。布局管理是一种如何在应用窗口上防止组件的一种方法。我们可以通过两种基础方式来管理布局。我们可以使用绝对定位和布局类。
## 绝对定位
程序指定了组件的位置并且每个组件的大小用像素作为单位来丈量。当你使用了绝对定位，我们需要知道下面的几点限制：
- 如果我们改变了窗口大小，组件的位置和大小并不会发生改变。
- 在不同平台上，应用的外观可能不同
- 改变我们应用中的字体的话可能会把应用弄得一团糟。
- 如果我们决定改变我们的布局，我们必须完全重写我们的布局，这样非常乏味和浪费时间。
下面的例子中，使用了绝对坐标来定位组件
```
```python
#!/usr/bin/python3
```
```python
# -*- coding: utf-8 -*-
```
```python
"""
```
```python
ZetCode PyQt5 tutorial
```
```python
This example shows three labels on a window
```
```python
using absolute positioning.
```
```python
author: Jan Bodnar
```
```python
website: zetcode.com
```
```python
last edited: January 2015
```
```python
"""
```
```python
import
```
```python
sys
```
```python
from
```
```python
PyQt5.QtWidgets
```
```python
import
```
```python
QWidget, QLabel, QApplication
```
```python
class
```
```python
Example(QWidget):
```
```python
```
```python
```
```python
def
```
```python
__init__(
```
```python
self
```
```python
):
```
```python
```
```python
super
```
```python
().__init__()
```
```python
```
```python
```
```python
self
```
```python
.initUI()
```
```python
```
```python
```
```python
```
```python
def
```
```python
initUI(
```
```python
self
```
```python
):
```
```python
```
```python
```
```python
lbl1
```
```python
=
```
```python
QLabel(
```
```python
'Zetcode'
```
```python
,
```
```python
self
```
```python
)
```
```python
```
```python
lbl1.move(
```
```python
15
```
```python
,
```
```python
10
```
```python
)
```
```python
```
```python
lbl2
```
```python
=
```
```python
QLabel(
```
```python
'tutorials'
```
```python
,
```
```python
self
```
```python
)
```
```python
```
```python
lbl2.move(
```
```python
35
```
```python
,
```
```python
40
```
```python
)
```
```python
```
```python
```
```python
lbl3
```
```python
=
```
```python
QLabel(
```
```python
'for programmers'
```
```python
,
```
```python
self
```
```python
)
```
```python
```
```python
lbl3.move(
```
```python
55
```
```python
,
```
```python
70
```
```python
)
```
```python
```
```python
```
```python
self
```
```python
.setGeometry(
```
```python
300
```
```python
,
```
```python
300
```
```python
,
```
```python
250
```
```python
,
```
```python
150
```
```python
)
```
```python
```
```python
self
```
```python
.setWindowTitle(
```
```python
'Absolute'
```
```python
)
```
```python
```
```python
self
```
```python
.show()
```
```python
```
```python
```
```python
if
```
```python
__name__
```
```python
=
```
```python
=
```
```python
'__main__'
```
```python
:
```
```python
```
```python
```
```python
app
```
```python
=
```
```python
QApplication(sys.argv)
```
```python
```
```python
ex
```
```python
=
```
```python
Example()
```
```python
```
```python
sys.exit(app.exec_())
```
```
我们使用move()方法来定位我们的组件。在上面的例子中我们使用move()方法定位了一些标签组件。在使用move()方法时，我们给move()方法提供了x和y坐标作为参数。move()使用的坐标系统是从左上角开始计算的。x值从左到右增长。y值从上到下增长。
```
```python
lbl1
```
```python
=
```
```python
QLabel(
```
```python
'Zetcode'
```
```python
,
```
```python
self
```
```python
)
```
```python
lbl1.move(
```
```python
15
```
```python
,
```
```python
10
```
```python
)
```
```
将标签组件定位在x=15，y=10的坐标位置。
![Absolute positioning](http://zetcode.com/img/gui/pyqt5/absolute.png)Figure: Absolute positioning
## 箱布局
布局管理器的布局管理类非常灵活，实用。它是将组件定位在窗口上的首选方式。QHBoxLayout和QVBoxLayout是两个基础布局管理类，他们水平或垂直的线性排列组件。想象一下我们需要在右下角排列两个按钮。为了使用箱布局，我们将使用一个水平箱布局和垂直箱布局来实现。同样为了使用一些必要的空白，我们将添加一些拉伸因子。
```
```python
#!/usr/bin/python3
```
```python
# -*- coding: utf-8 -*-
```
```python
"""
```
```python
ZetCode PyQt5 tutorial
```
```python
In this example, we position two push
```
```python
buttons in the bottom-right corner
```
```python
of the window.
```
```python
author: Jan Bodnar
```
```python
website: zetcode.com
```
```python
last edited: January 2015
```
```python
"""
```
```python
import
```
```python
sys
```
```python
from
```
```python
PyQt5.QtWidgets
```
```python
import
```
```python
(QWidget, QPushButton,
```
```python
```
```python
QHBoxLayout, QVBoxLayout, QApplication)
```
```python
class
```
```python
Example(QWidget):
```
```python
```
```python
```
```python
def
```
```python
__init__(
```
```python
self
```
```python
):
```
```python
```
```python
super
```
```python
().__init__()
```
```python
```
```python
```
```python
self
```
```python
.initUI()
```
```python
```
```python
```
```python
```
```python
def
```
```python
initUI(
```
```python
self
```
```python
):
```
```python
```
```python
```
```python
okButton
```
```python
=
```
```python
QPushButton(
```
```python
"OK"
```
```python
)
```
```python
```
```python
cancelButton
```
```python
=
```
```python
QPushButton(
```
```python
"Cancel"
```
```python
)
```
```python
```
```python
hbox
```
```python
=
```
```python
QHBoxLayout()
```
```python
```
```python
hbox.addStretch(
```
```python
1
```
```python
)
```
```python
```
```python
hbox.addWidget(okButton)
```
```python
```
```python
hbox.addWidget(cancelButton)
```
```python
```
```python
vbox
```
```python
=
```
```python
QVBoxLayout()
```
```python
```
```python
vbox.addStretch(
```
```python
1
```
```python
)
```
```python
```
```python
vbox.addLayout(hbox)
```
```python
```
```python
```
```python
self
```
```python
.setLayout(vbox)
```
```python
```
```python
```
```python
self
```
```python
.setGeometry(
```
```python
300
```
```python
,
```
```python
300
```
```python
,
```
```python
300
```
```python
,
```
```python
150
```
```python
)
```
```python
```
```python
self
```
```python
.setWindowTitle(
```
```python
'Buttons'
```
```python
)
```
```python
```
```python
self
```
```python
.show()
```
```python
```
```python
```
```python
if
```
```python
__name__
```
```python
=
```
```python
=
```
```python
'__main__'
```
```python
:
```
```python
```
```python
```
```python
app
```
```python
=
```
```python
QApplication(sys.argv)
```
```python
```
```python
ex
```
```python
=
```
```python
Example()
```
```python
```
```python
sys.exit(app.exec_())
```
```
例子在右下角放置了两个按钮。当我们改变应用窗口大小时，它们会相对于应用窗口不改变位置。在这个例子中我们使用了QHBoxLayout和QVBoxLayout两个布局类。
```
```python
okButton
```
```python
=
```
```python
QPushButton(
```
```python
"OK"
```
```python
)
```
```python
cancelButton
```
```python
=
```
```python
QPushButton(
```
```python
"Cancel"
```
```python
)
```
```
在这里我们创建了两个按钮。
```
```python
hbox
```
```python
=
```
```python
QHBoxLayout()
```
```python
hbox.addStretch(
```
```python
1
```
```python
)
```
```python
hbox.addWidget(okButton)
```
```python
hbox.addWidget(cancelButton)
```
```
这里我们创建了一个水平箱布局，并且增加了一个拉伸因子和两个按钮。拉伸因子在两个按钮之前增加了一个可伸缩空间。这会将按钮推到窗口的右边。
```
```python
vbox
```
```python
=
```
```python
QVBoxLayout()
```
```python
vbox.addStretch(
```
```python
1
```
```python
)
```
```python
vbox.addLayout(hbox)
```
```
为了创建必要的布局，我们把水平布局放置在垂直布局内。拉伸因子将把包含两个按钮的水平箱布局推到窗口的底边。
```
```python
self
```
```python
.setLayout(vbox)
```
```
最后，我们设置一下窗口的主布局。
![Buttons](http://zetcode.com/img/gui/pyqt5/buttons.png)Figure: Buttons
## 网格布局
最常用的布局类是网格布局。这个布局使用行了列分割空间。要创建一个网格布局，我们需要使用QGridLayout类。
```
```python
#!/usr/bin/python3
```
```python
# -*- coding: utf-8 -*-
```
```python
"""
```
```python
ZetCode PyQt5 tutorial
```
```python
In this example, we create a skeleton
```
```python
of a calculator using a QGridLayout.
```
```python
author: Jan Bodnar
```
```python
website: zetcode.com
```
```python
last edited: January 2015
```
```python
"""
```
```python
import
```
```python
sys
```
```python
from
```
```python
PyQt5.QtWidgets
```
```python
import
```
```python
(QWidget, QGridLayout,
```
```python
```
```python
QPushButton, QApplication)
```
```python
class
```
```python
Example(QWidget):
```
```python
```
```python
```
```python
def
```
```python
__init__(
```
```python
self
```
```python
):
```
```python
```
```python
super
```
```python
().__init__()
```
```python
```
```python
```
```python
self
```
```python
.initUI()
```
```python
```
```python
```
```python
```
```python
def
```
```python
initUI(
```
```python
self
```
```python
):
```
```python
```
```python
```
```python
grid
```
```python
=
```
```python
QGridLayout()
```
```python
```
```python
self
```
```python
.setLayout(grid)
```
```python
```
```python
```
```python
names
```
```python
=
```
```python
[
```
```python
'Cls'
```
```python
,
```
```python
'Bck'
```
```python
, '
```
```python
', '
```
```python
Close',
```
```python
```
```python
'7'
```
```python
,
```
```python
'8'
```
```python
,
```
```python
'9'
```
```python
,
```
```python
'/'
```
```python
,
```
```python
```
```python
'4'
```
```python
,
```
```python
'5'
```
```python
,
```
```python
'6'
```
```python
,
```
```python
'*'
```
```python
,
```
```python
```
```python
'1'
```
```python
,
```
```python
'2'
```
```python
,
```
```python
'3'
```
```python
,
```
```python
'-'
```
```python
,
```
```python
```
```python
'0'
```
```python
,
```
```python
'.'
```
```python
,
```
```python
'='
```
```python
,
```
```python
'+'
```
```python
]
```
```python
```
```python
```
```python
positions
```
```python
=
```
```python
[(i,j)
```
```python
for
```
```python
i
```
```python
in
```
```python
range
```
```python
(
```
```python
5
```
```python
)
```
```python
for
```
```python
j
```
```python
in
```
```python
range
```
```python
(
```
```python
4
```
```python
)]
```
```python
```
```python
```
```python
for
```
```python
position, name
```
```python
in
```
```python
zip
```
```python
(positions, names):
```
```python
```
```python
```
```python
if
```
```python
name
```
```python
=
```
```python
=
```
```python
'':
```
```python
```
```python
continue
```
```python
```
```python
button
```
```python
=
```
```python
QPushButton(name)
```
```python
```
```python
grid.addWidget(button,
```
```python
*
```
```python
position)
```
```python
```
```python
```
```python
self
```
```python
.move(
```
```python
300
```
```python
,
```
```python
150
```
```python
)
```
```python
```
```python
self
```
```python
.setWindowTitle(
```
```python
'Calculator'
```
```python
)
```
```python
```
```python
self
```
```python
.show()
```
```python
```
```python
```
```python
if
```
```python
__name__
```
```python
=
```
```python
=
```
```python
'__main__'
```
```python
:
```
```python
```
```python
```
```python
app
```
```python
=
```
```python
QApplication(sys.argv)
```
```python
```
```python
ex
```
```python
=
```
```python
Example()
```
```python
```
```python
sys.exit(app.exec_())
```
```
在我们的例子中，我们创建了一个全是按钮的网格布局。
```
```python
grid
```
```python
=
```
```python
QGridLayout()
```
```python
self
```
```python
.setLayout(grid)
```
```
实例化QGridLayout类，并且把这个类设为应用窗口的布局。
```
```python
names
```
```python
=
```
```python
[
```
```python
'Cls'
```
```python
,
```
```python
'Bck'
```
```python
, '
```
```python
', '
```
```python
Close',
```
```python
```
```python
'7'
```
```python
,
```
```python
'8'
```
```python
,
```
```python
'9'
```
```python
,
```
```python
'/'
```
```python
,
```
```python
```
```python
'4'
```
```python
,
```
```python
'5'
```
```python
,
```
```python
'6'
```
```python
,
```
```python
'*'
```
```python
,
```
```python
```
```python
'1'
```
```python
,
```
```python
'2'
```
```python
,
```
```python
'3'
```
```python
,
```
```python
'-'
```
```python
,
```
```python
```
```python
'0'
```
```python
,
```
```python
'.'
```
```python
,
```
```python
'='
```
```python
,
```
```python
'+'
```
```python
]
```
```
这些标签会在之后的按钮中使用。
```
```python
positions
```
```python
=
```
```python
[(i,j)
```
```python
for
```
```python
i
```
```python
in
```
```python
range
```
```python
(
```
```python
5
```
```python
)
```
```python
for
```
```python
j
```
```python
in
```
```python
range
```
```python
(
```
```python
4
```
```python
)]
```
```
我们创建了一个网格的定位列表。
```
```python
for
```
```python
position, name
```
```python
in
```
```python
zip
```
```python
(positions, names):
```
```python
```
```python
```
```python
if
```
```python
name
```
```python
=
```
```python
=
```
```python
'':
```
```python
```
```python
continue
```
```python
```
```python
button
```
```python
=
```
```python
QPushButton(name)
```
```python
```
```python
grid.addWidget(button,
```
```python
*
```
```python
position)
```
```
创建出按钮组件，并使用addWidget()方法向布局中添加按钮。
![Calculator skeleton](http://zetcode.com/img/gui/pyqt5/calculator.png)Figure: Calculator skeleton
## 文本审阅窗口示例
在网格中，组件可以跨多列或多行。在这个例子中，我们对它进行一下说明。
```
```python
#!/usr/bin/python3
```
```python
# -*- coding: utf-8 -*-
```
```python
"""
```
```python
ZetCode PyQt5 tutorial
```
```python
In this example, we create a bit
```
```python
more complicated window layout using
```
```python
the QGridLayout manager.
```
```python
author: Jan Bodnar
```
```python
website: zetcode.com
```
```python
last edited: January 2015
```
```python
"""
```
```python
import
```
```python
sys
```
```python
from
```
```python
PyQt5.QtWidgets
```
```python
import
```
```python
(QWidget, QLabel, QLineEdit,
```
```python
```
```python
QTextEdit, QGridLayout, QApplication)
```
```python
class
```
```python
Example(QWidget):
```
```python
```
```python
```
```python
def
```
```python
__init__(
```
```python
self
```
```python
):
```
```python
```
```python
super
```
```python
().__init__()
```
```python
```
```python
```
```python
self
```
```python
.initUI()
```
```python
```
```python
```
```python
```
```python
def
```
```python
initUI(
```
```python
self
```
```python
):
```
```python
```
```python
```
```python
title
```
```python
=
```
```python
QLabel(
```
```python
'Title'
```
```python
)
```
```python
```
```python
author
```
```python
=
```
```python
QLabel(
```
```python
'Author'
```
```python
)
```
```python
```
```python
review
```
```python
=
```
```python
QLabel(
```
```python
'Review'
```
```python
)
```
```python
```
```python
titleEdit
```
```python
=
```
```python
QLineEdit()
```
```python
```
```python
authorEdit
```
```python
=
```
```python
QLineEdit()
```
```python
```
```python
reviewEdit
```
```python
=
```
```python
QTextEdit()
```
```python
```
```python
grid
```
```python
=
```
```python
QGridLayout()
```
```python
```
```python
grid.setSpacing(
```
```python
10
```
```python
)
```
```python
```
```python
grid.addWidget(title,
```
```python
1
```
```python
,
```
```python
0
```
```python
)
```
```python
```
```python
grid.addWidget(titleEdit,
```
```python
1
```
```python
,
```
```python
1
```
```python
)
```
```python
```
```python
grid.addWidget(author,
```
```python
2
```
```python
,
```
```python
0
```
```python
)
```
```python
```
```python
grid.addWidget(authorEdit,
```
```python
2
```
```python
,
```
```python
1
```
```python
)
```
```python
```
```python
grid.addWidget(review,
```
```python
3
```
```python
,
```
```python
0
```
```python
)
```
```python
```
```python
grid.addWidget(reviewEdit,
```
```python
3
```
```python
,
```
```python
1
```
```python
,
```
```python
5
```
```python
,
```
```python
1
```
```python
)
```
```python
```
```python
```
```python
self
```
```python
.setLayout(grid)
```
```python
```
```python
```
```python
self
```
```python
.setGeometry(
```
```python
300
```
```python
,
```
```python
300
```
```python
,
```
```python
350
```
```python
,
```
```python
300
```
```python
)
```
```python
```
```python
self
```
```python
.setWindowTitle(
```
```python
'Review'
```
```python
)
```
```python
```
```python
self
```
```python
.show()
```
```python
```
```python
```
```python
if
```
```python
__name__
```
```python
=
```
```python
=
```
```python
'__main__'
```
```python
:
```
```python
```
```python
```
```python
app
```
```python
=
```
```python
QApplication(sys.argv)
```
```python
```
```python
ex
```
```python
=
```
```python
Example()
```
```python
```
```python
sys.exit(app.exec_())
```
```
我们创建了包含三个标签，两个单行编辑框和一个文本编辑框组件的窗口。布局使用了QGridLayout布局。
```
```python
grid
```
```python
=
```
```python
QGridLayout()
```
```python
grid.setSpacing(
```
```python
10
```
```python
)
```
```
我们创建了一个网格布局并且设置了组件之间的间距。
```
```python
grid.addWidget(reviewEdit,
```
```python
3
```
```python
,
```
```python
1
```
```python
,
```
```python
5
```
```python
,
```
```python
1
```
```python
)
```
```
如果我们向网格布局中增加一个组件，我们可以提供组件的跨行和跨列参数。在这个例子中，我们让reviewEdit组件跨了5行。
![Review example](http://zetcode.com/img/gui/pyqt5/review.png)Figure: Review example
这部分的PyQt5教程专门用于讲述布局管理。
