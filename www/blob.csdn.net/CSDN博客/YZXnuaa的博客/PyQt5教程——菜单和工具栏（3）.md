# PyQt5教程——菜单和工具栏（3） - YZXnuaa的博客 - CSDN博客
2018年04月27日 14:53:03[YZXnuaa](https://me.csdn.net/YZXnuaa)阅读数：149
在这部分的PyQt5教程中，我们将创建菜单和工具栏。菜单式位于菜单栏的一组命令操作。工具栏是应用窗体中由按钮和一些常规命令操作组成的组件。
## 主窗口
QMainWindow类提供了一个应用主窗口。默认创建一个拥有状态栏、工具栏和菜单栏的经典应用窗口骨架。
## 状态栏
状态栏是用来显示状态信息的组件。
```
```python
#!/usr/bin/python3
```
```python
# -*- coding: utf-8 -*-
```
```python
"""
```
```python
ZetCode PyQt5 tutorial
```
```python
This program creates a statusbar.
```
```python
author: Jan Bodnar
```
```python
website: zetcode.com
```
```python
last edited: January 2015
```
```python
"""
```
```python
import
```
```python
sys
```
```python
from
```
```python
PyQt5.QtWidgets
```
```python
import
```
```python
QMainWindow, QApplication
```
```python
class
```
```python
Example(QMainWindow):
```
```python
```
```python
```
```python
def
```
```python
__init__(
```
```python
self
```
```python
):
```
```python
```
```python
super
```
```python
().__init__()
```
```python
```
```python
```
```python
self
```
```python
.initUI()
```
```python
```
```python
```
```python
```
```python
def
```
```python
initUI(
```
```python
self
```
```python
):
```
```python
```
```python
```
```python
self
```
```python
.statusBar().showMessage(
```
```python
'Ready'
```
```python
)
```
```python
```
```python
```
```python
self
```
```python
.setGeometry(
```
```python
300
```
```python
,
```
```python
300
```
```python
,
```
```python
250
```
```python
,
```
```python
150
```
```python
)
```
```python
```
```python
self
```
```python
.setWindowTitle(
```
```python
'Statusbar'
```
```python
)
```
```python
```
```python
self
```
```python
.show()
```
```python
if
```
```python
__name__
```
```python
=
```
```python
=
```
```python
'__main__'
```
```python
:
```
```python
```
```python
```
```python
app
```
```python
=
```
```python
QApplication(sys.argv)
```
```python
```
```python
ex
```
```python
=
```
```python
Example()
```
```python
```
```python
sys.exit(app.exec_())
```
```
状态栏又QMainWindow组件帮助创建完成（依赖于QMainWindow组件）。
self.statusBar().showMessage('Ready')
为了得到状态栏，我们调用了`QtGui.QMainWindow`类的statusBar()方法。第一次调用这个方法创建了一个状态栏。随后方法返回状态栏对象。然后用showMessage()方法在状态栏上显示一些信息。
## 菜单栏
菜单栏是GUI应用的常规组成部分。是位于各种菜单中的一组命令操作（Mac OS 对待菜单栏有些不同。为了获得全平台一致的效果，我们可以在代码中加入一行：`menubar.setNativeMenuBar(False)`）。
```
```python
#!/usr/bin/python3
```
```python
# -*- coding: utf-8 -*-
```
```python
"""
```
```python
ZetCode PyQt5 tutorial
```
```python
This program creates a menubar. The
```
```python
menubar has one menu with an exit action.
```
```python
author: Jan Bodnar
```
```python
website: zetcode.com
```
```python
last edited: January 2015
```
```python
"""
```
```python
import
```
```python
sys
```
```python
from
```
```python
PyQt5.QtWidgets
```
```python
import
```
```python
QMainWindow, QAction, qApp, QApplication
```
```python
from
```
```python
PyQt5.QtGui
```
```python
import
```
```python
QIcon
```
```python
class
```
```python
Example(QMainWindow):
```
```python
```
```python
```
```python
def
```
```python
__init__(
```
```python
self
```
```python
):
```
```python
```
```python
super
```
```python
().__init__()
```
```python
```
```python
```
```python
self
```
```python
.initUI()
```
```python
```
```python
```
```python
```
```python
def
```
```python
initUI(
```
```python
self
```
```python
):
```
```python
```
```python
```
```python
exitAction
```
```python
=
```
```python
QAction(QIcon(
```
```python
'exit.png'
```
```python
),
```
```python
'&Exit'
```
```python
,
```
```python
self
```
```python
)
```
```python
```
```python
exitAction.setShortcut(
```
```python
'Ctrl+Q'
```
```python
)
```
```python
```
```python
exitAction.setStatusTip(
```
```python
'Exit application'
```
```python
)
```
```python
```
```python
exitAction.triggered.connect(qApp.quit)
```
```python
```
```python
self
```
```python
.statusBar()
```
```python
```
```python
menubar
```
```python
=
```
```python
self
```
```python
.menuBar()
```
```python
```
```python
fileMenu
```
```python
=
```
```python
menubar.addMenu(
```
```python
'&File'
```
```python
)
```
```python
```
```python
fileMenu.addAction(exitAction)
```
```python
```
```python
```
```python
self
```
```python
.setGeometry(
```
```python
300
```
```python
,
```
```python
300
```
```python
,
```
```python
300
```
```python
,
```
```python
200
```
```python
)
```
```python
```
```python
self
```
```python
.setWindowTitle(
```
```python
'Menubar'
```
```python
)
```
```python
```
```python
self
```
```python
.show()
```
```python
```
```python
```
```python
if
```
```python
__name__
```
```python
=
```
```python
=
```
```python
'__main__'
```
```python
:
```
```python
```
```python
```
```python
app
```
```python
=
```
```python
QApplication(sys.argv)
```
```python
```
```python
ex
```
```python
=
```
```python
Example()
```
```python
```
```python
sys.exit(app.exec_())
```
```
在上面的例子中，我们创建了有一个菜单项的菜单栏。这个菜单项包含一个选中后中断应用的动作。
```
```python
exitAction
```
```python
=
```
```python
QAction(QIcon(
```
```python
'exit.png'
```
```python
),
```
```python
'&Exit'
```
```python
,
```
```python
self
```
```python
)
```
```python
exitAction.setShortcut(
```
```python
'Ctrl+Q'
```
```python
)
```
```python
exitAction.setStatusTip(
```
```python
'Exit application'
```
```python
)
```
```
QAction是一个用于菜单栏、工具栏或自定义快捷键的抽象动作行为。在上面的三行中，我们创建了一个有指定图标和文本为'Exit'的标签。另外，还为这个动作定义了一个快捷键。第三行创建一个当我们鼠标浮于菜单项之上就会显示的一个状态提示。
```
```python
exitAction.triggered.connect(qApp.quit)
```
```
当我们选中特定的动作，一个触发信号会被发射。信号连接到QApplication组件的quit()方法。这样就中断了应用。
```
```python
menubar
```
```python
=
```
```python
self
```
```python
.menuBar()
```
```python
fileMenu
```
```python
=
```
```python
menubar.addMenu(
```
```python
'&File'
```
```python
)
```
```python
fileMenu.addAction(exitAction)
```
```
menuBar()方法创建了一个菜单栏。我们创建一个file菜单，然后将退出动作添加到file菜单中。
## 工具栏
菜单可以集成所有命令，这样我们可以在应用中使用这些被集成的命令。工具栏提供了一个快速访问常用命令的方式。
```
```python
#!/usr/bin/python3
```
```python
# -*- coding: utf-8 -*-
```
```python
"""
```
```python
ZetCode PyQt5 tutorial
```
```python
This program creates a toolbar.
```
```python
The toolbar has one action, which
```
```python
terminates the application, if triggered.
```
```python
author: Jan Bodnar
```
```python
website: zetcode.com
```
```python
last edited: January 2015
```
```python
"""
```
```python
import
```
```python
sys
```
```python
from
```
```python
PyQt5.QtWidgets
```
```python
import
```
```python
QMainWindow, QAction, qApp, QApplication
```
```python
from
```
```python
PyQt5.QtGui
```
```python
import
```
```python
QIcon
```
```python
class
```
```python
Example(QMainWindow):
```
```python
```
```python
```
```python
def
```
```python
__init__(
```
```python
self
```
```python
):
```
```python
```
```python
super
```
```python
().__init__()
```
```python
```
```python
```
```python
self
```
```python
.initUI()
```
```python
```
```python
```
```python
```
```python
def
```
```python
initUI(
```
```python
self
```
```python
):
```
```python
```
```python
```
```python
exitAction
```
```python
=
```
```python
QAction(QIcon(
```
```python
'exit24.png'
```
```python
),
```
```python
'Exit'
```
```python
,
```
```python
self
```
```python
)
```
```python
```
```python
exitAction.setShortcut(
```
```python
'Ctrl+Q'
```
```python
)
```
```python
```
```python
exitAction.triggered.connect(qApp.quit)
```
```python
```
```python
```
```python
self
```
```python
.toolbar
```
```python
=
```
```python
self
```
```python
.addToolBar(
```
```python
'Exit'
```
```python
)
```
```python
```
```python
self
```
```python
.toolbar.addAction(exitAction)
```
```python
```
```python
```
```python
self
```
```python
.setGeometry(
```
```python
300
```
```python
,
```
```python
300
```
```python
,
```
```python
300
```
```python
,
```
```python
200
```
```python
)
```
```python
```
```python
self
```
```python
.setWindowTitle(
```
```python
'Toolbar'
```
```python
)
```
```python
```
```python
self
```
```python
.show()
```
```python
```
```python
```
```python
if
```
```python
__name__
```
```python
=
```
```python
=
```
```python
'__main__'
```
```python
:
```
```python
```
```python
```
```python
app
```
```python
=
```
```python
QApplication(sys.argv)
```
```python
```
```python
ex
```
```python
=
```
```python
Example()
```
```python
```
```python
sys.exit(app.exec_())
```
```
上述例子中，我们创建了一个简单的工具栏。工具栏有一个动作，当这个退出动作被触发时应用将会被中断。
```
```python
exitAction
```
```python
=
```
```python
QAction(QIcon(
```
```python
'exit24.png'
```
```python
),
```
```python
'Exit'
```
```python
,
```
```python
self
```
```python
)
```
```python
exitAction.setShortcut(
```
```python
'Ctrl+Q'
```
```python
)
```
```python
exitAction.triggered.connect(qApp.quit)
```
```
我们创建了一个动作对象，和之前菜单栏中的部分代码相似。这个动作有一个标签，图标和快捷键。并且将`QtGui.QMainWindow的`quit()方法连接到了触发信号上。
```
```python
self
```
```python
.toolbar
```
```python
=
```
```python
self
```
```python
.addToolBar(
```
```python
'Exit'
```
```python
)
```
```python
self
```
```python
.toolbar.addAction(exitAction)
```
```
这里我们创建了一个工具栏，并且在其中插入一个动作对象。
![Toolbar](http://zetcode.com/img/gui/pyqt5/toolbar.png)Figure: Toolbar
## 将几个组件放在一起使用
在上面的例子中，我们创建了菜单栏、工具栏和状态栏。下面我们将创建一个中心组件。
```
```python
#!/usr/bin/python3
```
```python
# -*- coding: utf-8 -*-
```
```python
"""
```
```python
ZetCode PyQt5 tutorial
```
```python
This program creates a skeleton of
```
```python
a classic GUI application with a menubar,
```
```python
toolbar, statusbar, and a central widget.
```
```python
author: Jan Bodnar
```
```python
website: zetcode.com
```
```python
last edited: January 2015
```
```python
"""
```
```python
import
```
```python
sys
```
```python
from
```
```python
PyQt5.QtWidgets
```
```python
import
```
```python
QMainWindow, QTextEdit, QAction, QApplication
```
```python
from
```
```python
PyQt5.QtGui
```
```python
import
```
```python
QIcon
```
```python
class
```
```python
Example(QMainWindow):
```
```python
```
```python
```
```python
def
```
```python
__init__(
```
```python
self
```
```python
):
```
```python
```
```python
super
```
```python
().__init__()
```
```python
```
```python
```
```python
self
```
```python
.initUI()
```
```python
```
```python
```
```python
```
```python
def
```
```python
initUI(
```
```python
self
```
```python
):
```
```python
```
```python
```
```python
textEdit
```
```python
=
```
```python
QTextEdit()
```
```python
```
```python
self
```
```python
.setCentralWidget(textEdit)
```
```python
```
```python
exitAction
```
```python
=
```
```python
QAction(QIcon(
```
```python
'exit24.png'
```
```python
),
```
```python
'Exit'
```
```python
,
```
```python
self
```
```python
)
```
```python
```
```python
exitAction.setShortcut(
```
```python
'Ctrl+Q'
```
```python
)
```
```python
```
```python
exitAction.setStatusTip(
```
```python
'Exit application'
```
```python
)
```
```python
```
```python
exitAction.triggered.connect(
```
```python
self
```
```python
.close)
```
```python
```
```python
self
```
```python
.statusBar()
```
```python
```
```python
menubar
```
```python
=
```
```python
self
```
```python
.menuBar()
```
```python
```
```python
fileMenu
```
```python
=
```
```python
menubar.addMenu(
```
```python
'&File'
```
```python
)
```
```python
```
```python
fileMenu.addAction(exitAction)
```
```python
```
```python
toolbar
```
```python
=
```
```python
self
```
```python
.addToolBar(
```
```python
'Exit'
```
```python
)
```
```python
```
```python
toolbar.addAction(exitAction)
```
```python
```
```python
```
```python
self
```
```python
.setGeometry(
```
```python
300
```
```python
,
```
```python
300
```
```python
,
```
```python
350
```
```python
,
```
```python
250
```
```python
)
```
```python
```
```python
self
```
```python
.setWindowTitle(
```
```python
'Main window'
```
```python
)
```
```python
```
```python
self
```
```python
.show()
```
```python
```
```python
```
```python
if
```
```python
__name__
```
```python
=
```
```python
=
```
```python
'__main__'
```
```python
:
```
```python
```
```python
```
```python
app
```
```python
=
```
```python
QApplication(sys.argv)
```
```python
```
```python
ex
```
```python
=
```
```python
Example()
```
```python
```
```python
sys.exit(app.exec_())
```
```
事例代码创建了一个带有菜单栏、工具栏和状态栏的经典GUI应用骨架。
```
```python
textEdit
```
```python
=
```
```python
QTextEdit()
```
```python
self
```
```python
.setCentralWidget(textEdit)
```
```
在这里我们创建了一个文本编辑框组件。我们将它设置成QMainWindow的中心组件。中心组件占据了所有剩下的空间。
![Main window](http://zetcode.com/img/gui/pyqt5/mainwindow.png)Figure: Main window
在这个部分的PyQt5教程中，我们使用了菜单、工具栏、状态栏和一个应用主窗口。
