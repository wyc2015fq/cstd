# Opencv 高斯模糊 Gaussian Blur () - YZXnuaa的博客 - CSDN博客
2018年01月24日 14:23:41[YZXnuaa](https://me.csdn.net/YZXnuaa)阅读数：416
**周边像素的平均值**
所谓"模糊"，可以理解成每一个像素都取周边像素的[平均值](https://baike.baidu.com/item/%E5%B9%B3%E5%9D%87%E5%80%BC)。[](https://baike.baidu.com/pic/%E9%AB%98%E6%96%AF%E6%A8%A1%E7%B3%8A/10885810/7978917/4e4a20a4462309f7168b2c6c700e0cf3d6cad6ec?fr=lemma&ct=cover)
![高斯模糊原理的图解](https://gss2.bdstatic.com/-fo3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D220/sign=36884c578418367aa98978df1e728b68/4e4a20a4462309f7168b2c6c700e0cf3d6cad6ec.jpg)
高斯模糊原理的图解(2张)
右图中，2是中间点，周边点都是1。
"中间点"取"周围点"的平均值，就会变成1。在数值上，这是一种"平滑化"。在图形上，就相当于产生"模糊"效果，"中间点"失去细节。
显然，计算平均值时，取值范围越大，"模糊效果"越强烈。
![](https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D220/sign=30038064c45c1038207ec9c08210931c/cf1b9d16fdfaaf512a8d01c18e5494eef01f7a66.jpg)
左图分别是原图、模糊半径3像素、模糊半径10像素的效果。模糊半径越大，图像就越模糊。从数值角度看，就是数值越平滑。
接下来的问题就是，既然每个点都要取周边像素的平均值，那么应该如何分配[权重](https://baike.baidu.com/item/%E6%9D%83%E9%87%8D)呢？
如果使用简单平均，显然不是很合理，因为图像都是连续的，越靠近的点关系越密切，越远离的点关系越疏远。因此，加权平均更合理，距离越近的点权重越大，距离越远的点权重越小。[2]
**正态分布的权重**
![](https://gss3.bdstatic.com/7Po3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D220/sign=4a2fefccb0b7d0a27fc9039ffbef760d/35a85edf8db1cb13ae4fbf6ddf54564e92584bae.jpg)
[正态分布](https://baike.baidu.com/item/%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83)显然是一种可取的权重分配模式。
在图形上，正态分布是一种钟形曲线，越接近中心，取值越大，越远离中心，取值越小。
计算平均值的时候，我们只需要将"中心点"作为原点，其他点按照其在正态曲线上的位置，分配权重，就可以得到一个加权平均值。[2]
**高斯函数**
![](https://gss3.bdstatic.com/7Po3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D220/sign=9be4077b31fa828bd5239ae1cd1e41cd/5366d0160924ab18b0f1624937fae6cd7a890bec.jpg)
上面的正态分布是一维的，图像都是[二维](https://baike.baidu.com/item/%E4%BA%8C%E7%BB%B4)的，所以我们需要二维的[正态分布](https://baike.baidu.com/item/%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83)。
正态分布的密度函数叫做"高斯函数"（Gaussian function）。它的一维形式是：
![一维形式](https://gss2.bdstatic.com/-fo3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D250/sign=2f473198257f9e2f74351a0d2f31e962/0b46f21fbe096b6378e8dd2e0e338744eaf8acdf.jpg)一维形式
其中，μ是x的均值，σ是x的方差。因为计算平均值的时候，中心点就是原
![进一步推导](https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D250/sign=b09b1ea28813632711edc536a18ea056/c8ea15ce36d3d53917448dbd3887e950352ab057.jpg)进一步推导
点，所以μ等于0。
![二维高斯函数](https://gss2.bdstatic.com/9fo3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D250/sign=8a957480c1fdfc03e178e4bde43e87a9/aec379310a55b319a9ad000b41a98226cffc1773.jpg)二维高斯函数
根据一维高斯函数，可以推导得到二维高斯函数：
有了这个函数 ，就可以计算每个点的权重了。[2]
**权重矩阵**
假定中心点的坐标是（0,0），那么距离它最近的8个点的坐标如下：[](https://baike.baidu.com/pic/%E9%AB%98%E6%96%AF%E6%A8%A1%E7%B3%8A/10885810/7978918/3801213fb80e7bec91418e9f2d2eb9389b506b31?fr=lemma&ct=cover)
![权重矩阵](https://gss1.bdstatic.com/-vo3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D220/sign=94a961b7d52a60595610e6181835342d/3801213fb80e7bec91418e9f2d2eb9389b506b31.jpg)
权重矩阵(3张)
更远的点以此类推。
为了计算权重[矩阵](https://baike.baidu.com/item/%E7%9F%A9%E9%98%B5/18069)，需要设定σ的值。假定σ=1.5，则模糊半径为1的权重矩阵如下：
这9个点的权重总和等于0.4787147，如果只计算这9个点的加权平均，还必须让它们的权重之和等于1，因此上面9个值还要分别除以0.4787147，得到最终的权重矩阵。[2]
**计算高斯模糊**
[](https://baike.baidu.com/pic/%E9%AB%98%E6%96%AF%E6%A8%A1%E7%B3%8A/10885810/7978919/7aec54e736d12f2e7ee3221e4dc2d562843568ee?fr=lemma&ct=cover)
![计算高斯模糊](https://gss3.bdstatic.com/7Po3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D220/sign=a7829c63d62a283447a631096bb4c92e/7aec54e736d12f2e7ee3221e4dc2d562843568ee.jpg)
计算高斯模糊(3张)
有了权重矩阵，就可以计算高斯模糊的值了。假设现有9个像素点，灰度值（0-255）如下：
每个点乘以自己的权重值：
得到
将这9个值加起来，就是中心点的高斯模糊的值。
对所有点重复这个过程，就得到了高斯模糊后的图像。如果原图是彩色图片，可以对RGB三个通道分别做高斯模糊。[2]
**高斯模糊矩阵示例表**
这是一个计算 σ = 0.84089642 的[高斯分布](https://baike.baidu.com/item/%E9%AB%98%E6%96%AF%E5%88%86%E5%B8%83)生成的示例[矩阵](https://baike.baidu.com/item/%E7%9F%A9%E9%98%B5)。注意中心元素
 [4,4]] 处有最大值，随着距离中心越远数值对称地减小。
|0.00000067|0.00002292|**0.00019117**|0.00038771|**0.00019117**|0.00002292|0.00000067|
|----|----|----|----|----|----|----|
|0.00002292|0.00078633|0.00655965|0.01330373|0.00655965|0.00078633|0.00002292|
|**0.00019117**|0.00655965|0.05472157|0.11098164|0.05472157|0.00655965|**0.00019117**|
|0.00038771|0.01330373|0.11098164|**0.22508352**|0.11098164|0.01330373|0.00038771|
|**0.00019117**|0.00655965|0.05472157|0.11098164|0.05472157|0.00655965|**0.00019117**|
|0.00002292|0.00078633|0.00655965|0.01330373|0.00655965|0.00078633|0.00002292|
|0.00000067|0.00002292|**0.00019117**|0.00038771|**0.00019117**|0.00002292|0.00000067|
注意中心处的 0.22508352 比 3σ 外的 0.00019117 大 1177 倍。
