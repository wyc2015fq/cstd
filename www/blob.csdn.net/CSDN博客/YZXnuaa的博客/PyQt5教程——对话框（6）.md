# PyQt5教程——对话框（6） - YZXnuaa的博客 - CSDN博客
2018年04月28日 10:31:25[YZXnuaa](https://me.csdn.net/YZXnuaa)阅读数：96
个人分类：[PyQt](https://blog.csdn.net/YZXnuaa/article/category/7625276)
对话框窗口或对话框是大多数主流GUI应用不可缺少的部分。对话是两个或更多人之间的会话。在计算机应用中，对话框是一个用来和应用对话的窗口。对话框可以用来输入数据，修改数据，改变应用设置等等。
## 输入对话框
QInputDialog提供了一个简单便利的对话框用于从用户那儿获得只一个值。输入值可以是字符串，数字，或者一个列表中的列表项。
```
```python
#!/usr/bin/python3
```
```python
# -*- coding: utf-8 -*-
```
```python
"""
```
```python
ZetCode PyQt5 tutorial
```
```python
In this example, we receive data from
```
```python
a QInputDialog dialog.
```
```python
author: Jan Bodnar
```
```python
website: zetcode.com
```
```python
last edited: January 2015
```
```python
"""
```
```python
import
```
```python
sys
```
```python
from
```
```python
PyQt5.QtWidgets
```
```python
import
```
```python
(QWidget, QPushButton, QLineEdit,
```
```python
```
```python
QInputDialog, QApplication)
```
```python
class
```
```python
Example(QWidget):
```
```python
```
```python
```
```python
def
```
```python
__init__(
```
```python
self
```
```python
):
```
```python
```
```python
super
```
```python
().__init__()
```
```python
```
```python
```
```python
self
```
```python
.initUI()
```
```python
```
```python
```
```python
```
```python
def
```
```python
initUI(
```
```python
self
```
```python
):
```
```python
```
```python
self
```
```python
.btn
```
```python
=
```
```python
QPushButton(
```
```python
'Dialog'
```
```python
,
```
```python
self
```
```python
)
```
```python
```
```python
self
```
```python
.btn.move(
```
```python
20
```
```python
,
```
```python
20
```
```python
)
```
```python
```
```python
self
```
```python
.btn.clicked.connect(
```
```python
self
```
```python
.showDialog)
```
```python
```
```python
```
```python
self
```
```python
.le
```
```python
=
```
```python
QLineEdit(
```
```python
self
```
```python
)
```
```python
```
```python
self
```
```python
.le.move(
```
```python
130
```
```python
,
```
```python
22
```
```python
)
```
```python
```
```python
```
```python
self
```
```python
.setGeometry(
```
```python
300
```
```python
,
```
```python
300
```
```python
,
```
```python
290
```
```python
,
```
```python
150
```
```python
)
```
```python
```
```python
self
```
```python
.setWindowTitle(
```
```python
'Input dialog'
```
```python
)
```
```python
```
```python
self
```
```python
.show()
```
```python
```
```python
```
```python
```
```python
def
```
```python
showDialog(
```
```python
self
```
```python
):
```
```python
```
```python
```
```python
text, ok
```
```python
=
```
```python
QInputDialog.getText(
```
```python
self
```
```python
,
```
```python
'Input Dialog'
```
```python
,
```
```python
```
```python
'Enter your name:'
```
```python
)
```
```python
```
```python
```
```python
if
```
```python
ok:
```
```python
```
```python
self
```
```python
.le.setText(
```
```python
str
```
```python
(text))
```
```python
```
```python
```
```python
if
```
```python
__name__
```
```python
=
```
```python
=
```
```python
'__main__'
```
```python
:
```
```python
```
```python
```
```python
app
```
```python
=
```
```python
QApplication(sys.argv)
```
```python
```
```python
ex
```
```python
=
```
```python
Example()
```
```python
```
```python
sys.exit(app.exec_())
```
```
例子中有一个按钮和一个单行编辑框组件。按下按钮会显示输入对话框用于获得一个字符串值。在对话框中输入的值会在单行编辑框组件中显示。
```
```python
text, ok
```
```python
=
```
```python
QInputDialog.getText(
```
```python
self
```
```python
,
```
```python
'Input Dialog'
```
```python
,
```
```python
```
```python
'Enter your name:'
```
```python
)
```
```
这一行会显示一个输入对话框。第一个字符串参数是对话框的标题，第二个字符串参数是对话框内的消息文本。对话框返回输入的文本内容和一个布尔值。如果我们点击了Ok按钮，布尔值就是true，反之布尔值是false（译者注：也只有按下Ok按钮时，返回的文本内容才会有值）。
```
```python
if
```
```python
ok:
```
```python
```
```python
self
```
```python
.le.setText(
```
```python
str
```
```python
(text))
```
```
把我们从对话框接收到的文本设置到单行编辑框组件上显示。
![Input dialog](http://zetcode.com/img/gui/pyqt5/inputdialog.png)Figure: Input dialog
## 颜色选择对话框
QColorDialog类提供了一个用于选择颜色的对话框组件。
```
```python
#!/usr/bin/python3
```
```python
# -*- coding: utf-8 -*-
```
```python
"""
```
```python
ZetCode PyQt5 tutorial
```
```python
In this example, we select a color value
```
```python
from the QColorDialog and change the background
```
```python
color of a QFrame widget.
```
```python
author: Jan Bodnar
```
```python
website: zetcode.com
```
```python
last edited: January 2015
```
```python
"""
```
```python
import
```
```python
sys
```
```python
from
```
```python
PyQt5.QtWidgets
```
```python
import
```
```python
(QWidget, QPushButton, QFrame,
```
```python
```
```python
QColorDialog, QApplication)
```
```python
from
```
```python
PyQt5.QtGui
```
```python
import
```
```python
QColor
```
```python
class
```
```python
Example(QWidget):
```
```python
```
```python
```
```python
def
```
```python
__init__(
```
```python
self
```
```python
):
```
```python
```
```python
super
```
```python
().__init__()
```
```python
```
```python
```
```python
self
```
```python
.initUI()
```
```python
```
```python
```
```python
```
```python
def
```
```python
initUI(
```
```python
self
```
```python
):
```
```python
```
```python
col
```
```python
=
```
```python
QColor(
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
)
```
```python
```
```python
self
```
```python
.btn
```
```python
=
```
```python
QPushButton(
```
```python
'Dialog'
```
```python
,
```
```python
self
```
```python
)
```
```python
```
```python
self
```
```python
.btn.move(
```
```python
20
```
```python
,
```
```python
20
```
```python
)
```
```python
```
```python
self
```
```python
.btn.clicked.connect(
```
```python
self
```
```python
.showDialog)
```
```python
```
```python
self
```
```python
.frm
```
```python
=
```
```python
QFrame(
```
```python
self
```
```python
)
```
```python
```
```python
self
```
```python
.frm.setStyleSheet(
```
```python
"QWidget { background-color: %s }"
```
```python
```
```python
%
```
```python
col.name())
```
```python
```
```python
self
```
```python
.frm.setGeometry(
```
```python
130
```
```python
,
```
```python
22
```
```python
,
```
```python
100
```
```python
,
```
```python
100
```
```python
)
```
```python
```
```python
```
```python
self
```
```python
.setGeometry(
```
```python
300
```
```python
,
```
```python
300
```
```python
,
```
```python
250
```
```python
,
```
```python
180
```
```python
)
```
```python
```
```python
self
```
```python
.setWindowTitle(
```
```python
'Color dialog'
```
```python
)
```
```python
```
```python
self
```
```python
.show()
```
```python
```
```python
```
```python
```
```python
def
```
```python
showDialog(
```
```python
self
```
```python
):
```
```python
```
```python
```
```python
col
```
```python
=
```
```python
QColorDialog.getColor()
```
```python
```
```python
if
```
```python
col.isValid():
```
```python
```
```python
self
```
```python
.frm.setStyleSheet(
```
```python
"QWidget { background-color: %s }"
```
```python
```
```python
%
```
```python
col.name())
```
```python
```
```python
```
```python
if
```
```python
__name__
```
```python
=
```
```python
=
```
```python
'__main__'
```
```python
:
```
```python
```
```python
```
```python
app
```
```python
=
```
```python
QApplication(sys.argv)
```
```python
```
```python
ex
```
```python
=
```
```python
Example()
```
```python
```
```python
sys.exit(app.exec_())
```
```
例子中显示了一个按钮和一个QFrame。将QFrame组件的背景设置为黑色。使用颜色选择框类，我们可以改变它的颜色。
```
```python
col
```
```python
=
```
```python
QColor(
```
```python
0
```
```python
,
```
```python
0
```
```python
,
```
```python
0
```
```python
)
```
```
初始化QtGuiQFrame组件的背景颜色。
```
```python
col
```
```python
=
```
```python
QColorDialog.getColor()
```
```
这一行弹出颜色选择框。
```
```python
if
```
```python
col.isValid():
```
```python
```
```python
self
```
```python
.frm.setStyleSheet(
```
```python
"QWidget { background-color: %s }"
```
```python
```
```python
%
```
```python
col.name())
```
```
如果我们选中一个颜色并且点了ok按钮，会返回一个有效的颜色值。如果我们点击了Cancel按钮，不会返回选中的颜色值。我们使用样式表来定义背景颜色。
## 字体选择框
 QFontDialog是一个用于选择字体的对话框组件。
```
```python
#!/usr/bin/python3
```
```python
# -*- coding: utf-8 -*-
```
```python
"""
```
```python
ZetCode PyQt5 tutorial
```
```python
In this example, we select a font name
```
```python
and change the font of a label.
```
```python
author: Jan Bodnar
```
```python
website: zetcode.com
```
```python
last edited: January 2015
```
```python
"""
```
```python
import
```
```python
sys
```
```python
from
```
```python
PyQt5.QtWidgets
```
```python
import
```
```python
(QWidget, QVBoxLayout, QPushButton,
```
```python
```
```python
QSizePolicy, QLabel, QFontDialog, QApplication)
```
```python
class
```
```python
Example(QWidget):
```
```python
```
```python
```
```python
def
```
```python
__init__(
```
```python
self
```
```python
):
```
```python
```
```python
super
```
```python
().__init__()
```
```python
```
```python
```
```python
self
```
```python
.initUI()
```
```python
```
```python
```
```python
```
```python
def
```
```python
initUI(
```
```python
self
```
```python
):
```
```python
```
```python
vbox
```
```python
=
```
```python
QVBoxLayout()
```
```python
```
```python
btn
```
```python
=
```
```python
QPushButton(
```
```python
'Dialog'
```
```python
,
```
```python
self
```
```python
)
```
```python
```
```python
btn.setSizePolicy(QSizePolicy.Fixed,
```
```python
```
```python
QSizePolicy.Fixed)
```
```python
```
```python
```
```python
btn.move(
```
```python
20
```
```python
,
```
```python
20
```
```python
)
```
```python
```
```python
vbox.addWidget(btn)
```
```python
```
```python
btn.clicked.connect(
```
```python
self
```
```python
.showDialog)
```
```python
```
```python
```
```python
self
```
```python
.lbl
```
```python
=
```
```python
QLabel(
```
```python
'Knowledge only matters'
```
```python
,
```
```python
self
```
```python
)
```
```python
```
```python
self
```
```python
.lbl.move(
```
```python
130
```
```python
,
```
```python
20
```
```python
)
```
```python
```
```python
vbox.addWidget(
```
```python
self
```
```python
.lbl)
```
```python
```
```python
self
```
```python
.setLayout(vbox)
```
```python
```
```python
```
```python
self
```
```python
.setGeometry(
```
```python
300
```
```python
,
```
```python
300
```
```python
,
```
```python
250
```
```python
,
```
```python
180
```
```python
)
```
```python
```
```python
self
```
```python
.setWindowTitle(
```
```python
'Font dialog'
```
```python
)
```
```python
```
```python
self
```
```python
.show()
```
```python
```
```python
```
```python
```
```python
def
```
```python
showDialog(
```
```python
self
```
```python
):
```
```python
```
```python
font, ok
```
```python
=
```
```python
QFontDialog.getFont()
```
```python
```
```python
if
```
```python
ok:
```
```python
```
```python
self
```
```python
.lbl.setFont(font)
```
```python
```
```python
```
```python
if
```
```python
__name__
```
```python
=
```
```python
=
```
```python
'__main__'
```
```python
:
```
```python
```
```python
```
```python
app
```
```python
=
```
```python
QApplication(sys.argv)
```
```python
```
```python
ex
```
```python
=
```
```python
Example()
```
```python
```
```python
sys.exit(app.exec_())
```
```
在我们的例子中，我们有一个按钮和一个表情。通过字体选择对话框，我们可以改变标签的字体。
```
```python
font, ok
```
```python
=
```
```python
QFontDialog.getFont()
```
```
在这儿我们弹出一个字体对话框。getFont()方法返回字体名字和布尔值。如果用户点击了OK，布尔值为True；否则为False。
```
```python
if
```
```python
ok:
```
```python
```
```python
self
```
```python
.label.setFont(font)
```
```
如果我们点击了Ok按钮，标签字体会被改变。
![Font dialog](http://zetcode.com/img/gui/pyqt5/fontdialog.png)Figure: Font dialog
## 文件对话框
文件对话框是用于让用户选择文件或目录的对话框。可以选择文件的打开和保存。
```
```python
#!/usr/bin/python3
```
```python
# -*- coding: utf-8 -*-
```
```python
"""
```
```python
ZetCode PyQt5 tutorial
```
```python
In this example, we select a file with a
```
```python
QFileDialog and display its contents
```
```python
in a QTextEdit.
```
```python
author: Jan Bodnar
```
```python
website: zetcode.com
```
```python
last edited: January 2015
```
```python
"""
```
```python
import
```
```python
sys
```
```python
from
```
```python
PyQt5.QtWidgets
```
```python
import
```
```python
(QMainWindow, QTextEdit,
```
```python
```
```python
QAction, QFileDialog, QApplication)
```
```python
from
```
```python
PyQt5.QtGui
```
```python
import
```
```python
QIcon
```
```python
class
```
```python
Example(QMainWindow):
```
```python
```
```python
```
```python
def
```
```python
__init__(
```
```python
self
```
```python
):
```
```python
```
```python
super
```
```python
().__init__()
```
```python
```
```python
```
```python
self
```
```python
.initUI()
```
```python
```
```python
```
```python
```
```python
def
```
```python
initUI(
```
```python
self
```
```python
):
```
```python
```
```python
self
```
```python
.textEdit
```
```python
=
```
```python
QTextEdit()
```
```python
```
```python
self
```
```python
.setCentralWidget(
```
```python
self
```
```python
.textEdit)
```
```python
```
```python
self
```
```python
.statusBar()
```
```python
```
```python
openFile
```
```python
=
```
```python
QAction(QIcon(
```
```python
'open.png'
```
```python
),
```
```python
'Open'
```
```python
,
```
```python
self
```
```python
)
```
```python
```
```python
openFile.setShortcut(
```
```python
'Ctrl+O'
```
```python
)
```
```python
```
```python
openFile.setStatusTip(
```
```python
'Open new File'
```
```python
)
```
```python
```
```python
openFile.triggered.connect(
```
```python
self
```
```python
.showDialog)
```
```python
```
```python
menubar
```
```python
=
```
```python
self
```
```python
.menuBar()
```
```python
```
```python
fileMenu
```
```python
=
```
```python
menubar.addMenu(
```
```python
'&File'
```
```python
)
```
```python
```
```python
fileMenu.addAction(openFile)
```
```python
```
```python
```
```python
self
```
```python
.setGeometry(
```
```python
300
```
```python
,
```
```python
300
```
```python
,
```
```python
350
```
```python
,
```
```python
300
```
```python
)
```
```python
```
```python
self
```
```python
.setWindowTitle(
```
```python
'File dialog'
```
```python
)
```
```python
```
```python
self
```
```python
.show()
```
```python
```
```python
```
```python
```
```python
def
```
```python
showDialog(
```
```python
self
```
```python
):
```
```python
```
```python
fname
```
```python
=
```
```python
QFileDialog.getOpenFileName(
```
```python
self
```
```python
,
```
```python
'Open file'
```
```python
,
```
```python
'/home'
```
```python
)
```
```python
```
```python
if
```
```python
fname[
```
```python
0
```
```python
]:
```
```python
```
```python
f
```
```python
=
```
```python
open
```
```python
(fname[
```
```python
0
```
```python
],
```
```python
'r'
```
```python
)
```
```python
```
```python
with f:
```
```python
```
```python
data
```
```python
=
```
```python
f.read()
```
```python
```
```python
self
```
```python
.textEdit.setText(data)
```
```python
```
```python
if
```
```python
__name__
```
```python
=
```
```python
=
```
```python
'__main__'
```
```python
:
```
```python
```
```python
```
```python
app
```
```python
=
```
```python
QApplication(sys.argv)
```
```python
```
```python
ex
```
```python
=
```
```python
Example()
```
```python
```
```python
sys.exit(app.exec_())
```
```
示例中显示了一个菜单栏，中间设置了一个文本编辑框组件，和一个状态栏。点击菜单项会显示QtGui.QFileDialog（文件选择框）对话框，用于选择一个文件。文件的内容会被读取并在文本编辑框组件中显示。
```
```python
class
```
```python
Example(QMainWindow):
```
```python
```
```python
```
```python
def
```
```python
__init__(
```
```python
self
```
```python
):
```
```python
```
```python
super
```
```python
().__init__()
```
```python
```
```python
```
```python
self
```
```python
.initUI()
```
```
示例基于QMainWindow组件，因为我们中心需要设置一个文本编辑框组件。
```
```python
fname
```
```python
=
```
```python
QFileDialog.getOpenFileName(
```
```python
self
```
```python
,
```
```python
'Open file'
```
```python
,
```
```python
'/home'
```
```python
)
```
```
弹出文件选择框。第一个字符串参数是getOpenFileName()方法的标题。第二个字符串参数指定了对话框的工作目录。默认的，文件过滤器设置成All files (*)。
```
```python
if
```
```python
fname[
```
```python
0
```
```python
]:
```
```python
```
```python
f
```
```python
=
```
```python
open
```
```python
(fname[
```
```python
0
```
```python
],
```
```python
'r'
```
```python
)
```
```python
```
```python
with f:
```
```python
```
```python
data
```
```python
=
```
```python
f.read()
```
```python
```
```python
self
```
```python
.textEdit.setText(data)
```
```
选中文件后，读出文件的内容，并设置成文本编辑框组件的显示文本、
Figure: File dialog
这部分的PyQt5教程中，我们学习了几种对话框的使用。
