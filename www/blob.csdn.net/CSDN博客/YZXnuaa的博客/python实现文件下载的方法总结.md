# python实现文件下载的方法总结 - YZXnuaa的博客 - CSDN博客
2018年05月16日 10:18:31[YZXnuaa](https://me.csdn.net/YZXnuaa)阅读数：1434
前端时间遇到一个通过url下载文件的需求，只需要简单的编写一个py脚本即可。从网上搜了下python实现文件下载的方法，总结如下，备查。
以下方法均已测试，环境win8.1  python2.6/2.7
方法一：
使用 [urllib](http://www.nowamagic.net/academy/tag/urllib) 模块提供的 urlretrieve() 函数。urlretrieve() 方法直接将远程数据下载到本地。
```
```python
urlretrieve(url, [filename
```
```python
=
```
```python
None
```
```python
, [reporthook
```
```python
=
```
```python
None
```
```python
, [data
```
```python
=
```
```python
None
```
```python
]]])
```
```
       说明：
- 
参数 finename 指定了保存本地路径（如果参数未指定，urllib会生成一个临时文件保存数据。）
- 
参数 reporthook 是一个回调函数，当连接上服务器、以及相应的数据块传输完毕时会触发该回调，我们可以利用这个回调函数来显示当前的下载进度。
- 
参数 data 指 post 到服务器的数据，该方法返回一个包含两个元素的(filename, headers)元组，filename 表示保存到本地的路径，header 表示服务器的响应头。 
实例：
```
```python
#!/usr/bin/python
```
```python
#encoding:utf-8
```
```python
import
```
```python
urllib
```
```python
import
```
```python
os
```
```python
def
```
```python
Schedule(a,b,c):
```
```python
```
```python
'''''
```
```python
```
```python
a:已经下载的数据块
```
```python
```
```python
b:数据块的大小
```
```python
```
```python
c:远程文件的大小
```
```python
```
```python
'''
```
```python
```
```python
per
```
```python
=
```
```python
100.0
```
```python
*
```
```python
a
```
```python
*
```
```python
b
```
```python
/
```
```python
c
```
```python
```
```python
if
```
```python
per >
```
```python
100
```
```python
:
```
```python
```
```python
per
```
```python
=
```
```python
100
```
```python
```
```python
print
```
```python
'%.2f%%'
```
```python
%
```
```python
per
```
```python
url
```
```python
=
```
```python
'http://www.python.org/ftp/python/2.7.5/Python-2.7.5.tar.bz2'
```
```python
#local = url.split('/')[-1]
```
```python
local
```
```python
=
```
```python
os.path.join(
```
```python
'/data/software'
```
```python
,
```
```python
'Python-2.7.5.tar.bz2'
```
```python
)
```
```python
urllib.urlretrieve(url,local,Schedule)
```
```python
######output######
```
```python
#0.00%
```
```python
#0.07%
```
```python
#0.13%
```
```python
#0.20%
```
```python
#....
```
```python
#99.94%
```
```python
#100.00%
```
```
来源：[http://www.nowamagic.net/academy/detail/1302861](http://www.nowamagic.net/academy/detail/1302861)
方法二：
使用urllib的urlopen()函数
实例：
```
```python
import
```
```python
urllib2
```
```python
print
```
```python
"downloading with urllib2"
```
```python
url
```
```python
=
```
```python
'http://.pythontab.com/test/demo.zip'
```
```python
f
```
```python
=
```
```python
urllib2.urlopen(url)
```
```python
data
```
```python
=
```
```python
f.read()
```
```python
with
```
```python
open
```
```python
(
```
```python
"demo2.zip"
```
```python
,
```
```python
"wb"
```
```python
) as code:
```
```python
```
```python
code.write(data)
```
```
方法三：
使用requests模块
requests模块下载：[https://pypi.python.org/pypi/requests/#downloads](https://pypi.python.org/pypi/requests/#downloads)
实例：
```
```python
import
```
```python
requests
```
```python
print
```
```python
"downloading with requests"
```
```python
url
```
```python
=
```
```python
'http://ww.pythontab.com/test/demo.zip'
```
```python
r
```
```python
=
```
```python
requests.get(url)
```
```python
with
```
```python
open
```
```python
(
```
```python
"demo3.zip"
```
```python
,
```
```python
"wb"
```
```python
) as code:
```
```python
```
```python
code.write(r.content)
```
```
