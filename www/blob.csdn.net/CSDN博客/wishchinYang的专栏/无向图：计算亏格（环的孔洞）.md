# 无向图：计算亏格（环的孔洞） - wishchinYang的专栏 - CSDN博客
2018年01月03日 15:02:08[wishchin](https://me.csdn.net/wishchin)阅读数：546
首先，判断图中是否存在环。方法，找到联通子图，循环删除度为1的节点，同时删除边。直到不存在度为1的边，则联通子图只剩下环或者复杂环。
         在不需要遍历出环的算法里面，可以通过欧拉公式直接计算亏格。孔洞的个数。
         公式： nGenus = l-p+1;  l为边的个数，p为点的个数。
         过程：对于所有联通的集合，循环删除度数为1的顶点，同时删除边；计算亏格。
代码：
```java
//寻找亏格，使用欧拉示性数，直接用公式计算
	public static int findGenus(Boolean adjM[][], Set<Integer> votex, Integer max_size) {
		int nGenus = 0;
		//删除枝链
		Integer[] degrees = new Integer[ adjM.length ];
		degrees = calVotexDegree(adjM);
		// 删除度数为1 的边
		delete1DegreeIter( adjM, degrees, votex );// 循环删除度数为1的边
		degrees = calVotexDegree(adjM);
		//GeoWish.printfArray(adjM);
		
		// 1.平面欧拉示性数公式
		int p = votex.size();
		int l = getNumEdge( adjM );
		nGenus =l-p+1;
		return nGenus;
	}// findGenus
```
       总结：此公式适用于各种平面图，同时也不必须计算关键节点。是欧拉公式的一个改变。
资料：
## 欧拉示性数 
![欧拉示性数](http://a4.att.hudong.com/40/22/01000000000000119092262211540_s.jpg)**欧拉示性数[图册](http://tupian.baike.com/doc/%E6%AC%A7%E6%8B%89%E7%A4%BA%E6%80%A7%E6%95%B0/a4_40_22_01000000000000119092262211540_jpg.html?prd=citiao_tuce_zhengwen)**
       假设[曲面](http://www.baike.com/sowiki/%E6%9B%B2%E9%9D%A2?prd=content_doc_search)上有一个[三角剖分](http://www.baike.com/sowiki/%E4%B8%89%E8%A7%92%E5%89%96%E5%88%86?prd=content_doc_search)，
 我们把所有三角形的顶点总个数记为p(公共顶点只看成一个，下同),边数记为l,三角形的个数记为n,则e=p-l+n是曲面的拓扑不变量！ 也就是说不管是什么剖分， e总是得到相同的数值。 e被称为称为欧拉示性数。  
      假设g是曲面上洞眼的个数（比如球面没有洞，故g=0;又如环面有一个洞，故g=1），那么e=2-2g。
g也是[拓扑](http://www.baike.com/sowiki/%E6%8B%93%E6%89%91?prd=content_doc_search)不变量，称为曲面的[亏格](http://www.baike.com/sowiki/%E4%BA%8F%E6%A0%BC?prd=content_doc_search)(genus)。
      因此在平面上，e=2=p-l+n, 此即著名的[欧拉公式](http://www.baike.com/sowiki/%E6%AC%A7%E6%8B%89%E5%85%AC%E5%BC%8F?prd=content_doc_search)。
