# Qt5 中对 C++11 一些新特性的封装详解（一） - fanyun的博客 - CSDN博客
置顶2017年08月27日 22:00:12[老樊Lu码](https://me.csdn.net/fanyun_01)阅读数：718
所属专栏：[C/C++/C#开发实战365](https://blog.csdn.net/column/details/c-plus-plus-01.html)
C++11 是现在的 C++ 标准的名称，C++11 为 C++ 语言带来很多新特性。在 Qt5 中，提供更多 C++11 的特性支持：
## 1、slots (槽) 的 Lambda 表达式
[Lambda 表达式](http://en.wikipedia.org/wiki/Anonymous_function#C.2B.2B) 是
 C++11 中的一个新语法，允许定义匿名函数。匿名函数可用于使用小函数作为参数，而无需显式的进行声明。之前可以通过编写函数指针来达到同样的目的。
      早在 Qt 4.8 中已经可在一些 QtConcurrent 函数中使用 Lambda 表达式了。但在 Qt5 中甚至可以通过[new
 connect syntax](http://woboq.com/blog/new-signals-slots-syntax-in-qt5.html) 来将 Lambda 表达式作为 slots 来使用。
当你需要为你的 slot 编写一个单行函数时，你可以直接在当前代码位置编写，这更具备可读性：
```cpp
connect (sender, &Sender::valueChanged, [=]( const QString &newValue) {
	        receiver->updateValue( "senderValue" , newValue);
	    });
```
Lambda 在 MSVC 2010, GCC 4.5, 和 clang 3.1 下也是支持的.
## 2、Unicode 文字
在 C++11 中，你可通过 u"开源中国" 来生成 UTF-16 字符串：
```cpp
QString someString = QStringLiteral ( "oschina" );
```
**3、常量表达式: constexpr**
C++11 中全新的关键字 constexpr 用于注解一些 inline 函数，用于指定它们可以在编译时进行计算。在 Qt5 中，我们引入[Q_DECL_CONSTEXPR](http://qt-project.org/doc/qt-5.0/qtglobal.html#Q_DECL_CONSTEXPR) 用来定义为
 constexpr 以便让编译器支持。
我们同时还注解了一些 Qt 函数（例如 QFlags）允许他们直接在常量表达式中使用：
```cpp
enum SomeEnum { Value1, Value2, Value3 };
Q_DECLARE_OPERATORS_FOR_FLAGS( QFlags <SomeEnum>)
// The previous line declares
// Q_DECL_CONSTEXPR QFlags<SomeValue> operator|(SomeValue,SomeValue) {...}	  
int someFunction( QFlags <SomeEnum> value) {
switch (value) {
    case SomeEnum::Value1:
     return 1 ;
    case SomeEnum::Value2:
     return 2 ;
    case SomeEnum::Value1 | SomeEnum::Value3:
// Only possible with C++11 and because QFlags operators are constexpr
// Previously this line would call
//        QFlags<SomeValue> operator|(SomeValue,SomeValue)	        
// that would have thrown an error because only compiler constants
// are allowed as case satement
 default :
 return 0 ;
}
}
```
