# C89和C99区别 - V__KING__的专栏 - CSDN博客





2018年01月24日 14:17:29[v__king__](https://me.csdn.net/V__KING__)阅读数：907








## 1.对数组的增强

```
可变长数组
```

　　C99中,程序员声明数组时,数组的维数可以由任一有效的整型表达式确定,包括只在运行时才能确定 

其值的表达式,这类数组就叫做可变长数组,但是只有局部数组才可以是变长的. 

可变长数组的维数在数组生存期内是不变的,也就是说,可变长数组不是动态的.可以变化的只是数组的大小. 

可以使用*来定义不确定长的可变长数组。
```
数组声明中的类型修饰符
```

　　在C99中，如果需要使用数组作为函数变元，可以在数组声明的方括号内使用static关键字，这相 

当于告诉编译程序，变元所指向的数组将至少包含指定的元素个数。也可以在数组声明的方括号内使用 

restrict,volatile,const关键字，但只用于函数变元。如果使用restrict，指针是初始访问该对象的惟一途 

径。如果使用const，指针始终指向同一个数组。使用volatile没有任何意义。
## 2.单行注释

```
引入了单行注释标记 "//" , 可以象C++一样使用这种注释了。
```

## 3. 分散代码与声明

　　    预处理程序的修改

## 4. for语句内的变量声明　　

　　C99中，程序员可以在for语句的初始化部分定义一个或多个变量，这些变量的作用域仅于本for语 

句所控制的循环体内。比如： 

代码:
```
for(int i=0; i<10; i++){
    // do someting ...
}
```

## 5.复合赋值

C99中，复合赋值中，可以指定对象类型的数组、结构或联合表达式。当使用复合赋值时，应在括弧 

内指定类型，后跟由花括号围起来的初始化列表；若类型为数组，则不能指定数组的大小。建成的对象是 

未命名的。 

　　例： double *fp = (double[]) {1.1, 2.2, 3.3}; 

　　该语句用于建立一个指向double的指针fp，且该指针指向这个3元素数组的第一个元素。 在文件 

域内建立的复合赋值只在程序的整个生存期内有效。在模块内建立的复合赋值是局部对象，在退出模块后 

不再存在。
## 6.指定的初始化符

C99中，该特性对经常使用稀疏数组的程序员十分有用。指定的初始化符通常有两种用法：用于数组， 

以及用于结构和联合。用于数组的格式：[index] = vol; 其中，index表示数组的下标，vol表示本数组 

元素的初始化值。 

　　例如： int x[10] = {[0] = 10, [5] = 30}; 其中只有x[0]和x[5]得到了初始化．用于结构或联 

合的格式如下：  

　　member-name(成员名称)  

　　对结构进行指定的初始化时，允许采用简单的方法对结构中的指定成员进行初始化。 

　　例如： struct example{ int k, m, n; } object = {m = 10,n = 200};  

　　其中，没有初始化k。对结构成员进行初始化的顺序没有限制。
## 7. printf()和scanf()函数系列的增强

C99中printf()和scanf()函数系列引进了处理long long int和unsigned long long int数据类型 

的特性。long long int 类型的格式修饰符是ll。在printf()和scanf()函数中，ll适用于d, i, o, u 和x 

格式说明符。另外，C99还引进了hh修饰符。当使用d, i, o, u和x格式说明符时，hh用于指定char 

型变元。ll和hh修饰符均可以用于n说明符。 

　　格式修饰符a和A用在printf()函数中时，结果将会输出十六进制的浮点数。格式如下：[-]0xh, hhhhp  

+ d 使用A格式修饰符时，x和p必须是大写。A和a格式修饰符也可以用在scanf()函数中，用于读取 

浮点数。调用printf()函数时，允许在%f说明符前加上l修饰符，即%lf，但不起作用。
## 8.C99新增的库

C89中标准的头文件 


## 10. **func**预定义标识符

　　用于指出**func**所存放的函数名，类似于字符串赋值。

## 11. 其它特性的改动

　　放宽的转换限制 


　　　　限制　　　　　　　　　　　　　C89标准　　C99标准 

　　　　数据块的嵌套层数　　　　　　　15　　　　　127 

　　　　条件语句的嵌套层数　　　　　　8　　　　　 63 

　　　　内部标识符中的有效字符个数　　31　　　　　63 

　　　　外部标识符中的有效字符个数　　6　　　　　　31 

　　　　结构或联合中的成员个数　　　　127　　　　1023 

　　　　函数调用中的参数个数　　　　　31　　　　　127
　　不再支持隐含式的int规则 

　　删除了隐含式函数声明 

　　对返回值的约束 

　　　　C99中,非空类型函数必须使用带返回值的return语句. 

　　扩展的整数类型 

　　　　扩展类型 含义 

　　　　int16_t 整数长度为精确16位 

　　　　int_least16_t 整数长度为至少16位 

　　　　int_fast32_t 最稳固的整数类型,其长度为至少32位 

　　　　intmax_t 最大整数类型 

　　　　uintmax_t 最大无符号整数类型 

　　对整数类型提升规则的改进 

　　　　C89中,表达式中类型为char,short int或int的值可以提升为int或unsigned int类型. 

　　　　C99中,每种整数类型都有一个级别.例如:long long int 的级别高于int, int的级别高于char 

等.在表达式中,其级别低于int或unsigned int的任何整数类型均可被替换成int或unsigned int类型.
## 12. 新增数据类型　

　　_Bool　 

　　值是0或1。C99中增加了用来定义bool、true以及false宏的头文件夹











