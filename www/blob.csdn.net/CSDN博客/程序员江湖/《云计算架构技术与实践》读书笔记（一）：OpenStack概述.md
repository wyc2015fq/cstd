# 《云计算架构技术与实践》读书笔记（一）：OpenStack概述 - 程序员江湖 - CSDN博客





2017年07月19日 14:06:26[黄小斜](https://me.csdn.net/a724888)阅读数：3334








**这位大侠，这是我的公众号：程序员江湖。**
**分享程序员面试与技术的那些事。 干货满满，关注就送。**
![这里写图片描述](https://img-blog.csdn.net/20180827211353568?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2E3MjQ4ODg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

**3.1OpenStack概述**

OpenStack是目前最为流行的开源云操作系统框架。自2010年6月首次发布以来，经过数以千计的开发者和数以万计的使用者的共同努力，OpenStack不断成长，日渐成熟。目前，OpenStack的功能强大而丰富，已经在私有云、公有云、NFV等多个领域得到了日益广泛的生产应用。与此同时，OpenStack已经受到了IT业界几乎所有主流厂商的关注与支持，并催生出大量提供相关产品和服务的创业企业，在事实上成为了开源云计算领域的主流标准。时至今日，围绕OpenStack已经形成了一个繁荣而影响深远的生态系统，OpenStack已经是云计算时代一个无法回避的关键话题。可以说，不了解OpenStack，就无法理解当今云计算技术的发展，也无法把握云计算产业的脉搏。因此，本章将对OpenStack的相关要点进行概括介绍。



3.1.1  OpenStack概念辨析

目前，与OpenStack相关的书籍与文章俯拾皆是，但其中的内容质量不一。对于读者而言，也很容易受到一些错误信息的误导。为此，本节将对OpenStack相关的一些核心概念进行介绍与澄清。



一、什么是OpenStackOpenStack，是目前最为流行的开源云操作系统框架。想要深入理解OpenStack是什么，则需要围绕开源、云、操作系统、框架这几个关键词展开说明。

1. 云

针对什么是云，业界已有充分的论述，此处不再深入展开。读者只需明确，OpenStack是用来构建云计算系统的核心软件组件即可。



2. 云操作系统，是面向云计算的操作系统

云操作系统这个概念，对于许多读者来说，可能还比较陌生。在此，我们将通过与操作系统的类比，来帮助读者理解何谓云操作系统。操作系统，是计算机系统领域里一个至关重要的概念。有了操作系统，我们才能将计算机系统中的各类软硬件整合起来，形成一个能够完成各类处理任务的完整系统，为用户提供服务。这个描述较为抽象，但结合到日常生活与工作中的实例，就清楚易懂多了。无论是服务器和个人电脑上的Linux、Windows，还是手机上的Android、iOS，都是操作系统的常见实例。无论是服务器、个人电脑还是手机上的操作系统，本质上，其核心功能都可以概括为五个方面，即资源接入与抽象、资源分配与调度、应用生命周期管理、系统管理维护和人机交互支持。换言之，只有具备了以上这五个方面的主要功能，一个操作系统才能够实现各类软硬件的整合，让系统具备为用户提供服务的能力。具体而言：(1)资源接入与抽象，是指将各类硬件设备，如CPU、内存、本地硬盘、网卡等，接入到系统中，并将其抽象为操作系统可以识别的逻辑资源，以此作为操作系统对各类硬件资源实施管理的基础；(2)资源分配与调度，是指利用操作系统的资源管理能力，将前述的不同硬件资源，按照需求的类型和数量，分配给不同的系统软件或应用软件，供其使用；(3)应用生命周期管理，是指协助用户实现各类应用软件在操作系统上的安装、升级、启动、停止、卸载等管理操作；(4)系统管理维护，是指协助系统管理员实现对系统自身的各类配置、监控、升级等管理操作；(5)人机交互支持，指提供必要的人机界面，支持系统管理员和用户对系统实施各类操作。与之对应，一个完整的云操作系统，同样应该能够具备上述五个方面的主要功能。其核心区别只是在于，云操作系统需要管理的，是一个由大量软硬件组成的分布式的云计算系统，而一个普通操作系统需要管理的，则是一台服务器、一台个人电脑，或者一部手机。针对云操作系统，上述五项主要功能的内容应该是：(1)资源接入与抽象，是指将各类服务器、存储、网络设备等硬件资源，通过虚拟化的或者可软件定义的方式，接入到云计算系统中，并将其抽象为云操作系统可以识别的计算、存储、网络等资源池，以此作为云操作系统对各类硬件资源实施管理的基础；(2)资源分配与调度，是指利用云操作系统的资源管理能力，将前述的不同资源，按照不同的云租户对于资源类型与数量的不同需求，将资源分配给各个租户，以及不同租户的不同应用；(3)应用生命周期管理，是指协助租户实现各类云应用在云操作系统上的安装、启动、停止、卸载等管理操作；(4)系统管理维护，是指协助系统管理员实现对于云计算系统的各类管理与运维操作；(5)人机交互支持，指提供必要的人机界面，支持系统管理员和普通租户对系统实施各类操作。由上述介绍可以看出，虽然云操作系统比我们日常接触的操作系统复杂很多，但其最为关键的五项主要功能，其实是可以一一对应的。通过这种对应，我们可以更为直观地理解云操作系统这个概念。而OpenStack，则是实现云操作系统的关键组件，或者说，是构建一个完整的云操作系统的框架。



3. 云操作系统框架，不等于云操作系统

要构建一个完整的云操作系统，需要对大量软件组件进行有机整合，让它们协同工作，共同提供系统管理员和租户所需的功能与服务。而OpenStack本身，尚且不能独立具备一个完整云操作系统所需的全部能力。举例而言：在上面提到的云操作系统的五项主要功能中，OpenStack不能独立实现资源接入与抽象，而需要和底层的虚拟化软件、软件定义存储、软件定义网络等软件相配合；OpenStack不能独立提供完善的应用生命周期管理能力，而需要在上层集成各类管理软件平台；OpenStack自身不具备完整的系统管理维护能力，在投入生产实用时，还需要集成各类管理软件与维护工具；OpenStack自身提供的人机界面，其功能也还不够丰富强大，等等。由此不难看出，想在OpenStack基础上构建一个完整的云操作系统，需要将OpenStack与其他一些软件组件进行集成，以实现OpenStack自身并不提供的能力。因此，OpenStack自身的准确定位，是一个云操作系统框架。基于这个框架，可以集成不同的各类组件，实现满足不同场景需要的云操作系统，并在此基础上，最终构建完整的云计算系统。



4. 开源

开源，是OpenStack的一个重要属性。应该说，不理解开源，就不能真正理解OpenStack的发展历程与未来趋势。与简单地在网络上公开源代码不同，OpenStack社区遵循的，是一种更为深入、更为彻底的开源理念。在OpenStack社区中，对于每一个组件，每一个特性，乃至每一行代码，其需求提出、场景分析、方案设计、代码提交、测试执行、代码合入的整个流程，都总体遵循开放原则，对公众可见，并且在最大程度上保证了社区贡献者的监督与参与。正是这种监督与参与的机制，保证了OpenStack社区总体上处于一种开放与均衡的状态，避免了少数人或者少数公司、组织的绝对控制，由此保障了社区生态的健康与繁荣。同时，OpenStack遵循了对商业最为友好的Apache 2.0许可，也保障了企业参与社区的商业利益，从而推动了OpenStack的产品落地与商业成功。通过以上介绍，可以看出，OpenStack是一个以开源方式开发与发布的，用于构建不同场景下的云操作系统的框架性软件。深入理解这个本质，对于深入学习和掌握OpenStack，有着非常关键的意义。



二、OpenStack与云计算系统的关系基于前面的介绍，不难看出，OpenStack与云计算系统之间，既紧密联系，又相互区别。OpenStack是构建云操作系统的框架。使用云操作系统，集成并管理各类硬件设备，并承载各类上层应用与服务，才能最终形成一个完整的云计算系统。由此可见，OpenStack是云计算系统的核心软件组件，是构建云计算系统的基础框架，但OpenStack和云计算系统并不能直接等同。



三、OpenStack与计算虚拟化的关系

计算虚拟化，是很多读者非常熟悉的概念。其对应的软件实现，就是平常所说的Hypervisor， 如开源的KVM、Xen，以及VMware的vSphere、 华为的FusionCompute、微软的Hyper-V等。OpenStack与计算虚拟化之间的关系，是目前仍然被频繁混淆的一个问题。理解这二者之间的联系与区别，也是理解OpenStack的关键之一。OpenStack是一个云操作系统的框架。为构建完整的云操作系统，特别是，为实现资源接入与抽象的功能，OpenStack需要与虚拟化软件实施集成，从而实现对服务器的计算资源的池化。应该指出的是，在资源池化的过程中，物理资源虚拟化的功能，仍然由虚拟化软件完成。举例而言，在使用KVM作为OpenStack的虚拟化软件时，仍然由KVM完成将一台物理服务器虚拟为多台虚拟机的功能，而OpenStack负责记录与维护资源池的状态。例如，系统中一共有多少台服务器，每台服务器的资源共有多少，其中已经向用户分配了多少，还有多少资源空闲。在此基础上，OpenStack负责根据用户的要求，向KVM下发各类控制命令，执行相应的虚拟机生命周期管理操作，如虚拟机的创建、删除、启动、关机等。由此可见，两相对比，OpenStack更像是系统的控制中枢，是云操作系统的“大脑”；计算虚拟化软件则更像是系统的执行机构，是云操作系统的“肢体”。二者分工合作，共同完成对云计算系统中的计算资源池的管理，但绝不能认为OpenStack等同于计算虚拟化软件。



3.1.2  OpenStack的设计与开发

一、OpenStack的设计思想

OpenStack之所以能够取得快速的发展，除了有云计算技术和产业快速发展的大背景之外，其自身设计思想的独到之处，也起到了有力的促进作用。OpenStack的设计思想，在总体上可以被概括为“开放、灵活、可扩展”。本节将对此展开扼要分析。1. 开放OpenStack的开放，根源于其开源模式本身。前已述及，OpenStack的开源，不仅体现在简单的源代码开放，更体现在其设计、开发、测试、发布的全流程中。这种开源模式，总体上可以保证OpenStack不被个别人或个别企业所控制，在技术上不会走向封闭架构、封闭体系，从而始终呈现出良好的开放性。无论是北向的API标准开放，还是南向的各类软件、硬件自由接入，都是OpenStack开放性的充分体现。与此同时，OpenStack也秉持了开源社区中“不重复发明轮子”的一贯理念，在设计中持续引入并充分重用各相关技术领域中的优秀开源软件，从而提升了设计与开发效率，并为软件质量提供了基本保证。



2. 灵活

OpenStack的灵活，首先体现在其大量使用插件化、可配置的方式进行设计。最为突出的体现，就在于OpenStack采用插件化的方式实现不同类型计算、存储、网络资源的接入，由此实现OpenStack对于不同类型资源的灵活接入与管理，用一套架构实现了对于不同厂商、不同类型设备的资源池化，例如，在计算领域，可以以插件化的形式接入KVM、Xen、vCenter、FusionCompute等不同的Hypervisor；在存储领域，可以以插件化的形式实现对不同厂商的存储设备，以及Ceph、FusionStorage、vSAN等不同的软件定义存储的管理；在网络领域，可以实现对不同的网络硬件设备，OVS、Liunx-bridge、HAProxy等开源网络组件，以及多种SDN控制器的接入。并且，这些接入都是通过可配置的方式加以选择。当在不同的资源之间进行选择时，OpenStack自身并不需要重新打包发布，只需通过配置项选择不同的接入插件即可，非常方便。在此基础上，OpenStack的灵活还体现在不依赖于任何特定的商用软硬件。换言之，任何商用软硬件产品在OpenStack中一定是可选、可替换的，从而严格保证用户可以使用完全开源、开放的方案来构建基于OpenStack的云计算系统，而完全不必担心被锁定在某些特定厂商的产品之上。



3. 可扩展

OpenStack的架构高度可扩展。具体而言，其扩展性体现在功能和系统规模两个方面。从功能视角看，OpenStack由多个相互解耦的项目组成。不同的项目分别完成云计算系统中的不同功能，如身份认证与授权服务、计算服务、块存储服务、网络服务、镜像服务、对象存储服务等。对于一个特定场景下的云计算系统，系统设计人员可以根据实际需要决定使用OpenStack中的若干个项目，也可以在系统上线后，根据需求继续引入新的OpenStack项目。OpenStack的一些项目自身也具有功能可扩展性。系统设计人员可以在这些项目中引入新的功能模块，在不影响项目既有功能使用的前提下，对其功能进行扩展。从系统规模视角看，OpenStack总体上遵循了无中心、无状态的架构设计思想。其主要项目，均可实现规模水平扩展，以应对不同规模的云计算系统建设需求。在系统建成后，可根据应用负载规模的实际增长，通过增加系统管理节点和资源节点的方式，逐渐扩展系统规模。这种架构可以有效避免高额的初始建设投资，也降低了系统初始规划的难度，为云计算系统的建设者和运营者提供了充分的扩展空间。



二、OpenStack的开发模式

前已述及，OpenStack采用了完全开放的开发模式，由数以千计的社区贡献者通过互联网协作的方式，共同完成各个项目的设计、开发、测试和发布。具体而言，OpenStack社区以每6个月为一个版本开发与发布周期，分别于每年4月和10月发布新的OpenStack版本。每个新版本发布之后约三周，社区会举行一次OpenStack设计峰会，以便开发者集中讨论新版本应优先引入的特性，或应集中解决的问题。其后，社区将进入为期约5个月的开发和测试阶段，直至新的版本发布。截至本书撰写之时，最新的OpenStack发行版是2016年4月初发布的Mitaka版本，也是OpenStack的第13个发行版。OpenStack各个项目统一遵循Apache 2.0开源许可证，对于商业应用非常友好。OpenStack各项目以Python为首选开发语言，各个项目的核心代码均使用Python语言实现。



三、OpenStack社区发展现状自2010年成立以来，OpenStack社区始终保持了高速发展的态势，目前已经成为了仅次于Linux的世界第二大开源软件社区。而这一切仅仅用了不到六年的时间，不得不让人惊叹开放的云计算技术所具有的强大魅力。在过去的五年多时间里，OpenStack社区的各项主要贡献指标，都呈现出快速上升的总体趋势。这种趋势，从OpenStack峰会参会人数的爆炸式增长就可以看出。2010年OpenStack首届峰会举办时，仅有75人参与。而2016年4月举办峰会时，参会人数高达7500人以上。短短六年不到的时间，人数激增100倍，由此不难看出OpenStack社区巨大的影响力与凝聚力。





