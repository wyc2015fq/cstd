# 加加减减的奥秘——从数学到魔术的思考（一） - 算法与数学之美 - CSDN博客
2018年12月16日 23:08:54[算法与数学之美](https://me.csdn.net/FnqTyr45)阅读数：102
在前面的《reverse原理的魔幻艺术》）（可查看：[Reverse原理背后的数学和魔幻艺术](http://mp.weixin.qq.com/s?__biz=MzA5ODUxOTA5Mg==&mid=2652564086&idx=2&sn=ed328387a3f95d64f034b811baaae768&chksm=8b7e1b2dbc09923bca22a7beb2f1a775d2c244caddecaca5bc64512a25b1c9306fc66621ccfc&scene=21#wechat_redirect)）一文中，我们提到了扑克牌的基础手法dealing，等价于取序列的头部进行reverse这一对称函数关系操作，进而有其二次操作以后恢复的良好性质以得到把预先在给定位置的setting变成预言或者优美画面的魔术效果。关于这个原理，这里还有两点拓展思考：
1. 做预测类效果的基本思路之一是：找到变化中的不变量。无论是数学建模还是魔术都是如此，比如以随机过程为代表的时序预测和各种机器学习中的分类，无不是在某泛函空间内确定一族不随时间或新来样本而变化的参数，比如状态转移矩阵，泊松强度，各种回归系数，权重等，都是面对变化世界的稳定性之，即不变量；而魔术中，也有一系列像double reverse操作一样，看起来完全混乱不堪，但是保持着某人们容易忽视的确定性，这些宝贵的性质正为魔术师所用，来创作奇迹。当然，如前4A聚首的演法，其实是把这种确定性演绎成巧合了，魔术师不是killer，而是looker。当然魔术中的预测，有时并不能找到完美的不变量，如何在ending处弥补这些不确定，就靠魔术师们的艺术想象力，去寻找那些神奇的数学原理并和艺术展示结合的美妙了，这个部分我们以后有机会再详细说；
2. Dealing手法，除了等价于reverse操作以外，还可以看作在笨拙地做加减运算，源于加减法本身的原理，这一操作天然也代表这一层含义，而加减操作本身，是互为逆运算的两个操作（符），这和reverse操作具备的正反函数相等性质有什么区别和联系，又怎么来利用这一性质创作魔术呢？
这篇文章我们就来聊聊加减运算的一些性质以及在魔术中的应用。
## ** 数学部分 **
从计数说起
受惠于生产力的发展，人类有机会因为需要而提升抽象理解世界的水平的能力，这常常伴随着一些数学成果的出现，甚至是以他们为标志的。计数的出现和发展就从一个侧面很好地体现了这一过程：
**图1：数量的扩充和发展（箭头左侧为累积数集，右侧为新发明的数集）**
![640?wx_fmt=png](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/FibaF9tMKEDlpHp25Ua8gJJzV6fnXRs93EZwU52hb6BotMZT0FuhZShfgUeTLAr0cgNhrkn1iaRn72zI5xh0VpTw/640?wx_fmt=png)
当人类生产力在每天可能打到颗枣子和捕到野猪，也有可能没有的情况下，就有了区分有无的需求可能是某天一个部落元首发现“今天没有枣子吃而昨天吃过”，于是是布尔数集概念率先诞生了，这可能是人类历史上第一次进行“数学建模”活动吧！即对事物有无概念的度量，无论是枣子还是猪，都用统一的符号表达抽象的有或无两种状态。
**图2 一头野猪**
**![640?wx_fmt=jpeg](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/FibaF9tMKEDlpHp25Ua8gJJzV6fnXRs93KXJQYnJicyRyC6fibVR5Pn3uL0k8fDSg5nJGNSjA3pTXJJliaYH1LYiacA/640?wx_fmt=jpeg)**
**图3 一颗枣子**
**![640?wx_fmt=jpeg](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/FibaF9tMKEDlpHp25Ua8gJJzV6fnXRs9340QsgibIqKj05QmBrxcZkzqx5x133NcFAg97aTOlUHXnjKf3bCjwicBw/640?wx_fmt=jpeg)**
因为从没见过哪一天抓到过长得差不多的猪或者枣子而从没有计数的必要。直到有一天，抓了好几头长得都差不多应该都是野猪的东西，或者打了一箩筐大大小小但味道差不多的枣子的时候，要管理起来，集合诞生了，要知道有多少猪，对集合进行大小度量，于是有了对其进行计数的需要，正整数的就正式光荣地发明使用了。
**图4 一堆野猪**
**![640?wx_fmt=jpeg](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/FibaF9tMKEDlpHp25Ua8gJJzV6fnXRs93uatNBuCM9Uia2rggDk6R4MByENDhrrb9Tpq5AWicWfnH6pDHwrZv9TFg/640?wx_fmt=jpeg)**
**图5 一堆枣子**
**![640?wx_fmt=jpeg](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/FibaF9tMKEDlpHp25Ua8gJJzV6fnXRs93chO374ib0ZU71hEXTwFqNCX9KDJ3zbQhgRxMz5ctB1ehzW4ojDVkvNg/640?wx_fmt=jpeg)**
这正是伴随着人类已经能够生产，发现和辨别一些相同或不同的对象这种认知和生产能力本身的提高而根据需要抽象出来的数学工具。数学的文明就是这样一直伴随着人类生产力的发展而不断进步着，满足着新的生产需求，看起来远古时代的这些事和现在发生的大数据时代数据爆炸推动数学和计算的发展是一样的吧。
直到有一天，部落首领把昨天剩下的枣子和今天刚打的混在一起成了一箩筐，这时候，问题来了，这一箩筐一共多少枣子，难道要再数一遍？前面两筐的数量能否直接合起来得到？
**图6 两堆枣子**
![640?wx_fmt=jpeg](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/FibaF9tMKEDlpHp25Ua8gJJzV6fnXRs93qqxLB7dCzdyKf8n4uKyoeTD4W5Q85DfSOtL0u5J53X7Rr6SYnMhiaBQ/640?wx_fmt=jpeg)
（实在没找到两群野猪的图片了，只放枣子的了哈）
此时，加法，人类历史上发明的第一种运算，在这一天，划时代地诞生了。
（不晓得有没有考古学家能够考证这一天具体发生在何时和地球的哪里，很想去虔诚地拜访一下这数学文明的发源地。）
计数是对一个有着相同性质元素组成的集合大小的度量的过程，而两个同样性质互不相交集合合并时候（都是某全集的子集），新集合的大小的结果，我们称为前面两个集合大小度量数的和。即两个箩筐都是一样但都独一无二的枣子倒在一起的时候，形成的新的一筐枣子有多少的问题。
这里的建模和抽象过程其实已经在大量使用我们沿用至今的建模思想了，集合的原生概念，简化假设（大大小小，各式各样的都是枣子，不会合并，丢失，繁殖等等），定义假设（每个枣子都不一样且都有枣子属性），最后倒在一起形成一筐新的枣子或和这个等价的物理过程，最终在这些假设下，被定义成加法，即互异的同质化元素集合的合并操作后，新集合大小的理论结果。
这样，无论是几箩筐枣子倒在一起，还是把大家捕获的野猪赶在一起，都可用同一套运算来计算这一过程的后果：即新的一箩筐枣子有几颗，一大堆猪有几只了。
注意，能用正整数加法的前提是：互异的同质化元素集合的合并操作；结果是：产生新集合的大小。只要物理过程符合或者被假设符合这一性质，比如倒在一起差不多的枣子，赶到一块差不多的猪，其结论就可以用统一的抽象过程来代替描述，进而迅速计算出结果。
于是，这样的过程天然具有一些性质，看起来很小的时候觉得，这不显然么，学着有啥用。嗯，确实显然，不过这背后揭示的是大自然的基本规律，聪明的人类总结出了这两条加法的性质：
**a + b = b + a**
交换律：把两筐枣子倒在一起，先后不影响最终枣子多少；
**(a + b) + c = a + (b + c)**
结合律：三筐枣子倒在一起，先合并前两个还是后两个，对最后结果也没有影响；
也正因为求和是一个集合的属性，集合的元素本身是无序的，可以随意打乱的，这一性质便又可以设计以和为中心的数学魔术了，常常伴随Girbreath原理使用，后面会有专门文章提到。
回到首长数枣子的故事，想象有一天，部下打来了一筐长得和枣子完全不一样的苹果，把枣子和苹果倒在一起，发现得到的结果不全是枣子了，也不知道一共有多少个了，于是首长就要疯掉了，因为他们不是一种东西，不是互异的同质化元素集合，做不了加法。
好了，请同学们自行脑补第二天首长同学吃了捞出来一小筐枣子以后计算还剩下多少枣子的情形，以及A首长找B首长借枣子吃记账的情形哈，减法和负数就差不多由此场景需求而诞生了。
嗖~穿越回当代，我们来进一步讨论下抽象出来的加减运算的一些由其建模本身的假设要求而带来的一些必然的性质。
估计应该是小学时候，数学老师就常说：加法和减法互为逆运算。当时乍一听，没什么难理解的嘛，a + b = c，于是a = c - b，这不正好逆过来了么，和脑海里对于感性的“逆”的意思也差不多嘛，于是大部分时候也就不求甚解了。但是，要想严谨定义这里的加减互为逆运算，可能还要费点功夫想想才行。
真正的严谨表达应该是：
对于某一实数b构造的加法函数f1(x) = x + b和减法函数f2(x) = x - b，他们互为反函数，即f2(f1(x)) = x，其图像在坐标轴上沿着y = x对称。
换句话说，分别由（被加数，和）和（被减数，差）组成的两个二元关系集合在加数 = 减数的条件下互为逆关系。
这里最开始说的逆运算，其实本质上就是反函数，而且是把加b（加数）这一操作看成对x（被加数）执行的，结果为c，反之毅然。所以你看，我们平常理解的加法是有两个操作数，且因为交换率的原因还总认为这两个操作数无甚差别，f(a, b) = f(b, a)，减法则是f(a, b) = - f(b, a)。然而这样两个函数连定义域值域都不能倒过来互相对应，那有何谈什么互为反函数，逆运算呢。
数学上的一些概念啊，定义啊，都是很严谨，很美的，千万不要想当然。我再举个例子，我们初中学的“一元二次方程地两个根具有对称性”，谁能清楚的解释这里的对称具体指的是什么吗？可不是2±sqrt(2)这个形式这么简单，这里指的其实是根序列集和翻转为操作构成排列群结构，一元n次方程亦然，估计初中生能理解到这个层面的应该都是天才吧。
回来，是不是有点混了，这里讲的互为反函数（逆关系）这个和前面讲的对称函数（关系）有什么区别么？
来，读绕口令了：
逆关系是定义在关系集上的一元运算符，反函数是当此关系为一一映射函数时的特例。当且仅当某关系逆关系为自己时，称这种关系为对称关系，函数成为对称函数。
嗯嗯，好好读两遍，相信你能理解。
插个小故事放松一下，我在推导和写作这些内容时候，只记得反函数这个概念名词了，真不记得或者压根没有学过当一一映射的函数关系拓展到一般关系的时候这个事情叫啥，叫反关系好像不太合适，加法那里不是叫逆运算么，那这里是不是叫逆关系呢？百度一下，嗯嗯，还真是，哈哈哈，模拟了创造知识过程的学习应该是印象最深刻最开心，也最有裨益的吧。
（关系，映射，满射（函数是从定义域和对应关系产生满射值域角度度定义的满射），单射，一一映射（可逆函数）有着逐层包含的美丽层次结构，后面我们写文章详细阐述这一点）
另外，很多绳结逃脱类魔术也是同样的原理，只不过操作对象和过程要用拓扑学等知识来描述，要更加复杂，但能解开绳结，一定是进行了一组互逆的函数操作。
Ok，理解了以上基本概念以后，我们可以剥离出来利用的数学性质即：加减法互为逆运算，经过两次映射以后可恢复原值：
**a + b - b = a**
对，就这么简单。注意和满足对称函数条件的reverse操作是直接两次一样的操作，而这里是操作和反操作，就这一点区别而已，结果却都是恢复原状。
## ** 魔术部分 **
篇幅原因，本篇先介绍数学原理到这里，把依据这个原理构造的两个魔术放出来供大家欣赏，就先卖个关子，不解释其中的原理推导和魔术设计点了，相信聪明的你看了上面的数学解释一定能窥之一二。下一篇我们将具体阐明如何把这一数学性质用到魔术中间去的一些方法论，和这两个魔术的具体解析；第三篇将进一步讨论这一议题并分享一个更新的作品，我会还原它的数学实现和魔术设计过程，相信一定对你理解这些数学和魔术的原理都大有裨益，欢迎继续关注。
**视频1 4Ace Presentation：**
**视频2 Exact Composed prediction：**
感谢小伙伴们倾情出镜和帮忙拍摄~
最后总结一下今天的内容：加减互为逆运算的背后是集合的合并和拆分互为逆过程，逆过程能使得变量在经原过程以后恢复成初始而使得操作无效，进而创造预测或展示类魔术效果。
更多数学和魔术思考，欢迎关注MatheMagician。
![640?wx_fmt=png](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/951TjTgiabkxL95v5rhfice0Bg1wTYUp0zIGnWibUz4LvHlR7pqNQxwEEdEsTfQaHiaC1Vlu5BicibhGUTDQ88NQxksw/640?wx_fmt=png)![640?wx_fmt=jpeg](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/951TjTgiabkxL95v5rhfice0Bg1wTYUp0z7EQ2NjUDNtxpSOJdOH6lzia7N4hRt7kcnFuDmibOWhYAwWleAW1ljH0Q/640?wx_fmt=jpeg)
**长按上方二维码关注噢~**
作者简介：magic2728，现就职于腾讯。自幼以数学和魔术为最大爱好，从参加建模比赛到培训到一线互联网从业者，其建模经验遍历金融，生物，互联网；魔术表演从学校走向比赛和商演，又回归扑克牌魔术理论的研究。他通过建模来思考，参与和改造这个世界，也希望能同步把这些精彩分享给感兴趣的朋友们。
