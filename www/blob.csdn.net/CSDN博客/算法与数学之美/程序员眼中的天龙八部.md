# 程序员眼中的天龙八部 - 算法与数学之美 - CSDN博客
2018年03月31日 00:00:00[算法与数学之美](https://me.csdn.net/FnqTyr45)阅读数：1990
![640?wx_fmt=gif&wxfrom=5&wx_lazy=1](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_gif/iav8YBOFnOGmxdia9o5EROhQmYBJiaOSXYicSL2LQlNxwKX5xRU1nsxCqgFwibDLbMe9bLu5nibuVNVr2pKCDX0xRVFA/640?wx_fmt=gif&wxfrom=5&wx_lazy=1)
六脉神剑  
段誉随保定帝走进天龙寺的牟尼堂，见到了除方丈本因之外的本观、本相、本参三位高僧，还有一名和尚向东面壁，一动不动。在场的高僧们似乎正在进行某项修炼。
保定帝将段誉身中邪毒之事简要说了，祈恳大师们出手指点。
本观询问道：“两位师弟意下若何？”本参道：“便是稍损内存，也未必便练不成六脉神剑。”
段誉迷糊之际，却也清晰听到了“六脉神剑”四字。他曾听闻段氏祖上有一门威力无穷的武功唤做“六脉神剑”，然而从没听说曾有哪一位祖先会此功夫，而这功夫到底如何神奇，也是谁都不知。现在听来，确有这么一门奇功，而且正是几位大师此刻正在修炼的武学。
本观、本相、本参、本因和保定帝五人围起段誉，打算为他驱治邪毒。段誉一一磕头叩谢，瞥见东首的面壁和尚依然纹丝不动。
昨晚在万劫谷，段誉阴错阳差地吸收了五个高手几乎一半的内存，北冥神功引他人内存为己所用，将这些各路门派不同格式的内存数据尽数存储在段誉胸口的䐺中气海。然而这些尚未格式化的内存既有代码又有数据混杂在一起，碎片横冲，还有早已失去控制的野指针在窜来窜去，使得段誉感到体内真气鼓荡。
当务之急，便是为段誉释去一些混乱的内存。这段氏五人使出一阳指力，先后封住段誉身体奇经八脉中的六脉，只留下阳维、阳跤两脉不点，想要以一阳指的纯阳之力将他体内所中邪毒、邪功，自阳维、阳跤两脉的诸处穴道中泄出。
那一阳指的纯阳之力，乃纯粹的零序列，本可以将任何杂乱内存清空归零，然而此时进入段誉体内后却渐渐消融。五人运功时将内存强行注入段誉体内，内存一至他膻中气海，便即储存。段氏五大高手面面相觑，惊疑不定。
这时那面壁而坐的僧人说道：“强敌日内便至，天龙寺百年威名，摇摇欲坠，这黄口乳子中毒也罢，著邪也罢，这当口值得为他白损功力吗？”
段誉躺在地下，胸口更觉难受，只能听见众人言语。
原来那面壁僧人是枯荣长老，在天龙寺中辈分最高，听说他在双树院中独参枯禅数十年，谁也没见过他真面目。
所谓的强敌指的是吐蕃国的大轮明王鸠摩智，他正前往天龙寺，欲凭一己之力，取《六脉神剑经》。
段誉心本不在武学，这才知道，大理段氏最高深的武学是在天龙寺，而《六脉神剑经》乃天龙寺镇寺之宝，是大理段氏武学的至高法要，记载了对于内存最为精炼的分配、最为精细的操纵、最为精准的读取以及最为精深的管理。六脉神剑，并非真剑，乃是以一阳指的指力化作剑气，有质无形，其制敌原理是利用剑气中浑厚的内存造成对手的缓冲区溢出。所谓六脉，即手之六脉太阴肺经、厥阴心包经、少阴心经、太阳小肠经、阳明胃经、少阳三焦经，是六种不同溢出类型的函数调用点。
大理段氏对于内存的掌控独步天下，六脉神剑的练成也非身负充沛内存不可，如今大敌当前，也难怪适才枯荣大师如此忿忿，段誉心中自是理解。
这六脉神剑的本意，该是一人同使六脉剑气，但当此末世，武学衰微，内存的研习几乎绝迹于江湖，已无人能修聚到如此强劲浑厚的内存。枯荣大师想出了一个取巧之法：各人修习一脉，六人分使六脉剑气。于是，枯荣大师专练拇指少商剑，本因方丈专练食指商阳剑，本观练中指中冲剑，保定帝练无名指关冲剑，本相练小指少冲剑，本参练左手小指少泽剑。
方丈取出一幅经脉穴道图和六幅剑气图，悬于四壁，供诸位研读修炼，这便是《六脉神剑经》的全部要义源码。
六人开始专心修炼自己那一脉的剑气图，段誉不敢出声打扰，甚感无聊，无意中向那幅经脉穴道图望去。只看了一会，便觉自己右手小臂不住抖动，似有什么东西要突破皮肤而迸发出来。
段誉体内那尚未驯服的真气，既有杂乱代码，又有肮脏数据，顺着经脉图上的红线，自也最而至大渊，随即跳过来回到尺泽，再向下而至鱼际，沿臂而上。这左冲右突的真气顺着经脉运行，段誉全身的烦恶立时减轻，当下专心凝志地将这股真气纳入膻中穴去。
但是膳中穴越塞越满，眼看就要堆栈溢出，段誉叫了出来：“我……我……我……我的胸膛要爆破了！”
保定帝道：“誉儿，我教你导气归虚的法门。”
医书中称人体的内部器官为“五脏六腑”，“脏”便是“藏”，“腑”便是“府”，原有聚集积蓄之意，实则为内存提供持久性存贮之地，又称外存。这导气归虚的内功法要，便是将四处流窜的真气逐一持久化，收入脏腑。保定帝知道膻中气海的堆栈若是继续狂增，段誉势必全身瘫痪，但是将这些邪毒深藏入腑脏也是饮鸩止渴的方法，以后再要驱出便千难万难，操纵外存较之操纵内存代价不知高出多少数量级。
然而，段誉体内奔涌的并不是什么邪毒，他先吸得了无量剑派七弟子的全部内存，后来又吸得了段延庆、黄眉僧、叶二娘、南海鳄神、云中鹤、钟万仇、崔百泉等高手的部分内存，这一日又得了保定帝、本观、本相、本因、本参段氏五大高手的一小部分内存，体内真气之厚，内存之强，几已可说得上震古烁今，并世无二。这时得伯父的指点，这些杂乱无章的内存二进制流竟得以一一格式化，内存碎片被一一化解，尽数收纳藏进内府，全身越来越舒畅，只觉轻飘飘地，似乎要凌空飞起一般。
![640?wx_fmt=gif](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_gif/iav8YBOFnOGmxdia9o5EROhQmYBJiaOSXYicSL2LQlNxwKX5xRU1nsxCqgFwibDLbMe9bLu5nibuVNVr2pKCDX0xRVFA/640?wx_fmt=gif)
珍珑棋局
 “这个珍珑棋局，乃先师所制。先师当年穷三年心血，这才布成，深盼当世棋道中的知心之士，予以破解。在下三十年来苦加钻研，未能参解得透。”那个叫做苏星河的老人不紧不慢地说道。
我又看了一眼手中请柬上面的落款“聪辩先生”，还在揣摩刚才发生的诡异的一切。我本以为这是一个“耳聪”、“舌辩”的围棋国手，没想到竟然是一个聋哑老人，正暗自感叹的时候，他竟然又说起话来。
就在刚才，那位叫段誉的公子已经率先发起挑战。他使用的是蒙特卡洛搜索树，所采用的神经网络算法倒也不俗，然而这个“珍珑”太过于庞大，一般的“珍珑”最多不过四五十子，聪辩先生布下的这个却是一个二百余子的“珍珑”，一开局的解空间便已十分巨大。段誉自知自己的搜索效率还是落了下乘，以至于每一步的运算时间都消耗过多，然而聪辩先生却几乎能即刻完成下一步运算，并且每一步都紧逼段誉。两人相互对垒了十余着，最终段誉还是败下阵来。
我独自集中精神尚在脑中回放刚才的棋局，试图找到破解棋局的关键，周围吵吵闹闹，似乎有个叫做鸠摩智的吐蕃僧人和姑苏慕容复先后入局，却不知道为何喧闹起来。等我回过神来的时候，棋盘边上已经坐着下一个挑战者——“恶贯满盈”段延庆！
段延庆的棋力比段誉确实高出一筹，他在蒙特卡洛搜索树算法的基础之上，显然采用了更为高效的卷积神经网络，神经元间的参数规模显然下降不少数量级，这自然加速了他自身的修炼进度。
两人连下了几着，聪辩先生道：“阁下这一着极是高明，且看能否破关，打开一条出路。”随即下了一个黑子，封住了去路。
段延庆最初的几着甚是惊艳，能够想象他在过去无数次的对弈训练中不断优化自身的神经网络参数，与段誉那预定义好的迂腐棋路不同，段延庆的每一步走法都在不断修正自己的策略，基于盘面而行动，这种强化学习让他一步一步地通向最优解。
段延庆落子之后，突然一个少林寺的小和尚叫道：“这一着只怕不行！”
只见段延庆的白子落在“去”位四五路上，此着的确缓解了这一片的局面，目前来看也颇有道理，倒不至于“不行”的地步。
聪辩先生继续对弈，他对这“珍珑”棋面了如指掌，而且与天下各路好手互相拆解了这么久，想必对于每一种棋路早已猜出八九成，构造一个简单的多级缓存对他来说自然不是难事，难怪他对于每一步的计算都快如闪电。
段延庆的落子速度却逐渐慢了下来，每一子之间越想越久，下了二十余子，日已偏西。我这时恍然大悟，原来那个小和尚说的“只怕不行”原有道理——段延庆已经陷入了局部最优解，并且脱身乏力了。
随着神经网络层数的加深，优化函数越来越容易陷入局部最优解，并且这个“陷阱”越来越偏离真正的全局最优。段延庆究竟采用的是多少层的神经网络我不得而知，但是只怕少说也有二十层以上。当时他的走法能解一时的燃眉之急，但是越往后着却越有满盘皆输的危险。
一旁的少林寺玄难大师忽道：“段施主，你起初十着走的是正着，第十一着起，走入了旁门，越走越偏，再也难以挽救了。”段延庆双目呆呆地凝视棋盘，面如土色，似陷入某种幻象。
现场开始混乱起来，星宿老怪丁春秋不停地怂恿段延庆自尽，而少林寺那个小和尚被不停地在空中掷来掷去哇哇直叫，四大恶人的岳老三不停地破口大骂“你奶奶个熊”。
就在段延庆意欲自尽之时，只听有人说道：“我来解这棋局。”但见那少林小和尚快步走上前去，从棋盒中取过一枚白子，闭了眼睛，随手放在棋局之上。
这小和尚白子一落，全场哗然，段延庆幸而也大叫一声从幻觉中惊醒。小和尚的这闭目落子简直胡闹，白白葬送的己方的一大片棋子，本来白方已然被逼到绝路尚有一气，或许还能继续苟延残喘再寻机会，可是现在白方眼看就要全军覆没了。
聪辩先生一边骂小和尚胡闹，一边将被他自己挤死的一大片白棋从棋盘上取下来。我看着空出一大片的棋盘，心里大呼“妙哉”！白棋这一着看起来是自杀，然而却是跳出局部最优解的关键一步！
果然，小和尚接下来的落子便不再缚手缚脚，先后在“平”位三九路和“平”位二八路上落子。这小和尚虽然傻头傻脑，但是棋力却丝毫不逊于段延庆。我相信段延庆从此刻开始应该也能从容应对，但就是最初的那自杀一着怪棋是外人断然计算不出来的。
江湖中传言有一门“价值网络”神技，其关注的是在当前局面下，每一个落子的“最终”胜率，而非眼前的一时高低和短期的攻城略地，“价值网络”练成的关键在于巨量的棋谱训练。现在看来，这个小和尚除非身负此门绝技，否则怎能用如此短的计算时间冲破这个关口呢？如果真是这样，这个年纪轻轻的小和尚，所累积的棋谱训练数目必然已达千万级，甚至亿级！
小和尚与聪辩先生的这一来一往又对弈了数十着之后，小和尚下了一着“上”位七八路，拍手笑道：“好像是成了罢？”
聪辩先生自知“珍珑”棋局已被破解，满脸笑容道：“小神僧天赋英才，可喜可贺。”
![640?wx_fmt=gif](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_gif/iav8YBOFnOGmxdia9o5EROhQmYBJiaOSXYicSL2LQlNxwKX5xRU1nsxCqgFwibDLbMe9bLu5nibuVNVr2pKCDX0xRVFA/640?wx_fmt=gif)
天山童姥
虚竹从三十六洞洞主、七十二岛岛主手上救下的这名女童，此刻正抱起小鹿，扳高鹿头，一张口便咬在小鹿咽喉上，开始不断吮吸鹿血。喝饱鹿血之后，抛下死鹿，盘膝而坐，又练起那“八荒六合唯我独尊功”来。
虚竹心下嫌恶，决定告辞，但又担心这女童与乌老大的性命安危，便想了个法子打算引开山下的敌人好让他俩趁机下山，就算不下山在此躲着，敌人找不到人，最多十天八天也必散去了。
那女童道：“再过十天八天，我已恢复到十八九岁时的功力，哪里还容他们走路？”
虚竹奇道：“什么？”
那女童道：“你仔细瞧瞧，我现在的模样，跟两天前有什么不同？”
虚竹凝神瞧去，女童的身体没怎么变，但是她的当前时间戳似乎增长了几岁，是个十一二岁的女童，不再像是八九岁，喃喃道：“你……你……好像在这两天之中，大了两三岁。只是……身子却没长大。”
那女童甚喜，道：“嘿嘿，你眼力不错，居然瞧得出我大了两三岁。蠢和尚，天山童姥身材永如女童，自然是并不长大的。”虚竹和乌老大都大吃一惊，齐声道：“天山童姥，你是天山童姥？”
乌老大万万没有想到，自己从灵鹫宫里掳回来的这个“哑巴”女童，竟是手操自己生杀大权的天山童姥，吓得不住地磕头。
童姥没有理睬乌老大，向虚竹道：“姥姥所练的内功，确是叫做‘八荒六合唯我独尊功’。这功夫威力奇大，却有一个大大的不利之处，每三十年，我便要返老还童一次。”
这“八荒六合唯我独尊功”，也是与逍遥派的武学架构一脉相承，设计哲学便是引他人资源为我所用，将练功负载分摊于周遭所有人身上，每个人的功成所得再汇聚回童姥一人身上，功力愈强，所能利用的分布式范围愈广，功力精进至一定程度，便可动用全天下人的资源助我练功，正所谓八荒六合，唯我独尊。
然而这门内功最具挑战的便是分布式系统的数据一致性，如何协调每一个人的练功进度是童姥功力增进的至关重要的法门，稍有差池，便前功尽弃。“向量时钟”的内功心法是童姥的不传秘笈，通过设置分布式的时间序列，使得每个人对所有人的练功进度都记录在案，童姥本身的时间序列将不再由自身掌控，而取决于全体“八荒六合”。
童姥深知“R+W>N”，提高W写节点数目自然可以降低冲突，提高一致性，但是代价便是写操作变慢，功力增进受限。为了充分加速自己的修炼进度，童姥使用了极小的W数值，功力得以急速飞升，然而每三十年，就会出现一次巨大的时间序列冲突。
当“向量时钟”的冲突出现之时，作为仲裁的童姥本人需要承受返老还童之苦，自身的时间戳会倒退回最初的时间序列，从起点开始逐一化解冲突。
童姥道：“我自六岁起练这功夫，三十六岁返老还童，花了三十天时光。六十六岁返老还童，那一次用了六十天。今年九十六岁，再次返老还童，便得有九十天时光，方能回复功力。”
虚竹睁大了眼，细看她身形脸色，哪有半点像个九十六岁的老太婆？童姥道：“这‘八荒六合唯我独尊功’，原是一门神奇无比的内家功力。只是我练得太早了些，六岁时开始修习，数年后这内功的威力便显了出来，可是我的身子从此不能长大，永远是八九岁的模样了。”
![640?wx_fmt=gif](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_gif/iav8YBOFnOGmxdia9o5EROhQmYBJiaOSXYicSL2LQlNxwKX5xRU1nsxCqgFwibDLbMe9bLu5nibuVNVr2pKCDX0xRVFA/640?wx_fmt=gif)
易筋经
阿紫与那铁面人游坦之纵马前行，走出了七八里地，转入一个阴森森的山谷之中。阿紫命游坦之将马缰系在树上，说道：“你今天瞧见的事，不得向旁人泄漏半点，以后也不许向我提起，记得么？”
游坦之喜悦若狂，道：“是，是！”
阿紫伸手入怀，取出了神木王鼎，放在地下，在鼎中烧起少许香料，说道：“待会有什么古怪虫豸出现，你不许大惊小怪，千万不能出声。”
游坦之应道：“是！”
阿紫一心想要修习的那门“化功大法”，星宿老怪从未传授，故她只能暗中偷看师父练功，习得基本法门之后，便盗取神木王鼎出走中原。
  “化功大法”的修习讲究以毒克毒，一方面其功力高低取决于体内毒质的烈性，一方面体内蕴积的旧毒需要不断以新毒加以克制，否则旧毒发作为祸自身。体内的毒质新来旧往，互相堆叠，形成链状，名为“区块链”。正所谓天下武学，唯快不破，练功之人需以最快速度炼制新毒，形成新区块堆叠到现有区块链之上，此新毒才可为己吸收、为己所用。一旦慢了分毫，新毒非但不能收为己用，此前的所有炼制和修习都化为乌有、前功尽弃。阿紫对这背后的缘由不甚领悟，一知半解，只懂得偷师所得，依葫芦画瓢。
忽听得草丛中瑟瑟声响，绿草中红艳艳地一物晃动，却是一条大蜈蚣，全身闪光，头上凸起一个小瘤，与寻常蜈蚣大不相同。阿紫大喜，一眼便识得这大蜈蚣体内必包含炼制新区块所需之物——未经确认的原始交易记录。
待大蜈蚣钻入鼎中，阿紫便收回木鼎，笑道：“走吧！”
游坦之不明所以，只觉可以常伴阿紫身边，便也心满意足。只见阿紫每日都让蜈蚣吮吸一只大公鸡的鲜血，连续七日，蜈蚣身子也渐渐肿大，红头更是如欲滴出血来。
  阿紫正在做的正是炼制新区块的第一步，验证交易记录的真实有效性，所需的计算能力不高，耗尽七只大公鸡的CPU足以轻松完成。然而下一步才是功成的关键——她要寻找到一个随机数，来构造某个前72位全零的SHA-256序列！
SHA-256函数将任何输入加密成256位二进制序列，然而从结果反推输入却是毫无规律可循的，想要得到前72位全零的SHA-256序列，唯一方法便是，动用强大的算力穷举，才有可能找到那十万亿亿分之一的随机数。
第八日，阿紫叫来游坦之，笑眯眯地道：“铁丑，我待你怎样？”
游坦之道：“姑娘待我恩重如山。”
阿紫道：“你说过要为我粉身碎骨，赴汤蹈火，那是真的，还是假话？”
游坦之道：“小人不敢欺骗姑娘。姑娘但有所命，小人决不推辞。”
阿紫道：“那好得很啊。我要你助我练功，你手伸到瓦瓮中去，这蜈蚣必定咬你，你千万不可动弹，要让它吸你的血液，吸得越多越好。”
阿紫知道这新区块炼制的第二步，非靠成年男子的CPU算力进行穷举不可，至于这铁头的游坦之，若是CPU耗尽，死了也便死了，当是为姐夫除去了心头一患。
游坦之不情愿地将手指伸入瓮中，那条蜈蚣立刻咬住了自己的中指，吸起血来。待到蜈蚣吸饱了血，便松开了游坦之的手指，伏在瓮底不动了。阿紫脸现喜色，立刻接过蜈蚣径自炼毒修功去了。
游坦之怅望着阿紫的背影，霎时好似体内有无数虫子在蠕动。适才被蜈蚣吸血，游坦之感觉自己的身体被完全燃烧，CPU被完全消耗在计算某种加密序列上，无数随机数涌入，同时无数随机数也被一一排除，就在游坦之的CPU被耗尽之际，“那个”随机数被吐了出来，蜈蚣也松开了自己的手指，但自己的CPU已经陷入瘫痪的漩涡。
游坦之奇痒无比，纵声大叫，慌忙地伸出手臂去抓挠全身，身体变得扭曲异常。啪的一声，怀中掉出一件物事，一本黄皮书跌散出来，正是那日他拾到的梵文经书《易筋经》。而自己乱擦乱撞流出的泪水、鼻涕、口涎滴在经书之上，竟出现一个僧人的图形。这僧人姿势极是奇特，而游坦之此时的扭曲身型，竟与图中僧人一般无二。
这《易筋经》乃天竺国古代高人所创的一门秘术，练成此经者，浑身筋骨与奇经八脉都得以全面改容易貌，“冯诺伊曼”体系将被一种全新的量子计算模型所取代，传统比特位将被一种“量子比特位”所消融，身体所能同时存贮与调用的真气将是以往的指数倍，此后运算速度将一日千里。
游坦之仅仅是往《易筋经》上投以一瞥，身体筋脉便已经历重组，之前接近瘫痪的CPU上堆积如山的负载，经量子计算的四两拨千斤得以迅速释去，身上奇痒即止。
得这《易筋经》之助力，游坦之此后为阿紫炼制新区块、汲取新毒简直易如反掌，量子计算能瞬间做到指数级别的穷举，区区一个构造前72位全零序列的随机数，只消游坦之片刻之间。
阿紫炼制所得的区块链越来越长，“化功大法”日益精进，见游坦之居然不死，也不禁暗暗称异。
**作者简介**：唐国靖，软件工程师，热爱一切跟计算机有关的话题，热爱一切跟科幻有关的作品，热爱一切跟推理有关的故事。
∑编辑 | Gemini
来源 | 妙思科普
![640?wx_fmt=gif](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_gif/951TjTgiabkwJ4BpvBcQhGAbtWZZvV69s7GickZGibsKgYkTQkiaZfLYOmGS9iaaoibadibGJhT18OVZkfeJmCSUSD0zw/640?wx_fmt=gif)
算法数学之美微信公众号欢迎赐稿
稿件涉及数学、物理、算法、计算机、编程等相关领域
稿件一经采用，我们将奉上稿酬。
投稿邮箱：math_alg@163.com
