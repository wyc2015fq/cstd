# 中国什么时候才能全面普及 1 Gbps 下行的网速？ - 算法与数学之美 - CSDN博客
2018年09月04日 21:51:13[算法与数学之美](https://me.csdn.net/FnqTyr45)阅读数：70
> 
**其实这个简单。只要你们愿意按流量收费，运营商分分钟把10G网络给你拉到家里你信不信？**
首先，我们先说说互联网是一个怎样的网络。简单来说就是一种十分不靠谱的网络。有多不靠谱呢？我们用快递公司来打比方。
## ** 不靠谱的快递公司 **
先说说“正常”的，也就是靠谱的快递是什么样的。其实就跟大家平时用的快递差不多。假设一家快递公司一天能处理100个包裹。但双11一下来了1000个包裹，怎么办？
- 
没事，快递公司有很大的仓库，没法立刻处理的先存仓库，慢慢消化。你的快递会迟到，但永远不会缺席。
- 
仓库满了呢？那就拒收新来的包裹。
- 
包裹都可以追踪，最后送不到也给卖家退回去。
那如果互联网是家快递公司呢？那这家快递公司是这么干的
- 
几乎没有仓库，包裹满了**随到随扔**，啥？一下来了1000个包裹，先给我扔900个。剩下100个送不送看心情。
- 
扔就扔了，既不会通知买家也不会通知卖家
- 
就算快递公司整个炸了，揽收的也照样收包。只不过左手收进来右手就给扔了，当然也不会告诉你。
- 
包裹追踪？想得美！
总结一下就是扔你的包裹就是常态，发出去的包就像泼出去的水，你永远都不知道能不能送到。话说这样的快递公司你敢用？？？！！！
就这么不靠谱的快递公司硬是把各种靠谱的快递公司揍得满地找牙，到现在你不得不用了。
因为这个快递虽然不靠谱，但真的是又快又好又便宜啊！
**打个比方：**
靠谱快递1个包裹10块钱，3天送到。不靠谱快递1个包裹1分钱，5分钟送到。你说你选哪个？
不靠谱快递送出去之后10分钟之内卖家没反应我就再一次，我不了我就送10次，总还是能收到的。反正邮费便宜，而且数据包不比实体包裹，生产一个几乎没有成本。
于是，这种叫以太网快递公司击败了其他类型的网络，组成了我们今天的互联网。
## ** 不靠谱的快递公司的日常 **
现在这家不靠谱的快递公司普及了，你们小区也有了一家快递站。
快递站***承诺你***，每天最多可以帮你处理20个包裹。
但实际上，这个快递站的处理能力只有100个/天，而你所在的小区有100户人家。够用吗？这个不好说，毕竟不是每户人家每天都有包裹要邮寄的。
- 
某一天，快递公司已经收了50个包裹，你一下邮了20个，全部正常抵达。
- 
某一天，快递公司已经收了90个包裹，你邮寄了6个，全部正常抵达。
- 
某一天，快递公司已经收了95个包裹，你要邮20个，结果只到了10个，为啥不是5个呢？扔也不能只扔你一个人的不是？
- 
某一天，快递公司已经收了1000个包裹，你还要邮20个，结果。。。。结果就是互相伤害呗！
- 
> 
最后，思考题
某一天，快递公司已经收了50个包裹，你邮寄了20个，结果只有2个正常到达，为啥？
不这样怎么能叫不靠谱的快递公司呢。虽然快递站没爆，但上家中转站爆了/所在城市总物流中心爆了/骨干运输线路爆了/收件人的快递站爆了/收件人拒收等等，反正你的包有100000种死法，怎么死的你永远都不知道。
而实际上，你家的快递站到底有多少处理能力/还有多少余力，这都是企业机密，永远不会告诉你，上一级快递站和物流中心的情况更是如此，绝对不公开。
## ** 快递公司的承诺：带宽 **
行了，现在回到这个问题上来吧。
估计大家也都看明白了，这个快递站承诺你每天最大的包裹处理量就是所谓的带宽。上面也讲了，这个承诺其实是特别虚的一个东西，因为理论上你的丢包率是可以在0～100%浮动的哈。而且就算你的包裹99%都被丢了，按照合同，你也是不能有任何怨言的。
这也是我一直说的，带宽只是衡量网络的一个指标而已。而对于家用网络还是最没用的那个。你关心自己用的网络是1MB的还是10MB的还是20MB的甚至是100MB还是1000MB的其实没多大用，你倒不如关心一下自己网络在高峰期间的丢包率。
而丢包率又是一个很难横向比较的指标，因为发送起点不一样，发送终点也不一样，今天和明天有可能完全不一样，你跟我说说这要怎么比？
> 
思考题，
100Mb共享带宽的网络，高峰会有10%的几率丢包。
VS
10Mb独享带宽网络（因为带宽独享，所以我们假设它不丢包）
你觉得哪个好？
100Mb的好？就算丢了5%我还有95Mb嘛。你这么想就图样了。丢包的影响远比你想的严重。前面也说了，包被丢掉之后是不会通知发送方和接收方的。那怎么知道对方收没收到呢？只能等到超时，然后再重传。
而等超时这个动作，基本上都是按秒来算的。有的时候双方还要商量一下如何重传的具体事宜，弄不好3秒5秒都算客气的。
如果你玩吃鸡或者lol什么的，明明没有谁在用网，还时不时出现的卡住完全不动，或者ping值毫无征兆的飙到数百几秒后再恢复，那十有八九就是丢包受害者了。
另外有兴趣的可以去网络服务商或者数据中心问问报价，你会发现10Mb的独享带宽可比100Mb的共享带宽贵多了。因为100Mb的共享带宽平均分下来，肯定没有10Mb（或者换句话说就是如果有100Mb的带宽，肯定不止分给10个人用。）
这样的宽带给你100Mb还是1000Mb区别很大么？
## ** 普及更大带宽的困境 **
原答案这里其实抖了一个机灵。
但个中的矛盾在于，现在宽带费用是包月的，你用还是不用，用多少，扔你多少包都不影响运营商的收入。换句话说，运营商投入再多的资本，大举兴建骨干网络，也没人给运营商加鸡腿。
而增加网络容量那是要真金白银的，运营商当然不乐意。
但如果是按流量收费那就是另一个故事了：运营商肯定把网络建得畅通无阻，巴不得你玩命用呢。
总体来说，按流量收费是大势所趋。但实际操作起来问题很多，所以一时半会不会也不能指望它普及。再说一遍，这就是抖个机灵而已，我个人也不是那么支持这个事，所以就别再评论里问这个事了。
那如果国家出钱，把骨干网和接入的部分都做到畅通无阻，我是不是就能用上便宜又高速又稳定的网络了呢？或者换句话说，现在中国电信中国联通神马的骨干网络建设其实相当的给力，放在那里也是放着，为啥就不给我用呢？
这就涉及到了互联网费用的另一个黑童话叫transit。再往下这坑可就越挖越深，差不多可以写本书了。所以我尽量把概念简化，有不准确的地方大家多担待。
## ** 运营商的网费：其实地主家也没有余粮 **
其实运营商的带宽也都是从上家买来的。
也就是说，运营商不但要建设自己的高速的物理网络把你接入进来，还得跟上家批发带宽再零售给你。批发价多少要看运营商的体量，体量越大越便宜。各家多少，肯定是都不一样了，而且一定是企业机密，人家不会告诉你的。
可以告诉你的是，即使是批发也一点都不便宜。虽说此带宽和彼带宽并不是完全相同的概念，但就费用来说你用100Mb的光纤一个月费用可能都买不下来1个Mb。具体1Mb带宽零售的话要卖多少钱，还是可以参考一下各大服务商和数据中心的10Mb独享带宽的价格。
所以你指望一个月就交这么点钱，100Mb让你随便用？天下哪有这么好的事。
归根结底，不管你是100Mb还是1000Mb，是不可能让你没有限制随便用的，要么限流要么限速，要么一起限。反正上刀山还是下火海你自己选一个，不把你消耗的平均带宽限到足够低，运营商不就成慈善机构了么？
- 
限流。这个最好理解，就像手机这样，每个月不得超过多少流量。就算你10G流量，其实平均下来消耗的带宽是8*10000MB/30天/24小时/3600秒=0.03Mbs=30Kbps
- 
限速。这个办法就多了，技术上可以给你开100Mb甚至1000Mb，实际上给你开10Mb，20Mb。或者高峰时段在上游交换机上限速，或者设置优先级，或者用下面这个更粗旷的办法
- 
反正就10G带宽，你们100000个人看着分吧。现在明白为啥访问境外网站为啥那么慢了吧？知道为啥玩境外服务器的网游狂丢包了吧？知道为啥要靠网游加速器解决问题了吧？即使是电信联通网通这样的巨头，出国的带宽也还是要跟人家买。当然境外网站慢还有另外一个重要原因，这里也不讲了，大家明白就行了。
另外，也不是你用的每一Mb的带宽，运营商都需要跟上家交钱的。如果是运营商自己网内的资源的话，那就不用给上家掏钱了。比如说，如果你是电信用户，访问网通机房的服务器，电信很有可能要为你的这个行为给网通付钱或者额外的成本。而如果你是电信用户，访问电信机房的服务器，那电信就美滋滋了，速度自然是又快又好。
> 
思考题，所以你猜中国南北互联为啥是世界难题哩？
所以很多互联网巨头早都学乖了，会在电信和网通的网络内分别架设服务器，或者用双线BGP的机房。原始一点的办法，是让用户自己选服务器。先进一点的办法，可以自动选。像CDN啥的，其实道理也都差不多。
电信的用户和网通的用户，打开youku的页面，看到一样的内容。但很可能是走了完全不同的线路，从完全不同的服务器上返回的结果。也就是说，虽然你们看视频网站很费带宽，但运营商其实也不是那么疼。
对于运营商来说，交钱从上家那里批发来的带宽可是真金白银买来的，能不给你用就不给用。而对于一般用户来说，下行的流量其实是很好Engineering的，方法就像上面说的，把热门的服务器纳入运营商的内网不就行了？
但一般用户的上行带宽可就没有那么好控制了。你挂P2P的时候，P2P程序可不会分辨对方到底是同城的邻居还是还是相隔千里之外的国际友人。同网的倒是好说，你要是想给国际友人传数据，那对于运营商来说就跟杀父之仇一样啊。（断人财路等于杀人父母嘛！）
> 
思考题，啥即使跨过了ADSL的时代，现在用光纤上行下行对称已经没…
没有概念的也可以来这里体验一下上行带宽到底有多抠门哈
![640?wx_fmt=jpeg](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/951TjTgiabkxZDCfjGS90cM2gh8SAhOe1jpRXuxyvbPMyOFwazpgo2noOMQkIicb2fRxx67vQhADF9Luib2e0I9Vw/640?wx_fmt=jpeg)
算法数学之美微信公众号欢迎赐稿
稿件涉及数学、物理、算法、计算机、编程等相关领域，经采用我们将奉上稿酬。
投稿邮箱：math_alg@163.com
