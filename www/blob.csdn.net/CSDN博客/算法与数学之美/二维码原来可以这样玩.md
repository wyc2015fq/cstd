# 二维码原来可以这样玩 - 算法与数学之美 - CSDN博客
2018年01月01日 00:00:00[算法与数学之美](https://me.csdn.net/FnqTyr45)阅读数：1670
**二维码是怎么生成的？**
二维码其实就是由很多0、1组成的数字矩阵。二维码是用某种特定的几何图形按一定规律在平面（二维方向上）分布的黑白相间的图形记录数据符号信息；它巧妙地利用构成计算机内部逻辑基础的“0”、“1”比特流的概念，使用若干个与二进制相对应的几何形体来表示文字数值信息，通过图象输入设备或光电扫描设备自动识读以实现信息自动处理。
下面我们来看一个简单的二维码样例：
![640?wx_fmt=png&wxfrom=5&wx_lazy=1](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2D6nqsEnfibwU5PthDePmnNbPibNdeZAovUFrGWoYSAF0r9ia2hfNJ2ZyfQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1)
其实，二维码就是把你想表达的信息翻译成黑白两种小方块，然后填到这个大方块中。在定位准确的前提下，只要机器读取到的那个部分有一个黑点——哪怕只是小小的黑点，都不妨碍它被识别为“1”，连一丁点儿小黑点都没有的地方自然就被识别为“0”了，因此二维码也未必都是由黑白小方块组成。
![640?wx_fmt=png](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2DJkL2jDXcLoGyQKFibDHO34O9cRK4SEt7ibkS7IWtaPqW3MdwQw4HDEVw/640?wx_fmt=png)
![640?wx_fmt=png](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2DNsC3svHscOTBfH3Mul8qdSvnXGkVLKOT4rsVeSQ6dXh44wVtmzLXwQ/640?wx_fmt=png)

**缺了一块也能扫？**

二维码的组成中含有很多纠错码，假如需要编码的码字数据有100个，并且想对其中的一半，也就是50个码字进行纠错，则计算方法如下。纠错需要相当于码字2倍的符号，因此在这种情况下的数量为50个×2＝100码字。因此，全部码字数量为200个，其中用作纠错的码字为50个，也就是说在这个二维码中，有25%的信息是用来纠错的，因此即使缺了一点或者变皱了也一样能被识别，不信你试试。
![640?wx_fmt=png](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2DQHJhiclTVruicNlLNCZYQnx3AuyURoOsAKWTxNeMc3FZLZiatd9BJLibPw/640?wx_fmt=png)
![640?wx_fmt=png](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2DL7T3NHEveoM6hLJ2AO4fvIjysHDhpSnFr875WSRtUibFJHM0ibtzGGGA/640?wx_fmt=png)
这也就是为什么现在许多二维码中央都可以加上LOGO，比如算数学苑~
![640?wx_fmt=png](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2DUfQry9DIz4FFz0e4g9ujZKoPsXbvByO2IlZ9dUgfBD5m9xO8g2FUww/640?wx_fmt=png)
或者用其他东西代替LOGO也不要紧哦~
![640?wx_fmt=png](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2DVkic5ccibqBHDicYFPgzkmdtrCDMIhpwpaYVAW5X7BP69hNf5NnSTB18A/640?wx_fmt=png)

**为什么有三个大方块？**

这个我们就需要聊到二维码是怎么被手机识别的。
由于不同颜色的物体，其反射的可见光的波长不同，白色物体能反射各种波长的可见光，黑色物体则吸收各种波长的可见光.所以当摄像头扫描黑白相间的二维码上时，手机利用点运算的阈值理论将采集到的图象变为二值图像,即对图像进行二值化处理,得到二值化图像后,对其进行膨胀运算,对膨胀后的图象进行边缘检测得到条码区域的轮廓。
然后经过一项灰度值计算公式对图像进行二值化处理。得到一幅标准的二值化图像后，对该符号进行网格采样，对网格每一个交点上的图像像素取样，并根据阈值确定是深色“1”还是浅色“0”，从而得到二维码的原始二进制序列值，然后对这些数据进行纠错和译码，最后根据条码的逻辑编码规则把这些原始的数据转换成数据。
我们在使用手机扫描的时候无论是什么方向，甚至歪歪扭扭，都能够正确识别二维码的内容，就是因为手机通过这三个黑色小方块定位出二维码正确的方向。所以这三个黑色小方块千万不能被挡住，当然倒也不一定非得是方块形状的啦…
![640?wx_fmt=png](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2DMKhuibibJOJImc0jJY3uvLbU46GxUALBZlYXNGLpsTV2g2RtqWiaYezBQ/640?wx_fmt=png)
![640?wx_fmt=png](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2DFf3Gv1U602jdic9MLLjvvvX4PG14HPngQ2ibibTZvC0ORiaS9mIXicLvxeQ/640?wx_fmt=png)
试试扫一下！
![0?wx_fmt=gif](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_gif/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2D9znRJZplIbVjibmQticTTHZfTpLcSWKys5gYoMlxicssUVapBgppbpWzw/0?wx_fmt=gif)
看到这相信大家对二维码应该有所了解了吧，可能有人会说这些都太简单了，网上有很多很有创意的二维码呢，好吧，和小编一起来看看都是怎么做的呢。
如下图就是一个普通二维码的基本结构。黑白元素其实就是二进制，三个定位用图案，以及中间的一些信息储存区。
![640?wx_fmt=png](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2DAXXHWUib7KbWQjfaKCpwmicuGFtcURuxMtOOBS8HqdUwmCVRicKKeMORQ/640?wx_fmt=png)
**来看一张我们设计师的杰作**
**![640?wx_fmt=png](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2Dbe55ALz5ADPibp9zkIL19oLPKxhGUB2snxC4xDY3DRJK3I1RFuwejGw/640?wx_fmt=png)**
说了那么多，你还是发挥不出来这样的艺术风格？好，那还是撸起袖子一起做吧。
我们来以一个较简单的29x29的二维码为例
❖ 首先给二维码拉一个同样大小的网格以区别二维码中相邻的像素点，同样，这里二维码中的黑色块也已经预处理为圆形以示区分。
![640?wx_fmt=png](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2D4LW8FZjHvHj132tdPS23H7eAl32D467S5Ngiapiclx4slkpKp8aHqvbA/640?wx_fmt=png)
实际经验表明在对二维码中的黑色圆点进行艺术修改时，通常替代图形最小不能上小于图中的红色圆点，最大也不能大于上图中的黄色圆点，从而保证实际操作中二维码的识别度不会下降甚至完全无法识别。
❖ 其次，根据拟采取的艺术主题，将不同的黑色圆点组合替换成相应的素材实例，下面以几种水果给出这个过程的具象化表示。
![640?wx_fmt=png](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2Dlc0Wkuj3LvAiax7cZyjsf7yBGsYs1fyibyG9y5ibt4mPwuOwicwEORqAXg/640?wx_fmt=png)
左边表示所替换的相邻黑色圆点的数目，右边表示拟替换的素材。
❖ 第三，将二维码按照相邻黑色圆点的数目、形状以及艺术想法等，划分为不同的区域，每一个区域都保证可以使用上述列表中的素材进行替代。如下图所示。
![640?wx_fmt=png](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2DS1VQhmSZkXA2snzxkW3u9jS42vv1YEibVISoYhZ9jd2oyRia8ZbZViaBw/640?wx_fmt=png)
❖ 最后，将拟定的素材替换到二维码中规划好的黄色区域。这一步需要边替换边检查二维码是否能够被正常识别哦。
![640?wx_fmt=png](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2DvsZcl864WXz6EBeDjWJkbse4f9icC7C5s4gko6yTmaBeCicMMaRGlLKw/640?wx_fmt=png)
通过上述过程，就可以实现二维码中黑色圆点的艺术化修改，打造一款自己需要主题的特色二维码。看完整个过程，你是不是也心动了呢！
**再|来|几|张**
![640?wx_fmt=png](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2D0bW1yQResxRSDoBPgexvMtqwPiaGSoGvMb0QRaydmjxdRUZbHzc6r4Q/640?wx_fmt=png)
![640?wx_fmt=png](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2DZRKBV0OD6ib7WibGsMQABuuJJPiahUUp5MHhMauCqW5ibt3esU7H4WmelA/640?wx_fmt=png)
![640?wx_fmt=png](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug0dicUwBcJNKyYNv43T3wib2DTAkQiaRJUoWOSz8xYSibQIH593l3CYk93YDRiaxN4KuHmYl0AXnpEpictQ/640?wx_fmt=png)
看完这些，是不是觉得创意二维码并没有那么难？是啊，有些事看起来很难，但是只要你想尝试，去动手，去思考，问题就会迎刃而解啦~
又是一年元旦到，祝各位粉丝拥有一个更加灿烂更加辉煌的2018！
![640?wx_fmt=png](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/CSKkwx0Pug1N4XsOIAR7qnx70qTJaJn5ibvuzkaxfrqXIwSBH6gtvicePM9sVMq6WauWENmrBicibsaSYM1uAcx6YA/640?wx_fmt=png)
![0?wx_fmt=gif](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_gif/951TjTgiabkwJ4BpvBcQhGAbtWZZvV69s7GickZGibsKgYkTQkiaZfLYOmGS9iaaoibadibGJhT18OVZkfeJmCSUSD0zw/0?wx_fmt=gif)
**算法数学之美微信公众号欢迎赐稿**
**稿件涉及数学、物理、算法、计算机、编程等相关领域。**
**稿件一经采用，我们将奉上稿酬。**
**投稿邮箱：math_alg@163.com**
