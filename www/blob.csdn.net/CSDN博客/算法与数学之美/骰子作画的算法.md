# 骰子作画的算法 - 算法与数学之美 - CSDN博客
2017年10月27日 00:00:00[算法与数学之美](https://me.csdn.net/FnqTyr45)阅读数：664
> 
**骰子作画的算法**
**来源： 阮一峰的网络日志**
程序员Scott MacDonald做了一个很有趣的项目----骰子作画。
他用黑底白点的骰子。
![640?wx_fmt=png&wxfrom=5&wx_lazy=1](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/951TjTgiabkxywDlVox1xHvZKHUgONBZEQwQPVwRvpRFaIXGtoD93CLtZvMZasZjMLmcD8IyAkVicspoZDgO5kQg/640?wx_fmt=png&wxfrom=5&wx_lazy=1)
模拟出一张人像照片。
![640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_jpg/951TjTgiabkxywDlVox1xHvZKHUgONBZE3OOhiaHV9r85VKxCeBxgicVU8iaFHE7fNict7ECstCMrtLFSJJcOf26nMQ/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1)
把图像放大，就可以看得更清楚。
![0?wx_fmt=jpeg](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_jpg/951TjTgiabkxywDlVox1xHvZKHUgONBZEGcxsDvBqriav5FuZVOicQI6RzFl8icnAkrTY3lX1bc8GJNXWuoLrryjSQ/0?wx_fmt=jpeg)
他一共用了2500多颗骰子。
![0?wx_fmt=jpeg](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_jpg/951TjTgiabkxywDlVox1xHvZKHUgONBZECd0cVm9ZCz9RSJttL9cJmh1BxXrmq9wCuME2OicBiaz3angviczJZM9KQ/0?wx_fmt=jpeg)
最后的成品就是这样。
![0?wx_fmt=jpeg](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_jpg/951TjTgiabkxywDlVox1xHvZKHUgONBZECV8GB9E02HbgfbDBCTTxyIV1ic8lH6M0PII5vImeCCInpDyQ4mnIfZw/0?wx_fmt=jpeg)
任何一张图片都可以用骰子模拟出来，算法非常简单：将图片分成若干个区域，每个区域经过计算以后，用1-6之间的一个整数表示，代表骰子的一个面。这种将连续的量转化成不连续的整数的算法，属于vector quantization（矢量量化）的一个应用。
具体来说，
第一步，将图片分割成16像素x16像素的小方块。
> 
　　for (int i=0; i < (pic_width/16); ++i) {
　　　　for (int j=0; j < (pic_height/16); ++j) {
　　　　　　patch = cropped_img.get(i*16, j*16, 16, 16);
　　　　}
　　}
第二步，每个小方块内共有256个像素，将每个像素点的灰度值，存入一个数组。
> 
　　for (int k=0; k < patch.pixels.length; ++k) {
　　　x[k] = rgb2gray(patch.pixels[k]);
　　}
　　int rgb2gray(int argb) { 
　　　　int _alpha = (argb >> 24) & 0xFF;
　　　　int _red = (argb >> 16) & 0xFF;
　　　　int _green = (argb >> 8 ) & 0xFF;
　　　　int _blue = (argb) & 0xFF;
　　　　return int(0.3*_red + 0.59*_green + 0.11*_blue);
　　}
第三步，计算该数组的平均值，并用1-6之间的一个整数来表示。
> 
　　int dice_num = six_step_gray(mean(x));
　　int mean(int[] x) {
　　　　float m = 0;
　　　　for (int i=0; i < x.length; ++i) {
　　　　　　m += x[i];
　　　　}
　　　　m = m/x.length; 
　　　　return int(m);
　　}
　　int six_step_gray(int x) {
　　　　if (0 <= x && x <= 41) return 1;
　　　　if (41 < x && x <= 83) return 2;
　　　　if (83 < x && x <= 124) return 3;
　　　　if (124 < x && x <= 165) return 4;
　　　　if (165 < x && x <= 206) return 5;
　　　　if (206 < x && x <= 247) return 6;
　　　　else return 6;
　　}
整数1，表示骰子朝上的一面有1个白点；整数2，表示有2个白点；以此类推。白点越少，表示这个区域越接近全黑；白点越多，表示越接近全白。根据白点值，将骰子依次放入，就能模拟出全图。
这种算法早在1981年就有人提出，当时用的是1~9个白点的多米诺骨牌。
![0?wx_fmt=jpeg](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_jpg/951TjTgiabkxywDlVox1xHvZKHUgONBZEcMlXXGdBIiaAAdo6dB7wiaWuatpHVZ0kVfj89o6ic3zywFxZhxvUCBs4A/0?wx_fmt=jpeg)
如果区域划分得越小，模拟图的生成效果就越好。
![0?wx_fmt=jpeg](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_jpg/951TjTgiabkxywDlVox1xHvZKHUgONBZEXX85DYBmTXDY1jf6uBHDWkZVibIDZvGe9qABOCWiatD5Xhu2EsEGWMUg/0?wx_fmt=jpeg)
![0?wx_fmt=jpeg](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_jpg/951TjTgiabkxywDlVox1xHvZKHUgONBZEWiaKYGlbXQO4lVMDI5N1zdoHYgibs9H1eCicLSzS5ibnmsMES8oQKntSiaw/0?wx_fmt=jpeg)
![0?wx_fmt=jpeg](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_jpg/951TjTgiabkxywDlVox1xHvZKHUgONBZEmnLOP49NWTSkvpRSVLVrf1vRHv2t3aPvaxGCT7hjRXdOatbXEHTIHQ/0?wx_fmt=jpeg)
![0?wx_fmt=jpeg](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_jpg/951TjTgiabkxywDlVox1xHvZKHUgONBZEx6BlhHtiaJzrNd1kV7P7JLYib3XuWMgvF2U9h7Ybmr9qaZib3EuoNVSAg/0?wx_fmt=jpeg)
![0?wx_fmt=jpeg](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_jpg/951TjTgiabkxywDlVox1xHvZKHUgONBZEV7WffUDeb6XQmOvyF3Uo5Rnic6RGgicU2N4QKKynbrc9NXQwlA7aib0SQ/0?wx_fmt=jpeg)
![0?wx_fmt=jpeg](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_jpg/951TjTgiabkxywDlVox1xHvZKHUgONBZE9I951gdVZIa1cKia3otF8RWgiaR5sfK5r8tVhDIjwaG52rCO1ibic3HicWw/0?wx_fmt=jpeg)
此外，不用编程，使用Photoshop也可以得到类似效果。
![0?wx_fmt=png](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_png/951TjTgiabkxywDlVox1xHvZKHUgONBZEICSwdJ92FhbtqfgVrOA19OS2kUAc6nVuo4QEiaFiafqHxicLFibN9CvVwg/0?wx_fmt=png)
**-------------****----**
**明明共同关注公众号，彼此却互不认识；**
**明明具有相同的爱好，却无缘相识；**
**有没有觉得这就是上帝给我们的一个bug！**
**想不想认识更多写程序的小伙伴？**
**C++，Java，VB……应有尽有。**
**还等什么？赶快上车加入我们吧！**
**(･ิϖ･ิ)っ算法与数学之美-计算机粉丝群**
**我们在这里等你哟**
![640?wx_fmt=jpeg](https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_jpg/951TjTgiabkxUQ5d0U9iaj39zR1xvmIghuQqNYBAabQNdiazRVHuqB8AaPqKl6wUhFqf3r7jdwkibyONELQdY6G8Vw/640?wx_fmt=jpeg)
**算法数学之美微信公众号欢迎赐稿**
**稿件涉及数学、物理、算法、计算机、编程等相关领域。**
**稿件一经采用，我们将奉上稿酬。**
**投稿邮箱：math_alg@163.com商务合作：微信号hengzi5809**
