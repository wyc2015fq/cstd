# 经典：编程面试的 10 大算法概念汇总 - 算法与数学之美 - CSDN博客
2018年09月28日 21:28:21[算法与数学之美](https://me.csdn.net/FnqTyr45)阅读数：74
**面试算法**
作为linux运维，多多少少会碰见这样那样的问题或故障，从中总结经验，查找问题，汇总并分析故障的原因，这是一个Linux运维工程师良好的习惯。每一次技术的突破，都经历着苦闷，伴随着快乐，可我们还是执着的继续努力，从中也积累了更多的经验，这就是实践给予我们的丰厚回报。
下面汇总了我做项目过程可能出现的故障及解决方法，看看是否与你有共鸣，并对你有帮助？
**第一：常见问题解决集锦**
**1.shell脚本不执行**
问题：某天研发某同事找我说帮他看看他写的shell脚本，死活不执行，报错。我看了下，脚本很简单，也没有常规性的错误，报“:badinterpreter:Nosuchfileordirectory”错。
看这错，我就问他是不是在windows下编写的脚本，然后在上传到linux服务器的……果然。
原因：在DOS/windows里，文本文件的换行符为rn，而在*nix系统里则为n，所以DOS/Windows里编辑过的文本文件到了*nix里，每一行都多了个^M。
解决：
> 
**1）重新在linux下编写脚本；**
**2）vi:%s/r//g:%s/^M//g（^M输入用Ctrl+v,Ctrl+m）**
附：sh-x脚本文件名，可以单步执行并回显结果，有助于排查复杂脚本问题。
**2.crontab输出结果控制**
问题：
/var/spool/clientmqueue目录占用空间超过100G
原因：
cron中执行的程序有输出内容，输出内容会以邮件形式发给cron的用户，而sendmail没有启动所以就产生了/var/spool/clientmqueue目录下的那些文件，日积月累可能撑破磁盘。
解决：
> 
**1）直接手动删除：ls|xargsrm-f；**
**2）彻底解决：在cron的自动执行语句后加上>/dev/null2>&1**
**3.telnet很慢/ssh很慢**
问题：
某天研发某同事说10.50访问10.52memcached服务异常，让我们检查下看网络/服务/系统是否有异常。检查发现系统正常，服务正常，10.50ping10.52也正常，但10.50telnet10.52很慢。同时发现该机器的namesever是不起作用的。
原因：
becauseyourPCdoesn’tdoareverseDNSlookuponyourIPthen…whenyoutelnet/ftpintoyourlinuxbox,it’lldoadnslookuponyou。
解决：
> 
**1)修改/etc/hosts使hostname和ip对应；**
**2）在/etc/resolv.conf注释掉nameserver或者找一个“活的”nameserver。**
**4.Read-onlyfilesystem**
问题：
同事在mysql里建表建不成功，提示如下：
mysql>createtablewosontest(colddname1char(1));
ERROR1005(HY000):Can’tcreatetable‘wosontest’(errno:30）
经检查mysql用户权限以及相关目录权限没问题；用perror30提示信息为：OSerrorcode30:Read-onlyfilesystem
可能原因：
1）文件系统损坏；
2）磁盘又坏道；
3）fstab文件配置错误，如分区格式错误错误(将ntfs写成了fat)、配置指令拼写错误等。
解决：
> 
**1）由于是测试机，重启机器后恢复；**
**2）网上说用mount可解决。**
**5.文件删了磁盘空间没释放**
问题：
某天发现某台机器df-h已用磁盘空间为90G，而du-sh/*显示所有使用空间加起来才30G，囧。
原因：
可能某人直接用rm删除某个正在写的文件，导致文件删了但磁盘空间没释放的问题
解决：
> 
**1）最简单重启系统或者重启相关服务。**
**2）干掉进程**
**/usr/sbin/lsof|grepdeleted**
**ora25575data33uREG65,654294983680/oradata/DATAPRE/UNDOTBS009.dbf(deleted)**
**从lsof的输出中，我们可以发现pid为25575的进程持有着以文件描述号（fd）为33打开的文件/oradata/DATAPRE/UNDOTBS009.dbf。在我们找到了这个文件之后可以通过结束进程的方式来释放被占用的空间：echo>/proc/25575/fd/33**
**3）删除正在写的文件一般用cat/dev/null>file**
**6.find文件提升性能**
问题：
在tmp目录下有大量包含picture_*的临时文件，每天晚上2:30对一天前的文件进行清理。之前在crontab下跑如下脚本，但是发现脚本效率很低，每次执行时负载猛涨，影响到其他服务。
#!/bin/sh
find/tmp-name“picture_*”-mtime+1-execrm-f{};
原因：
目录下有大量文件，用find很耗资源。
解决：
> 
**#!/bin/sh**
**cd/tmp**
**time=`date-d“2dayago”“+%b%d”`**
**ls-l|grep“picture”|grep“$time”|awk‘{print$NF}’|xargsrm-rf**
**7.获取不了网关mac地址**
问题：
从2.14到3.65（映射地址2.141）网络不通，但是从3端的其他机器到3.65网络OK。
原因：
#arp
AddressHWtypeHWaddressFlagsMaskIface
192.168.3.254etherincompletCMbond0
表面现象是机器自动获取不了网关MAC地址，网络工程师说是网络设备的问题，具体不清。
解决：
> 
**arp绑定，arp-ibond0-s192.168.3.25400:00:5e:00:01:64**
**8.http服务无法启动一例**
问题：某天研发某同事说网站前端环境http无法启动，我上去看了下。报如下错：
/etc/init.d/httpdstart
Startinghttpd:[SatJan2917:49:002011][warn]moduleantibot_moduleisalreadyloaded,skipping
Useproxyforwardasremoteip:true.
Antibotexcludepattern:.*.[(js|css|jpg|gif|png)]
Antibotseedcheckpattern:login
(98)Addressalreadyinuse:make_sock:couldnotbindtoaddress[::]:7080
(98)Addressalreadyinuse:make_sock:couldnotbindtoaddress0.0.0.0:7080
nolisteningsocketsavailable,shuttingdown
Unabletoopenlog[FAILED]
原因：
1）端口被占用：表面看是7080端口被占用，于是netstat-npl|grep7080看了下发现7080没有占用；
2）在配置文件中重复写了端口，如果在以下两个文件同时写了Listen7080
/etc/httpd/conf/http.conf
/etc/httpd/conf.d/t.10086.cn.conf
解决：
> 
**注释掉/etc/httpd/conf.d/t.10086.cn.conf的Listen7080，重启，OK。**
**9.toomanyopenfile**
问题：
报toomanyopenfile错误
解决：
> 
**终极解决方案**
**echo“”>>/etc/security/limits.conf**
**echo“*softnproc65535″>>/etc/security/limits.conf**
**echo“*hardnproc65535″>>/etc/security/limits.conf**
**echo“*softnofile65535″>>/etc/security/limits.conf**
**echo“*hardnofile65535″>>/etc/security/limits.conf**
**echo“”>>/root/.bash_profile**
**echo“ulimit-n65535″>>/root/.bash_profile**
**echo“ulimit-u65535″>>/root/.bash_profile**
**最后重启机器或者执行ulimit-u655345&&ulimit-n65535**
**10.ibdata1和mysql-bin致磁盘空间问题**
问题：
2.51磁盘空间报警，经查发现ibdata1和mysql-bin日志占用空间太多（其中ibdata1超过120G，mysql-bin超过80G）
原因：
ibdata1是存储格式，在INNODB类型数据状态下，ibdata1用来存储文件的数据和索引，而库名的文件夹里的那些表文件只是结构而已。
innodb存储引擎有两种表空间的管理方式，分别是：
1）共享表空间（可拆分为多个小的表空间文件），这个是我们目前多数数据库使用的方法；
2）独立表空间，每一个表有一个独立的表空间（磁盘文件）
对于两种管理方式，各有优劣，具体如下：
①共享表空间：
优点：可以将表空间分成多个文件存放到不同的磁盘上（表空间文件大小不受表大小的限制，一个表可以分布在不同步的文件上）
缺点：所有数据和索引存放在一个文件中，则随着数据的增加，将会有一个很大的文件，虽然可以把一个大文件分成多个小文件，但是多个表及索引在表空间中混合存储，这样如果对于一个表做了大量删除操作后表空间中将有大量空隙。对于共享表空间管理的方式下，一旦表空间被分配，就不能再回缩了。当出现临时建索引或是创建一个临时表的操作表空间扩大后，就是删除相关的表也没办法回缩那部分空间了。
②独立表空间：在配置文件（my.cnf）中设置：innodb_file_per_table
特点：每个表都有自已独立的表空间；每个表的数据和索引都会存在自已的表空间中。
优点：表空间对应的磁盘空间可以被收回（Droptable操作自动回收表空间，如果对于删除大量数据后的表可以通过:altertabletbl_nameengine=innodb;回缩不用的空间。
缺点：如果单表增加过大，如超过100G，性能也会受到影响。在这种情况下，如果使用共享表空间可以把文件分开，但有同样有一个问题，如果访问的范围过大同样会访问多个文件，一样会比较慢。如果使用独立表空间，可以考虑使用分区表的方法，在一定程度上缓解问题。此外，当启用独立表空间模式时，需要合理调整innodb_open_files参数的设置。
解决:
> 
**1）ibdata1数据太大：只能通过dump，导出建库的sql语句，再重建的方法。**
**2）mysql-binLog太大：**
**①手动删除：**
**删除某个日志：mysql>PURGEMASTERLOGSTO‘mysql-bin.010′;**
**删除某天前的日志：mysql>PURGEMASTERLOGSBEFORE’2010-12-2213:00:00′;**
**②在/etc/my.cnf里设置只保存N天的bin-log日志**
**expire_logs_days=30//BinaryLog自动删除的天数**
**二、故障排查汇总表**
序号
故障点
分析与解决
**1**
Linux系统安装初始状态时，找不到硬盘，并无法进入下一步安装
进入COMS设置，找到硬盘设置的相关选项，并设置为兼容模式
**2**
Linux系统安装时，在硬盘分区完成后，无法继续安装
硬盘分区不符合安装要求，你可能忘记创建根分区或swap交换分区了，这一点与Windows系统的安装有区别
**3**
Linux系统安装时，制定安装中，软件包的选择感觉困惑，安装完成后发现不符合我们的要求，有些组件没有安装，而不需要的组件却装上了
对Linux系统的了解还太少，反复安装多次后，自然掌握自如
**4**
代理服务器的配置过程中，发现有些过滤规划未起作用
（1）先检查对应的功能模块是否加载成功（2）默认策略是否设置恰当（3）iptables命令语法是否有错（4）过滤规划顺序可能不当，需调整
**5**
代理服务器和防火墙的配置完成后，启动服务，可以访问Internet，但不能访问DMZ区的服务
（1）关闭iptables服务，看是否可以访问，如果不能，检查连通性，若能访问，说明iptables规则有问题，集中检查过滤规则的配置与顺序
**6**
再次配置好iptables过滤规则后，重启iptables服务后，发现原有的规则全部丢失
（1）修改/etc/sysconfig/iptables-config配置文件，将IPTABLES_SAVE_ON_RESTART=”no”改为yes（2）用iptables-save > /etc/sysconfig/iptables命令保存
**7**
在交换机上划分VLAN后，不能访问外网
VLAN的网关未设置或设置不正确
**8**
在配置DNS服务中，named服务无法启动
造成问题可能性：（1）/etc/named目录下缺少必要文件（2）/var/named目录下缺少必要文件（3）named账户权限问题。解决方法：缺少的文件必须复制到位，启动文件必须将权限设置为named账户和组账户
**9**
在配置DNS服务中，无法正确解析域名或IP地址
（1）检查并修改/var/named下的正向解析区文件和反向解析区文件中的语法与记录设置（2）检查/etc/named.conf配置中的zone区域声明编写是否有误（3）检查是否安装了bind-chroot软件包，如安装了，区域数据库文件应在/var/named/chroot/var/named目录中（4）检查/etc/resolv.conf配置文件是否设定了正确的nameserver
**10**
dhcpd服务启动时，提示“No subnet declaration for eth0(10.10.10.2)”
说明eth0的IP地址设置不对，不在dhcp服务的作用域范围内，必须将eth0的IP设置为作用域范围内的IP地址
**11**
在配置DHCP服务时，配置了多个作用域，结果只有一个作用域的地址可以分配，其他不能分配成功
说明主机的网络接口卡只有一个，如有3个作用域，需配置3个网卡接口eth0、eth1和eth2，分别对应3个作用域。这是使用超级作用域的一种配置方法
**12**
MySQL数据库的安装不能成功，总是提示软件的依赖关系，造成所要安装的软件包不能顺利安装
说明所要安装的软件包需要其他组件或共享库的支持，MySQL的rpm包安装方式本身就繁琐一些，要求安装的软件包比较多，包之间的依赖关系非常明显，根据提示找到需要的组件包并安装，安装时要注意软件包顺序
**13**
测试Web服务，访问主站点时，无网页出现，但已经连接上服务器
在httpd.conf主配置文件中的“DocumentRoot”选项的设置不当，如/var/www/html/，最后的“/”不能加
**14**
远程客户端无法访问samba共享目录，共享目录在本地测试成功
关闭iptables服务
**15**
Samba的smb服务已经启动成功，访问samba某个共享目录时，提示错误信息“NT_STATUS_BAD_NETWORK_NAME”
说明共享目录没有创建或不存在
**16**
Samba的smb服务已经启动成功，提示错误信息“NT_STATUS_ACCESS_DENIED”
提示访问被拒绝，可能是登录的用户名或密码有误，或是iptables启动了，关闭防火墙
**17**
Samba的smb服务已经启动成功，提示错误信息“NT_STATUS_LOGON_FAILURE”
不允许当前用户访问当前共享目录，说明此共享目录设置只允许特定用户访问
**18**
FTP服务配置了本地用户上传，但在上传数据到对应目录时，提示被拒绝
可能该用户账户对上传目录没有写权限
**19**
配置允许本地账户登录FTP后，root账户无法登录，并提示“500 OOPS：cannot change directory:/root”的错误信息，而其他本地账户可以登录FTP
检查是否启用了SELinux安全系统，并禁止SELinux，可以编辑/etc/selinux/config文件，将配置项SELINUX=enforcing改为disabled
**20**
使用邮件客户端可以发送邮件，但不能接收邮件
检查pop3服务是否启动
**21**
mount命令挂载NFS服务的共享目录，很久也没有响应，NFS服务是正常的
portmap服务没有启动，必须启动该服务
**22**
本地测试mount挂载NFS共享成功，但在其他客户主机mount连接时不成功
关闭iptables服务，再测试
∑编辑 | Gemini
来源 | IT生涯
更多精彩：
☞  [哈尔莫斯：怎样做数学研究](http://mp.weixin.qq.com/s?__biz=MzA5ODUxOTA5Mg==&mid=2652554187&idx=1&sn=35143b89b06fe4f5273f210b2d6a7c91&chksm=8b7e3290bc09bb86f7bb3f158d993df3f019a7e9ce3bc8897e164e35a2ebe5a4e0bdcc111089&scene=21#wechat_redirect)
☞  [扎克伯格2017年哈佛大学毕业演讲](http://mp.weixin.qq.com/s?__biz=MzA5ODUxOTA5Mg==&mid=2652554187&idx=2&sn=c75293463823e4d6769638e54b64f3ec&chksm=8b7e3290bc09bb86dc1e3f8e78d0b6de8811d75f3dcb092766fcb8ba0bab1cd9ba1ddfcef3b9&scene=21#wechat_redirect)
☞  [线性代数在组合数学中的应用](http://mp.weixin.qq.com/s?__biz=MzA5ODUxOTA5Mg==&mid=2652554141&idx=1&sn=74a74c4e4d08eba0dd734528aa0b08e7&chksm=8b7e32c6bc09bbd073b34c22004ac6e4d99c8a0caa64c7d3dbaa8fd55e6ef1fc87ed545b8b7e&scene=21#wechat_redirect)
☞  [你见过真的菲利普曲线吗？](http://mp.weixin.qq.com/s?__biz=MzA5ODUxOTA5Mg==&mid=2652554105&idx=1&sn=224ab0d38fb57facea70081385360d58&chksm=8b7e3222bc09bb34d3b6df665087e64b233778ed427598d08e809f96261e898c1c0de6188bbc&scene=21#wechat_redirect)
☞  [支持向量机(SVM)的故事是这样子的](http://mp.weixin.qq.com/s?__biz=MzA5ODUxOTA5Mg==&mid=2652554096&idx=1&sn=46783e6ace661a3ccbd8a6e00fb17bf9&chksm=8b7e322bbc09bb3d73dc240f2280bddf2ef8b7824a459a24bd7f6eeadd60edb96e690d467f6e&scene=21#wechat_redirect)
☞  [深度神经网络中的数学，对你来说会不会太难？](http://mp.weixin.qq.com/s?__biz=MzA5ODUxOTA5Mg==&mid=2652554077&idx=2&sn=3ecd63f2205fd59df8c360c97c943ef6&chksm=8b7e3206bc09bb10a36b09547efe0c54f41423b180622c1fdc7f14747ccc8f8fecee3a12e2cd&scene=21#wechat_redirect)
☞  [编程需要知道多少数学知识？](http://mp.weixin.qq.com/s?__biz=MzA5ODUxOTA5Mg==&mid=2652554062&idx=1&sn=17f0a88d5e15d1adfc29c690a0b1b89b&chksm=8b7e3215bc09bb038c6caa59d0f49cedd929f9be1104beea3411186cf4c81de69efc71a17883&scene=21#wechat_redirect)
☞  [陈省身——什么是几何学](http://mp.weixin.qq.com/s?__biz=MzA5ODUxOTA5Mg==&mid=2652553994&idx=2&sn=74f67a1a3ac5c705f51f2ba619b717f6&chksm=8b7e3251bc09bb47dce73319948780081efe0333ffae99ea04a9eeabbcfcb38a29b4b73fb7c1&scene=21#wechat_redirect)
☞  [模式识别研究的回顾与展望](http://mp.weixin.qq.com/s?__biz=MzA5ODUxOTA5Mg==&mid=2652553949&idx=2&sn=d171680964df774397efd9db81c00347&chksm=8b7e3386bc09ba90bf0f6e1cabf82ba86ff94630cb5ee2e0f14ff9455db52be32ddbc289d237&scene=21#wechat_redirect)
☞  [曲面论](http://mp.weixin.qq.com/s?__biz=MzA5ODUxOTA5Mg==&mid=2652553747&idx=1&sn=e25f866d510cf2338b6d9e1b32bafb62&chksm=8b7e3348bc09ba5ea1caaf2a7bfcd80a7e7559b1983e473eda2206e56df7f38ef3cecf2f77c7&scene=21#wechat_redirect)
☞  [自然底数e的意义是什么？](http://mp.weixin.qq.com/s?__biz=MzA5ODUxOTA5Mg==&mid=2652553811&idx=1&sn=000305074471c3d4c681c9cfd4e4bc93&chksm=8b7e3308bc09ba1e3043f5568a3a75a045285a1de97e4da36918bac68e7c6d579ad5d8cc25ab&scene=21#wechat_redirect)
☞  [如何向5岁小孩解释什么是支持向量机（SVM）？](http://mp.weixin.qq.com/s?__biz=MzA5ODUxOTA5Mg==&mid=2652553670&idx=1&sn=ea75a448c016f7229e4cb298f6017614&chksm=8b7e309dbc09b98bc622acdf1223c7c2f743609d0a577dd43c9e9d98ab4da4314be7c1002bd5&scene=21#wechat_redirect)
☞  [华裔天才数学家陶哲轩自述](http://mp.weixin.qq.com/s?__biz=MzA5ODUxOTA5Mg==&mid=2652553646&idx=2&sn=bbf8f1be1ca1c66ad3f3270babea6885&chksm=8b7e30f5bc09b9e3e1a4fa735412e2fcb20df9e78f2f346bf578018ceab77de6326095d1bf71&scene=21#wechat_redirect)
☞  [代数，分析，几何与拓扑，现代数学的三大方法论](http://mp.weixin.qq.com/s?__biz=MzA5ODUxOTA5Mg==&mid=2652553596&idx=1&sn=bc5064e871831f862db6d19c3de6327e&chksm=8b7e3027bc09b93194fa09b25e2df400421c062927bb9120912875f8aaf0bb25553fc8f51e3b&scene=21#wechat_redirect)
![640?wx_fmt=png](https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/951TjTgiabky7x6u1VxMVMia4MLibNzC2nrumY3zDflTsCeoM04M1BrkvPny8tsw6hYkIicUr42iarLmadL2x6JwV6A/640?wx_fmt=png)
算法数学之美微信公众号欢迎赐稿
稿件涉及数学、物理、算法、计算机、编程等相关领域，经采用我们将奉上稿酬。
投稿邮箱：math_alg@163.com
