# 【算法题】不等式数列 - xiaxzhou的博客 - CSDN博客





2017年06月03日 12:06:54[xiaxzhou](https://me.csdn.net/xiaxzhou)阅读数：264








> 
度度熊最近对全排列特别感兴趣,对于1到n的一个排列,度度熊发现可以在中间根据大小关系插入合适的大于和小于符号(即 ‘>’ 和 ‘<’ )使其成为一个合法的不等式数列。但是现在度度熊手中只有k个小于符号即(‘<”)和n-k-1个大于符号(即’>’),度度熊想知道对于1至n任意的排列中有多少个排列可以使用这些符号使其为合法的不等式数列。 

**输入描述:**

  输入包括一行,包含两个整数n和k(k < n ≤ 1000)

**输出描述:**

  输出满足条件的排列数,答案对2017取模。

**输入例子:**

  5 2

**输出例子:**

  66

使用dp[i][j]  表示n为i，k为j 时  合法排列的个数

当n从i增加到i+1时，分为两种情况：
- 
i+1插入到排列的**最左侧** 或者 插入到排列中任意**小于号所在的位置**，

- 
i+1插入到排列的**最右侧** 或者 插入到排列中任意**大于号所在的位置**。


-

例如：dp[4][2] 的一个排列为：

$2>1<3<4$

插入情况1有：  

最左侧：

$5>2>1<3<4$

 小于号： 


$2>1<3<5>4$


$2>1<5>3<4$

插入情况2有：  
最右侧：

$2>1<3<4<5$

大于号： 


$2<5>1<3<4$
### 状态转换：
- 对于插入**情况1**： i+1插入到排列的**最左侧** 或者 插入到排列中任意**小于号所在的位置**

> 
” “变为”(i-1)>”    或者   “<” 变为”<(i-1)>”：


*增加了一个大于号，而小于号个数不变*；每个排列有j个小于号，加上最左侧，共有(j+1)种插入方式： 


$dp[i + 1][j] += dp[i][j] * (j + 1);$
- 对于插入**情况2**：i+1插入到排列的**最右侧** 或者 插入到排列中任意**大于号所在的位置**

> 
” “变为”<(i-1)”    或者   “>” 变为”<(i-1)>”：


*增加了一个小于号，而大于号个数不变*；每个排列有n-j-1个大于号，加上最右侧，共有种(i-j-1+1)种插入方式：



$dp[i + 1][j + 1] += dp[i][j] * (i - j);$

**初始边界状态**：dp[1][0] = 1

```cpp
#include <iostream>
#include <vector>
#include <numeric>
#include<algorithm>
using namespace std;

//#define debug_

int func(int n,int k)
{
    vector<vector<int>> dp;
    dp.resize(n+2);
    for (auto i = 0; i < dp.size();++i)
    {
        dp[i].resize(k+2);
    }
    dp[1][0] = 1;

    for (auto i = 0; i <= n;++i)
    {
        for (auto j = 0; j < i&&j<=k;++j)
        {
            if (i+1 <= n)
            {
                dp[i + 1][j] += dp[i][j] * (j + 1);
                dp[i + 1][j] = dp[i + 1][j] % 2017;
             }
            if (i+1<=n&&j+1<=k)
            {
                dp[i + 1][j + 1] += dp[i][j] * (i - j);
                dp[i + 1][j+1] = dp[i + 1][j+1] % 2017;
             }
        }
    }

    return dp[n][k]%2017;
}


int main()
{
    int n;
    int k;

#ifdef debug_
    n = 472;
    k = 319;
#else
    cin >> n;
    cin>>k;
#endif
    cout << func(n,k) << endl;
    return 0;
}
```






