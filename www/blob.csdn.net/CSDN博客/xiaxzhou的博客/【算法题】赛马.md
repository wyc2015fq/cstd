# 【算法题】赛马 - xiaxzhou的博客 - CSDN博客





2017年06月15日 17:29:27[xiaxzhou](https://me.csdn.net/xiaxzhou)阅读数：906








# 赛马

> 
在一条无限长的跑道上，有N匹马在不同的位置上出发开始赛马。当开始赛马比赛后，所有的马开始以自己的速度一直匀速前进。每匹马的速度都不一样，且全部是同样的均匀随机分布。在比赛中当某匹马追上了前面的某匹马时，被追上的马就出局。 请问按以上的规则比赛无限长的时间后，赛道上剩余的马匹数量的数学期望是多少 

**输入描述:**

  每个测试输入包含1个测试用例 

  输入只有一行，一个正整数N 

  1 <= N <= 1000
**输出描述:**

  输出一个浮点数，精确到小数点后四位数字，表示剩余马匹数量的数学期望

**输入例子:**

  1 

  2
**输出例子:**

  1.0000 

  1.5000
将马匹按速度**由高到低排序**，使用F(n)表示前n匹马的期望

第n匹马的速度最低，只有在第一个位置才能不被淘汰 


$F(n) = \frac{1}{n}(F(n-1)+1)+\frac{n-1}{n}F(n-1)$

可得： 


$F(n)=\frac{1}{n}+F(n-1) = \frac{1}{n}+\frac{1}{n-1}+...$
```cpp
#include <iostream>
#include <string>
#include <vector>
#include <algorithm>
#include <numeric>
#include <iomanip>

using namespace std;
//#define debug_

double func(int n)
{
    double f(0);
    for (auto i = 1; i <= n; ++i)
    {
        f += 1. / i;
    }
    return f;
}

int main()
{
    int n;
#ifdef debug_
    n = 13;
#else
    cin>>n;
#endif
    cout << fixed << setprecision(4)<< func(n) << endl;

    return 0;
}
```








