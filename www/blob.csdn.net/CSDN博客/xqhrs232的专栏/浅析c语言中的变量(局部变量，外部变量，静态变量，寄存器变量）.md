# 浅析c语言中的变量(局部变量，外部变量，静态变量，寄存器变量） - xqhrs232的专栏 - CSDN博客
2012年10月25日 21:07:09[xqhrs232](https://me.csdn.net/xqhrs232)阅读数：705
个人分类：[C/C++/VC++/VS](https://blog.csdn.net/xqhrs232/article/category/906934)
原文地址::[http://blog.csdn.net/qmhlan/article/details/6629360](http://blog.csdn.net/qmhlan/article/details/6629360)
c语言中变量分为四类，分别是
> 
1.auto   自动变量
> 
2.static   静态存贮分配变量（又分为内部静态和外部静态）
> 
3.extern  全程变量（用于外部变量说明）
> 
4.register  寄存器变量（分配在硬件寄存器中）
四大类，所有变量必须先说明（定义），后使用。
下面分别介绍
**1.自动变量（局部变量）**
> 
**局部变量**：在一个函数开头或段开头处说明的变量，
它有几个特征，,
> 
> 
a、作用域为定义它的函数
b、编译器不会对自动变量给予隐含的初值，故其值不确定，因此每次使用前必须明确的置初值。
c、形参是自动变量，作用域仅限于相应函数内
d、自动变量随函数的引用而存在和消失，由一次调用到下一次调用之间不保持值。
**[plain]**[view plain](http://blog.csdn.net/qmhlan/article/details/6629360#)[copy](http://blog.csdn.net/qmhlan/article/details/6629360#)[print](http://blog.csdn.net/qmhlan/article/details/6629360#)[?](http://blog.csdn.net/qmhlan/article/details/6629360#)
- #include <stdio.h>  
- 
- void print_number (int x, int y)   
- {  
-          int m,sum;  
-          for(m = x;m<y;m++) {  
-                  sum +=m;  
-         }  
-         printf("%d\n",sum);  
- }  
- 
- void main(void)   
- {  
-      print_number(3,5);  
-      print_number(3,5);  
- }  
这个程序打印的值均不正确，因为sum未赋初值，造成了打印的数为随机数。 我们把sum赋初值为0再执行以下，结果就正确了，这个程序说明局部变量必须要先赋初值再使用，另外说明局部变量的生命周期为函数调用时开始，函数调用完成时消亡。
**2.外部变量**：在函数外部定义的变量即为外部变量，它的作用域是整个程序（全程变量）。
> 
> 
> 
> 
a.    c程序可以分别放在几个文件上，每个文件可以作为一个编译单位分别进行编译。外部变量只需在某个文件上定义一次，其它文件若要引用此变量时，应用extern加以说明（外部变量定义时不必加extern关键字）。
b.   在同一文件中，若前面的函数要引用后面定义的外部（在函数之外）变量时，在函数里加extern加以说明。
> 
> 
> 
引进外部变量的原因：解决函数单独编译的协调；与变量初始化有关；外部变量的值是永久的；解决数据共享；
> 
> 
> 
> 
注意：函数本身也被认为是外部变量
> 
> 
**3.静态变量：**分为内部静态变量和外部静态变量
> 
内部静态变量：a.在局部变量前加上static就为内部静态变量
> 
> 
> 
b.静态局部变量仍是局部变量，其作用域仍在定义它的函数范围内，但它采用静态存贮分配（由编译程序在编译时分配，而一般的自动变量和函数形参均采用动态存贮分配，即在运行时分配空间），当函数执行完，返回调用点时，该变量并不撤销，再次调用时，其值将继续存在。
外部静态变量：a.在函数外部定义的变量前加static即为外部静态变量
> 
> 
> 
b.作用域为定义它的文件，即成为该文件的私有变量，其他文件上的函数一律不得直接访问，除非通过它所在文件上的函数进行操作，这可实现数据隐          藏。
> 
> 
> 
**4.寄存器变量：**只有自动（局部）变量和函数参数才能进一步指定为寄存器存贮类
> 
> 
a.使用register变量可以提高存取速度，但寄存器变量的数目依赖于具体机器，声明多了也只有前几个有效。
b.只限于int,char,short ,unsigned和指针类型用寄存类。
c.不能对register变量取地址（即&操作）
![](http://hi.csdn.net/attachment/201107/24/0_1311487180t07w.gif)
> 
> 
**变量的初始化：**
> 
> 
> 
外部变量和静态变量由编译程序给予隐含的初始值0；
> 
> 
局部变量的初始化每进入函数便初始化一次。
> 
> 
外部或静态变量仅在编译时初始化一次。
> 
> 
自动变量或寄存器变量只能显示初始化，否则将有不确定的值。
> 
> 
外部数据的说明，如果带有初始化项，则当成一个定义。
在c语言中函数不能嵌套定义，但是变量可以嵌套定义。
> 
> 
> 
**inti = 0;**
> 
> 
**main( )**
> 
> 
**{**
> 
> 
> 
> 
**inti = 1;**
> 
> 
> 
**printf(“i=%d, ”, i);**
> 
> 
> 
> 
**{**
> 
> 
> 
> 
> 
**inti = 2;**
> 
> 
> 
> 
> 
**printf(“i=%d, ”, i);**
**{**
> 
> 
> 
> 
> 
> 
**i += 1;**
> 
> 
> 
> 
> 
**printf(“i=%d, ”, i);**
**}**
> 
> 
> 
> 
> 
**printf(“i=%d, ”, i);**
> 
> 
> 
> 
**}**
> 
> 
> 
> 
**printf(“i=%d\n ”, i);**
> 
> 
> 
**}**
**结果：i=1, i=2, i=3, i=3, i=1**
