# 眼图——概念与测量（摘记） - xqhrs232的专栏 - CSDN博客
2017年02月19日 12:14:21[xqhrs232](https://me.csdn.net/xqhrs232)阅读数：754
个人分类：[PCB/EDA/硬件设计与仿真](https://blog.csdn.net/xqhrs232/article/category/906926)
原文地址::[http://www.cnblogs.com/sleepy/archive/2011/09/03/2165783.html](http://www.cnblogs.com/sleepy/archive/2011/09/03/2165783.html)
相关文章
1、眼图的定义与测量方法----[http://wenku.baidu.com/link?url=CsDtXLmicGWlOJCMbYslPEkn9-U5FvXN_ubqo9--f-GdXIwmt0gA8ygslwMBANepClvr39JYKpfjLzgjr_IEdIJmCgKf3pn6DD0ewJvsVKG](http://wenku.baidu.com/link?url=CsDtXLmicGWlOJCMbYslPEkn9-U5FvXN_ubqo9--f-GdXIwmt0gA8ygslwMBANepClvr39JYKpfjLzgjr_IEdIJmCgKf3pn6DD0ewJvsVKG)
2、眼图基础知识----[http://wenku.baidu.com/link?url=mx3WTtFLHJ0mAkeuOqYE4LRRH0-2Lrz0ydYv4sJ3fWpoiM27rGgmvME5sMwub0G-O3TXbyAkiHYia4p5aUdCF7LkOzomHtB0huDUceOyy_u](http://wenku.baidu.com/link?url=mx3WTtFLHJ0mAkeuOqYE4LRRH0-2Lrz0ydYv4sJ3fWpoiM27rGgmvME5sMwub0G-O3TXbyAkiHYia4p5aUdCF7LkOzomHtB0huDUceOyy_u)
3、眼图的真正作用----[http://wenku.baidu.com/link?url=F5hNCaR6pGQWfruSOtqENSVrMqpkAOU_QCAej00V-BPsd42roPRDOyEB5hcWVzOVmcMX7HHiK_Las8Fhi5GarANPTxbfhg-8uIuPnaFfFNq](http://wenku.baidu.com/link?url=F5hNCaR6pGQWfruSOtqENSVrMqpkAOU_QCAej00V-BPsd42roPRDOyEB5hcWVzOVmcMX7HHiK_Las8Fhi5GarANPTxbfhg-8uIuPnaFfFNq)
4、眼图的概念----[https://zhidao.baidu.com/question/1735709742475132507.html](https://zhidao.baidu.com/question/1735709742475132507.html)
中文名称：
眼图
英文名称：
eye diagram;eye pattern
定义：
示波器屏幕上所显示的数字通信符号,由许多波形部分重叠形成，其形状类似“眼”的图形。“眼”大表示系统传输特性好；“眼”小表示系统中存在符号间干扰。
## 一．概述
“在实际数字互连系统中，完全消除码间串扰是十分困难的，而码间串扰对误码率的影响目前尚无法找到数学上便于处理的统计规律，还不能进行准确计算。为了衡量基带传输系统的性能优劣，在实验室中，通常用示波器观察接收信号波形的方法来分析码间串扰和噪声对系统性能的影响，这就是眼图分析法。
在无码间串扰和噪声的理想情况下，波形无失真，每个码元将重叠在一起，最终在示波器上看到的是迹线又细又清晰的“眼睛”，“眼”开启得最大。当有码间串扰时，波形失真，码元不完全重合，眼图的迹线就会不清晰，引起“眼”部分闭合。若再加上噪声的影响，则使眼图的线条变得模糊，“眼”开启得小了，因此，“眼”张开的大小表示了失真的程度，反映了码间串扰的强弱。由此可知，眼图能直观地表明码间串扰和噪声的影响，可评价一个基带传输系统性能的优劣。另外也可以用此图形对接收滤波器的特性加以调整，以减小码间串扰和改善系统的传输性能。    
 通常眼图可以用下图所示的图形来描述，由此图可以看出：
![wps_clip_image-4500](http://images.cnblogs.com/cnblogs_com/sleepy/201109/201109032057169026.png)
    （1）眼图张开的宽度决定了接收波形可以不受串扰影响而抽样再生的时间间隔。显然，最佳抽样时刻应选在眼睛张开最大的时刻。
    （2）眼图斜边的斜率，表示系统对定时抖动（或误差）的灵敏度，斜率越大，系统对定时抖动越敏感。
（3）眼图左（右）角阴影部分的水平宽度表示信号零点的变化范围，称为零点失真量，在许多接收设备中，定时信息是由信号零点位置来提取的，对于这种设备零点失真量很重要。
(4）在抽样时刻，阴影区的垂直宽度表示最大信号失真量。
（5）在抽样时刻上、下两阴影区间隔的一半是最小噪声容限，噪声瞬时值超过它就有可能发生错误判决。
（6）横轴对应判决门限电平。 *”*
二、眼图的一些基本概念 
      —    “什么是眼图？”
       “眼图就是象眼睛一样形状的图形。![wps_clip_image-3407](http://images.cnblogs.com/cnblogs_com/sleepy/201109/201109032057211506.png)
图五 眼图定义” 
眼图是用余辉方式累积叠加显示采集到的串行信号的比特位的结果，叠加后的图形形状看起来和眼睛很像，故名眼图。眼图上通常显示的是1.25UI的时间窗口。眼睛的形状各种各样，眼图的形状也各种各样。通过眼图的形状特点可以快速地判断信号的质量。
图六的眼图有“双眼皮”，可判断出信号可能有串扰或预（去）加重。
![wps_clip_image-3991](http://images.cnblogs.com/cnblogs_com/sleepy/201109/20110903205724724.png)
图六“双眼皮”眼图
图七的眼图“眼睛里布满血丝”，这表明信号质量太差，可能是测试方法有错误，也可能是PCB布线有明显错误。
![wps_clip_image-6151](http://images.cnblogs.com/cnblogs_com/sleepy/201109/201109032057333318.png)
图七 “眼睛布满血丝”的眼图
图八的眼图非常漂亮，这可能是用采样示波器测量的眼图。
![wps_clip_image-16848](http://images.cnblogs.com/cnblogs_com/sleepy/201109/201109032057352469.png)
图八 最漂亮的“眼睛”
由于眼图是用一张图形就完整地表征了串行信号的比特位信息，所以成为了衡量信号质量的最重要工具，眼图测量有时侯就叫“信号质量测试（Signal Quality Test,SQ Test）”。
 此外，眼图测量的结果是合格还是不合格，其判断依据通常是相对于**“模板（Mask）”**而言的。模板规定了串行信号“1”电平的容限，“0”电平的容限，上升时间、下降时间的容限。所以眼图测量有时侯又被称为“模板测试（Mask
 Test）”。 模板的形状也各种各样，通常的NRZ信号的模板如图五和图八蓝色部分所示。
在串行数据传输的不同节点,眼图的模板是不一样的，所以在选择模板时要注意具体的子模板类型。 如果用发送端的模板来作为接收端眼图模板，可能会一直碰模板。但象以太网信号、E1/T1的信号，不是NRZ码形，其模板比较特别。当有比特位碰到模板时，我们就认为信号质量不好，需要调试电路。有的产品要求100%不能碰模板，有的产品是允许碰模板的次数在一定的概率以内。（有趣的是，眼图85%通过模板的产品，功能测试往往是没有问题的，譬如我在用的电脑网口总是测试不能通过，但我上网一直没有问题。
 这让很多公司觉得不用买示波器做信号完整性测试以一样可以做出好产品来，至于山寨版的，更不会去买示波器测眼图了。）示波器中有测量参数可自动统计出碰到模板的次数。此外，根据“侵犯”模板的位置就能知道信号的哪方面有问题从而指导调试。如图九表明信号的问题主要是下降沿太缓，图十表明1电平和0电平有“塌陷”，可能是ISI问题导致的。
![wps_clip_image-26711](http://images.cnblogs.com/cnblogs_com/sleepy/201109/201109032057415081.png)
图九 下降沿碰到模板的眼图
![wps_clip_image-393](http://images.cnblogs.com/cnblogs_com/sleepy/201109/201109032057477345.png)
图十“1”电平和“0”电平有“塌陷”的模板
和眼图相关的眼图参数有很多，如眼高、眼宽、眼幅度、眼交叉比、“1”电平，“0”电平，消光比，Q因子，平均功率等。图十二表示幅度相关的测量参数的定义。
![wps_clip_image-26194](http://images.cnblogs.com/cnblogs_com/sleepy/201109/201109032057587388.png)
图十一 眼图参数定义
“1”电平和”0”电平表示选取眼图中间的20%UI部分向垂直轴投影做直方图，直方图的中心值分别为“1”电平和“0”电平。眼幅度表示“1”电平减去“0”电平。上下直方图的3sigm之差表示眼高。图十二、十三、十四，十五表示了其它一些眼图参数的定义，一目了然，在此不再一一描述。
![wps_clip_image-25292](http://images.cnblogs.com/cnblogs_com/sleepy/201109/201109032058021438.png)
图十二眼图参数定义
![wps_clip_image-30991](http://images.cnblogs.com/cnblogs_com/sleepy/201109/201109032058067166.png)
图十三眼图参数定义
![wps_clip_image-11941](http://images.cnblogs.com/cnblogs_com/sleepy/201109/201109032058124446.png)
图十四眼图参数定义
![wps_clip_image-4725](http://images.cnblogs.com/cnblogs_com/sleepy/201109/201109032058188388.png)
图十五 眼图参数定义
三、眼图测量方法（传统眼图测量方法）
     之前谈到，眼图测量方法有两种：传统眼图测量方法用中文来理解是八个字：“同步触发+叠加显示”，现代眼图测量方法用中文来理解也是八个字：“同步切割+叠加显示”。
 两种方法的差别就四个字：传统的是用触发的方法，现代的是用切割的方法。“同步”是准确测量眼图的关键，传统方法和现代方法同步的方法是不一样的。“叠加显示”
 就是用模拟余辉的方法不断累积显示。
    传统的眼图方法就是同步触发一次，然后叠加一次。每触发一次，眼图上增加了一个UI，每个UI的数据是相对于触发点排列的，因此是每触发一次眼图上只增加了一个比特位。图一形象表示了这种方法形成眼图的过程。
![wps_clip_image-20545](http://images.cnblogs.com/cnblogs_com/sleepy/201109/201109032058221043.png)
图一传统眼图测量方法的原理
    传统方法的第一个缺点就是效率太低。对于现在的高速信号如PCI-Express
 Gen2，PCI-SIG要求测量1百万个UI的眼图，用传统方法就需要触发1百万次，这可能需要几个小时才能测量完。第二个缺点是，由于每次触发只能叠加一个UI,形成1百万个UI的眼图就需要触发1百万次，这样不断触发的过程中必然将示波器本身的触发抖动也引入到了眼图上。对于2.5GBbps以上的高速信号，这种触发抖动是不可忽略的。
    如何同步触发，也就是说如何使每个UI的数据相对于触发点排列？也有两种方法，一种方法是在被测电路板上找到和串行数据同步的时钟，将此时钟引到示波器作为触发源，时钟的边沿作为触发的条件。另外一种方法是将被测的串行信号同时输入到示波器的输入通道和硬件时钟恢复电路(CDR)通道，硬件CDR恢复出串行数据里内嵌的时钟作为触发源。这种同步方法引入了CDR抖动，这是传统方法的第三个缺点。此外，硬件CDR只能侦测连续串行信号才能工作正常，如果被测信号不是连续的，譬如两段连续比特位之间有一段低电平，硬件CDR就不能恢复出正确的时钟。另外，传统方法的工作原理决定了它不能对间歇性的串行信号做眼图，不能对保存的波形做眼图，不能对运算后的波形做眼图，这限制了应用范围。这是传统方法的第四个缺点。

