# 第10章PADS Layout的元器件的布局 - xqhrs232的专栏 - CSDN博客
2013年07月17日 21:28:02[xqhrs232](https://me.csdn.net/xqhrs232)阅读数：3495
原文地址::[http://wenku.baidu.com/view/4cd0b80a763231126edb1125](http://wenku.baidu.com/view/4cd0b80a763231126edb1125)
第10章 PADS Layout的元器件的布局
PADS Layout是复杂的、高速印制电路板的设计环境。它是一个强有力的基于形状化(shape-based)、规则驱动(rules-driven)的布局设计方案。PADS Layout的布局可以通过自动和手工两种方式来进行。
本章将从布局规则开始，对如何利用PADS2007软件实现元件布局进行详细的介绍，使读者对手动布局和自动布局有一个比较全面的了解。
10.1 布局规则介绍
在PCB设计中，PCB布局是指对电子元器件在印刷电路上如何规划及放置的过程，它包括规划和放置两个阶段。合理的布局是PCB设计成功的第一步，布局结果的好坏将直接影响到布线的效果和可制造性。不恰当的布局可能导致整个设计的失败或生产效率降低。在PCB设计中，关于如何合理布局应当考虑PCB的可制性、合理布线的要求、某种电子产品独有的特性等。
10.1.1 PCB的可制造性与布局设计
PCB的可制造性是说设计出的PCB要符合电子产品的生产条件。如果是试验产品或者生产量不大需要手工生产，可以较少考虑；如果需要大批量生产，需要上生产线生产的产品，则PCB布局就要做周密的规划。需要考虑贴片机、插件机的工艺要求及生产中不同的焊接方式对布局的要求，严格遵照生产工艺的要求，这是设计批量生产的PCB应当首先考虑的。
当采用波峰焊时，应尽量保证元器件的两端焊点同时接触焊料波峰。当尺寸相差较大的片状元器件相邻排列，且间距很小时，较小的元器件在波峰焊时应排列在前面，先进入焊料池。还应避免尺寸较大的元器件遮蔽其后尺寸较小的元器件，造成漏焊。板上不向组件相邻焊盘图形之间的最小间距应在1mm以上。
元器件在PCB板上的排向，原则上是随元器件类型的改变而变化，即同类元器件尽可能按相同的方向排列，以便元器件的贴装、焊接和检测。布局时，DIP封装的汇摆放的方向必须与过锡炉的方向垂直，不可平行，如图10-1所示。如果布局上有困难，可允许水平放置IC(SOP封装的IC摆放方向与DIP相反)。
SOL 正确
错误
图10-1   DIP封装与IC摆放的方向与过锡炉的方向垂直
回流焊几乎适用于所有贴片元件的焊接，波峰焊则只适用于焊接矩形片状元件、圆柱形元器件、SOT和较小的SOP（管脚数小于28、脚间距在1mm以上）。当采用波峰焊接SOP等多脚元件时，应在锡流方向最后两个（每边各一个）焊脚外设置窃锡焊盘，防止连焊。鉴于生产的可操作性，对于双面需要放置元器件的PCB整体设计而言，应尽可能按以下顺序优化。
(1)双面贴装，在PCB的A面布放贴片元件和插装元件，B面布放适合于波峰焊的贴片元件。
(2)双面混装，在PCB的A面布放贴片元件和插装元件，B面布放有需回流焊的贴片元件。
元件布置的有效范围：在设计需要到生产线上生产的PCB板时，X,Y方向均要留出传送边，每边3.5mm，如不够，需另加工艺传送边。在印刷电路板中位于电路板边缘的元器件离电路板边缘一般不小于2mm。电路板的最佳形状为矩形，长宽比为3:2或4:3。电路板面尺寸大于200mm×150mm时，应考虑电路板所受的机械强度。为了精密地贴装元器件，可根据需要设计用于整块PCB的光学定位的一组图形（基准标志），用于引脚数多、引脚间距小的单个器件的光学定位图形（局部基准标志）。基准标志常用图形有：■、●、▲、+，大小在0.5～2.0mm范围内，置于PCB或单个器件的对角线对称方向位置。基准标志要考虑PCB材料颜色与环境的反差，通常设置成焊盘样，即覆铜或镀铅锡合金。对于拼板，由于模板冲压偏差，可能形成板与板之间间距不一致，最好在每块拼板上都设基准标志，让机器将每块拼板当做单板看待。
在PCB设计中，还要考虑导通孔对元器件布局的影响，避免在表面安装焊盘以内，或在距表面安装焊盘0.635mm以内设置导通孔。如果无法避免，需用阻焊剂将焊料流失通道阻断。作为测试支撑导通孔，在设计布局时，需充分考虑不同直径的探针，进行自动在线测试（ATE）时的最小间距。
10.1.2 电路的功能单元与布局设计
PCB中的布局设计中要分析电路中的电路单元，根据其功能合理地进行布局设计，对电路的全部元器件进行布局时，要符合以下原则：
(1)按照电路的流程安排各个功能电路单元的位置，使布局便于信号流通，并使信号尽可能保持一致的方向。
(2)以每个功能电路的核心元件为中心，围绕它来进行布局。元器件应均匀、整齐、紧凑地排列在PCB上；尽量减少和缩短各元器件之间的引线和连接。
(3)在高频下工作的电路，要考虑元器件之间的分布参数。一般电路应尽可能使元器件平行排列。这样，不但美观，而且装焊容易，易于批量生产。
10.1.3 特殊元器件与布局设计
在PCB设计中，特殊的元器件是指高频部分的关键元器件、电路中的核心器件、易受干扰的元器件、带高压的元器件、发热量大的器件以及一些异形元器件等。这些特殊元器件的位置需要仔细分析，做到布局合乎电路功能的要求及生产的要求，不恰当地放置它们，可能会产生电磁兼容问题、信号完整性问题，从而导致PCB设计的失败。在设计如何放置特殊元器件时，首先要考虑PCB尺寸大小。PCB尺寸过大时，印制线条长，阻抗增加，抗噪声能力下降，成本也增加；过小，则散热不好，且邻近线条易受干扰。在确定PCB尺寸后，再确定特殊元件的位置。最后，根据电路的功能单元，对电路的全部元器件进行布局。特殊元器件的位置在布局时一般要遵守以下原则：
(1)尽可能缩短高频元器件之间的连线，设法减少它们的分布参数和相互间的电磁干扰。易受干扰的元器件不能相互挨得太近，输入和输出元件应尽量远离。
(2)某些元器件或导线之间可能有较高的电位差，应加大它们之间的距离，以免放电引起意外短路。带高电压的元器件应尽量布置在调试时手不易触及的地方。
(3)重量超过15g的元器件，应当用支架加以固定，然后焊接。那些又大又重、发热量多的元器件，不宜装在印制板上，而应装在整机的机箱底板上，且应考虑散热问题。热敏元件应远离发热元件。
(4)对于电位器、可调电感线圈、可变电容器、微动开关等可调元件的布局，应考虑整机的结构要求。若是机内调节，应放在印制板上方便调节的地方；若是机外调节，其位置要与调节旋钮在机箱面板上的位置相适应。
(5)应留出印制板定位孔及固定支架所占用的位置。
一个产品的成功与否，一是要注重内在质量，二是兼顾整体的美观，两者都较完美才能认为该产品是成功的。在一个PCB板上，元件的布局要求要均衡，疏密有序，不能头重脚轻或一头沉。
10.1.4 布局的检查
在完成元件的基本布局后,需要对布局进行检查,分以下几个方面进行:
(1)印制板尺寸是否与图纸要求的加工尺寸相符，是否符合PCB制造工艺要求，有无定位标记。
(2)元件在二维、三维空间上有无冲突。
(3)元件布局是否疏密有序，排列整齐，是否全部布完。
(4)需经常更换的元件能否方便地更换，插件板插入设备是否方便。
(5)热敏元件与发热元件之间是否有适当的距离。
(6)调整可调元件是否方便。
(7)在需要散热的地方，是否装了散热器，空气流是否通畅。
(8)信号流程是否顺畅且互连最短。
(9)插头、插座等与机械设计是否矛盾。
(10)线路的干扰问题是否有所考虑。
10.1.5 设置板框及定义各类禁止区
在完成了以上操作后，我们要对板框进行设置，还有要根据需要定义一些禁止区。 
一、板框的画法
板框（Board Outline）是指印刷电路板实际的形状，所有的元器件及布线都应在板框内，设计中板框在所有的层中都会显示出来。在PADS Layout设计中，利用绘图工具栏来进行PCB的板框设计，单击主工具栏中的绘图（Drifting）工具栏按钮 ，在主工具栏的下方弹出绘图工具栏,如图10-2所示。
图10-2   绘图工具栏
利用绘图工具栏可以进行建立2D线、板子边框、各种字符、铜皮/覆铜、切割区和禁止区等设计。
下面对各绘图按钮的功能做简要介绍。
 选择：取消当前命令并返回到选择模式。
 2D线：建立2D连线，用来表示如箭头标记、元件外框等没有电气性能的符号。
 铜线：铺设实心铜皮，绘制覆铜的区域或绘制线。
 剪裁铜线：从铺设好的实心铜皮剪切出各种图形的铜皮。
 灌铜：绘制灌铜区的外框。
 禁止灌铜：设置灌铜区域中的禁止灌铜区。
 板框或剪切：绘制PCB板框及剪切板框块。
 禁止区：对于某一设置的区域进行控制，如高度控制、禁止在这一区域布线、覆铜等。
 文本：增加文字描述。
 灌注：灌注需要覆铜的区域。
 库：从库中提取各种二维线的图形或冻结图形。
 分割区：建立混合分割层中各分割区域。
 剪裁分割区：建立混合分割层禁止区。
 自动划分：在混合分割层中自动划分各区域。
 恢复：恢复灌铜。
 增加标签：为元器件、跳线增加关于型号、设计参数等的标签、标注。
 导入：导入DXF文件。
 选项：打开参数对话框，定义各种参数。
下面利用PADS Layout自带的preview.pcb为例，介绍板框的画法。
如图10-3所示是布线后的PCB设计图，如图10-4所示是preview.pcb的PCB板框图。
图10-3   preview.pcb的PCB设计图
图10-4   preview.pcb的PCB板框图
应用绘图工具栏能够绘制覆铜的形状、禁止布线区及相关的没有电气属性的图形。在绘图工具栏中单击相关的按钮进行绘图，这时的鼠标指针在工作区中是一个带"V"的十字图标 ，单击鼠标右键，弹出绘图选择菜单，如图10-5所示。
图10-5   绘图选择菜单
在菜单中选择多边形（Polygon）、圆（Circle）、矩形（Rectangle）、线（Path）用来绘制相关的图形，选择Path可以绘制任意不封闭的走线。在弹出菜单中选择直角（Orthogonal），在绘图中只能绘出水平的或垂直的线。在弹出菜单中选择对角线（Diagonal），在绘图中能够绘出水平、垂直及45°角的线。在弹出菜单中选择任意角度（Any Angle），在绘图中能够绘出任意角度的线。
在绘图中可以根据需要进行相关参数的设置。
(1)设置绘图线的宽度。在弹出菜单中选择宽度（Width）命令，弹出线宽设置对话框，如图10-6所示，输入需要的线宽，按回车键即可，单位为Mil。
(2)绘图层的设置。当要把图形绘制在非顶层的时候，就需要进行层的设置，在弹出菜单中选择层（Layer），弹出"层设置"对话框，如图10-7所示，输入需要绘图的层，按回车键。
图10-6   线宽设置对话框图10-7   层设置对话框
(3)倒角设置。在弹出菜单中选择自动倒角（Auto Miter），在绘图时拐角就不再是90°的直角，而是自动出现了斜角或弧形，如图10-8所示。
图10-8   倒角
(4)单击绘图工具栏上的Options按钮 ，可以在弹出的对话框中设置倒角的大小及形状。倒角的形状有对角线（Diagonal）、弧形（Arc）两种形状，修改比率（Ratio）、角度（Angle）文本框中的数值，设置倒角的大小。如图10-9所示。
图10-9   倒角设置对话框
(5)设置显示栅格、设计栅格。执行Setup→Options菜单命令，在Grids选项中，进行如图10-10所示的设置。
图10-10   珊格设置对话框
图10-11   Add Drafting对话框
二、绘制禁止区
禁止区（Keepout）是定义数据不能放置在其中的区域。定义的禁止区在布局、布线时起作用，禁止区（Keepout）和切割区（Cutout）锁定/保护（Lock/Protect）导线。PowerPCB 包含了许多高级的属性定义功能，在整个设计过程中确保数据的完整性非常必要，它将在整个设计过程中确保设计者数据的准确性。
对于约束规则的设计方式，PADS Layout的禁止区（Keepout）和切割区（Cutout）功能，允许设计者自定义机械的禁止区域，以确保PCB满足硬件的装配要求。
禁止区阻止在一个特定的区域内放置一些设计对象，设计者通过定义禁止区可以限制以下对象：元件、带通孔管脚的元件、超过一定高度的元件、走线和布铜、过孔或跳线、测试点等。禁止区在板框内是一个带有斜交叉线的封闭图形。
三、建立一个禁止区
(1)单击绘图工具栏上的禁止区（Keepout）按钮  。
(2)在工作区单击鼠标右键，在弹出菜单中选择需要的图型类型，如多边形（Polygon）、圆形（Circle）等。
(3)在工作区中绘制一个封闭的图形，作为禁止区，PADS Layout设计系统将弹出Add Drafting对话框，如图10-11所示。
(4)在Add Drafting对话框中设置限制条件。
·Placement：选择此项表示禁止区内限制放置所有元件。如果选择Component Height，则表示这个区域禁止放置的元件最高高度值。在PADS Layout中元件都带有高度值，但PADS Layout设计中并不能看到3D元件,只有将设计以IDF格式转入PDC公司的Pro/ENGINEER软件才可以看见整板及元件的3D效果。
·Component Drill：选择此项表示禁止区内限制放置包含通孔的元件，如DIP元件，但可以放置表面贴（SMT）元件。
·Trace and Copper：选择此项表示禁止区内限制走线和布铜。
·Copper Pour and Plane Area：选择此项表示禁止区内限制灌铜或平面层。
·Via and Jumper：选择此项表示禁止区内限制过孔或跳线。
·Test Point：选择此项表示禁止区内限制放置测试点。
(5)在Layer对话框中选择禁止区所在的层。当设计者分配了禁止区的层后，禁止区的限制在其他层不起作用。
(6)单击按钮 ，完成禁止区的绘制。如果需要绘制另一个禁止区，则重复以上步骤即可。 
10.2 手工布局
PADS Layout中具很强的自动布局功能，但对于不少设计，自动布局效果可能并不理想，不符合设计者的意愿，这就需要手工布局，下面介绍手工布局的步骤。
一、布局前的准备
在应用PADS Layout开始布局前，进行相关的布局参数的设置是十分必要的，如设计栅格、显示栅格、PCB板的某些局部区域高度控制、高频电路中重要网络的标志等，这些参数的设置对于布局设计来说十分必要。
(1)PCB板的某些局部区域高度控制。
在PCB设计中，进行元件布局时不仅要考虑元件的电气特性、布通率等，还要考虑元件及PCB板的3D特性。有时设计的PCB需要考虑到PCB封闭到某种机箱里面，这样不恰当的放置元器件，可能影响产品的生产，从而导致PCB设计的失败。例如，如果设计的PCB，加上元器件最后需要装一个圆柱体的壳子中时，必须考虑PCB的3D特性。要使PCB板的两边适合放置高度不高的元器件，PCB板的中间适合放置个体比较高的元件。在PADS Layout设计中，对某一区域元件高度进行限定，可通过规划禁止区来进行，在禁止区内设置可以放置的零件高度。
(2)PCB设计中重要网络的标志。
在PCB设计中，对于一些重要的网络，如高频电路中的高频网络、关键信号网络等，应用不同的颜色来进行标志，这在布局、布线设计中起到很好的警示作用。网络色彩设置步骤如下：
1.首先执行View→ Nets菜单命令，弹出"View Nets"对话框，如图10-12所示。
图10-12   View Nets对话框
2.对话框的Net列表框中列出了设计中所有网络，View列表框中显示的是需要设置特殊颜色及进行其他设置的网络。通过Add按钮将左边列表框中的网络增加到右边列表框中，应用Remove（移出）按钮也可以将右边列表框中的网络移到左边列表框中。
3.在Net列表框中选择需要设置的网络，单击Add按钮，增加到View列表框中。在View列表框中选择需要设置颜色的网络，再单击"Color by Net（Pads,Vias,Unroutes）"中的某一种颜色。这样就完成了网络色彩的设置，其他网络的设置，重复以上步骤即可。
4.在多层板设计中，地线网络、电源网络在布局时不需要考虑它们的布线空间。如果把这些网络全部显示出来，工作区域会显得比较杂乱，因此在布局阶段通常将地线网络、电源网络隐去而不显示出来。这时只需要在对这些网络进行特殊色彩设置时，再选中View Unroutes Details选项组中的Unroutes Pin Pairs单选按钮即可。如图10-13所示。
二、散开元件
原理图从PADS Logic中送过来之后，全部都被放在坐标原点。为了方便观察，设计者需要把它们分散放在板框外边。散开元件的操作很简单，在PADS Layout菜单中选择Tools菜单中的Disperse Components命令，在弹出的"Disperse"对话框中单击按钮 ， PADS Layout系统自动将所有的元件归类放在板框外.如图10-14所示
图10-13   View Unroutes Details选项组图10-14   PADS Layout 对话框
三、元件放置顺序
元件在板周围散开后，设计者就要考虑先放置什么元器件，后放置什么元器件。不同的PCB设计有不同的放置顺序，但一般情况下按下列顺序放置。
(1)位置固定的元件。就是说那些元器件在板框中的位置是固定的，有的要求是十分精确的，如与外部连接的电源、信号接插件等。
(2)放置板框内有条件限制区域的元件。如某一区域内禁止放置过高元件、散热大的元件、禁止布线、不允许放置测试点等。
(3)放置电路中的关键元器件。如高频电路中的关键元器件，以及在设计中有特定要求的关键信号的元器件，在布局阶段要作特别的考虑，考虑该器件的管脚走线方式对信号完整性、电磁兼容性影响。
(4)放置面积比较大的元器件及比较复杂的元器件。特别是对于元器件管脚比较多的元件，由于它们包括的网络较多，它们位置的恰当与否，对于下一步的PCB布线及PCB质量起着至关重要的作用。这些元器件的放置有时需要反复尝试，直到找到最佳位置。
(5)剩下的元器件按原理图电路单元放置在相关的位置，最后做整体调整。
四、元件放置操作
在布局设计阶段，对元件放置的操作主要有对元器件的移动、旋转、水平对齐、垂直对齐等操作，对元器件位置的操作运用PADS Layout的设计工具栏中的命令来进行。在主工具栏中单击设计（Design）按钮  ，弹出设计工具栏，如图10-15所示。
图10-15   设计工具栏
设计工具栏中包括布局工具和布线工具，本章介绍的布局将使用以下工具:
 选择: 取消当前命令并转到选择模式。
 移动:移动元器件。
 径向移动: 按照用户自定义的极性珊格放置元器件。
 旋转: 每次以旋转90度角逆时针方向旋转元器件。
 转动: 以元器件中心位置为原点自由旋转到设计者需要的角度。
 位置交换: 交换两个元器件的位置。
 移动标志符: 移动设计中的标志符号。
 查看簇:建立或修改簇。
(1)单个元件的放置。
下面以PADS Layout设计系统自带的preview.pcb中D1元件的放置为例，说明单个元器件放置的步骤，D1位置如图10-16中橙色圆框所示。
图10-16   preview.pcb中D1元件的位置
1.查找元件。输入直接命令S（搜索），然后输入元件名称D1，按回车键，光标自动移到该元件上面。
2.选择元件。在该元件上单击鼠标选择该元件，该元件高亮显示，表示该元件已被选中。
3.移动元件。实现移动操作的方法有3种：
单击设计工具栏中的移动（Move）按钮 。
单击鼠标右键在弹出菜单中选择Move命令；
按Ctrl+E组合键。
随着设计者对PADS Layout设计系统的熟悉，建议应用快捷键以提高设计效率。当完成上面三种操作的任意一种后，元件D1贴在鼠标指针上，随鼠标的运动而移动，移动到需要位置，单击鼠标完成移动操作。
4.转动元件。D1元件放置由于不是水平和垂直的，而是倾斜的，因此需要转动。选择D1，单击设计工具栏中的转动（Spin）按钮  ，在D1两管脚会出现一个作为旋转点的十字光标，旋转鼠标将D1转动到需要的角度，单击鼠标左键完成转动操作。
放置一个元件到PCB板的另一面：选择需要放置到PCB另一面的元件，单击鼠标右键，并在弹出菜单中选择Flip Side命令，元件做镜像翻转后放入PCB的另一面。
注意
如果DRC校验是打开的并存在间距规则错误，这个操作将会被取消。
(2)组（Group）操作。
在PCB设计中，有时需要把几个元件作为一组进行一些相关的操作，如移动、旋转、对齐等。首先运用按Ctrl键并单击鼠标选择几个需要同时操作的元器件作为一组。
·Rotate Group 90：按照定义的中心点旋转。
·Flip Group：把一组元件以指定位置作镜像翻转到PCB板的另一面。选择需要放置到PCB另一面的元件，单击鼠标右键，在弹出菜单中选择"Flip Group"，移动鼠标指针到某一位置,单击鼠标左键，则选中的元件以此位置作镜像翻转到PCB板的另一面。
·Align（对齐）：以一个元件为基准行列对齐。在PCB布局时，如果元件位置在板框内比较杂乱，设计者可以应用PADS Layout的对齐（Align）工具将几个元器件排列整齐，所选择的元件以最后选择的一个元件为基准进行横向对齐、纵向对齐或中心对齐等。
图10-17   Alig……对话框
具体操作步骤如下：
1.应用Ctrl键选择需要整齐排列的一组元件。
2.单击鼠标右键，并在弹出的快捷菜单中选择Align命令，在工作区域弹出"Alig……"对话框，如图10-17所示。
3.在Alig……对话框中单击设计中需要的对齐方式命令，PADS Layout设计系统将以最后一个被选择的元件为基准自动地对齐。
如果没有选择DRC（设计规则检查），自动对齐不能保证元件之间应有的最小间距，是
设计者可运用Nudge（交互推挤）来保证元件之间应用的最小间距。如果设计规则检查（DRC）设置在警示状态，或自动对齐过程中出现设计规则错误，则不能正确执行对齐操作，并会在状态窗口中出现错误信息。
注意
设计者对于物理设计复用（Physical Design Reuse）的部分不能进行对齐操作，当选择物理设计复用（Physical Design Reuse）的部分时，对齐命令（Align）无效。
(3)建立元件组合。
在PCB布局设计中，有许多关系密切的元件需要放在一起，如IC元件和它们的去耦电容等。PADS Layout设计系统可以将它们组合在一起作为一个整体，这样就简化了设计操作，提高了设计者的工作效率。下面以IC元件和它的去耦电容建立元件组合及操作为例，来逐一说明如何建立一个元件组合、如何删除一个元件组合，以及如何进行元件组合移动等。
建立元件组合的步骤如下：
1.应用查找命令找到IC元件U1，将其放在需要的位置，继续用查找命令找到与之对应的去耦电容，将其放在相关的管脚旁。
2.选择两个元件，U1和C1元件高亮显示。
3.单击鼠标右键，并在弹出的快捷菜单中选择Create Union命令，也可以利用快捷键Ctrl+G实现。
4.在弹出的Union name definition对话框中，输入组合的名字。系统默认组合名字为UNI_1。如图10-18所示。
图10-18   Union name definition对话框
5.单击按钮 ，完成组合操作。
删除一个元件组合的操作步骤：
1.选择要删除的元件组合，单击鼠标右键，在弹出菜单中选择Break，如图10-19所示。
图10-19   删除一个元件组合对话框
2.单击按钮 ，删除一个元件组合。
删除所有的元件组合
选择设计中的任意一个元件组合，单击鼠标右键，在弹出菜单中选择Break All Unions命令，如图10-20所示，单击按钮 ,删除所有的元件组合。 
图10-20   删除所有元件组合对话框
元件组合属性修改
通过元件组合属性修改操作，可以更改元件组合的名称、层、旋转角度、黏结等。
1.单击鼠标右键，在弹出菜单中选择Select Union/Component命令，在板框单击一个元件组合中的任一个元件，选择该元件组合，该元件组合中所有的元件变成高亮显示。
2.单击鼠标右键，在弹出菜单中选择Properties命令，弹出"Union Properties"对话框，如图10-21所示。
图10-21   Union Properties对话框
·Name：显示当前所选择的元件组合的名称，在此处输入新的名字可以更改该元件组合的名称。
·X/Y：显示当前元件组合的坐标值，输入新的值可以移动该元件组合。
·Layer：显示当前元件组合所在的层。在这里选择不同的层可以将元件组合放置到相关的层中。
·Glued：选择该选项，设计者将不能通过手动或自动布局对其进行操作。
·Members：元件组合的组成元件列表。
·Base：选择一个元件坐标作为元件组合的X/Y坐标。
·Cluster info：显示簇修改对话框。
·Skip While Building Cluster：忽略元件组合和簇之间的影响。
(4)推挤（Nudge）。
在PCB布局时可以运用推挤（Nudge）去移动重叠的元件。推挤操作方式基于当前DRC设置，一般先自动推挤（Automatically Nudge），然后手工推挤（Manually Nudge）。要进行自动推挤，在主菜单中选择Tools菜单中的Auto Nudge命令即可。
手工推挤元件的步骤如下：
1.选择一个需要推挤的元件。
2.单击鼠标右键，并在弹出菜单中选择Nudge命令，在工作区域中会弹出Nudge Parts and Unions对话框。如图10-22所示。
图10-22   Nudge Parts and Unions对话框
3.在Nudge Parts and Unions对话框设置推挤的方向：自动（Automatic）、左（Left）、右（Right）、上（Up）、下（Down）。
4.单击Run按钮执行推挤操作。单击Undo按钮撤销上次推挤动作。
5.通常需要调整几个元件的位置以适应一个元件。为识别进一步调整的元件， PADS Layout用特殊的颜色显示这些元件，默认颜色为黄色。如果一次推挤的效果满意，单击Close按钮退出推挤操作，否则，单击Run按钮继续进行下一步推挤操作。
注意
推挤操作不能推挤被黏结的元件、位于板框外的元件以及物理设计复用的部分。推挤认为测试点是黏结对象，不可被推挤。
10.3 自动布局
在PADS Layout设计系统中包括了一个全自动簇布局器（Automatic Cluster Placement）。这个全自动簇布局器是一个交互全自动的多遍无矩阵布局器，采用概念定义、交互操作和智能识别等方法实现对大规模、高密度和复杂电路的设计以及大量采用表面贴元器件（SMD）和PGA器件的PCB设计自动布局。自动簇布局器还具有复杂的可定义参数策略、完善的当前操作和相关状态指示，用以控制布局器达到最佳布局效果。自动簇布局器模拟人的思维方式,为将来的布线工作做出最佳的布局调整，因此尤其适合大规模、高密度的PCB设计。
一、自动布局前的准备工作
绘制了板框并导入网表后，在自动布局前需要为自动布局做一些准备工作，如设置显示栅格、设计栅格、放置位置固定的元件、设置禁止区等。
一般准备工作如下：
(1)设置设计栅格。
(2)放置并固定那些位置固定的特殊部件，如连接插座、安装孔等。选择已经布局好的元件，单击鼠标右键，在弹出菜单中单击Properties命令，就会弹出"Component Properties"对话框，如图10-23所示。在"Component Properties"对话框中选择Glued复选框，防止自动布局时这些部件再移动。
图10-23   Component Properties对话框
(3)在菜单栏中选择Tools菜单中的Disperse Component命令，没有被"黏结"的元器件会分散在板框周围。注意分散命令忽略设计复用部分的元件。
(4)建立禁止区。在绘图工具栏上单击禁止区（Keepout）按钮 ，绘制在自动布局时不可以放置元器件的区域。
(5)使用旋转和翻转功能，调整需要以某个角度放置或保留在设计底部上的元器件。
二、自动布局
执行Tools→Cluster Placement菜单命令，弹出"Cluster Placement"对话框，如图10-24所示。
图10-24   Cluster Placement对话框
在该对话框的Automatic Cluster Placement选项组中共有3个功能图标，分别用于建立簇（Build Cluster）、放置簇（Place Cluster）和放置元件（Place Parts）。簇是以元件、单元、簇（子簇）为元素的集合。如一个功能模块内的所有集成电路芯片和电阻、电容等离散器件的组合。簇的特点是簇内的元器件具有密切的电气和逻辑关系，并完成某一特定的功能。簇内元素彼此之间连线繁多，而簇间连线比较单一。
自动簇布局器允许设计自定义簇的种子元素，并可根据种子元素以半自动或自动的方式编辑定义一个簇。同时，自动簇布局器也提供了全自动建立簇的手段。簇有强、弱之分且具有整体性。
建立簇（Build Cluster）
(1)自动建立一个新的簇。
自动在板框外建立一个新的簇，自动建立的簇默认是打开的。在自动簇布局器窗口中单击按钮 ，继续单击Build Clusters按钮下的按钮 ，这时弹出"Build Clusters Setup"对话框，如图10-25所示，在这个窗口中进行一系列设置用来定制簇。
图10-25   Build Clusters Setup对话框
·Maximum Parts Per Cluster：设置在一个簇内允许包含的最多元件数量，选择Unlimited指不对簇内包含元件的数量进行限制。
·Minimum Top Level Count：设置顶层簇允许的最少数量。顶层簇是指不被包含在其他簇里面的簇。如果设计者这个数量设置得高，并且簇内允许最多元件数量没有限定时，设计中所有的元件会集合在一个大的簇内。
·Create New Cluster：允许PADS Layout去建立一个新的簇，不选择Create New Cluster，PADS Layout只去修改过去已建立的簇。
·Unglued Parts Number：显示当前设计中没有被黏结（glued）的元器件的数量。
·Build Mode：建立模式。
设计者在簇自动建立时能够删除或替换一个打开的簇，自动建立的簇为默认打开。设计者在簇自动建立时不能够删除或替换一个关闭的簇，手动建立的簇为默认关闭。根据设计者设计的需要，设置建立簇参数后，单击OK按钮回自动簇布局器窗口，单击Run按钮，PADS Layout运行自动建立簇。
(2)手动建立一个新的簇。
1.选择包含在这个簇内的元件、单元或其他的簇。
2.选择后单击鼠标右键，在弹出菜单中选择Create Cluster命令，在弹出的Cluster name definition对话框中输入簇的名称，单击按钮 建立该簇，如图10-26所示。
图10-26   luster name definition对话框
3.建立簇后，簇的元件被擦除，并被一个圆圈代替，这个圆圈代表簇。
(3)增加一个元件到簇。
1.执行Tools/Cluster Manager菜单命令，弹出"Cluster Manager"对话框，如图10-27所示。
图10-27   Cluster Manager对话框
·Name（名字）：显示被选择（高亮）的簇或单元的名字。在Name文本框中输入一个新的名字，并单击右边的Rename（重新命名）按钮，就可以重新定义该簇的名字。
·Top Level：在Top Level下有两个列表框,通过两个列表框中的任意一个列表，设计者可以查看设计中的所有簇、单元和元件。列表中前缀为CLU的表示是簇，前缀为UNI表示是单元，前缀为com的表示是元件。
·Move（移动）：通过move下的两个按钮   ,可以从当前簇、单元中增加或删除簇、单元或元件。
·Find（查找）：查找一个簇、单元或元件的位置。
2.在一个列表框中双击需要加入元件的簇，或选择该簇，单击Expand按钮，列表框标题显示该簇的名字，列表框内显示该簇的所有元件。
3.在另一个列表框中，选择需要加入的元件。
4.单击Move选项组中的箭头按钮，增加该元件到簇。
5.单击OK按钮，完成增加一个元件到簇。
增加一个元件到簇的步骤与增加单元、簇或多个元件到指定簇的步骤类似，这里不再赘述。
(4)删除簇。
在设计中建立簇后，删除一个簇是难免的，下面介绍删除一个或多个簇的步骤。
1.选择需要删除的簇。设计者也可以运用按Ctrl键并单击鼠标来选择多个簇。
2.选择需要删除的簇后，单击鼠标右键，在弹出的菜单中选择Break命令。
3.在出现的对话框中，如图10-28所示，单击按钮 ，删除所有的簇。
图10-28   删除簇对话框
Place Clusters（簇布局）
自动地把簇布置在板框内适当的位置，实际上不移动与它们关联的元件。单击Place Clusters（簇布局）下的Setup按钮，打开Place Clusters Setup（弹出簇布局设置）对话框，如图10-29所示，在Place Clusters Setup对话框中，设置相关参数来定制Place Clusters（簇布局），如基于设计连接性及长度最短化来放置簇等。
图10-29   Place Clusters Setup对话框
·Place Parts Rules（放置元件规则）：这一部分与簇布局中类似。
·Board Outline Clearance（板框空间）：确定簇在板框里面展开多少。
·Auto：默认值为75%。
·Manual：根据设计者需要填入自定义的值。
注意
放置元件的规则与簇布局和元件布局设置是共享的。
·Efforts：调整窗口下半部分的选项。
·Recommended（推荐）：使用默认值尝试放置簇。
·High（高）：以双倍于默认值尝试放置簇。
·Let me specify（自定义）：自定义尝试放置簇的四种值。
·Create Pass：使放置簇能进行布局操作，取消这项操作则可以用精练的方式、较少的调整来放置已有的簇。
·Current Position：基于元件当前的位置自动簇布局。这对簇位置已经在板内固定的簇是非常有用的，因为PADS Layout试图保持当前位置。
·Random Position：以随机的位置进行簇布局。这个选项可以用高级的算法对那些处于板框内的簇进行簇布局。
·Number of Iterations：指定布局处理的次数。默认值适应大多数的一般设计。如果是一个小的PCB设计或为更快的数据处理，可以使用较小的数，如果是一个大的或为更密集的设计，可以应用较大的数。
·Attempts Per Iteration：在每次重复操作中，试图以最短的网络长度、减少元件重叠及考虑到板内的禁止区去放置元件，增大这个值会使元件更紧地聚在一起，并靠近黏结元件。
·Percent from Part Swapping：每次重复操作中，元件、簇、组合是任意与其他元件交换或者重新配置，以改善布局，使用这个特点去增加重复交换的数量代替移动元件。
·Clusters Clearance：确定在板框内进行扩展簇的距离。
·Display On Screen：在自动布局过程中，显示元件的轮廓和它们的运动。
Place Parts（元件布局）
Place Parts按钮用于执行自动布局操作。单击下面的Setup定制放置簇。单击后弹出"元件Place Parts Setup"对话框，如图10-30所示。
图10-30   Place Parts Setup对话框
·Place Parts Rules（放置元件规则）：这一部分与簇布局中类似。
·Place Parts：允许元件放置操作。取消这个选项只提供一部分属性的设置。
·Efforts：调整对话框中下半部分的选项。
·Recommended：推荐使用的默认值。
·High：双倍于默认值。
·Let me Specify：根据需要自定义设计中需要的值。
·Improve Pass：改善途径。
·Eliminate Overlaps（消除重叠）：在不违反零件扩散设置的百分率的情况下，移动重叠的元件，如果消除零件重叠，会降低零件扩散设置的百分率，但不超出允许的最小零件扩散率。
·Minimum Percentage Expansion Allowed（零件扩散最小百分率）：设置在消除重叠过程中最低的零件扩散的百分率。
·Refine Pass：精确路径。
·Align Parts：使用对齐的方式调整临近零件，以便改善可布线性。
·Only If No Overlaps：如果存在重叠，则禁止零件对齐。
·Display on Screen：显示每个零件的轮廓和自动移动布局的全过程。
10.4 本章小结
本章主要介绍了使用PADS Layout进行布局的规则和方法。并重点介绍了手动布局和自动布局两种方法的对比,使读者对PCB布局有更深刻的认识,可以在不同的场合选择不同的布局方法。由于在PCB设计过程中，布局设计有着相当大的重要性，所以在介绍本章内容时将布局的两种方式都进行了详细的介绍。
