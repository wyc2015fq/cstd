# 指向指针的指针的内存分配与释放 - xqhrs232的专栏 - CSDN博客
2012年06月02日 09:42:32[xqhrs232](https://me.csdn.net/xqhrs232)阅读数：1802
原文地址::[http://hi.baidu.com/b_a_i_du/blog/item/7125a7d35ca0afd6a8ec9af6.html](http://hi.baidu.com/b_a_i_du/blog/item/7125a7d35ca0afd6a8ec9af6.html)?
相关网帖
   1.给指向指针的指针分配和释放内存  ----[http://xingshi5216.blog.163.com/blog/static/4603159120086189321587/](http://xingshi5216.blog.163.com/blog/static/4603159120086189321587/)
   2.释放使用指针的指针所分配到的空间----[http://blog.sina.com.cn/s/blog_5fd9454d0100drfw.html](http://blog.sina.com.cn/s/blog_5fd9454d0100drfw.html)
本文来自[http://www.codeproject.com/useritems/pointertopointer.asp](http://www.codeproject.com/useritems/pointertopointer.asp)一文，有感作者对指向指针的指针有着清晰和形象的解释，特将其重要思想摘记下来。
**指向指针的指针变量**
一个指向指针的指针变量能够保存另一个指针变量的地址。可以用如下声明：
      type **variable ;
**分配内存**
   可以把分配给指向指针的指针变量的内存视为二维结构。它有这相关的行和列。例如，对与大小为m*n的内存，视为有m行，而每行又有这n列。因此，分配内存时：
     1.首先为m行分配内存
     2.对每一行再分配n列内存
     例子：为一个指向浮点数的指针的指针分配内存，假设有4行3列
     float **float_values ;
    //为行分配变量
     float_values=(float **)malloc(4*sizeof(float *));
   //为每行的列非陪内存
for(int i =0 ;i<4 ;i++)
    {
      *(float_values+i)=(float*)malloc(3*sizeof(float));
    }
![](http://bookpic.newbooks.com.cn/pic/200710/165197/20071028011912859.bmp)
**赋值**
      有两种方法访问二维的内存地址：
   1.用[]操作符，类似与访问二维数组：
 for(int i=0; i< 4 ;i++)
    for(int j=0 ;j<3 ;j++)
{
    scanf("%f",&val);
    float_values[i][j]=val;
}
    2.指针操作符(*)
    for(int i=0; i< 4 ;i++)
    for(int j=0 ;j<3 ;j++)
{
    scanf("%f",&val);
    *((*float_values+i)+j)=val;
}
**释放内存**
   对于动态分配的内存，我们需要将其释放。释放要从最底层开始，和分配是顺序刚好相反。如果我们先释放了高层的指针，这样我们就会丢失底层的指针，从而无法释放那些指针指向的内存，造成内存泄漏。正确的释放内存方法如下：
      //freeing up memoryallocated to second level pointers
    for(int i = 0; i<4; i++)
     {
           free(float_values[i]);
     }
    //freeing up memoryallocated to first level pointers
     free(float_values);
    from：[http://read.newbooks.com.cn/info/165197.html](http://read.newbooks.com.cn/info/165197.html)
//=================================================================
备注::
1.WINDOWS的程序在调试指针有没被释放，可以去看指针所指向的内存区域的内容是否被释放了。
  在VC++ IDE下可以到调试窗口的MEMORY窗口去看指针指向的内存今天是什么内容，有没被释放
