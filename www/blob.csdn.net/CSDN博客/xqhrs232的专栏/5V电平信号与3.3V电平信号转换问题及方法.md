# 5V电平信号与3.3V电平信号转换问题及方法 - xqhrs232的专栏 - CSDN博客
2015年05月02日 10:17:39[xqhrs232](https://me.csdn.net/xqhrs232)阅读数：3917
原文地址::[http://www.ndiy.cn/thread-2984-1-1.html](http://www.ndiy.cn/thread-2984-1-1.html)
现在低压、低耗器件越来越多，3.3v、2.1v电平信号越来越常见。这就存在了一个电平转换问题。
当然很多时候都不需要转化，一些器件具有较大的包容性。具体能不能包容多种电平需要查看IC手册。如果能容忍其相异的电压，就不需要交转换单元了。 
加上转换电路肯定会对通信速度、稳定性有所限制。
转化前要注意两个地方。
1、ABSOLUTE MAXIMUM RATINGS
这个是保证IC安全、健康的限制参数，应用连接时千万别超过这个范围。比如：DVDD(模拟电源)对DGND(模拟地)电压范围是 -0.3V到+6.0V ;数字I/O口电压对地电压范围是 -0.3V到+vdd+0.3V 。
2、需不需要电平信号转换单元就看下面这个参数：
可见这个IC的数字逻辑输入低电平门限<0.7V(3.3V情况)；高电平门限>2V(3.3V情况)；当然这些参数都是限制在ABSOLUTE MAXIMUM RATINGS的。
下面转入正题，看看电平转换方法。
1、较低电平转较高电平（比如3.3V转5V）：
“低”接较低电平信号；“高”接较高电平信号。
两个晶体管，保证两端信号极性一致。
2、较高电平转较低电平（比如5转3.3V）：
分析:当“高”处（+5V电平信号）输出为逻辑1，二极管截至（相当于断开），低处被上拉到约+3.3V。
当“低”处（+5V电平信号）输出为逻辑0，二极管导通，理想情况“低”处导通到0电压，实际“低”处电压是二极管导通压降（0.7V左右，如果觉得高，可以使用肖特基二极管，肖特基二极管管压降小）。
有一些电平信号转换可以采用比较器，我以前在一个比较器手册上看过这种应用，也十分方便，就是成本有些高。
我听一些网友说，可以在不同电平信号之间串一个小电阻解决问题。我也这样试过（3.3V的cyclon2与5V的单片机通信），好像能正常使用，不过总感觉不太安稳，呵呵。
还有其他的一些方法总结如下：
2.1 电阻分压 
利用电阻分压的方法,其原理如图1所示.其成本比较低并且结构简单,可以作为一种应急的方案.但是,该电路实际的输出电压显然要小于3.3V,并且随着负载的变化,输出电压也会产生波动.此外,这种电路的无功功耗也比较大. 
2.2 直接采用电源模块 
考虑到开关电源设计的复杂性,一些公司推出了基于开关电源技术的低电压输出电源模块.这些模块可靠性和效率都很高,电磁辐射小,而且许多模块还可以实现电源隔离.这些电源模块使用方便,只需增加很少的外围元件,但是价格比较昂贵. 
2.3 利用线性稳压电源转换芯片 
线性稳压芯片是一种最简单的电源转换芯片,基本上不需要外围元件.但是传统的线性稳压器,如LM317,要求输入电压比输出电压高2V或者更大,否则就不能够正常工作.因此对于5V的输入,输出并不能够达到3.3V.面对低压电源的需求,许多电源芯片公司推出了低压差线性稳压器(LDO).这种电源芯片的压差只有1.3V~0.2V,可以实现5V转3.3V的要求.LDO所需的外围器件数目少、使用方便、成本较低、纹波小、无电磁干扰.例如,TI公司的TPS73xx系列就是TI公司为配合DSP而设计的电源转换芯片,其输出电流可以达到500mA,且接口电路非常简单,只需接上必要的外围电阻,就可以实现电源转换.该系列分为固定电压输出的芯片和可调电压输出的芯片,但这种芯片通常效率不是很高. 
综合几种电源的优缺点,DSP系统采用LDO芯片TPS7333.此芯片是TI公司专门为3.3V低压系统设计的,它是固定输出3.3V,且有上电产生DSP系统复位所需的信号.此外它输出电流可达几百毫安,输出功率完全能够满足系统所需.具体电路如图2所示.
3.3V转5V 电平转换方法参考 
电平转换
晶体管+上拉电阻法 
就是一个双极型三极管或 MOSFET，C/D极接一个上拉电阻到正电源，输入电平很灵活，输出电平大致就是正电源电平。
(2) OC/OD 器件+上拉电阻法 
跟 1) 类似。适用于器件输出刚好为 OC/OD 的场合。
(3) 74xHCT系列芯片升压 (3.3V→5V) 
凡是输入与 5V TTL 电平兼容的 5V CMOS 器件都可以用作 3.3V→5V 电平转换。 
——这是由于 3.3V CMOS 的电平刚好和5V TTL电平兼容（巧合），而 CMOS 的输出电平总是接近电源电平的。 
廉价的选择如 74xHCT(HCT/AHCT/VHCT/AHCT1G/VHCT1G/...) 系列 (那个字母 T 就表示 TTL 兼容)。
(4) 超限输入降压法 (5V→3.3V, 3.3V→1.8V, ...) 
凡是允许输入电平超过电源的逻辑器件，都可以用作降低电平。 
这里的"超限"是指超过电源，许多较古老的器件都不允许输入电压超过电源，但越来越多的新器件取消了这个限制 (改变了输入级保护电路)。 
例如，74AHC/VHC 系列芯片，其 datasheets 明确注明"输入电压范围为0~5.5V"，如果采用 3.3V 供电，就可以实现 5V→3.3V 电平转换。
(5) 专用电平转换芯片 
最著名的就是 164245，不仅可以用作升压/降压，而且允许两边电源不同步。这是最通用的电平转换方案，但是也是很昂贵的 (俺前不久买还是￥45/片，虽是零售，也贵的吓人)，因此若非必要，最好用前两个方案。
(6) 电阻分压法 
最简单的降低电平的方法。5V电平，经1.6k+3.3k电阻分压，就是3.3V。
(7) 限流电阻法 
如果嫌上面的两个电阻太多，有时还可以只串联一个限流电阻。某些芯片虽然原则上不允许输入电平超过电源，但只要串联一个限流电阻，保证输入保护电流不超过极限(如 74HC 系列为 20mA)，仍然是安全的。
(8) 无为而无不为法 
只要掌握了电平兼容的规律。某些场合，根本就不需要特别的转换。例如，电路中用到了某种 5V 逻辑器件，其输入是 3.3V 电平，只要在选择器件时选择输入为 TTL 兼容的，就不需要任何转换，这相当于隐含适用了方法3)。
(9) 比较器法 
运放法/比较器少用。
2. 电平转换的"五要素
(1) 电平兼容 
解决电平转换问题，最根本的就是要解决逻辑器件接口的电平兼容问题。而电平兼容原则就两条： 
VOH > VIH 
VOL < VIL 
再简单不过了！当然，考虑抗干扰能力，还必须有一定的噪声容限： 
|VOH-VIH| > VN+ 
|VOL-VIL| > VN- 
其中，VN+和VN-表示正负噪声容限。 
只要掌握这个原则，熟悉各类器件的输入输出特性，可以很自然地找到合理方案，如前面的方案(3)(4)都是正确利用器件输入特性的例子。
(2) 电源次序 
多电源系统必须注意的问题。某些器件不允许输入电平超过电源，如果没有电源时就加上输入，很可能损坏芯片。这种场合性能最好的办法可能就是方案(5)——164245。如果速度允许，方案(1)(7)也可以考虑。
(3) 速度/频率 
某些转换方式影响工作速度，所以必须注意。像方案(1)(2)(6)(7)，由于电阻的存在，通过电阻给负载电容充电，必然会影响信号跳沿速度。为了提高速度，就必须减小电阻，这又会造成功耗上升。这种场合方案(3)(4)是比较理想的。
(4) 输出驱动能力 
如果需要一定的电流驱动能力，方案(1)(2)(6)(7)就都成问题了。这一条跟上一条其实是一致的，因为速度问题的关键就是对负载电容的充电能力。
(5) 路数 
某些方案元器件较多，或者布线不方便，路数多了就成问题了。例如总线地址和数据的转换，显然应该用方案(3)(4)，采用总线缓冲器芯片(245,541,16245...)，或者用方案(5)。
(6) 成本&供货 
前面说的164245就存在这个问题。"五要素"冒出第6个，因为这是非技术因素，而且太根本了，以至于可以忽略。 
RS232的电平是多少呢？
RS232电平发送器为+5V～+15V为逻辑负，-5V～-15V为逻辑正
接收器典型的工作电平在+3～+12V与-3～-12V。由于发送电平与接收电平的差仅为2V至3V左右，所以其共模抑制能力差，再加上双绞线上的分布电容，其传送距离最大为约15米，最高速率为20kb/s。RS-232是为点对点（即只用一对收、发设备）通讯而设计的，其驱动器负载为3～7kΩ。所以RS-232适合本地设备之间的通信。
RS485的电平是多少呢？
发送驱动器A、B之间的正电平在+2～+6V，是一个逻辑状态1，负电平在-2～-6V，是另一个逻辑状态0。（具体数值可能有误，回头测试一下！）
当在收端AB之间有大于+200mV的电平时，输出正逻辑电平，小于-200mV时，输出负逻辑电平。接收器接收平衡线上的电平范围通常在200mV至6V之间。
TTL电平是多少呢？
TTL电平为2.0V～5V为逻辑正，0～0.8V为逻辑负
CMOS电路的电平是多少？
CMOS电平：0.7Vcc以上为逻辑正，0.3Vcc以下为负
输出逻辑1电平电压接近于电源电压，逻辑电平0接近于0V。而且具有很宽的噪声容限。
输入逻辑1电平电压大于电源电压的1/2 VCC～VCC；
输入逻辑0电平电压小于电源电压的1/2 VCC～gnd；
高电平低电平是什么意思
逻辑电平的一些概念 
要了解逻辑电平的内容，首先要知道以下几个概念的含义： 
1：输入高电平（Vih）： 保证逻辑门的输入为高电平时所允许的最小输入高电平，当输入电平高于Vih时，则认为输入电平为高电平。
2：输入低电平（Vil）：保证逻辑门的输入为低电平时所允许的最大输入低电平，当输入电平低于Vil时，则认为输入电平为低电平。 
3：输出高电平（Voh）：保证逻辑门的输出为高电平时的输出电平的最小值，逻辑门的输出为高电平时的电平值都必须大于此Voh。 
4：输出低电平（Vol）：保证逻辑门的输出为低电平时的输出电平的最大值，逻辑门的输出为低电平时的电平值都必须小于此Vol。 
5：阀值电平(Vt)： 数字电路芯片都存在一个阈值电平，就是电路刚刚勉强能翻转动作时的电平。它是一个界于Vil、Vih之间的电压值，对于CMOS电路的阈值电平，基本上是二分之一的电源电压值，但要保证稳定的输出，则必须要求输入高电平> Vih，输入低电平<Vil，而如果输入电平在阈值上下，也就是Vil～Vih这个区域，电路的输出会处于不稳定状态。 
对于一般的逻辑电平，以上参数的关系如下： 
Voh > Vih > Vt > Vil > Vol。 
6：Ioh：逻辑门输出为高电平时的负载电流（为拉电流）。 
7：Iol：逻辑门输出为低电平时的负载电流（为灌电流）。 
8：Iih：逻辑门输入为高电平时的电流（为灌电流）。 
9：Iil：逻辑门输入为低电平时的电流（为拉电流）。 
门电路输出极在集成单元内不接负载电阻而直接引出作为输出端，这种形式的门称为开路门。开路的TTL、CMOS、ECL门分别称为集电极开路（OC）、漏极开路（OD）、发射极开路（OE），使用时应审查是否接上拉电阻（OC、OD门）或下拉电阻（OE门），以及电阻阻值是否合适。对于集电极开路（OC）门，其上拉电阻阻值RL应满足下面条件： 
（1）： RL < （VCC－Voh）/（n*Ioh＋m*Iih） 
（2）：RL > （VCC－Vol）/（Iol＋m*Iil） 
其中n：线与的开路门数；m：被驱动的输入端数。 
：常用的逻辑电平 
·逻辑电平：有TTL、CMOS、LVTTL、ECL、PECL、GTL；RS232、RS422、LVDS等。 
·其中TTL和CMOS的逻辑电平按典型电压可分为四类：5V系列（5V TTL和5V CMOS）、3.3V系列，2.5V系列和1.8V系列。 
·5V TTL和5V CMOS逻辑电平是通用的逻辑电平。 
·3.3V及以下的逻辑电平被称为低电压逻辑电平，常用的为LVTTL电平。 
·低电压的逻辑电平还有2.5V和1.8V两种。 
·ECL/PECL和LVDS是差分输入输出。 
·RS-422/485和RS-232是串口的接口标准，RS-422/485是差分输入输出，RS-232是单端输入输出。
