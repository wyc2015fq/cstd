# 常用GPRS模块短信发送例程(转载) - xqhrs232的专栏 - CSDN博客
2010年01月19日 09:59:00[xqhrs232](https://me.csdn.net/xqhrs232)阅读数：2249
本文以华为常用无线通讯模块为例，介绍利用南京唐鼎科技GPRS、CDMA模块开发套件及串口调试工具发送短信例程：
注：本文中的接收号码为作者的短信号码，请使用者注意换成自己的短信接收号码。
一．GTM900B
连接好开发板和模块、天线（GPRS天线），插入SIM卡（注意不能有Pin码锁定，且是移动的SIM卡，如：138、139、150等开头的卡），使用串口调试工具，点选“回车”后，输入指令：at+cmgs=字符串长度，输入要发送的内容，点选“特殊字符”（点选后，会出现0x1A字样）。例如：
发送“当你看到此短信时，说明你已经成功使用了该产品。”
AT+CMGS=61
Ø0891683108200505F011000D91683108093277F60008002E5F534F60770B52306B6477ED4FE165F6FF0C8BF4660E4F605DF27ECF6210529F4F7F75284E868BE54EA754C13002
具体见最后详解。
二．EM310
连接好开发板和模块、天线（GPRS天线），插入SIM卡（注意不能有Pin码锁定，且是移动的SIM卡，如：138、139、150等开头的卡），使用串口调试工具，点选“回车”后，输入指令：at+cmgs=字符串长度，输入要发送的内容，点选“特殊字符”（点选后，会出现0x1A字样）。例如：
at+cmgf=1（短信设为文本模式）
at+cmgs=”13809023776”
Øhello this is a good news
三．EM200
连接好开发板和模块、天线（CDMA天线），插入SIM卡（注意不能有Pin码锁定，且是CDMA制式的SIM卡，如：189、130、133开头的），使用串口调试工具，点选“回车”后，输入指令：at+cmgs=字符串长度，输入要发送的内容，点选“特殊字符”（点选后，会出现0x1A字样）。例如：
at+cmgf=1（短信设为文本模式）
at%cmgs=”13809023776”（注意是“%”）
Øhello this is a good news
AT指令发送PDU短信详解
本文以一个实例来解说AT指令发送PDU短信的全过程，假如我要发送下面的短信：
接收号码：＋8613809023776
短信内容：你好
短信中心号码：＋8613800250500
一、短信中心号码处理：用字符串 addr表示
1、将短信息中心号码去掉+号，看看长度是否为偶数，如果不是，最后添加F
即 addr = "+8613800250500"
=> addr = "8613800250500F"
2、将奇数位和偶数位交换。
=> addr = "683108200505F0"
3、将短信息中心号码前面加上字符91，91是国际化的意思
=> addr = "91683108200505F0"
4、算出 addr长度，结果除2，格式化成2位的16进制字符串，16
 / 2 = 8 => "08"
=> addr = "0891683108200505F0"
二、手机号码处理：用字符串 phone
1、将手机号码去掉+号，看看长度是否为偶数，如果不是，最后添加F
即 phone = "+8613809023776"
=> phone = "8613809023776F"
2、将手机号码奇数位和偶数位交换。
=> phone = "683108093277F6"
三、短信息部分处理：用字符串 msg表示
1、转字符串转换为Unicode代码，例如“你好”的unicode代码为
 4F60597D，
2、将 msg长度除2，保留两位16进制数，即
 4F60597D = 8 / 2 => "04"，再加上 msg
=> msg = "044F60597D "
四、组合
1、手机号码前加上字符串 11000D91（1100：固定，0D：手机号码的长度，不算＋号，十六进制表示，91：发送到手机为91，发送到小灵通为81），
即 phone = "11000D91" + phone
=> 11000D91683108093277F6
2、手机号码后加上 000800和刚才的短信息内容，000800也写死就可以了
即 phone = phone + "000800" + msg
即 11000D91683108093277F6 + 000800 +044F60597D
=> phone = 11000D91683108093277F6000800044F60597D
后面的len为此时phone长度，此处值19
3、phone长度除以2，格式化成2位的十进制数
即 0891683108200505F011000D91683108093277F6000800044F60597D
五、所以要发送的内容为
1、AT+CMGF=0 <回车>
OK
2、“AT+CMGS=len<回车>”
AT+CMGS=19<回车>
3、> addr+phone <Ctrl+Z发送>
>0891683108200505F011000D91683108093277F6000800044F60597D
其他举例：
发送“当你看到此短信时，说明你已经成功使用了该产品。”
AT+CMGS=61
> 0891683108200505F011000D91683108093277F60008002E5F534F60770B52306B6477ED4FE165F6FF0C8BF4660E4F605DF27ECF6210529F4F7F75284E868BE54EA754C13002
