# 【转】__inline关键字 - xqhrs232的专栏 - CSDN博客
2012年11月03日 22:54:32[xqhrs232](https://me.csdn.net/xqhrs232)阅读数：571
原文地址::[http://www.stmsky.com/bbs/viewthread.php?tid=2506](http://www.stmsky.com/bbs/viewthread.php?tid=2506)
内联（inline，我倒觉得翻译为“内嵌”更加合适些）指的是直接将函数代码插入到函数调用的地方，这样就省略了函数调用时的开销，提高了程序执行的效率。缺点就是可执行文件的尺寸变大。 
  
一、inline 关键字用来定义一个类的内联函数，引入它的主要原因是用它替代C中表达式形式的宏定义。 
　　表达式形式的宏定义一例：
　　#define ExpressionName(Var1,Var2) ((Var1)+(Var2))*((Var1)-(Var2))
　　为什么要取代这种形式呢，且听我道来：
　　1． 首先谈一下在C中使用这种形式宏定义的原因，C语言是一个效率很高的语言，这种宏定义在形式及使用上像一个函数，但它使用预处理器实现，没有了参数压栈，代码生成 等一系列的操作,因此，效率很高，这是它在C中被使用的一个主要原因。
　　2． 这种宏定义在形式上类似于一个函数，但在使用它时，仅仅只是做预处理器符号表中的简单替换，因此它不能进行参数有效性的检测，也就不能享受C++编译器严格类型检查的好处，另外它的返回值也不能被强制转换为可转换的合适的类型，这样，它的使用就存在着一系列的隐患和局限性。
　　3． 在C++中引入了类及类的访问控制，这样，如果一个操作或者说一个表达式涉及到类的保护成员或私有成员，你就不可能使用这种宏定义来实现(因为无法将this指针放在合适的位置)。
　　4． inline 推出的目的，也正是为了取代这种表达式形式的宏定义，它消除了它的缺点，同时又很好地继承了它的优点。
　　为什么inline能很好地取代表达式形式的预定义呢？ 
　　对应于上面的1-3点，阐述如下：
　　1． inline 定义的类的内联函数，函数的代码被放入符号表中，在使用时直接进行替换，（像宏一样展开），没有了调用的开销，效率也很高。 
　　2． 很明显，类的内联函数也是一个真正的函数，编译器在调用一个内联函数时，会首先检查它的参数的类型，保证调用正确。然后进行一系列的相关检查，就像对待任何一个真正的函数一样。这样就消除了它的隐患和局限性。
　　3． inline 可以作为某个类的成员函数，当然就可以在其中使用所在类的保护成员及私有成员。 
　　在何时使用inline函数：
　　首先，你可以使用inline函数完全取代表达式形式的宏定义。
　　另外要注意，内联函数一般只会用在函数内容非常简单的时候，这是因为，内联函数的代码会在任何调用它的地方展开，如果函数太复杂，代码膨胀带来的恶果很可能会大于效率的提高带来的益处。内联函数最重要的使用地方是用于类的存取函数。
　　如何使用类的inline函数： 
　　简单提一下inline 的使用吧：
　　1.在类中定义这种函数：
　　class ClassName{
　　.....
　　....
　　GetWidth(){return m_lPicWidth;}; // 如果在类中直接定义，可以不使用inline修饰
　　....
　　....
　　} 
　　2.在类中声明，在类外定义:
　　class ClassName{
　　.....
　　....
　　GetWidth(); // 如果在类中直接定义，可以不使用inline修饰
　　....
　　....
　　} 
　　inline return_type ClassName::GetWidth(){
　　return m_lPicWidth;
　　}
　　二、CSS
　　display:inline
　　它可以让行内显示为块的元素，变为行内显示，例如 
　　DIV1 
　　DIV2 
　　这里DIV1和DIV2分别占一行，但是你给他们加上属性后变了 
　　DIV1 
     DIV2 
　　DIV1和DIV2这时候显示在同一行了，试试看吧
　　和 display:inline 对应的是 display:block，block 会让应用了该 CSS 属性的 HTML 标记变成块级别元素，例如 SPAN 是行内显示的，但是你加了 display:block 属性就不一样了
　　[font style= "display:block "] SPAN1 
　　[font style= "display:block "] SPAN2 
　　block一般一个块占一行，除非float 
　　inline是自动排为一行，就象段内的文字一样，可成为多行。
　　display:inline比较经典的用法是用在 <ul> 下的 <li> 中
　　display:inline 对应不显示为 display:none 
　　display:block 对应不显示为 hidden 
　　说通俗点 样式为none的元素不占位置,而样式为hidden的元素虽然不显示但还是占地方
　　附：inline 内置，在线的，联机的
