# 单片机空闲与掉电模式 - xqhrs232的专栏 - CSDN博客
2013年04月26日 21:25:51[xqhrs232](https://me.csdn.net/xqhrs232)阅读数：1410
原文地址::[http://blog.csdn.net/wangyoufeng8889/article/details/8856299](http://blog.csdn.net/wangyoufeng8889/article/details/8856299)
特别对于电池供电系统来说,功耗是首要考虑的问题.我们知道单片机内部有一个电源管理寄存器PCON，这个寄存器的最低两位，IDL和PD这两位分别用来设定是否使单片机进入空闲模式和掉电模式。
**1. 空闲模式**     当单片机进入空闲模式时，除CPU处于休眠状态外，其余硬件全部处于活动状态，芯片中程序未涉及到的数据存储器和特殊功能寄存器中的数据在空闲模式期间都将保持原值。但假若定时器正在运行，那么计数器寄存器中的值还将会增加。单片机在空闲模式下可由任一个中断或硬件复位唤醒，需要注意的是，使用中断唤醒单片机时，程序从原来停止处继续运行，当使用硬件复位唤醒单片机时，程序将从头开始执行。
     让单片机进入空闲模式的目的通常是为了降低系统的功耗，举个很简单的例子，大家都用过数字万用表，在正常使用的时候表内部的单片机处于正常工作模式，当不用时，又忘记了关掉万用表的电源，大多数表在等待数分钟后，若没有人为操作，它便会自动将液晶显示关闭，以降低系统功耗，通常类似这种功能的实现就是使用了单片机的空闲模式或是掉电模式。以STC89系列单片机为例，当单片机正常工作时的功耗通常为4mA～7mA，进入空闲模式时其功耗降至2mA，当进入掉电模式时功耗可降至0.1μA以下。
**2.   休眠模式**     当单片机进入掉电模式时，外部晶振停振、CPU、定时器、串行口全部停止工作，只有外部中断继续工作。使单片机进入休眠模式的指令将成为休眠前单片机执行的最后一条指令，进入休眠模式后，芯片中程序未涉及到的数据存储器和特殊功能寄存器中的数据都将保持原值。可由外部中断低电平触发或由下降沿触发中断或者硬件复位模式换醒单片机，需要注意的是，使用中断唤醒单片机时，程序从原来停止处继续运行，当使用硬件复位唤醒单片机时，程序将从头开始执行。
可将数字万用表调节到电流档，然后串接入电路中，观察单片机在正常工作模式、休眠模式、空闲模式下流过系统的总电流变化情况，经测试可发现结果如下：正常工作电流>空闲模式电流>休眠模式电流。
