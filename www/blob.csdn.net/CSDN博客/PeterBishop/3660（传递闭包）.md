# 3660（传递闭包） - PeterBishop - CSDN博客





2019年01月21日 14:53:43[PeterBishop0](https://me.csdn.net/qq_40061421)阅读数：18








```cpp
#include <cstdio>
#include<cstring>
#include<queue>
#include<algorithm>
using namespace std;
typedef long long ll;
 
int N,M;
int mp[110][110];
const int INF=0x3f3f3f3f;
 
void floyd(){
 
    for(int k=1;k<=N;k++){
        for(int i=1;i<=N;i++){
            for(int j=1;j<=N;j++){
                if(mp[i][k]==mp[k][j]&&mp[i][k]!=INF){//如果说i->k的关系确定，k->j的关系确定的话，i->j的关系就确定了
                    mp[i][j]=mp[i][k];
                }
            }
        }
    }
}
 
int main()
{
   scanf("%d %d",&N,&M);
   memset(mp,INF,sizeof(mp));
   for(int i=1;i<=M;i++){
    int u,v;
     scanf("%d %d",&u,&v);
     mp[u][v]=1;
     mp[v][u]=-1;
   }
   floyd();
   int ans=0;
   for(int i=1;i<=N;i++){
     int sum=0;
     for(int j=1;j<=N;j++){
        if(mp[i][j]!=INF)
            sum++;
     }
     if(sum==N-1)
        ans++;
   }
   printf("%d\n",ans);
   return 0;
}
```





