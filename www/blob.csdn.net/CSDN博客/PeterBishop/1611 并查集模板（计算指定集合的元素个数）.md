# 1611 并查集模板（计算指定集合的元素个数） - PeterBishop - CSDN博客





2019年02月16日 19:57:34[PeterBishop0](https://me.csdn.net/qq_40061421)阅读数：40








```cpp
/* ***********************************************
Author        :PeterBishop
Created Time  :Fri 15 Feb 2019 22:31:03 CST
File Name     :t.cpp
Origin        :P O J  1611
************************************************ */

#include <iostream>
#include <cstdio>
#include <cstring>
#include <algorithm>
#include <string>
#include <cmath>
#include <cstdlib>
#include <vector>
#include <queue>
#include <set>
#include <map>

using namespace std;
int n,m;
struct Node{
	int next;
	int cnt;
}S[30001];

int find(int x){
	return x==S[x].next?x:find(S[x].next);
}
void Union(Node &a,Node &b){
	int r1=find(a.next);
	int r2=find(b.next);
	if(r1!=r2){
		S[r1].next=r2;
		S[r2].cnt+=S[r1].cnt;
	}
}
void init(int n){
	for(int i=0;i<n;i++)
	{
		S[i].next=i;
		S[i].cnt=1;
	}
}
int main()
{
	freopen("in.txt","r",stdin);
	//freopen("out.txt","w",stdout);
    while(cin>>n>>m)
	{
		if(n==0&&m==0)
			break;
		init(n);
		for(int i=0;i<m;i++){
			int k;
			cin>>k;
			int pre;
			cin>>pre;
			k--;
			while(k--){
				int x;
				cin>>x;
				Union(S[pre],S[x]);
				pre=x;
			}
		}
		if(S[0].next==0)
			cout<<S[0].cnt<<endl;
		else
		{
			cout<<S[find(S[0].next)].cnt<<endl;
		}

	}
    return 0;
}
```





