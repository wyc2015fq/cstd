# 1045 快速排序——c实现 - 心纯净，行致远 - CSDN博客





2018年11月04日 19:38:19[吉大秦少游](https://me.csdn.net/zhanshen112)阅读数：62








> 
1045 快速排序 （25 分）

著名的快速排序算法里有一个经典的划分过程：我们通常采用某种方法取一个元素作为主元，通过交换，把比主元小的元素放到它的左边，比主元大的元素放到它的右边。 给定划分后的 N 个互不相同的正整数的排列，请问有多少个元素可能是划分前选取的主元？

例如给定 $N = 5$, 排列是1、3、2、4、5。则：
- 1 的左边没有元素，右边的元素都比它大，所以它可能是主元；
- 尽管 3 的左边元素都比它小，但其右边的 2 比它小，所以它不能是主元；
- 尽管 2 的右边元素都比它大，但其左边的 3 比它大，所以它不能是主元；
- 类似原因，4 和 5 都可能是主元。

因此，有 3 个元素可能是主元。

### 输入格式：

输入在第 1 行中给出一个正整数 N（≤10​5​​）； 第 2 行是空格分隔的 N 个不同的正整数，每个数不超过 10​9​​。

### 输出格式：

在第 1 行中输出有可能是主元的元素个数；在第 2 行中按递增顺序输出这些元素，其间以 1 个空格分隔，行首尾不得有多余空格。

### 输入样例：

```
5
1 3 2 4 5
```

### 输出样例：

```
3
1 4 5
```


**思路：**

这道题目的难点不在于实现，而在于时间复杂度的控制上。否则就容易超时。刚开始我也没有实现，后来查了网上的做法，都是注意到主元有一个特点：**主元的位置和排列之后数组中的位置相同，而且是主元之前的最大数。**

为什么要是主元之前最大的数呢？是为了防止543和123中的3都被sort之后当做主元。

算法：直接申请三个数组a[100005],b[100005],c[100005]存起来原始的，排序之后的和筛选出来的主元。将原始数组a[100005]排序之前赋给b[100005]，sort（a,a+n）之后与原来的b数组对比，如果元素相同，并且是该元素是元素位置之前最大的数字，就可以确认为主元。存入c数组。再输出。见代码2.

比较坑人的是**没有主元的时候必须要输出空行。。**

**代码：**

**1、**

```cpp
//pat1045v1
#include <stdio.h>
#include <stdlib.h>
int cmp(const void* a,const void* b){
	return *(int*)a-*(int*)b;
}
int main(){
	int n,i,j,max=0,k=0;	scanf("%d",&n);
	long int a[n],b[n];
	for(i=0;i<n;i++){
		scanf("%ld",&a[i]);
		b[i]=a[i];
	}	
	qsort(b,n,sizeof(long int),cmp);
	int res[n];
	
	for(i=0;i<n;i++){
		if(a[i]>max)	max=a[i];
		if(max==a[i]&&a[i]==b[i])	res[k++]=a[i];
	}
	printf("%d\n",k);
	for(i=0;i<k;i++)	
		if(i==0)
             printf("%d",res[i]);
        else
            printf(" %d",res[i]);
    printf("\n");
	return 0;
}
```

在debug的时候，出现了一个输出格式不对的问题，如问题：[PAT1045 以下两段代码，只有打印输出部分不同，但是代码2可以AC，代码1不行，差别在哪里？](https://ask.csdn.net/questions/707979)

ANS：如果不存在主元的话，必须要再打印一个空行

2、AC

```cpp
#include <iostream>
#include <algorithm>
using namespace std;
int main(){
	long int n,a[100005],b[100005],c[100005],cnt=0,max=0;	cin>>n;
	for(int i=0;i<n;i++){
		cin>>a[i];
		b[i]=a[i];
	}	
	sort(a,a+n);
	for(int i=0;i<n;i++){
		if(a[i]==b[i]&&b[i]>max)	c[cnt++]=b[i];
		if(b[i]>max)	max=b[i];
	}
	cout<<cnt<<endl;
	for(int i=0;i<cnt;i++){
		if(i!=0)	cout<<" ";
		cout<<c[i];
	}		
	cout<<endl;
	return 0;	
}
```





