# 1024 科学计数法——C/C++实现 - 心纯净，行致远 - CSDN博客





2018年11月23日 01:56:07[吉大秦少游](https://me.csdn.net/zhanshen112)阅读数：649








# 题目

> 
1024 科学计数法 （20 分）

科学计数法是科学家用来表示很大或很小的数字的一种方便的方法，其满足正则表达式 [+-][1-9]`.`[0-9]+E[+-][0-9]+，即数字的整数部分只有 1 位，小数部分至少有 1 位，该数字及其指数部分的正负号即使对正数也必定明确给出。

现以科学计数法的格式给出实数 A，请编写程序按普通数字表示法输出 A，并保证所有有效位都被保留。

### 输入格式：

每个输入包含 1 个测试用例，即一个以科学计数法表示的实数 A。该数字的存储长度不超过 9999 字节，且其指数的绝对值不超过 9999。

### 输出格式：

对每个测试用例，在一行中按普通数字表示法输出 A，并保证所有有效位都被保留，包括末尾的 0。

### 输入样例 1：

```
+1.23400E-03
```

### 输出样例 1：

```
0.00123400
```

### 输入样例 2：

```
-1.2E+10
```

### 输出样例 2：

```
-12000000000
```


# 算法

是一道比较麻烦的题目。代码1最后一侧测试案例提示段错误，代码2直接就好几个没通过……

2018.12.02

代码1提示segmentation fault是因为给定的char类型字符串太短了，，，，真是无语，改成char E[10000]即可。

代码2测试没通过是因为“+”无需输出，加个符号判断就可以完全AC了，见代码3.

看了网上的代码思路，发现和我的思路其实是差不多的。只是在n<0的时候，确实会简单很多。思路没有我分的这么细，也是完全可以的。

我试了一下：首先用n记录E后面指数的具体数字，记录的时候把正负号也记录进去，使用stoi可以将字符串转化为int型有符号常量，很方便。其次用一个从s[1]~s[i-1]的子字符串，用substr(起始地址，个数)函数较好。

当n<0，先将需要的0输出，再讲对应的substr输出，注意substr中的小数点不输出；

当n>0，先判断n与substr中的小数点后数字的位数的大小，如果n>=substr.length()-2，则先将字符串输出，注意不输出小数点，输出之后再输出n-（substr.length()-2）个‘0’；如果n<substr.length()-2，则先将对应的n为substr输出，再输出一个小数点，再输出字符串后面的部分。

这种思路见代码4.

# 代码

1、C

```cpp
#include<string.h>
#include<stdio.h>
int main() {
    char E[1000];
    scanf("%s", E);
    int n = strlen(E);
    if (E[0] == '-') printf("-"); //输出负号
    int pos = 0; //存放e的位置
                 // while(E[pos++]!='E'); //debug
    while (E[pos] != 'E') {
        pos++;
    }
    // printf("%d\n",pos);
    int exp = 0, i = 0;  //存放指数
    for (i = pos + 2; i<n; i++) {
        exp = exp * 10 + (E[i] - '0');
    }
    if (exp == 0) { //判断指数为0的情况 
        for (i = 1; i<pos; i++) {
            printf("%c", E[i]);
        }
    }
    if (E[pos + 1] == '-') {  //如果指数为负数 
        printf("0.");
        for (i = 0; i<exp - 1; i++) {
            printf("0");    //输出负指数的0 
        }
        printf("%c", E[1]); //E[2]是小数点，E[0]是正负号，均略过
        for (i = 3; i<pos; i++) {
            printf("%c", E[i]);
        }
    }
    else {   //如果指数为正
        for (i = 1; i<pos; i++) {
            if (E[i] == '.') continue;
            printf("%c", E[i]);
            if (i == exp + 2 && pos - 3 != exp) {
                printf(".");
            }
        }
        for (i = 0; i<exp - (pos - 3); i++) {
            printf("0");
        }
    }
    return 0;
}
```

2、C++，正号无须输出

```cpp
//1024
#include <iostream>
#include <string>
using namespace std;
int main(){
	string s;	cin>>s;
	int f1=0,f2=0,s2=0,i;
	char c;
	for(i=0;i<s.length() ;i++){
		if(s[i]=='.') f1=i;
		if(s[i]=='E') f2=i;
	}
	cout<<s[0];	//输出+-；
	for(i=f2+2;i<s.length() ;i++)	s2=s2*10+s[i]-'0'; //记录指数数值 
	if(s[f2+1]=='+'){
		for(i=1;i<f1;i++)	cout<<s[i];
		if(f2-1-f1>s2){
			for(i=f1+1;i<=f1+s2;i++)	cout<<s[i];
			cout<<'.';
			for(i=f1+s2+1;i<f2;i++)	cout<<s[i];
		}	
		if(f2-1-f1==s2){
			for(i=f1+1;i<=f1+s2;i++)	cout<<s[i];
		}	
		if(f2-1-f1<s2){
			for(i=f1+1;i<=f2-1;i++)	cout<<s[i];
			for(i=f2-f1;i<=s2;i++)	cout<<'0';
		}	
	} 
	if(s[f2+1]=='-'){
		if(s2>0){
			cout<<"0.";
			for(i=1;i<=s2-1;i++)	cout<<'0';
			for(i=1;i<f2;i++)	
				if(i!=f1)	cout<<s[i];
		}
		if(s2==0)	
			for(i=0;i<f2;i++)	cout<<s[i];	
	} 
	return 0;
}
```

3、代码2的修改，AC

```cpp
//1024
#include <iostream>
#include <string>
using namespace std;
int main(){
	string s;	cin>>s;
	int f1=0,f2=0,s2=0,i;
	char c;
	for(i=0;i<s.length() ;i++){
		if(s[i]=='.') f1=i;
		if(s[i]=='E') f2=i;
	}
	if(s[0]=='-') cout<<s[0];	//输出+-；
	for(i=f2+2;i<s.length() ;i++)	s2=s2*10+s[i]-'0'; //记录指数数值 
	if(s[f2+1]=='+'){
		for(i=1;i<f1;i++)	cout<<s[i];
		if(f2-1-f1>s2){
			for(i=f1+1;i<=f1+s2;i++)	cout<<s[i];
			cout<<'.';
			for(i=f1+s2+1;i<f2;i++)	cout<<s[i];
		}	
		if(f2-1-f1==s2){
			for(i=f1+1;i<=f1+s2;i++)	cout<<s[i];
		}	
		if(f2-1-f1<s2){
			for(i=f1+1;i<=f2-1;i++)	cout<<s[i];
			for(i=f2-f1;i<=s2;i++)	cout<<'0';
		}	
	} 
	if(s[f2+1]=='-'){
		if(s2>0){
			cout<<"0.";
			for(i=1;i<=s2-1;i++)	cout<<'0';
			for(i=1;i<f2;i++)	
				if(i!=f1)	cout<<s[i];
		}
		if(s2==0)	
			for(i=0;i<f2;i++)	cout<<s[i];	
	} 
	return 0;
}
```

4、思路易懂清晰的版本

```cpp
#include <iostream>
#include <string>
using namespace std;
int main(){
	string s;	cin>>s;
	int i=0;
	while(s[i]!='E')	i++;	//记录E的位置
	if(s[0]=='-')	cout<<s[0] ;	//负号输出 
	string str=s.substr(1,i-1) ;
	int n=stoi(s.substr(i+1) );
	if(n<0){	//指数为负 
		cout<<"0.";
		for(int i=0;i<abs(n)-1;i++)	cout<<'0';
		for(int i=0;i<str.length() ;i++)
			if(str[i]!='.')	cout<<str[i];
	}
	else{	//指数为正
		if(n>=str.length() -2){	//指数数值大 
			for(int i=0;i<str.length() ;i++)
				if(str[i]!='.')	cout<<str[i];
			for(int i=0;i<n-(str.length()-2) ;i++)	cout<<'0';
		}
		else{	//指数数值小 
			cout<<str[0];
			int cnt=0,i;
			for(i=2,cnt;i<str.length() &&cnt<n;i++,cnt++)	cout<<str[i];
			cout<<'.';
			for(i;i<str.length() ;i++)	cout<<str[i];
		}
	}
	return 0;
}
```





