# CAN总线基础（上） - 心纯净，行致远 - CSDN博客





2018年06月12日 22:50:08[吉大秦少游](https://me.csdn.net/zhanshen112)阅读数：361








## 概述

汽车电子设备的不断增多，对汽车上的线束分布以及信息共享与交流提出了更高的要求。传统的电气系统往往采用单一连接的方式通信，这必将带来线束的冗余以及维修的成本的提高。![](http://iron-flask.stor.sinaapp.com/paper/3/1.jpg)

传统的单一通信的对接方式，已经不能满足现代汽车电子发展的需求，采用更为先进的总线技术势在必行。总线技术可以实现信息的实时共享、解决了传统布线方式中**线束多、布线难、成本高**等问题，从而提高整车通信的质量与品质。

**CAN总线**（Controller Area Network，控制器局域网络）由德国博世公司于上世纪80年代提出，近20年来，随着CAN总线在工业测控与汽车领域的普及，CAN网络技术不断优化，取得了长足发展。如今CAN总线已经成为了汽车上不可或缺的重要环节，ECU内部的CAN总线开发也占到了ECU开发中的很大分量。在汽车中为了满足车载系统的不同要求，主要采用高速CAN和低速CAN。这两者以不同的总线速率工作以获得最佳的性价比，在两条总线之间采用CAN网关进行连接。
- 
高速CAN（动力总线）高速CAN总线的传输速率范围在125kbit/s - 1Mbit/s之间，主要用于传动系数传输的实时性要求（如发动机控制、自动变速箱控制、行驶稳定系统、组合仪表等）。

- 
低速CAN（舒适总线）低速CAN总线的传输速率范围在5kbit/s - 125kbit/s之间。主要用于舒适系统和车身系统的数据传输的实时性要求（如空调控制、座椅调节、车窗升降等）。![](http://iron-flask.stor.sinaapp.com/paper/3/2.jpg) 整车CAN网络示意图


## CAN总线特点

CAN总线是一种串行数据通讯协议，其中包含了CAN协议的物理层以及数据链路层。可以完成对数据的位填充，数据块编码，循环冗余效验，帧优先级的判别等工作。其主要特点如下：
- 多主机方式工作，网络上任意一个节点（未脱离总线）均可以随时向总线网络上发布报文帧。
- 节点发送的报文帧可以分为不同的优先级，满足不同实时要求。
- 采用载波侦听多路访问/冲突检测（CSMA/CD）技术，当两个节点同时发布信息时，高优先级报文可不受影响地传输数据。
- 节点总数实际可达110个。
- 采用短帧结构，每一帧最多有8个有效字节。
- 当某个节点错误严重时，具有自动关闭功能，切断与总线的联系，致使总线上的其他操作不受影响。

## CAN总线物理层

### 总线结构

CAN总线采用双线传输，两根导线分别作为CAN*H、CAN*L，并在终端配备有120Ω的电阻。收到总线信号时，CAN收发器将信号电平转化为逻辑状态，即CAN*H与CAN*L电平相减后，得到一个插值电平。各种干扰（如点火系统）在两根导线上的作用相同，相减后得到的插值电平可以滤过这些干扰。![](http://iron-flask.stor.sinaapp.com/paper/3/3.jpg)

### 总线电平

CAN总线有两种逻辑电平状态，即显性与隐性。显性电平代表“0”，隐性电平代表“1”。采用非归零码编码，即在两个相同电平之间并不强制插入一个零状态电平。高速CAN在传输隐性位时，CAN-H与CAN-L上的电平位均为2.5V；在传输显性位时分别为3.5V与1.5V。低速CAN在传输隐性状态位时，CAN-H上的电平为0V，CAN-L上的电平位5V。在传输显性状态位时，CAN-H上的电平位3.6V，CAN_L的位1.4V。
![](http://iron-flask.stor.sinaapp.com/paper/3/4.jpg)
![](http://iron-flask.stor.sinaapp.com/paper/3/5.jpg)

为了确保通讯的正确性，总线信号必须在一定时间内出现在总线上，并且保证被正确采样。总线信号传输有一定的时间延迟，最大的可靠的总线波特率与总线长度有关。ISO11898中对各种总线长度有着以下定义：
- 1Mbit/s 总线长度为40m（规范）。
- 500kbit/s 总线长度最大值为100m（建议值）。
- 250kbit/s 总线长度最大值为250m。
- 125kbit/s 总线长度最大值为500m。
- 40kbit/s 总线长度最大值为1000m。

## CAN总线硬件设备
- **CAN通信线缆**，实现节点的互联，是传输数据的通道。主要有：普通双绞线，同轴电缆，光纤。
- **CAN驱动/接收器**，将信息封装为帧后发送，接收到的帧将其还原为信息、标定并报告节点状态。
- **CAN控制器**，专按协议要求设计制造，经简单总线连接即可实现CAN的全部功能。包括：SJA1000（Philips），82527（Intel）。
- **CAN微控制器**，嵌有部分或全部CAN控制模块及相关接口的通用型微控制器现如今很多芯片都配备CAN接口。

转载自：[http://iron.applinzi.com/paper/3](http://iron.applinzi.com/paper/3)



