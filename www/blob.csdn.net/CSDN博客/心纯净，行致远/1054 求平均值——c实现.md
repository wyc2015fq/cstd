# 1054 求平均值——c实现 - 心纯净，行致远 - CSDN博客





2018年11月06日 15:19:03[吉大秦少游](https://me.csdn.net/zhanshen112)阅读数：93








> 
1054 求平均值 （20 point(s)）

本题的基本要求非常简单：给定 N 个实数，计算它们的平均值。但复杂的是有些输入数据可能是非法的。一个“合法”的输入是 [−1000,1000] 区间内的实数，并且最多精确到小数点后 2 位。当你计算平均值的时候，不能把那些非法的数据算在内。

### 输入格式：

输入第一行给出正整数 N（≤100）。随后一行给出 N 个实数，数字间以一个空格分隔。

### 输出格式：

对每个非法输入，在一行中输出 `ERROR: X is not a legal number`，其中 `X` 是输入。最后在一行中输出结果：`The average of K numbers is Y`，其中 `K` 是合法输入的个数，`Y` 是它们的平均值，精确到小数点后 2 位。如果平均值无法计算，则用 `Undefined` 替换 `Y`。如果 `K` 为 1，则输出 `The average of 1 number is Y`。

### 输入样例 1：

```
7
5 -3.2 aaa 9999 2.3.4 7.123 2.35
```

### 输出样例 1：

```
ERROR: aaa is not a legal number
ERROR: 9999 is not a legal number
ERROR: 2.3.4 is not a legal number
ERROR: 7.123 is not a legal number
The average of 3 numbers is 1.38
```

### 输入样例 2：

```
2
aaa -9999
```

### 输出样例 2：

```
ERROR: aaa is not a legal number
ERROR: -9999 is not a legal number
The average of 0 numbers is Undefined
```


# 思路：

这道题目用了sscanf()和sprintf()函数，该函数的头文件在<stdio.h>中，而这个头文件被<iostream>包含，因此可以直接使用<iostream>。sscanf()和sprintf()函数的使用见[格式化字符读入与判断scanf()/printf()/sscanf()/sprintf()](https://blog.csdn.net/zhanshen112/article/details/84753691)

注意：

```cpp
sscanf(a,"%lf",&tmp);
sprintf(b,"%.2lf",tmp);
```

代码中的a,b都是字符数组的首地址，不要用字符串，我试了好像不行~~~

将字符串a以%lf的形式读入double变量，再让double变量以%.2lf的形式读入字符串b，比较两个字符串就可以直到输入是不是double。注意for循环时使用strlen(a)和strlen(b)都是可以的。另外，由于使用strlen函数，必须要包含<string.h>头文件，包含<string>是不行的。

# 代码：

```cpp
#include <iostream>
#include <string.h>
using namespace std;
int main(){
	int N,i,j,cnt=0;	cin>>N;
	double sum=0,tmp;
	char a[50],b[50];
	for(i=0;i<N;i++){
		scanf("%s",a);
		sscanf(a,"%lf",&tmp);
		sprintf(b,"%.2lf",tmp);
		int flag=0;
		for(j=0;j<strlen(a);j++)
			if(a[j]!=b[j])	flag=1;
		if(flag||tmp<-1000||tmp>1000){
			printf("ERROR: %s is not a legal number\n",a)	;
			continue;
		}
		else{
			sum+=tmp;
			cnt++;
		}	
	}
	if(cnt>1)	printf("The average of %d numbers is %.2lf",cnt,sum/cnt);
	else if(cnt==1)	printf("The average of 1 number is %.2lf",sum);
	else            printf("The average of 0 numbers is Undefined");
	return 0;
}
```

下面的代码可以帮助理解sscanf（）和sprintf（）

```cpp
#include <stdio.h>

int main(){
	char a[10],b[10];
	double tmp;
	scanf("%s",&a);
	sscanf(a,"%lf",&tmp);
	sprintf(b,"%.2lf",tmp);
	if(a[0]==b[0])	printf("hello	%c	%c	%lf",a[0],b[0],tmp);
	if(a[0]!=b[0])	printf("world	%c	%c	%lf",a[0],b[0],tmp);
}
/*
input:s
output:world   s       0

input:23
output:hello   2       2
*/
```





