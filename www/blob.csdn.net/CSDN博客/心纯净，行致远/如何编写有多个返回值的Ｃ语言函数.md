# 如何编写有多个返回值的Ｃ语言函数 - 心纯净，行致远 - CSDN博客





2018年06月24日 21:55:58[吉大秦少游](https://me.csdn.net/zhanshen112)阅读数：83








1引言 

　　笔者从事C语言教学多年，在教学中学生们常常会问到如何编写具有多个返回值的C语言函数。编写有多个返回值的函数是所有C语言教材里均没有提到的知识点，但在实际教学与应用的过程中我们都有可能会遇到这样的问题。有学生也尝试了不少方法：如把多个需要返回的值作相应的处理后变成一个可以用return语句返回的数据，再在主调函数中拆开返回的数据使之变成几个值；或者把需要返回多个值的一个函数分开几个函数去实现多个值的返回。这些方法虽然最终都能实现返回要求的多个值，但从程序算法的合理性与最优化方面去考虑，显然不理想。我们知道C语言函数的返回值是通过函数中的return语句来实现的，可是每调用一次函数，return语句只能返回一个值。那么当我们希望从一个函数中返回多个值时，用什么方法去实现比较合理呢？在教学过程中，我建议学生跳出对return语句的定势思维，一步步引导学生通过几种间接方式实现多个返回值的C语言函数。以下是笔者在教学过程中引导学生采用的三种不同方法编写多个返回值的C语言函数。

　　2方法1：利用全局变量 

　　分析：全局变量作为C语言的一个知识点，虽然我们都了解它的特点，但在实际教学过程中应用得并不是很多。由于全局变量的作用域是从定义变量开始直到程序结束，而对于编写有多个返回值的C语言函数，我们可以考虑把要返回的多个值定义成全局变量。当函数被调用时，全局变量被更改，我们再把更改后的全局变量值应用于主调函数中。函数被调用后被更改后的全局变量值即为函数的数个返回值。下面以一个实例演示该方法的应用。
　　实例1：编写函数求3个数中的最大值与最小值。 
　　方法：把最大值、最小值分别定义成2个全局变量max、min，在用户自定义函数中把求出来的最大值与最小值分别赋给全局变量max、min。函数调用完毕后全局变量的max、min值即保存了函数要求返回的值。程序参考代码如下：
　　#include "stdio.h" 
　　#include "conio.h" 
　　int max,min;/*定义两个全局变量用于保存函数返回值*/ 
　　void max_min(int a,int b,int c) /*定义求最大最小值的函数*/ 
　　{max=min=a; /*初始化最大最小值*/ 
　　 if(max　　 if(max　　 if(min>b)min=b; 
　　if(min>c)min=c; 
　　} 
　　main() 
　　{int x,y,z; 
　　printf(" 请输入3个整数：\n"); 
　　scanf("%d,%d,%d",&x,&y,&z); 
　　max_min(x,y,z) ;/*调用求最大值与最小值的函数*/ 
　　printf("三个数中的最大值为:%d;最小值为:%d",max,min);/*输出最大值与最小值*/ 
　　getch(); 
　　} 
　　调试结果如下： 
　　请输入3个整数： 
　　5,-6,2 
　　三个数中的最大值为:5;最小值为:-6 
　　注意：该方法虽然可以实现有多个返回值的函数，但由于全局变量不能保证值的正确性(因为其作用域是全局，所以程序范围内都可以修改它的值，如果出现错误将非常难以发现)，并且全局变量增加了程序间模块的耦合，所以该方法要慎用。

　　3方法2：传递数组指针 

　　分析：在教学过程中，我们知道C语言函数参数的传递方式有值传递与地址传递。当进行值传递时，主调函数把实参的值复制给形参，形参获得从主调函数传递过来的值运行函数。在值传递过程中被调函数参数值的更改不能导致实参值的更改。而如果是地址传递，由于传递过程中从实参传递过来的是地址，所以被调函数中形参值的更改会直接导致实参值的更改。因此，我们可以考虑把多个返回值作为数组元素定义成一个数组的形式，并使该数组的地址作为函数的形式参数，以传址方式传递数组参数。函数被调用后，形参数组元素改变导致实参改变，我们再从改变后的实参数组元素中获得函数的多个返回值。以下实例演示该方法的应用。
　　实例2：编写函数求一维整形数组的最大值与最小值，并把最大值与最小值返回给主调函数。 
　　方法：以指针方式传递该一维数组的地址，然后把数组的最大值与数组的第一个元素交换，把数组的最小值与最后一个元素交换。函数被调用完毕后，实参数组中的第一元素为数组的最大值，实参数组中最后一个元素为数组的最小值，从而实现返回数组的最大值与最小值的功能。程序参考代码如下：
　　#include "stdio.h" 
　　#include "conio.h" 
　　void max_min(int *ptr,int n) /*定义求数组最大值最小值的函数，传递数组指针*/ 
　　{int i,j,k;/*j保存最大值所在位置，k保存最小值所在位置*/ 
　　int *temp;/*用于交换位置*/ 
　　*temp=*ptr; 
　　for(i=0;i　　{ 
　　if(*ptr<*(ptr+i))/*最大值与第一个元素进行交换*/ 
　　{ 
　　k=i; 
　　*temp=*ptr; 
　　*ptr=*(ptr+k); 
　　*(ptr+k)=*temp ; 
　　} 
　　if(*(ptr+n-1)>*(ptr+i))/*最小值与最后一个元素进行交换*/ 
　　{ 
　　j=i; 
　　*temp =*(ptr+n-1); 
　　*(ptr+n-1)=*(ptr+j); 
　　*(ptr+j)= *temp ;} 
　　} 
　　} 
　　/*调用最大最小值函数*/ 
　　main() 
　　{ 
　　int A[6],i; 
　　for(i=0;i<6;i++) 
　　 scanf("%d",&A[i]); 
　　max_min(A,6); 
　　printf("max=%d, min=%d\n \n",A[0],A[5]); 
　　getch(); 
　　} 
　　调试结果如下： 
　　请输入6个整形数,以空格隔开: 
　　5 8 9 32 -6 4 
　　max=32,min=-6 

注意：该方法适用于多个返回值的数据类型一致的情况。当返回值数据类型不一致时，不适用该方法。 

　　4方法3：传递结构体指针 

　　分析：结构体作为教学中的一个难点，教材对它介绍的内容并不多，应用的实例更是少之又少，所以学生对于结构体普遍掌握情况不理想。其实，编写返回多个值的C语言函数，也可以考虑采用结构体的方式去实现。通过方法2，我们知道如果返回的数个数值的数据类型不一致，可以通过定义全局变量实现有多个返回值的C语言函数，也可以考虑把要求返回的数个值定义成一个结构体，然后同样以传递结构体指针方式把结构体的指针传递给形参结构体指针，那么函数中对形参结构体的修改即是对实参结构体的修改，函数被调用后获取的实参结构体成员即为函数的多个返回值，下面以实例演示该方法的应用。
　　实例3：编写一个用户自定义函数，允许用户录入学生的基本信息(包括学号、姓名、所属班级、总评成绩)，并返回这些基本信息给主调函数。 





　　方法：把学生基本信息定义成一个结构体，在用户自定义函数中传递该结构体的指针，则自定义函数中对结构体成员的录入操作即是对实参结构体成员的录入操作，从而实现多个返回值。参考代码如下：
　　#include "stdio.h" 
　　#include "conio.h" 
　　struct inf{/*定义学生结构体，分别包含成员学号、姓名、班别、总评成绩*/ 
　　 char xh[12]; 
　　 char name[20]; 
　　 char class[15]; 
　　 int chj; 
　　}; 
　　main(void) 
　　{ 
　　struct inf a1; /*定义学生结构体类型变量*/ 
　　void xxxx(struct inf *ptr); 
　　printf("请输入学号,姓名,班别,总评成绩,以空格隔开:\n") ; 
　　xxxx(&a1);/*调用函数，以学生结构体类型变量地址作为实参*/ 
　　printf("学号：%s,姓名： %s,班别：%s,总评成绩：%d",a1.xh, a1.name,a1.class,a1.chj); 
　　getch(); 
　　} 
　　void xxxx(struct inf *ptr)/*该函数实现对结构体成员数据的录入操作*/ 
　　{ 
　　 char xh1[12],name1[20],class1[15]; 
　　 int chj1; 
　　scanf("%s%s%s%d",xh1,name1,class1,&chj1); 
　　 strcpy(ptr->xh,xh1); 
　　strcpy(ptr->name,name1); 
　　strcpy(ptr->class,class1); 
　　ptr->chj=chj1; 
　　 } 
　　调试结果如下： 
　　请输入学号,姓名,班别,总评成绩,以空格隔开: 
　　200102LiLi200185 
　　学号：200102,姓名： LiLi,班别：2001,总评成绩：85 
　　注意：当函数要求返回的多个值是相互联系的或者返回的多个值数据类型不一致时可以采用该方法。 

　　5结束语 

　　对于以上这三种方法，如果想要返回的数个值数据类型一致，可以考虑采用方法2；而对于不同数据类型的返回值，如果各个数值之间是相互联系的，则方法3较为合适；方法1虽然在很多情况下都可以实现多个返回值的C语言函数，但毕竟全局变量应用过程中有很多危险，要慎重使用。


　　通过对以上几种方法的分析讲解，在教学过程中，学生再遇到这样的问题时，就能根据返回值的情况选择合适的途径去实现多个返回值的C语言函数。另外，如果再遇到类似的无法用教材知识点去直接解决的问题时，他们基本都能举一反三地尝试采用间接方式去解决。

转载：[https://blog.csdn.net/supreme42/article/details/7636475](https://blog.csdn.net/supreme42/article/details/7636475)



