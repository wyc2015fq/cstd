# 慢查询日志 - 李鑫o_O - CSDN博客





2016年05月16日 23:02:00[hustlx](https://me.csdn.net/HUSTLX)阅读数：447
个人分类：[数据库](https://blog.csdn.net/HUSTLX/article/category/6231484)









慢查询：让MySQL记录下查询超过指定时间的语句，我们将超过指定时间的[SQL语句](http://baike.baidu.com/subview/1040165/1040165.htm)查询称为“慢查询”。



mysql慢查询日志对于跟踪有问题的查询非常有用,可以分析出当前程序里有很耗费资源的sql语句,那如何打开mysql的慢查询日志记录呢?

   其实打开mysql的慢查询日志很简单,只需要在mysql的配置文件里(windows系统是my.ini,linux系统是my.cnf)的[mysqld]下面加上如下代码：

log-slow-queries=/var/lib/mysql/slowquery.log

long_query_time=2



注:

log-slow-queries 设置把日志写在那里，为空的时候，系统会给慢查询日志赋予主机名，并被附加slow.log. /var/lib/mysql/slowquery.log为日志存放的文件的位置,一般这个目录要有mysql的运行帐号的可写权限,一般都将这个目录设置为mysql的数据存放目录

long_query_time=2中的2表示查询超过两秒才记录.

如果设置了参数log-long-format，那么所有没有使用索引的查询也将被记录。在文件my.cnf或my.ini中加入下面这一行可以记录这些查询

这是一个有用的日志。它对于性能的影响不大（假设所有查询都很快），并且强调了那些最需要注意的查询（丢失了索引或索引没有得到最佳应用）
            


