# 如何实现等概率事件 - bigfacesafdasgfewgf - CSDN博客





2014年05月13日 15:43:35[bigface1234fdfg](https://me.csdn.net/puqutogether)阅读数：845
个人分类：[Data Structure](https://blog.csdn.net/puqutogether/article/category/2595131)









# 如何实现等概率事件

等概率时间在日常生活中都是非常常见的。抓阄，抽签等等游戏，都是等概率事件。那么我们把这样的游戏背景转化为编程的话，就成为了这样一个问题：存在一个数组，如何等概率的抽取出其中的一个数？




其实设计出这样等概率事件的算法，其核心motivation还是来源于抽签这样的游戏过程。我们知道，排队抽签的游戏中，每个人中奖的机会是一样大的，不管你是排队在前面抽还是后面。这个可以通过简单的概率计算就可以证明。




那么我们在编程设计等概率事件算法思想时，也是这样的一个过程。




设计的算法还是顺序遍历的过程。给定一个数组，当遍历到元素第i个的时候，此时生成一个随机数r。如果r%i==0，那么我们就将e替换为当前值（其中e是之前选取了的某一个元素）；否则遍历下一个数，直到遍历结束。




那么这样的过程是不是一个等概率事件呢？我们可以使用数学归纳法证明。




当i=1时，r%i==0必成立，概率P=1。也就是说e为第一个元素；

当i=2时，r%i==0成立的概率为1/2。那么第一个元素不被替换，被选中的概率是1*(1-1/2)=1/2，第二个元素被选中，也就是第一个元素被替换的概率为1/2，所以这两个元素是等概率被选中的；

……

当i=L+1时，那么之前选中的元素不被替换，被选中的概率为1/L*(1-1/(L+1))=1/(L+1)。也是等概率被选中的。




以后遇到需要实现等概率事件的地方，都可以用到该算法。












