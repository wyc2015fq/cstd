# C语言字符输入的EOF - 硬曲奇小屋 - CSDN博客





2017年09月13日 20:56:55[HardCookies](https://me.csdn.net/james_616)阅读数：395








好久没有用C写过程序了，今天与导师沟通，导师打算让我跟室里的其他两位职工做关于探测器数据的处理。因为涉及到硬件，主要要用到C语言来编写。依稀还记得当初大学时第一次用C写程序时得到满意结果的欣喜若狂，还有输出一大堆“烫烫烫烫”时的满头雾水。 

所以打算这几天花些时间好好把C语言的知识回顾起来，我的C语言的书早不知道扔到哪里去了，还好室友有一本经典的《The C Programing Language》，是C语言的设计者Dennis Ritchie及Brian Kernighan所著。这本书堪称C的经典，第一版问世于1978年，第二版自1988年面世后一直被广泛使用，至今未有新的版本出版，可见其内容的稳定性。 

从头开始看起，感觉这本书绝非以往的教科书式的照本宣科，简单的内容也不做过多重复。正如第1章所说
> 
目的是让读者能尽快开始编写C语言程序，因为我们深信，实际编写程序才是学习一种新语言的好方法。


在介绍字符输入／输出时介绍了一个实用的程序用于统计行数、单词数与字符数。

```
#include <stdio.h>

#define IN 1    /* 在单词内 */
#define OUT 0   /* 在单词外 */

/* 统计输入的行数、单词数与字符数 */
int main(int argc, char *argv[]) {
    int c, nl, nw, nc, state;

    state = OUT;
    nl = nw = nc = 0;
    while ((c = getchar()) != EOF) {
        ++nc;
        if (c == '\n') {
            ++nl;
        }
        if (c == ' ' || c == '\n' || c == '\t') {
            state = OUT;
        }
        else if (state == OUT) {
            state = IN;
            ++nw;
        }
    }
    printf("%d %d %d\n",nl, nw, nc);
}
```

getchar函数每次从输入流中读取一个输入字符，一般是通过键盘输入。 
`while ((c = getchar()) != EOF)`

c是逐一读取输入流中返回的数值，当不是文件结束符（end of file）时就执行循环内容。一般情况下，EOF的数值为-1. 

刚刚开始运行程序时，我不知道该如何结束，到底输入什么作为EOF呢？直接输入-1是不行的，所以程序就一直在循环里，无法跳出。 

后来在网上搜索到了答案，原来EOF是通过如下的方式输入的。
> 
1.在Windows下输入：CTRL+Z+Enter； 

  2.在Linux/Unix/Mac操作系统下输入：CTRL+D+Enter。


输入结束后，按照你所对应的操作系统键入EOF就能得到正常的运行结果了。





