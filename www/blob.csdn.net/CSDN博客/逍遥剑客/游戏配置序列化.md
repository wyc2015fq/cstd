# 游戏配置序列化 - 逍遥剑客 - CSDN博客
2007年12月05日 22:28:00[xoyojank](https://me.csdn.net/xoyojank)阅读数：1547
游戏中提供很多可供配置的设置,有利用适应多种不同的硬件配置,也有利于适应用不同玩家的操作习惯.
如果每次进游戏的话都要重设一次,这显然就失去了配置的意义,不如用一个适用范围比较广的默认值算了.
所以,配置需要保存.
windows中就有众多的的ini文件,还有一些软件会把信息存入注册表.但是,当配置信息较多或是对安全性有所考虑时,这就不太适合了.而且,解析ini文件(或XML)等文本格式的配置,也是一件比较麻烦的事.另一种比较方便的方法就是采用二进制存储,直接把内存中的数据转储,下次用的时候再重新读回来,就像XP的休眠功能一样.
跟其他语言不同,C++本身并没有提供序列化的支持.不过这也给了我们自由发挥的空间,呵呵
比如,你用一个struct来存储某些配置:
struct GameConfig
{
byte x;
byte y;
}config;
 简单地保存到文件的方法就是直接用流输出:
usingnamespace std;
ofstream outfile("config.cfg", ios::out|ios::binary);
if(outfile)
{
     outfile.write( (char*)&config, sizeof(GameConfig) );
     outfile.close();
}
下次直接读取到结构体里就可以了:
usingnamespace std;
ifstream infile("config.cfg", ios::in|ios::binary);
if(infile)
{
    infile.read( (char*)&config, sizeof(GameConfig) );
    infile.close();
}
不过这样有个缺点,就是一旦结构体改变,存档数据就没法用了.所以,文件头还需要一些信息来描术这个配置文件,比如文件版本,文件配置数目等等,读取的时候按byte一个个的读,这样就可以兼容老的版本数据,做出合适的处理了.
