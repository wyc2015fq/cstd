# DirectX9.0 入门手册(4)  - 深之JohnChen的专栏 - CSDN博客

2005年12月19日 14:39:00[byxdaz](https://me.csdn.net/byxdaz)阅读数：1250


第一次写这种文章，再加上自己也是菜鸟，虽然有部分内容是参考一些书籍及自己翻译一些英文文章所写出来的，但我相信文章里面肯定也还有很多bug，如果你发现了请告诉我，或者你有什么想法也可以和我交流，我诚心和志同道合的人成为朋友，我的QQ是61010818，我的邮箱[fowenler@126.com](mailto:fowenler@126.com)





·D3D中的图元简介





在D3D中，一共有三种基本图元，分别是点、线和三角形。点是最简单的图元，由它可以构成一种叫点列（point list）的图元类型。线是由两个不重合的点构成的，一些不相连的线组成的集合就叫线列（line list），而一些首尾相连但不形成环路的线的集合就叫线带（line strips）。同理，单独的三角形集合就叫三角形列（triangle list），类似于线带的三角形集合就叫三角形带（triangle strips），另外，如果多个三角形共用一个顶点作为它们的一个顶点的话，那么这个集合就叫三角形扇（triangle fans）。还是画图比较容易理解吧：





![](http://www.enaccess.com/images/blog_csdn_net/yanjun_1982/dx1%20.jpg)

![](http://www.enaccess.com/images/blog_csdn_net/yanjun_1982/dx2%20.jpg)






这些图元有什么用呢？基本上我们可以使用这些图元来画我们想要的任何物体。例如画一个四方形可以使用三角形带来画，画一个圆则使用三角形扇。


现在介绍一种不需要顶点缓冲来渲染的方法，就是使用IDirect3DDevice9::DrawPrimitiveUP函数。UP就是User Pointer的意思，也即是说要使用用户定义的内存空间。













**PrimitiveType****：**要绘画的图元的种类。就是上面介绍的那六种类型。





**PrimitiveCount****：**要绘画的图元的数量。假设有n个顶点信息，绘画的图元类型是点列的话，那么图元的数量就是n；如果绘画的图元类型是线列的话，那么图元的数量就是n/2；如果是线带的话就是n-1；三角形列就是n/3；三角形带就是n-2；三角形扇出是n-2。





**pVertexStreamZeroData****：**存储顶点信息的数组指针





**VertexStreamZeroStride****：**顶点的大小





·使用顶点缓冲来绘画图元





很多时候我们使用顶点来定义图形之后，就把这些顶点信息放进顶点缓冲里面，然后再进行渲染。使用点顶缓冲的好处以及如何创建顶点缓冲我已经在上一章已讲过了，现在讲讲怎么把顶点缓冲里面的图元给画出来。其实也很简单，和上面的IDirect3DDevice9::DrawPrimitiveUP函数差不多，我们使用IDirect3DDevice9::DrawPrimitive函数。不过在使用这个函数之前，我们得告诉设备我们使用哪个数据源，使用IDirect3DDevice9::SetStreamSource函数可以设定数据源。













**StreamNumber****：**设置和哪个数据流梆定。如果使用单数据流的话，这里设为0。最多支持16个数据流。





**pStreamData****：**要绑定的数据。也就是我们创建的顶点缓冲区里面的数据。





**OffsetInBytes****：**设置从哪个字节开始读起。如果要读整个缓冲区里面的数据的话，这里设为0。





**Stride****：**单个数据元素的大小。如果数据源是顶点缓冲的话，那么这里就是每个顶点信息的大小（Sizeof(vertex)）。





设置好数据源后，就可以使用IDirect3DDevice9::DrawPrimitive来绘画了。












**PrimitiveType****：**要绘画的图元的种类。





**StarVertex****：**设置从顶点缓冲区中的第几个顶点画起。没有特殊情况当然是想把全部的顶点画出来啦，所以一般这里设置从0开始。





**PrimitiveCount****：**要绘画的图元的数量。









好了，这章比较简单。写到这章的时候我才发现这不是入门手册，有一些重要但是我觉得没必要讲的东西我都没有讲明。如果是新手看我写的这些东西，搞不好还会被我迷惑了，呵呵。所以还是建议大家看DXSDK里面的说明文档，虽然是英文的，但是很详细，我现在都还没有看完呢。





嗯，前面四章把最基本的东西讲完了，使用前面的知识我们可以画一些简单的静止图形。下一章就开始讲矩阵了，它可以使我们的图形动起来。


