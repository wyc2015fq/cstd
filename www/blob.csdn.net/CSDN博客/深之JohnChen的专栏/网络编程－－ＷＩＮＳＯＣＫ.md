# 网络编程－－ＷＩＮＳＯＣＫ - 深之JohnChen的专栏 - CSDN博客

2006年04月13日 10:26:00[byxdaz](https://me.csdn.net/byxdaz)阅读数：2752标签：[编程																[网络																[windows																[服务器																[internet																[unix](https://so.csdn.net/so/search/s.do?q=unix&t=blog)](https://so.csdn.net/so/search/s.do?q=internet&t=blog)](https://so.csdn.net/so/search/s.do?q=服务器&t=blog)](https://so.csdn.net/so/search/s.do?q=windows&t=blog)](https://so.csdn.net/so/search/s.do?q=网络&t=blog)](https://so.csdn.net/so/search/s.do?q=编程&t=blog)
个人分类：[网络编程](https://blog.csdn.net/byxdaz/article/category/166215)

**WINSOCK编程　　**
　　目前，Internet已成为世界上最大的TCP/IP网络。早期的站点是UNIX机器，一组称为Berkeley插口的约定成为INTERNET上UNIX机器之间利用TCP/IP进行通信的标准。其他操作系统也用TCP/IP进行通信，这极大地促进了INTERNET的发展。

**WINDOWS插口**

　　WINSOCK标准定义了一个DLL接口，通常叫做WINSOCK.DLL或者WSOCK32.DLL。无论机器上安装了哪一个DLL，只要函数的名字，参数含义以及最终的功能是相同的，应用程序就可以调用这些函数。
　　在插口编程里一个重要的概念就是一个插口的端口。INTERNET上的每一个站点都有一个数字地址称为IP地址，通常是由逗号分开的四个数。在机器上运行的程序可以随心所欲地用插口与其他机器进行通信。
　　请求到达机器时携带一个端口号，一个大于1024的数，它表明此请求是给那个应用程序的。
　　多数插口的工作是基于连接的：两个程序在每一端用一个插口形成一个连接，然后沿着该连接收发数据。有些应用程序倾向无连接地发送，但是这些数据的到达是没有保障的。

**客户机/服务器模式**
　　在TCP/IP应用中，如何采用客户机/服务器模式。

　　客户机一方，TCP/IP应用程序功能如下：
　　1） 打开通信信道（申请一套接字），并连接到服务器在主机的保留端口，该端口对应服务器的TCP/IP进程。
　　2） 向服务器发出请求报文，等待接收应答。
　　3） 从服务器方收到最终应答结果，或在不再请求时关闭信道并终止客户机进程。

　　服务器一方，TCP/IP应用程序动作如下：
　　1） 打开通信信道（申请一套接字），通知本地主机在某一保留端口接收客户机请求。
　　2） 等待客户请求到达指定端口。
　　3） 接收到请求，启动一新进程处理用户请求，同时释放旧进程以响应新的客户请求，一旦服务完成，关闭新进程与客户的通信链路。
　　4） 继续等待客户机请求。
　　5） 如果不想响应客户机请求，关闭服务器进程。
　　综上所述，TCP/IP应用中的服务器程序必须先于客户机进程启动，直到对客户机的响应结束或强迫终止。

　　WINSOCK1.1版通过异步选择机制来实现非阻塞通信方式，对于非阻塞方式，函数被调用后立即返回，当传送完成后由WINSOCK给进程发一个事先约定好的消息．

WinSock是Windows Sockets的缩写，它作为Windows和TCP/IP之间的接口。而我们都知道TCP/IP在互联网举足轻重的作用，如果希望了解Socket，那么Berkeley Socket不可不提，它是在UNIX下对TCP/IP进行编程的标准模式。WinSock的设计和它很象，这样可以使UNIX上的应用程序在Windows平台上使用。但是，两者也有一些区别，如WinSocket利用了Windows的一些特点，而这些特点对于UNIX来说是没有的。

WinSock是一个DLL，它运行于Windows 3.x，Windows for Workgroups，Windows NT和Windows 95下。WINSOCK.DLL是与TCP/IP的接口，通过这个接口和网络进行连接。下图显示它的工作原理：

![WinSock工作原理](http://www.longen.org/s-z/WinSock.gif)

WINSOCK.DLL实际上是作为WinSock应用程序和TCP/IP协议栈之间的中间层。用户的应用程序告诉WINSOCK.DLL需要做什么，WINSOCK.DLL将这些命令传送到TCP/IP协议栈，由TCP/IP协议栈传送到网络。但是重要的事情是用户必须注意用户使用的WINSOCK.DLL必须和TCP/IP的版本号一致。不要以后它们都叫WinSocks它们就是一样的。所以，如果用户在使用Microsoft的TCP/IP，就不能使用Trumpet Winsock。同样，如果用户正在使用SLIP连接，而希望由Chameleon Sampler的Winsock切换到Trumpet Winsock，用户必须删除Chameleon的WINSOCK.DLL，然后再安装新的WINSOCK.DLL。

具体的ＷＩＮＳＯＣＫ网络编程资料参考网上的相关信息．


