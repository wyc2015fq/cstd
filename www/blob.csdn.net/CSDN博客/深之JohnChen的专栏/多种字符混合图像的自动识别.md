# 多种字符混合图像的自动识别 - 深之JohnChen的专栏 - CSDN博客

2006年04月05日 14:08:00[byxdaz](https://me.csdn.net/byxdaz)阅读数：5149


**多种字符混合图像的自动识别**

**张利辉１，韩莉１，高庆吉１，徐海军２**

**(1.东北电力学院 自动化工程系，吉林 吉林 132012；2.德利能源股份有限公司热电厂，黑龙江 七台河 150000)**

摘  要：以货运列车自重识别系统为例，提出一种适应不同光照环境的图像增强方法，利用模糊集理论从多行信息中提取自重行，正确率接近99%。在字符识别中，采用3种神经网络分类器分别识别汉字、数字和英文字母，并对易混数字采用两级分类器的结构，获得了较高的识别率。
    关键词：图像增强；模糊集；神经网络；字符识别

货运列车车号和车厢自重的自动识别，为实现铁路运输信息的计算机管理提供了现代化的技术手段。将每节车厢的检斤结果和车厢自重的自动识别结果传给微机，通过计算可得到列车的载物量，因此，车厢自重的正确识别是列车载物量计算的关键。根据文献［１～３］讨论的几种方法，列车车号识别取得了令人满意的正确率，但都未对车厢自重的识别问题进行探讨。本文通过对含多种字符的自重图像进行分析，提出了一些有效的方法。

1自重识别的特点
    货运列车的自重识别与车号识别相比，有很多新问题和特殊之处，具体表现在：
(1) 车号图像中车号信息占有很大比重，而自重图像中除包含自重信息外，还包含载重、容积等信息，如图1所示，因此自重目标提取比较困难。由于本系统24?h工作在户外，自重图像中信息分布广，因此照明对自重图像的影响更为严重；

![](http://www.bjx.com.cn/files/wx/dbdlxyxb/2002-4/41-1.jpg)

    (2) 自重的数字比车号小得多，极易受到污染，而且自重数字的印刷更不规范，字符变形、丢笔划情况更为严重；
(3)自重信息中包括汉字、数字、英文字母等多种字符，而且数字大小不一，数字位数不固定，因此给字符识别带来了困难。
    根据自重图像的特点，首先对采集的原始图像进行图像增强处理，以便得到良好的视觉效果；其次，利用模糊集理论从增强后的图像中提取自重行区域，最后对自重行进行字符分割处理，利用神经网络识别字符。本文将在下面分别阐述这3个步骤，并在最后给出结论。
2一种适应不同光照环境的图像增强方法
    由于本系统全天24h连续运行，环境照度差异很大，采用固定参数的灰度变换［４］，不能使不同亮度的图像都得到满意的图像增强效果。本文采用变参数分段非线性变换，其函数如下：
![](http://www.bjx.com.cn/files/wx/dbdlxyxb/2002-4/42-1.jpg)
其中L=256，表示共有256个灰度级，s1,s2,γ都是灰度均值m的单值函数：s1=α*m，s2=β*m，γ＝int［10*(m-m０)/m+0.5］其中，α=1,β=2,m0=6。图2给出2幅不同亮度的原始图像采用两种不同方法进行变换的比较。图2中(a)、(c)的原始图像的灰度均值为m=11.1811，此时，s1=11.1811,s2=22.3622，γ＝0.5，增强后图(c)的灰度均值33.354?3；图2中(b)，(d)的原始图像的灰度均值为m=35.2007，此时，s1=35.2007，s2=70.4014，γ=0.8，增强后图(d)的灰度均值23.4948。由对比结果可见，采用本文的方法能在增强较暗区域的亮度同时，抑制较亮区域的亮度，从而使不同亮度的图像都能得到适当的变换，得到良好的视觉效果。由图(c)、(d)可以看出，不同照明情况下采集的图像在增强后并无明显差别，因此在对图像的后续处理中不必考虑照明的影响。

![](http://www.bjx.com.cn/files/wx/dbdlxyxb/2002-4/42-2.jpg)
![](http://www.bjx.com.cn/files/wx/dbdlxyxb/2002-4/42-3.jpg)

3基于模糊集理论的目标区域提取
本文先把原始图像分割成若干个只含一行信息的候选区域子图像，然后选取目标的多个特征，利用模糊集理论表征各个特征的重要性，最后根据评判结果选取目标区域。
3.1候选区域的分割
    从图3所示的图像的行灰度均值图中可以看出，波峰对应着文字行，波谷对应着行之间的间隔。如果能准确地找出每个波谷，那么就会分割出若干个的候选区域子图像。
    为了能准确的找出波谷，先对行均值ave(i)进行一维滤波，去掉“毛刺”，然后再根据下列特点搜索波谷：(1) 波谷必是局部极小值，即![](http://www.bjx.com.cn/files/wx/dbdlxyxb/2002-4/42-7.jpg)所考察区域的宽度是2k；(2) 波谷左右两侧曲线的斜率分别是负和正，且两侧曲线很陡峭，即![](http://www.bjx.com.cn/files/wx/dbdlxyxb/2002-4/42-5.jpg)![](http://www.bjx.com.cn/files/wx/dbdlxyxb/2002-4/42-6.jpg)![](http://www.bjx.com.cn/files/wx/dbdlxyxb/2002-4/43-1.jpg)
本文采用变斜率阈值的搜索方法，对于信息不很清晰的图像，其行均值图的波谷相应的不太明显，两侧曲线斜率不大，因此可适当减少斜率阈值s0，直到搜索到波谷为止，对于搜索结果中过宽或过窄的区域，可以根据一些文法信息(如文字行的标准高度等)进行相应的分裂或合并处理，从而得到只含一行文字的若干个候选区域图像。

![](http://www.bjx.com.cn/files/wx/dbdlxyxb/2002-4/42-4.jpg)

3.2目标区域的提取
根据模糊集理论［５］，模糊事件可以表示为三元组｛Ｕ,K,V}，U={u１，u２，…，uL｝为其特征值，P＝｛V(u１）,V(u２），…，Ｖ（uL)｝为其特征的评价集，K=｛k｜k=1,2,…,L｝。我们可以用下式来计算模糊事件A存在的可能性大小：
![](http://www.bjx.com.cn/files/wx/dbdlxyxb/2002-4/43-2.jpg)
其中，μA(uk)为隶属函数，表示特征uk对模糊事件A存在可能性大小的影响程度。
我们要评价每一个候选区域是“自重”行区域的可能性这一模糊事件。根据模糊事件的定义，我们需要解决三个关键问题：特征集的选取、特征评价函数的确定和每一特征对模糊事件的重要性［６］。在选取特征时，要选取最关键的，且能全面描述模糊事件的特征。然后，针对某一特征找出合适的评价函数。对于每一个选出的特征，我们给出其近似的标准样本，并给出给定模式与标准的相似度的函数。为了方便比较各个特征对目标的重要性，我们将其归一化到［０，１］。在这里我们不仅使用了图像的特征如几何特征、竖直投影等［７］，还利用了后续处理过程中的信息，如神经网络的字符识别结果等。
    (1) 竖直投影特征
首先要对图4所示的竖直投影进行滤波［８］，去掉其上的“毛刺”，再对其进行分析。在投影图中搜索满足一定条件的峰(文字或数字所对应的)，对于过宽或过窄的峰，可以根据字符标准宽度、字符的间距等信息进行分裂或合并处理。记第i个字符的标准宽度为CharWidth(i)，第i个峰的实际宽度xi，峰的个数为n，则
![](http://www.bjx.com.cn/files/wx/dbdlxyxb/2002-4/43-4.jpg)

![](http://www.bjx.com.cn/files/wx/dbdlxyxb/2002-4/43-3.jpg)

    (2) 字符的识别置信度
本系统采用3个神经网络分别识别汉字、数字及英文字母，自重行与其它行的区别在于前两个标识汉字是“自”和“重”，另外，在实际中自重的数字范围一般是有限制的(如在1x.x～2x.xt之间)，因此特征R２可以表示为：
![](http://www.bjx.com.cn/files/wx/dbdlxyxb/2002-4/43-5.jpg)
其中，rel(i)是汉字或数字的识别结果置信度，ωRi是权重系数。
    (3) 间隔的大小和位置
所谓的“间隔”是指汉字和数字之间的无文字区域，其长度虽不固定，但绝大多数情况下，远大于字符间距，设某幅图像中间隔的平均长度为gs0，wx为所考察区域的长度，则特征R3可由下式求出：
![](http://www.bjx.com.cn/files/wx/dbdlxyxb/2002-4/43-7.jpg)
隶属函数的选取方法主要有基于模糊统计的方法和基于二元对比排序的方法，本文采用基于模糊统计的方法，根据上述三个特征对评价的重要性及准确性选取的，μ１＝0．4，μ２＝0．4，μ３＝0.2。根据式(6)计算出一幅图像中每个待选区域Ai为自重行的可能性评价值P（Ａi），比较其大小，评价值最大的候选区域即认为是我们所要提取的目标区域。
Ｐ（Ａｉ）＝μ１Ｒ１＋μ２Ｒ２＋μ３Ｒ３    (6)
本文对采集的148幅图像进行测试，正确提取的有146幅，其正确率为98.65%，此方法可以有效提取自重行目标区域。
4基于神经网络的字符识别
    对自重行子图像进行二值化，根据自重行二值图像的列方向投影，分割出单个字符的子图像，然后再利用神经网络分类器对其进行识别。由于印刷的单个字符本身是断裂的，字符之间常粘连在一起，而且夜间的点光源照明经常造成二值图像边缘的字符笔划丢失，因此本系统采用边分割边识别的智能分割方法，既考虑字符块本身的宽窄合理性，又考虑字符识别结果的合理性，对于满足条件的字符直接给出识别结果，而对于过宽、过窄或无意义的字符进行适当的区域分裂或合并处理，得到满足条件的字符块子图像后再识别。分割后的字符包括汉字、数字和英文字母“t”，本系统采用3个基于误差反传(Back Propagation)训练算法(简称BP算法)的三层前馈网络分类器分别对其进行识别［９］。为了克服BP算法收敛速度慢，结果易陷入局部极小的缺点，我们在权系数学习过程中加入了动量项，并采用了模拟退火算法。
    汉字字符主要是一种标识，它标志着后面的数字是否是车厢的自重，经过提取的汉字特征有4个周边特征和4个周边扫描空程长度的均方差。数字的特征采用粗网格特征，把规范化的数字图像分割成8×8份，取每份中的浓淡度值作为一个特征，将所有8×8个值排成一列而形成64维特征向量。这种方法的优越之处在于对数字的大小不太敏感。0～9这10个数字中，“1”与其它9个字符的宽度有明显差别，“1”的识别可以根据宽高比及左右两侧的的扫描空程长度均方差特征来进行，其它9个数字的识别采用如图5所示的2级分类器。第1级分类器D1输入层有64个节点，输出层8个节点，其中把两种不同写法的“3”归成2类：3(Ⅰ)和3(Ⅱ)；易混数字“6”、“8”、“9”作为1类，送到第2级分类器D2进行细分。分类器D1的结构为64∶16∶8。分类器D2的结构为64∶6∶3。
分类器3识别小号字符是小数字还是英文字母。如果识别结果表明是小数字，则采用分类器2来识别它。因为小数字虽然在尺寸上和大数字有所差别，但印刷体数字的笔划结构基本不变，而采用粗网格特征对字体尺寸大小是不敏感的，所以采用这种方法是可行的。

![](http://www.bjx.com.cn/files/wx/dbdlxyxb/2002-4/44-1.jpg)
![](http://www.bjx.com.cn/files/wx/dbdlxyxb/2002-4/44-2.jpg)

    本文对不同时间采集的图像，其中有10∶26时采集的39幅，14∶51时采集的43幅，16∶12时采集的29幅，20∶24时采集的38幅，进行图像增强、目标区域提取、字符分割及字符识别，识别结果见表1。实验结果表明，用于识别汉字的分类器1和用于识别数字的分类器2的识别结果是令人满意的。分类器3的识别率较低主要是由于字符小，缺损较为严重，考虑到它对自重的识别结果影响相对较小一些，因此这个结果是可以接受的。
5结论
采用适应不同光照环境的图像增强方法，利用模糊集理论从多种字符混合图像中提取特定的目标区域，采用边分割边识别的智能分割方案从目标区域中分割出单个字符，字符的识别采用3个神经网络分类器分别识别汉字、数字和英文字母，对易混数字采用两级分级分类器的结构，获得了较高的识别率。

参考文献

［1］王少杰，朱志刚，石定机等.货运列车车型车号自动分割和识别算法［J］.模式识别与人工智能.1998，11(3).
［2］王晓华，高庆吉，赵卫平.利用模糊统计法识别货运列车车号的研究［J］.中国图像图形学报，2000，5(1).
［3］赵雪春，戚飞虎.基于神经网络的货物列车超偏载车号自动识别系统［J］.高技术通讯.2000，6.
［4］章毓晋.图像工程［M］.清华大学出版社，1999.
［5］张曾科.模糊数学在自动化技术中的应用［M］.清华大学出版社，1997.
［6］陈海燕，戚飞虎.模糊集在目标识别上的应用［J］.计算机应用研究.2000，2.
［7］边肇祺，张学工.模式识别［M］.清华大学出版社，第二版.2000.
［8］曹迪铭，宣国荣.牌照字符分割中的区域分裂与合并［J］.计算机工程.2000，26(10).
［9］袁曾任.人工神经元网络及其应用［M］.清华大学出版社，1999.

