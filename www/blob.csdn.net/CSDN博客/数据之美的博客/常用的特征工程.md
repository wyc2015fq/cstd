# 常用的特征工程 - 数据之美的博客 - CSDN博客
2018年02月12日 11:39:47[看穿数据之美](https://me.csdn.net/oppo62258801)阅读数：114
个人分类：[深度学习/机器学习																[算法](https://blog.csdn.net/oppo62258801/article/category/6551325)](https://blog.csdn.net/oppo62258801/article/category/6739087)
**像一个优秀的工程师一样使用机器学习，而不要像一个机器学习专家一样使用机器学习方法。 ---google**
    当在做数据挖掘和数据分析时，数据是所有问题的基础，并且会影响整个工程的流程。相比一些复杂的算法，如何灵活的处理好数据经常会取到意想不到的效益。而处理数据不可或缺的需要使用到特征工程。
**一、什么是特征工程**
    简单的说，特征工程是能够将数据像艺术一样展现的技术。为什么这么说呢？因为好的特征工程很好的混合了专业领域知识、直觉和基本的数学能力。但是最有效的数据呈现其实并不涉及任何的数据运算。
    本质上来说，呈现给算法的数据应该能拥有基本数据的相关结构或属性。当你做特征工程时，其实是将数据属性转换为数据特征的过程，属性代表了数据的所有维度，在数据建模时，如果对原始数据的所有属性进行学习，并不能很好的找到数据的潜在趋势，而通过特征工程对你的数据进行预处理的话，你的算法模型能够减少受到噪声的干扰，这样能够更好的找出趋势。事实上，好的特征甚至能够帮你实现使用简单的模型达到很好的效果。
![](https://img-blog.csdn.net/20180212113737688?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvb3BwbzYyMjU4ODAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
    但是对于特征工程中引用的新特征，需要验证它确实提高的预测的准确度，而不是加入了一个无用的特征，不然只会增加算法运算的复杂度。
    本文只提供一些简单的特征工程技巧，希望能够在你以后的分析中提供帮忙。
**二、常用方法**
**1. 时间戳处理**
    时间戳属性通常需要分离成多个维度比如年、月、日、小时、分钟、秒钟。但是在很多的应用中，大量的信息是不需要的。比如在一个监督系统中，尝试利用一个’位置+时间‘的函数预测一个城市的交通故障程度，这个实例中，大部分会受到误导只通过不同的秒数去学习趋势，其实是不合理的。并且维度'年'也不能很好的给模型增加值的变化，我们可能仅仅需要小时、日、月等维度。因此当我们在呈现时间的时候，试着保证你所提供的所有数据是你的模型所需要的。
    并且别忘了时区，假如你的数据源来自不同的地理数据源，别忘了利用时区将数据标准化。
**2. 分解类别属性**
    一些属性是类别型而不是数值型，举一个简单的例子，由{红，绿、蓝}组成的颜色属性，最常用的方式是把每个类别属性转换成二元属性，即从{0,1}取一个值。因此基本上增加的属性等于相应数目的类别，并且对于你数据集中的每个实例，只有一个是1（其他的为0），这也就是独热（one-hot)编码方式（类似于转换成哑变量）。
    如果你不了解这个编码的话，你可能会觉得分解会增加没必要的麻烦（因为编码大量的增加了数据集的维度）。相反，你可能会尝试将类别属性转换成一个标量值，例如颜色属性可能会用{1,2,3}表示{红，绿，蓝}。这里存在两个问题，首先，对于一个数学模型，这意味着某种意义上红色和绿色比和蓝色更“相似”（因为|1-3| > |1-2|）。除非你的类别拥有排序的属性（比如铁路线上的站），这样可能会误导你的模型。然后，可能会导致统计指标（比如均值）无意义，更糟糕的情况是，会误导你的模型。还是颜色的例子，假如你的数据集包含相同数量的红色和蓝色的实例，但是没有绿色的，那么颜色的均值可能还是得到2，也就是绿色的意思。
    能够将类别属性转换成一个标量，最有效的场景应该就是只有两个类别的情况。即{0,1}对应{类别1，类别2}。这种情况下，并不需要排序，并且你可以将属性的值理解成属于类别1或类别2的概率。
**3.分箱/分区**
    有时候，将数值型属性转换成类别呈现更有意义，同时能使算法减少噪声的干扰，通过将一定范围内的数值划分成确定的块。举个例子，我们预测一个人是否拥有某款衣服，这里年龄是一个确切的因子。其实年龄组是更为相关的因子，所有我们可以将年龄分布划分成1-10,11-18,19-25,26-40等。而且，不是将这些类别分解成2个点，你可以使用标量值，因为相近的年龄组表现出相似的属性。
    只有在了解属性的领域知识的基础，确定属性能够划分成简洁的范围时分区才有意义。即所有的数值落入一个分区时能够呈现出共同的特征。在实际应用中，当你不想让你的模型总是尝试区分值之间是否太近时，分区能够避免出现过拟合。例如，如果你所感兴趣的是将一个城市作为整体，这时你可以将所有落入该城市的维度值进行整合成一个整体。分箱也能减小小错误的影响，通过将一个给定值划入到最近的块中。如果划分范围的数量和所有可能值相近，或对你来说准确率很重要的话，此时分箱就不适合了。
**4. 交叉特征**
    交叉特征算是特征工程中非常重要的方法之一了，交叉特征是一种很独特的方式，它将两个或更多的类别属性组合成一个。当组合的特征要比单个特征更好时，这是一项非常有用的技术。数学上来说，是对类别特征的所有可能值进行交叉相乘。
    假如拥有一个特征A,A有两个可能值{A1，A2}。拥有一个特征B，存在{B1，B2}等可能值。然后，A&B之间的交叉特征如下：{（A1，B1），（A1，B2），（A2，B1），（A2，B2）}，并且你可以给这些组合特征取任何名字。但是需要明白每个组合特征其实代表着A和B各自信息协同作用。
       举个栗子，如下图中：
![](http://image99.360doc.com/DownloadImg/2016/09/0411/79343366_3)
     所有的蓝色点属于一类，红色属于另外一类。我们不考虑实际模型，首先，将X,Y值分成{x<0,x>=0}&{y<0,y>=0}对我们来说会很有用，将划分结果取名为{Xn,Xp}和{Yn,Yp}。很显然I&III象限对应于红色类别，II&IV象限是蓝色类。因此如果现在将特征X和特征Y组成成交叉特征，你会有四个象限特征，{I,II,III,IV}分别对应于{(Xp, Yp), (Xn, Yp), (Xn, Yn), (Xp, Yn)} 。
     一个更好地诠释好的交叉特征的实例是类似于（经度，纬度）。一个相同的经度对应了地图上很多的地方，纬度也是一样。但是一旦你将经度和纬度组合到一起，它们就代表了地理上特定的一块区域，区域中每一部分是拥有着类似的特性。
     有时候，能够通过简单的数学技巧将数据的属性组合成一个单一的特征。在上一个例子中，将更改的特征设定为![](https://img-blog.csdn.net/20180212113815292?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvb3BwbzYyMjU4ODAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)，并且有如下关系:
![](https://img-blog.csdn.net/20180212113829583?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvb3BwbzYyMjU4ODAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
将新的特征定义为![](https://img-blog.csdn.net/20180212113838320?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvb3BwbzYyMjU4ODAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)，有：
![](https://img-blog.csdn.net/20180212113846419?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvb3BwbzYyMjU4ODAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
我们可以根据确定特征![](https://img-blog.csdn.net/20180212113855968?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvb3BwbzYyMjU4ODAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)，如果为1，类别是红色，如果是为其他值，则是蓝色；
**5. 特征选择**
为了得到更好的模型，使用某些算法自动的选出原始特征的子集。这个过程，你不会构建或修改你拥有的特征，但是会通过修剪特征来达到减少噪声和冗余。 
那些和我们解决的问题无关需要被移除的属性，在我们的数据特征中存在了一些特征对于提高模型的准确率比其他更重要的特征，也还有一些特征与其他特征放在一起出现了冗余，特征选择是通过自动选出对于解决问题最有用的特征子集来解决上述问题的。
    特征选择算法可能会用到评分方法来排名和选择特征，比如相关性或其他确定特征重要性的方法，更进一步的方法可能需要通过试错，来搜索出特征子集。
    还有通过构建辅助模型的方法，逐步回归就是模型构造过程中自动执行特征选择算法的一个实例，还有像Lasso回归和岭回归等正则化方法也被归入到特征选择，通过加入额外的约束或者惩罚项加到已有模型（损失函数）上，以防止过拟合并提高泛化能力。
**6. 特征缩放**
    有时候，你可能会注意到某些特征比其他特征拥有高得多的跨度值。举个例子，将一个人的收入和他的年龄进行比较，更具体的例子，如某些模型（像岭回归）要求你必须将特征值缩放到相同的范围值内。通过缩放可以避免某些特征比其他特征获得大小非常悬殊的权重值。
**7. 特征提取**
    特征提取涉及到从原始属性中自动生成一些新的特征集的一系列算法，降维算法就属于这一类。特征提取是一个自动将观测值降维到一个足够建模的小数据集的过程。对于列表数据，可使用的方法包括一些投影方法，像主成分分析和无监督聚类算法。对于图形数据，可能包括一些直线检测和边缘检测，对于不同领域有各自的方法。
    特征提取的关键点在于这些方法是自动的（虽然可能需要从简单方法中设计和构建得到），还能够解决不受控制的高维数据的问题。大部分的情况下，是将这些不同类型数据（如图，语言，视频等）存成数字格式来进行模拟观察。
![](https://img-blog.csdn.net/20180212113913365?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvb3BwbzYyMjU4ODAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
![](https://img-blog.csdn.net/20180212113923662?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvb3BwbzYyMjU4ODAx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
