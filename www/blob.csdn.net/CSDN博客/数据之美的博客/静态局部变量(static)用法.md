# 静态局部变量(static)用法 - 数据之美的博客 - CSDN博客
2017年04月02日 09:31:47[看穿数据之美](https://me.csdn.net/oppo62258801)阅读数：962
有时希望函数中的局部变量的值在函数调用结束后不消失而保留原值，即其占用的存储单元不释放，在下一次该函数调用时，该变量保留上一次函数调用结束时的值。这时就应该指定该局部变量为静态局部变量(static local variable)。 
例 静态局部变量的值。 
#include <iostream> 
using namespace std; 
int f(int a)                          //定义f函数，a为形参 
{auto int b=0;                      //定义b为自动变量 
static int c=3;                     //定义c为静态局部变量 
b=b+1; 
c=c+1; 
return a+b+c; 
} 
int main( ) 
{int a=2,i; 
for(i=0;i<3;i++) 
    cout<<f(a)<<″ ″; 
cout<<endl; 
return 0; 
} 
运行结果为 
7 8 9 
先后3次调用f函数时，b和c的值如下表所示。
![](http://blog.programfan.com/upfile/200809/20080912192339.jpg)
对静态局部变量的说明： 
(1) 静态局部变量在静态存储区内分配存储单元。在程序整个运行期间都不释放。而自动变量（即动态局部变量）属于动态存储类别，存储在动态存储区空间(而不是静态存储区空间)，函数调用结束后即释放。 
(2) 为静态局部变量赋初值是在编译时进行值的，即只赋初值一次，在程序运行时它已有初值。以后每次调用函数时不再重新赋初值而只是保留上次函数调用结束时的值。而为自动变量赋初值，不是在编译时进行的，而是在函数调用时进行，每调用一次函数重新给一次初值，相当于执行一次赋值语句。 
(3) 如果在定义局部变量时不赋初值的话，对静态局部变量来说，编译时自动赋初值0(对数值型变量)或空字符(对字符型变量)。而对自动变量来说，如果不赋初值，则它的值是一个不确定的值。这是由于每次函数调用结束后存储单元已释放，下次调用时又重新另分配存储单元，而所分配的单元中的值是不确定的。 
(4) 虽然静态局部变量在函数调用结束后仍然存在，但其他函数是不能引用它的，也就是说，在其他函数中它是“不可见”的。
