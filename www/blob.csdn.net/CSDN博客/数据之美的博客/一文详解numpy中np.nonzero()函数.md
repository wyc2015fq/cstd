# 一文详解numpy中np.nonzero()函数 - 数据之美的博客 - CSDN博客
2017年11月03日 16:06:42[看穿数据之美](https://me.csdn.net/oppo62258801)阅读数：185
个人分类：[python](https://blog.csdn.net/oppo62258801/article/category/6738404)
版权声明：本文为博主原创文章，转载需注明出处。
np.nonzero函数是numpy中用于得到数组array中非零元素的位置（数组索引）的函数。一般来说，通过`help（np.nonzero）`能够查看到该函数的解析与例程。但是，由于例程为英文缩写，阅读起来还是很费劲，因此，本文将其英文解释翻译成中文，便于理解。
### 解释
```
nonzero(a)
```
返回数组a中非零元素的索引值数组。
（1）只有a中非零元素才会有索引值，那些零值元素没有索引值； 
（2）返回的索引值数组是一个2维tuple数组，该tuple数组中包含一维的array数组。其中，一维array向量的个数与a的维数是一致的。 
（3）索引值数组的每一个array均是从一个维度上来描述其索引值。比如，如果a是一个二维数组，则索引值数组有两个array，第一个array从行维度来描述索引值；第二个array从列维度来描述索引值。 
（4） 该
```
np.transpose(np.nonzero(x))
```
函数能够描述出每一个非零元素在不同维度的索引值。 
（5）通过`a[nonzero(a)]`得到所有a中的非零值
```
#a是1维数组
a = [0,2,3]
b = np.nonzero(a)
print(np.array(b).ndim)
print(b)
结果：
2
(array([1, 2], dtype=int64),)
说明：索引1和索引2的位置上元素的值非零。
#a是2维数组
a = np.array([[0,0,3],[0,0,0],[0,0,9]])
b = np.nonzero(a)
print(np.array(b).ndim)
print(b)
print(np.transpose(np.nonzero(a)))
结果：
2
(array([0, 2], dtype=int64), array([2, 2], dtype=int64))
[[0 2]
 [2 2]]
说明：
（1）a中有2个非零元素，因此，索引值tuple中array的长度为2。因为，只有非零元素才有索引值。
（2）索引值数组是2 维的。实际上，无论a的维度是多少，索引值数组一定是2维的tuple，但是tuple中的一维array个数和a的维数一致。
（3）第1个array([0, 2])是从row值上对3和9进行的描述
。第2个array([2, 2])是从col值上对3和9的描述。这样，从行和列上两个维度上各用一个数组来描述非零索引值。
（4）通过调用np.transpose()函数，得出3的索引值是[0 2]
，即第0行，第2列。
#a是3维数组
a = np.array([[[0,1],[1,0]],[[0,1],[1,0]],[[0,0],[1,0]]])
b = np.nonzero(a)
print(np.array(b).ndim)
print(b)
结果：
2
(array([0, 0, 1, 1, 2], dtype=int64), array([0, 1, 0, 1, 1], dtype=int64), array([1, 0, 1, 0, 0], dtype=int64))
说明：由于a是3维数组，因此，索引值数组有3个一维数组。
print(a)
[[[0 1]
  [1 0]]
 [[0 1]
  [1 0]]
 [[0 0]
  [1 0]]]
  a的数组结构如上所示，请将a想像为数量为3的一组小图片，每张图片的大小为2*2，下文中以num * row * col来分别表示其维度。
  b包含3个长度为5的array，这意味着a有3维，且a共有5个非0值。
  先说b中的第1个向量是[0, 0, 1, 1, 2]，这实际是a在num维度上描述的非零值。第0张图上有2个非零值，第1张图上有2个非零值，第2张图上有1个非零值。因此在num维度上的非零值数组为[0, 0, 1, 1, 2]。
  b中的第2个向量是[0, 1, 0, 1, 1]，这实际是a在row维度上描述的非零值。由于row上的值只有0和1（只2行），所以只由0和1组成。
  b中的第3个向量，聪明的读者可能已经明白，不再赘述。
```
- 1
- 2
- 3
- 4
- 5
- 6
- 7
- 8
- 9
- 10
- 11
- 12
- 13
- 14
- 15
- 16
- 17
- 18
- 19
- 20
- 21
- 22
- 23
- 24
- 25
- 26
- 27
- 28
- 29
- 30
- 31
- 32
- 33
- 34
- 35
- 36
- 37
- 38
- 39
- 40
- 41
- 42
- 43
- 44
- 45
- 46
- 47
- 48
- 49
- 50
- 51
- 52
- 53
- 54
注：数组索引值从0开始。
