# java 如何实现动态代理（mybatis底层原理） - 苝花向暖丨楠枝向寒 - CSDN博客

2018年03月24日 00:24:30[苝花向暖丨楠枝向寒](https://me.csdn.net/weixin_40247263)阅读数：992


为什么需要动态代理？？

比如苹果公司 为了 在 中国 卖手机， 联系找了 一个生产手机的厂家， 还有一个 做销售的公司。

苹果 公司提供一个接口，告诉生产厂家，给我制造6s、6p、7 还有x 这 4种手机

![](https://img-blog.csdn.net/20180323230552427)

然后生产厂家 就去按着要求 去生产， 也就是 实现这个接口。

![](https://img-blog.csdn.net/20180323230737621)

产品生产完了，就给 负责销售的公司，让他们去销售

![](https://img-blog.csdn.net/2018032323085948)

现实中 这样的逻辑没有任何问题， 但是在 代码中，这样很麻烦，有很多的重复操作，如 宣传、销售、和发货。每出一点新产品，就得重写一遍。 这时我们应该 将这些 行为封装起来。 也就是 无论你 给我 的是 什么产品，我需要做的仅仅就是 宣传 、销售和发货。 这就需要用到 动态代理。 

我们可以简单的把动态代理 理解为 对方法的拦截，每次你调用 制造手机的 方法 我就把你这个方法拦截住，前面加个宣传，然后拿到货 以后进行 销售 和发货。

下面说如何实现动态代理

需要成为 代理的 类得实现 InvocationHandler 接口，重写invoke 方法。

![](https://img-blog.csdn.net/20180327202841565?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDI0NzI2Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

测试类

![](https://img-blog.csdn.net/20180324002319744)

