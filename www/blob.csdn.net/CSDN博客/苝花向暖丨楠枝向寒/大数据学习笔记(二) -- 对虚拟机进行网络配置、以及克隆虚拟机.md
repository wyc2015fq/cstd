# 大数据学习笔记(二) -- 对虚拟机进行网络配置、以及克隆虚拟机 - 苝花向暖丨楠枝向寒 - CSDN博客

2018年09月20日 21:52:37[苝花向暖丨楠枝向寒](https://me.csdn.net/weixin_40247263)阅读数：56标签：[克隆虚拟机																[网络配置](https://so.csdn.net/so/search/s.do?q=网络配置&t=blog)](https://so.csdn.net/so/search/s.do?q=克隆虚拟机&t=blog)
个人分类：[大数据](https://blog.csdn.net/weixin_40247263/article/category/8073779)


# 前言

大数据肯定是基于集群的搭建的，上一个学习笔记中已经将centOS6.5安装完毕，这次需要对虚拟机进行网络配置，配置与于windows中的网络连接配置类似，就是下面这几项

![](https://img-blog.csdn.net/20180920210902260?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDI0NzI2Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

配置完毕以后，我们需要克隆这台配置好的虚拟机，一共需要克隆4台，然后分别进入4台虚拟机更改其ip，因为ip用来表示每台虚拟机的唯一性，克隆之前还需要删除一个文件，这个文件将逻辑名称与网卡物理地址做了唯一绑定，如果不删除的话，被克隆出来的虚拟机将无法使用eth0这个逻辑名称，还有一点不用担心的就是，VMware会自动帮我们更改克隆出来的虚拟机的网卡物理地址。

下面就是做这些操作。

**配置网络连接**

cd  /etc/sysconfig/network-scriptes

vi ifcfg-eth0

删除  HWADDR(网卡地址)  和 UUID 这两行 

ONBOOT 改为yes  不禁用网络连接

BOOTPROTO(获取地址方式)  改为 static(手动配置) 

然后在下面继续补充内如下内容

IPADDR=192.168.46.9     前3组数在VMware的编辑 -- > 虚拟网络编辑器中可以查看，最后一个数字 3-254 随便输一个就行

![](https://img-blog.csdn.net/2018092020213097?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDI0NzI2Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

NETMASK=255.255.255.0   

GATEWAY=192.168.46.2      网关可以在上图中点击NAT设置查看

![](https://img-blog.csdn.net/20180920202355310?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDI0NzI2Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

DNS1=114.114.114.114 

**最终效果如下**

![](https://img-blog.csdn.net/20180920202537556?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDI0NzI2Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

esc    wq 保存退出

service network restart   重启网络服务，目的是重新读取配置文件

ping www.baidu.com  能 ping通就可以了

service iptables stop   先临时关闭防火墙

chkconfig iptables off  再永久关闭防火墙

cat /etc/udev/rules.d/70-persistent-net.rules  可以查看网卡物理地址ATTR 和 逻辑名称 NAME，这两个是一对一的关系，

rm -f /etc/udev/rules.d/70-persistent-net.rules 删掉该文件

poweroff  关机

拍个快照，即保存一下虚拟机当前状态，快照必须在关机状态下运行

![](https://img-blog.csdn.net/20180920205529976?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDI0NzI2Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

排完快照以后按一下图示操作

![](https://img-blog.csdn.net/20180920205127559?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDI0NzI2Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

![](https://img-blog.csdn.net/20180920205200252?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDI0NzI2Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

![](https://img-blog.csdn.net/20180920205218144?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDI0NzI2Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

![](https://img-blog.csdn.net/20180920205346217?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDI0NzI2Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

上面就创建出来一个虚拟机的克隆，我们应该克隆出4个

![](https://img-blog.csdn.net/20180920205820405?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDI0NzI2Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

开启 node001 虚拟机，登录用户，输入

vi  /etc/sysconfig/network-scriptes/ifcfg-eth0

把ip地址改了，别的不用的，ip还是改最后一位就行。

保存退出.

vi  /etc/sysconfig/network  修改主机名， 我是为了好区分，与linux名一致，效果如下

![](https://img-blog.csdn.net/20180920211702394?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDI0NzI2Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

 保存退出

vi /etc/hosts   绑定ip和主机名。使其可以通过主机名进行通信，主机名会被解析成ip地址，类似于DNS

在最下面 加上

![](https://img-blog.csdn.net/20180920212407223?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDI0NzI2Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

保存退出

poweroff  关机  然后拍快照

将 node002、node003、node004  分别做如上操作

然后 在 各个虚拟机中 互相ping 其他虚拟机的ip 和 主机名，如果能ping通 说明配置成功。

操作如下所示

![](https://img-blog.csdn.net/20180920220327519?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDI0NzI2Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

在windows下 进入 C:\Windows\System32\drivers\etc 目录中，打开hosts文件，也加上上面4行

**可能出现的问题**

如果以后突然有一天 ping 不通了，进入 winodws系统下的 服务窗口，查看VMware NET Service服务是否被禁用了，，因为某些电脑管家在优化的时候可能会禁用第三方服务。

如果启动虚拟机时 出现各种杂七杂八的错误，看一下 VMware Workstation server 服务是否被禁用了



