# 用于代码缺陷检测的数据集生成 - 彩虹糖的博客 - CSDN博客





2018年11月30日 11:44:13[彩虹糖梦](https://me.csdn.net/caozixuan98724)阅读数：470








# 用于代码缺陷检测的数据集生成

论文地址：[Towards security defect prediction with AI](https://arxiv.org/abs/1808.09897)

代码仓库地址：[sa-bAbI](https://github.com/cmu-sei/sa-bAbI)

运行环境：阿里云 Ubuntu 16.04

权限：root

阿里云下的Ubuntu什么东西都要现安装。

`apt-get update`

`apt-get install git`

切换到根目录

`cd /`

下载代码仓库

`git clone https://github.com/cmu-sei/sa-bAbI.git`

切换到sa-bAbI文件夹下

`cd sa-bAbI`

安装和启动docker

`wget -qO- https://get.docker.com/ | sh`

`service docker start`

`pip install docker-compose`

按照源代码的readme运行：

`docker-compose build`

然后是漫长的等待，大约一个小时才搞完

`mkdir working`

生成代码
`SA_SEED=0 ./sa_e2e.sh working/sa-train-1000 1000`

`SA_SEED=1 ./sa_e2e.sh working/sa-test-100 100`

效果展示

![](https://i.imgur.com/eaGiHq3.png)

跑一下神经网络：
`cd pipeline`

要安装Anaconda

参考博客：[https://www.cnblogs.com/gaofighting/p/8799169.html](https://www.cnblogs.com/gaofighting/p/8799169.html)

从清华大学的镜像网站上下载。

然后把下载的包上传到服务器上。

可以这么传：

`apt install lrzsz`

`rz`

![在这里插入图片描述](https://img-blog.csdnimg.cn/20181130152416206.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Nhb3ppeHVhbjk4NzI0,size_16,color_FFFFFF,t_70)

开始安装：

bash Anaconda3-5.3.1-Linux-x86_64.sh

`export PATH=/root/anaconda3/bin:$PATH >> ~/.bashrc`

`source ~/.bashrc`

创建环境

`conda env create -f environment.yml`

然后就报错了

![在这里插入图片描述](https://img-blog.csdnimg.cn/20181130170144306.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Nhb3ppeHVhbjk4NzI0,size_16,color_FFFFFF,t_70)

目前还没有找到解决方案。

按照网上的说法修改代码，又会出现新的报错：
![在这里插入图片描述](https://img-blog.csdnimg.cn/20181204094042937.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Nhb3ppeHVhbjk4NzI0,size_16,color_FFFFFF,t_70)
索性放弃配这个环境，缺啥包，安啥包。

首先下载小于3.7版本的pthon，比如python3.6(tensorflow目前不支持python3.7，而阿里云默认装的是3.7)

`apt install software-properties-common`

`add-apt-repository ppa:jonathonf/python-3.6`

`apt-get update`

`apt-get install python3.6`

安装pip

`curl https://bootstrap.pypa.io/get-pip.py | sudo python3.6`

安装依赖包

`python3.6 -m pip install keras`

`python3.6 -m pip install tensorflow`

`python3.6 -m pip install sklearn`

`python3.6 -m pip install pandas`

运行程序

`python3.6 train.py`

![在这里插入图片描述](https://img-blog.csdnimg.cn/20181204094646471.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Nhb3ppeHVhbjk4NzI0,size_16,color_FFFFFF,t_70)

总算把程序跑起来了~




