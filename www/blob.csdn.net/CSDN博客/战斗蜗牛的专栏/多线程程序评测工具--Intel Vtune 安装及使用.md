# 多线程程序评测工具--Intel Vtune 安装及使用 - 战斗蜗牛的专栏 - CSDN博客





2014年11月17日 06:21:18[vbskj](https://me.csdn.net/vbskj)阅读数：8388











1、Vtune下载和安装




正式价格800刀，挺贵的，还是使用试用版吧：[http://software.intel.com/en-us/articles/intel-vtune-amplifier-xe/](http://software.intel.com/en-us/articles/intel-vtune-amplifier-xe/) ，下载前需要注册账号，然后获得31天的测试版使用。




通过邮件链接进行软件下载。这里我下载linux版本，进行解压缩




 tar zxvf vtune_amplifier_xe_2015.tar.gz 




然后开始安装，如果有Selinux的请暂时关闭，接下来按照默认设置完成即可。




以下为转载==========http://wenku.baidu.com/view/32620a7501f69e314332946f.html




VTune Amplifier XE Tutorials，即为VTune  


一、Amplifer XE能做什么？  VTune Amplifier XE 可以帮助你分析算法选择，标识出你的应用程序怎样更好的利用可

用的硬件资源。使用VTune Amplifier XE 可以定位或者决定如下内容： 

1、 在你的程序中或者整个系统中时间消耗最多的函数； 

2、 没有有效利用处理器时间的代码片段； 

3、 优化串行和线程化性能的最好代码片段； 4、 影响程序性能的同步对象； 

5、 程序的I/O操作是否花费很多时间，以及在哪里、为什么花费时间； 6、 不同的同步方法，不同的线程数量或者不同算法对于性能的影响； 7、 线程活跃性和变迁； 8、 代码中硬件相关的瓶颈； 


VTune Amplifier XE Tutorials 

向导告诉你如何使用VTune Amplifier XE 分析一个样本程序的性能，只需要指定软件和硬件相关的代码。可以提供如下功能： 

1、寻找热点； 2、分析锁和等待； 3、标识硬件问题；  

二、基本操作  在安装有VS2005或以上版本的系统中安装VTune Amplifier XE ，安装中选择整合到VS*选项。  安装完成后在VS的工具栏会有几个图标，是VTune Amplifier XE的功能图标，如下图： 



在项目的邮件菜单中会出现一个选项，如下图 



展开后选择菜单New Analysis，即可进入如下界面 





  wk_ad_begin({pid : 21});wk_ad_after(21, function(){$('.ad-hidden').hide();}, function(){$('.ad-hidden').show();});    







 选择一个分析类型，这里选择热点分析（Hotspots）点击Start即可开始。开始后，会自动生成前面选择的工程，启动程序，开始收集数据，收集过程中可以点击右侧的Stop按钮，停止收集工作，否则将会一直进行运行直到程序退出。  停止收集后，将会自动进行分析。分析完毕就可以看到结果了。如下图 



三、算法分析功能说明  轻量级热点分析（Lightweight Hotspots）  确定最消耗时间的代码。轻量级热点分析不会有很大的负载，不会收集调用栈信息。也可以用此功能来对系统中的所有进程进行抽样。轻量级热点分析基于硬件事件进行样本收集。 












轻量级热点分析获取的信息 



目标进程及其所有子进程的信息，包括线程、耗用CPU时间的函数。查看信息时可以按照进程、线程、模块等进行筛选。 

  热点分析  指出程序中最耗时的代码。热点分析收集调用栈信息。热点分析不能用来分析整个系统，但是可以加载一个程序或者附加到一个进程中进行分析。热点分析使用用户态采样和跟踪分析方法。 

热点分析结果 


  可以获得目标进程中的线程信息，最耗用时间的函数及其调用关系。从上图中可以看出，在耗用时间最多的函数是加载位图的LoadBitmapFromFile函数。这是因为测试期间反复进出房间，显示房间玩家列表是多次加载位图所致，这也可能是客户端进入房间过程有卡界面的现象的部分原因。  













 锁及等待分析  指出程序在什么地方等待同步对象或者I/O操作，并找出这些所如何影响性能。锁及等待分析使用用户态采样和跟踪收集方法。  分析结果 



可以得到在各种需要等待的操作中花费的时间，等待次数，及调用栈的情况。   线程流动性分析  线程流动性是指同时处于可执行状态的线程数量。分析程序是如何利用可用逻辑CPU的，帮助发现那里的并行操作造成了同步开销，并指出潜在的可并行化部分。  分析结果 


 具体指标仍待进一步研究方可知其具体含义。 


 除算法分析之外，VTune Amplifier XE Tutorials还提供了针对Inter特定CPU的分析，未作研究和实验。  

单独运行VTune Amplifier XE Tutorials时只需指定可执行文件，选择分析类型即可












开始进行分析。分析结果与整合在VS中的功能一致。




