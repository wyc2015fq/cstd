# 网易新闻采集，显示列表和内容 - 阿瞒--治国之能臣 乱世之奸雄 - CSDN博客
2012年05月31日 12:06:15[baofenny](https://me.csdn.net/jiaminbao)阅读数：860标签：[网易																[class																[url																[div																[file																[c](https://so.csdn.net/so/search/s.do?q=c&t=blog)](https://so.csdn.net/so/search/s.do?q=file&t=blog)](https://so.csdn.net/so/search/s.do?q=div&t=blog)](https://so.csdn.net/so/search/s.do?q=url&t=blog)](https://so.csdn.net/so/search/s.do?q=class&t=blog)](https://so.csdn.net/so/search/s.do?q=网易&t=blog)
个人分类：[学习实例开发](https://blog.csdn.net/jiaminbao/article/category/1158383)
<?php
/**
* 作业A：网易新闻采集，显示列表和内容
*/
 header("Content-type:text/html;Charset=GBK;");
if(!isset($_GET['news'])){
$main_url = 'http://news.163.com/special/00013C0B/shizhengxw.html';
$main_content = file_get_contents($main_url);
$c = explode('<div class="right-1 right">',$main_content);
$c = explode('</div>',$c[1]);
$content = $c[0];
preg_match_all('/"http:\/\/news.163.com([^"]*)">([^<]*)<\/a><span>([^<]*)<\/span>/',$content,$match);
if($match){
foreach($match[2] as $k=>$title){
$time=$match[3][$k];
$url=$match[1][$k];
$url=str_replace('http://news.163.com','',$url);
echo '<a href="?news='.urlencode($url).'" target=_blank>'.$title.'</a>'.$time;
echo "<br>\r\n";
}
}
}else{
if($_GET['news']){
$newsurl = $_GET['news'];
$newsurl = 'http://news.163.com'.$newsurl;
$new_content = file_get_contents($newsurl);
preg_match(['@<h1](mailto:' rel=) id="h1title">([^<]+)</h1>@',$new_content,$match);
$title = $match[1];
$c=  explode('<span class="info" style="display:block;">', $new_content);
$c=  explode('<div class="wb-article-sharewraper wb-article-sharewraper-sm" id="wb-article-sharewraper-sm">', $c[1]);
$date=$c[0];
preg_match(['@<div](mailto:' rel=) id="endText">(.*)</div>@s',$new_content,$match);
//preg_match(['@<div](mailto:' rel=) id="Cnt-Main-Article-QQ" bossZone="content">(.*)</div>@s',$new_content,$match);
$contents = $match[1];
$content=explode('<span class="left">', $contents);
$content=$content[0];
echo '<br><strong>标题：</strong>';
echo $title;
echo '<br><strong>时间：</strong>';
echo $date;
echo '<br><strong>内容：</strong><br>';
echo $content;
}
}
?> 
