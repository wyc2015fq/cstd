# 《重构》读书笔记 - fighting！！！ - CSDN博客
2018年08月10日 12:14:51[dujiahei](https://me.csdn.net/dujiahei)阅读数：65
全书内容分布：第1章——重构是什么？
                         第2章——为什么应该重构？
                         第3章——应该在什么地方重构？
                         第4章——代码价值测试
                        第5-13章——重构列表及内容
                        第14章——重构工具
                        第15章——总结
第一章
    1.1
    作者举了一个租赁影碟收费、计算积分的例子，修改前的程序明显不符合面向对象的精神，若对计费标准、影片分类规则进行改变，则需要改动很多地方，且需要保证多处地方一致。“随着各种规则变得愈来愈复杂，适当的修改点愈来愈难找，不犯错的机会也愈来愈少。”
   tip：如果你发现自己需要为程序添加一个特性，而代码结构使你无法很方便地达成目的，那就先重构那个程序，使特性地添加比较容易进行，然后再添加特性。
1.2 重构的第一步——建立一组可靠的测试环境
 测试过程中很重要的一部分，就是测试程序对于结果的报告方式。它们要么说“OK”，表示所有新字符串都和参考字符串一样，要么就列出失败清单，显示问题字符串的出现行号。这些测试都能够自我检验。必须让测试有能力自我检验，否则就得耗费大把时间来回比对，这会降低开发速度！好的测试是重构的根本，能给你必要的安全保障，花时间建立一个优良的测试机制是完全值得的。
tip：重构之前，首先检查自己是否有一套可靠的测试机制，这些测试必须有自我检验能力。
1.3 分解并重组 statement（）
  (1)代码块愈小，代码的功能就愈容易管理，代码的处理和移动就愈轻松。
  首先在待修改代码里找到函数内的局部变量和参数。不会被修改的局部变量可以当作参数传入新的函数，至于会被修改的变量就需要小心。如果只有一个变量会被修改，可以当作返回值，注意可能要在每次循环前置位。
![](https://img-blog.csdn.net/20180811213411910?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1amlhaGVp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)![](https://img-blog.csdn.net/20180811213425196?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1amlhaGVp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)![](https://img-blog.csdn.net/20180811213528165?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1amlhaGVp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
tip：重构技术就是以微小的步伐修改程序。如果你犯下错误，很容易便可发现它。
(2) 修改变量的命名
![](https://img-blog.csdn.net/20180811214711438?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1amlhaGVp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)![](https://img-blog.csdn.net/20180811214727845?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1amlhaGVp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
改名之后记得重新编译测试，确保没有破坏任何东西。更改变量名称绝对是值得的行为。好的代码应该清楚表达自己的功能，变量名称是代码清晰的关键。
tip：任何一个傻瓜都能写出计算机可以理解的代码，唯有写出人类容易理解的代码，才是优秀的程序员。
