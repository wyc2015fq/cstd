# 贪心算法 - HJ - CSDN博客
2017年08月09日 12:47:49[FZH_SYU](https://me.csdn.net/feizaoSYUACM)阅读数：324
个人分类：[数据结构与算法](https://blog.csdn.net/feizaoSYUACM/article/category/7456684)
所属专栏：[算法细讲（ACM）](https://blog.csdn.net/column/details/14379.html)
关键字：最优解 动态规划 子结构 背包问题 区间覆盖
## **导言**
有人说，贪心很简单，因为不用学，人人都知道怎么贪。也有人说，贪心很难，因为这个世界上会贪的人太多了，哪轮得到你我的份？
在acm竞赛中，贪心思想已经能够用来解决许许多多的实际应用。比如背包问题，最优解问题，区间覆盖问题，方案调度问题。同时，贪心思想也是很多算法的灵魂，比如说哈夫曼编码，Dijkstra算法，最小生成树算法。
那么，究竟如何才能正确使用贪心，这是本章内容讲解的关键。
## **概叙**
贪心，顾名思义，就是在把一个大问题分割成无数个相类似的子结构之后，对于每一个子结构，只在乎当前，贪心考虑最优选择，无需考虑整体最优。用专业一点的术语来说，就是无后效性。
具体来说，面对一个大问题，截取当前的一小部分，在这个小部分中选择最优最好的结果。然后以一种迭代，也就是递推的方式选取相似的下一小部分。每次面对一小部分问题，保存最好的结果，丢进集合中。最后在考虑整体的时候，贪心的结果就是集合里这些每个小部分问题保存下来的结果的综合。
## **第一类：背包问题**
但是需要注意一下的是，贪心算法存在一些弊病。首先，贪心不能保证求得的最后解是最佳的。因为大家应该可以想得到，贪心是单纯求子结构的最优解，然后把这些解累加起来，并不考虑整体最优，如果需要求最佳的整体解，就要使用动态规划，而不是贪心。举个例子，有一个容量为V的背包以及n件体积为Vi，价值为Wi的物品，你需要把物品装入背包，算出最大价值。
现在给出两类条件说明： 
①如果背包必须装满，每件物品可以选取其中任何一部分，那么贪心还是好解的。计算每种物品的单位体积价值量作为贪心选择的依据指标，选择单位体积价值量最高的物品，将尽可能多的物品装入背包。按照这样的策略一直地进行下去，直到背包装满为止。 
②如果背包不要求一定装满，并且每件物品独立存在，不可拆分，那么贪心就无法解决这样的问题。思考一下，如果物品不能拆分，或多或少会存在背包装不满的状态。如果仍然按照计算每种物品的单位体积价值量作为贪心选择的依据指标，难保不会存在部分闲置的背包空间降低了单位体积背包的价值。这样的话，就很容易寻找更优解，比贪心求出来的单位体积背包的价值要大。
因此贪心算法也不能用来求最大或最小解问题，它只能求满足某些约束条件的可行解的范围。并且这样的范围需要提前预测，也就是提出猜想，还需要经过一定的证明其正确性，才能投入使用。不过一旦经过证明成立之后，就是一种十分高效的算法。这个证明的思路，必须遵循一点：整个问题的最优解一定由在贪心策略中存在的子问题的最优解得来的。只有如此，贪心才有效。
## **第二类：最优解问题**
**例题1**： 
有一辆车现在从t=0开始走，速度不能递减（可以匀速，也可以变加速）。警察记录了N次车在行驶时候的位置，每次记录的时刻t都为整数，并且每个时刻记录下来的车的位置也为整数。问到达最后一个位置时这辆车至少总共开了多长时间。
输入样例： 
3  
6 11 21
输出样例： 
4
分析： 
  题目通读两遍，抓其本质，就是速度未知，在任意两个时刻之间那一时间段，你可以自由进行贪心选择，如何选择？当然需要满足“只能匀速或者变加速”的条件！并且题目已经告诉你了，无论是每个时刻还是每个时间段行驶的距离，都是整数。你的贪心需要达到的效果，就是求出每个时间段速度的范围。
因此我们可以得出贪心结果：2 1 1；
最后总时间就是4。
容易发现，这个题目逆序遍历贪心要好做得多。因为越往后的时间段，对速度的约束条件就越少。无论什么问题，都应该从简单开始入手。我们把每一个时间段看做一个子问题，对于每一个子问题，在满足最大速度不超过后一个时间段的速度的条件下，贪心选择当前时间段的最大速度，进而求出每个子问题下的最少时间。
比如样例数据，分析起来的话，第三个时间段确定当前速度为10，到了第二个时间段，已经限制到了5，因此第一个时间段最快也是5，不过由于需要满足时间为整数的要求，速度最快也只能是3。
**例题2：**
给出n个整数和一个整数k，现在要你判断能不能通过合并和拆分使得k个数都具有相同的值。 
```
合并规则：每次只能将相邻的数据合并，合并后的数据为两个相邻数据和；
拆分规则：每次只能将一个数据拆分成两个，两个数据之和必须为这个拆分的数据；
```
每次合并操作或者每次拆分操作记为一次操作，问如果可以至少需要多少次操作？
输入样例： 
3  
1 3  
14  
3 1  
2 3 4  
3 6  
1 2 3
输出样例： 
-1 
2 
3
分析：
那么为什么这样能保证次数最少？首先我们一条一条地来看。如果当前的数比平均数小，那么一定是要跟旁边的数合并的（也就是次数一定需要+1）。至于为什么一定是往后面推而不跟前面的数合并，这只是一个顺序问题，并不影响贪心结果。不相信的话大家可以自己拿几组数据试试看。如果当前的数比平均数大，那么当前的数整除平均数的结果是肯定需要累加到次数结果上面去的，因为这是必须要均摊的。另外我们还可以分类思考一下，如果刚好是平均数的倍数，那么最后一份均摊出来的平均数是不需要计算次数的，这也就是为什么只需要累加当前的数整除平均数的结果-1了。如果不能整除平均数，除了需要累加当前的数整除平均数的结果之外，均摊出来的余数比平均数要小，这就必须跟后面的数合并，因此结果+1。
**例题3：**
GBQC国的小明当上了打字员，现在他需要打出N篇只含字母的文章，小明习惯用Caps Lock键来转换大小写，因此每当从小写字母转换成大写字母的时候，他就会按一下Caps Lock键打开大写锁，每当从大写字母转换成小写字母的时候，他就会按一下Caps Lock键关闭大写锁。 
在最初的时候大写锁是关闭的，小明的打文章的顺序可以是任意的，但对于任意一篇文章必须从文章开头至结尾逐一打完每个字母，中途不能更换其他文章。 
现在小明想知道，如何安排打文章的顺序才能使按Caps Lock键的次数最少呢？
输入样例： 
3 
1  
ABCde 
1  
fgHIJ 
2  
ABCde  
fgHIJ
输出样例： 
2 
1 
2
分析： 
首先在贪心之前有一个基础的问题自己需要先解决，那就是在每个字符串内除去首字母和尾字母之外的大小写转换次数累加。
之后就是针对每个字符串首尾字母大小写进行贪心选择。假设大写开头小写结尾的字符串数为a1；大写开头大写结尾的字符串数为a2；小写开头大写结尾的字符串数为a3。应该注意的是，因为一开始就是小写，所以小写开头小写结尾的字符串不需要考虑。
按照贪心的思想，小写开头大写结尾最好衔接大写开头大写结尾或者大写开头小写结尾的字符串，而大写开头小写结尾最好衔接小写开头大写结尾的字符串。因此对于大写开头小写结尾和小写开头大写结尾这两种字符串的处理，按键次数最少需要累加的其实就是|a1-a3|的值。对于大写开头大写结尾字符串的处理，只需要判断一下小写开头大写结尾的字符串数，如果非0则不作任何处理，不然的话如果等于0则需要+1。
## **第三类：区间覆盖问题**
**例题4：**
X轴上有N条线段，每条线段包括1个起点和终点。线段的重叠是这样来算的，[10 20]和[12 25]的重叠部分为[12 20]。 
给出N条线段的起点和终点，从中选出2条线段，这两条线段的重叠部分是最长的。输出这个最长的距离。如果没有重叠，输出0。
输入样例： 
5 
1 5 
2 4 
2 8 
3 7 
7 9
输出样例： 
4
分析： 
    贪心需要有一个顺序，因此首先需要对这些数据进行排序。按照起点从小到大，起点相同终点从大到小的顺序排好。因为起点是从小到大，所以重叠部分的起点一定是取决于后面一个数据的起点，而终点则是通过两组数据的终点大小比较，取较小的那一个。每次对子问题贪心选择之后把距离与曾经在较多子问题中已经比较出来的最长距离进行比较，不断更新最长距离值。
**例题5：**
给定一个长度为n的字符串，只由小写字母组成。现在在位置P处有一个光标，光标有左右移动的操作，也有上下改变字符的操作。请输出最少操作数使得这个串为回文串。
输入样例: 
8 3  
aeabcaez
输出样例： 
6
分析： 
如果需要改动的字符只有一个，或者有多个但是这多个需要改动的字符都在位置p所定位的一个方向，则直接处理； 
如果需要改动的字符有多个并且这多个需要改动的字符在位置p所定位的两边，则需要按照“最远距离小的方向先走最远距离大的方向后走”的策略进行贪心选择。
## **第四类：方案调度问题**
**例题6：**
  有N个人要渡河，但是只有一艘船，船上每次最多只能载两个人，渡河的速度由两个人中较慢的那个决定，小船来回载人直到所有人都渡河，求最短的渡河时间。
输入样例： 
4 
1 2 5 10
输出样例： 
17 
分析： 
考虑每次送走两个当前速度最慢的，把每一次送走速度最慢的两个人作为一个子结构。则容易联系到速度最快的两个人。没错，每次把速度最快的和次快的与速度最慢的和次慢的联系起来。如果每次送走当前两个速度最慢的，n的处理都会n-=2；那么对于每一个子结构，都会有两种贪心的选择。如图所示： 
![这里写图片描述](https://img-blog.csdn.net/20170809123816090?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZmVpemFvU1lVQUNN/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
贪心（一）
![这里写图片描述](https://img-blog.csdn.net/20170809123846394?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZmVpemFvU1lVQUNN/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
贪心（二）
第一种贪心：第一趟选择送走最快的和次快的，返回最快的；第二趟送走最慢的和次慢的，返回次快的。消耗的时间为：s[0]+2*s[1]+s[n-1] 
第二种贪心: 第一趟选择送走最快的和最慢的，返回最快的；第二趟送走最快的和次慢的，返回最快的。消耗的时间为：s[0]+s[0]+s[n-2]+s[n-1] 
我们会发现，这两种贪心只有一处不同，那就是2*s[1]与s[0]+s[n-2]的比较。因此对于每一个子结构，只要满足n>3,便对这两种贪心选择耗时更短的一种即可得到最优。
**例题7：**
   现有底面面积为1*1、2*2、3*3、4*4、5*5、6*6，高度同为H的六种产品，现在有这么一种箱子，它的底面面积为6*6，高度为H。问至少需要多少个这样的箱子才能把所有产品全部打包。
输入样例： 
0 0 4 0 0 1 
7 5 1 0 0 0
输出样例： 
2 
1
分析： 
    按照“能补大的先补大的”的贪心思想，做到尽量填满每一个用到的箱子。
