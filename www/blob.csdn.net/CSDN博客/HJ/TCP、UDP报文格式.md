# TCP、UDP报文格式 - HJ - CSDN博客
2018年03月16日 23:10:40[FZH_SYU](https://me.csdn.net/feizaoSYUACM)阅读数：1282
**一、TCP报文格式**
![](https://img-blog.csdn.net/20180316230904851)
**源端口**： 数据发送方的端口号。
**目的端口**： 数据接受方的端口号。
序号：本数据报文中的的第一个字节的序号（在数据流中每个字节都对应一个序号）。
确认号：希望收到的下一个数据报文中的第一个字节的序号。
数据偏移：表示本报文数据段距离报文段有多远。
保留：顾名思义，用来保留给以后用的。
紧急比特URG：当值为1时表示此报文段中有需要紧急处理。
**确认比特ACK**：值为1时确认号有效，值为0时确认号无效。
复位比特RST：值为1时表示TCP连接存在严重的错误，需要重新进行连接。
**同步比特SYN**：值为1表示这是一个连接请求或连接接受报文。
**终止比特FIN**： 值为1表示要发送的数据报已经发送完毕，需要释放传送连接。
窗口字段：TCP连接的一端根据缓存空间的大小来确定自己接受窗口的大小，限制发送放的窗口上限。
**检验和**：用来检验首部和数据两部分的正确性。
紧急指针字段：本报文紧急数据的最后一个字节的序号。
**二、UDP报文格式**
![](https://img-blog.csdn.net/20180316230930307)
UDP协议分为首部字段和数据字段，其中首部字段只占用8个字节，分别是个占用两个字节的源端口、目的端口、长度和检验和。
长度：UDP报文的整个大小，最小为8个字节（仅为首部）。
**检验和**：在进行检验和计算时，会添加一个伪首部一起进行运算。伪首部（占用12个字节）为：4个字节的源IP地址、4个字节的目的IP地址、1个字节的0、一个字节的数字17、以及占用2个字节UDP长度。这个伪首部不是报文的真正首部，只是引入为了计算校验和。相对于IP协议的只计算首部，UDP检验和会把首部和数据一起进行校验。接收端进行的校验和与UDP报文中的校验和相与，如果无差错应该全为1。如果有误，则将报文丢弃或者发给应用层、并附上差错警告。
