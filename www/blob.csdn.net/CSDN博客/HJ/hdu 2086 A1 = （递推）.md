# hdu  2086  A1 = ?（递推） - HJ - CSDN博客
2017年04月28日 12:46:06[FZH_SYU](https://me.csdn.net/feizaoSYUACM)阅读数：208
Problem Description 
有如下方程：Ai = (Ai-1 + Ai+1)/2 - Ci (i = 1, 2, 3, …. n). 
若给出A0, An+1, 和 C1, C2, …..Cn. 
请编程计算A1 = ?
Input 
输入包括多个测试实例。 
对于每个实例，首先是一个正整数n,(n <= 3000); 然后是2个数a0, an+1.接下来的n行每行有一个数ci(i = 1, ….n);输入以文件结束符结束。
Output 
对于每个测试实例，用一行输出所求得的a1(保留2位小数).
Sample Input
1 
50.00 
25.00 
10.00 
2 
50.00 
25.00 
10.00 
20.00
Sample Output
27.50 
15.00
把公式转换一下：
```
A(i+1) = 2*Ai + 2*Ci - A(i-1)
```
然后根据公式从A(n+1)开始递推，递推过程如下：
```
A(n+1) = 2*An + 2*Cn - A(n-1)               ①
 An = 2*A(n-1) + 2*C(n-1) - A(n-2)           ②
```
由①②得到
```
A(n+1) = 3*A(n-1) + 2*Cn + 4*C(n-1) -2*A(n-2)    ③
```
又因为
```
A(n-1) = 2*A(n-2) + 2*C(n-2) - A(n-3)            ④
```
由③④得到
```
A(n+1) = 4*A(n-2) + 2*Cn + 4*C(n-1) + 6*C(n-2) - 3*A(n-3)   ⑤
```
依此类推，最后可以得到：
```
A(n+1) = n*A0 - (n-1)A1 - 2*(Cn + 2C(n-1) + 3*C(n-2) + n*C1)
```
因此可以根据A(n+1)和A0以及Ci求出A1
代码如下：
```cpp
#include<iostream>
#include<cstdio>
using namespace std;
int main()
{
    int n;
    while(~scanf("%d",&n))
    {
        double x,a0,an,sum;
        scanf("%lf%lf",&a0,&an);
        sum=an+n*a0;
        for(int i=n;i>=1;i--)
        {
            scanf("%lf",&x);
            sum-=2*x*i;
        }
        sum=sum/(n+1);
        printf("%.2lf\n",sum); 
    }
    return 0;
}
```
