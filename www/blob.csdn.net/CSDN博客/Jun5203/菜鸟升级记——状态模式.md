# 菜鸟升级记——状态模式 - Jun5203 - CSDN博客
2019年02月15日 15:00:50[贾俊浩_Ellen](https://me.csdn.net/Ellen5203)阅读数：31
所属专栏：[C#](https://blog.csdn.net/column/details/29824.html)
状态模式
当一个对象的内在状态改变时允许改变其行为（不同的状态对应不同的行为），这个对象看起来像是改变了其类。
```
class Program
    {
        static void Main(string[] args)
        {
            Context c=new Context(new ConcreteStateA());//设置Context的初始状态为ConcreteStateA
            //不断地请求，同时更改状态
            c.Request();
            c.Request();
            c.Request();
            c.Request();
            Console.Read();
        }
    }
    //抽象状态类，定义一个接口以封装与Context的一个特定状态相关的行为
    abstract class State
    {
        public abstract void Handle(Context context);
    }
    //具体状态类，每一个子类实现一个与Context的一个状态相关的行为
    class ConcreteStateA : State
    {
        public override void Handle(Context context)
        {
            context.State=new ConcreteStateB();//设置ConcreteStateA的下一状态是ConcreteStateB
        }
    }
    class ConcreteStateB: State
    {
        public override void Handle(Context context)
        {
            context.State = new ConcreteStateA();//设置ConcreteStateB的下一状态是ConcreteStateA
        }
    }
    //维护一个ConcreteState子类的实例，这个实例定义当前的状态
    class Context
    {
        private State state;
        public Context(State state)//定义Context的初始状态
        {
            this.state = state;
        }
        public State State//可读写的状态属性，用于读取当前状态和设置新状态
        {
            get { return state; }
            set
            {
                state = value;
                Console.WriteLine("当前状态：" + state.GetType().Name);
            }
        }
        public void Request()//对请求做处理，并设置下一状态
        {
            state.Handle(this);
        }
    }
```
**优点**
- 消除庞大的条件分支语句
- 通过把各种状态转移逻辑分布到State的子类之间，来减少相互间的依赖
