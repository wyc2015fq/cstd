# 设计模式之观察者模式（1） - 刘炫320的博客 - CSDN博客
2016年05月25日 21:21:24[刘炫320](https://me.csdn.net/qq_35082030)阅读数：447
今天，我们就介绍一个很简单的设计 模式，叫做观察者模式。
什么叫做观察者模式呢。所谓的观察者模式，就是牵一发而动全身。没错，就是你把
你的敌人关了起来，并且派兵把守着，只要敌人有什么动静。你的士兵一定会第一时间做出反应。这就使观察者模式。
其实，在C#语言里，这种模式的机制，可以用委托来进行实现。但是在java里，则是直接在工具类中有观察者模式类，可以很方便的让我们实现观察者模式。下面，就用java代码写一个当今比较热门的话题，买房子。
具体的代码如下：
这是房价类：
```java
//创建房价类
class House extends Observable{
	private double price;
	public double getPrice() {
		return price;
	}
	public void setPrice(double price) {
		super.setChanged();
		//要把price的变化通知给所有的观察者
		super.notifyObservers(price);
		this.price = price;
	}
	public House(double price) {
		super();
		this.price = price;
	}
	public String toString(){
		return "房子价格为："+this.price;
	}
}
```
现在有了房价类，还缺少观察者啊，别急，房价的观察者这就出现：
```java
class HousePriceObserver implements Observer{
	private String name;
	private Double dream_price;
	@Override
	public void update(Observable obj, Object arg) {
		if(arg instanceof Double){
			System.out.print(this.name+"观察到价格改为：");
			System.out.println(((Double)arg).doubleValue());
			System.out.print("他心里想：");
			if((Double)arg<this.dream_price){
				System.out.println("房价又跌了，好信号！");
			}
			else{
				System.out.println("房价又涨了，要死人了！！");
			}
			this.dream_price=(Double)arg;
		}
	}
	public HousePriceObserver(String name,Double dream_price) {
		super();
		this.name = name;
		this.dream_price=dream_price;
	}
}
```
接下来就是实现奇迹的时刻了：
```java
public class ObserDemo01 {
	public static void main(String[] args) {
		// TODO 自动生成的方法存根
		House h=new House(10000);
		HousePriceObserver hpo1=new HousePriceObserver("购房者A",10000.0);
		HousePriceObserver hpo2=new HousePriceObserver("购房者B",10000.0);
		HousePriceObserver hpo3=new HousePriceObserver("购房者c",10000.0);
		h.addObserver(hpo1);
		h.addObserver(hpo2);
		h.addObserver(hpo3);
		System.out.println(h);
		for(int i=0;i<10;i++){
			double number=(int)((Math.random()-0.5)*1000);
			h.setPrice(h.getPrice()+number);
			System.out.println(h);
			System.out.println("又过了一段时间");
			try {
				Thread.sleep(5000);
			} catch (InterruptedException e) {
				// TODO: handle exception
				e.printStackTrace();
			}
			
		}
		
	}
}
```
具体的结果如下：
```java
房子价格为：10000.0
购房者c观察到价格改为：9745.0
他心里想：房价又跌了，好信号！
购房者B观察到价格改为：9745.0
他心里想：房价又跌了，好信号！
购房者A观察到价格改为：9745.0
他心里想：房价又跌了，好信号！
房子价格为：9745.0
又过了一段时间
购房者c观察到价格改为：9543.0
他心里想：房价又跌了，好信号！
购房者B观察到价格改为：9543.0
他心里想：房价又跌了，好信号！
购房者A观察到价格改为：9543.0
他心里想：房价又跌了，好信号！
房子价格为：9543.0
又过了一段时间
```

