# 转载和积累系列 - C语言学习笔记 - 动态分配内存 - 自娱自乐的代码人，专注Java、c、php - CSDN博客





2012年07月02日 17:56:58[initphp](https://me.csdn.net/initphp)阅读数：678








> 
所谓动态内存分配就是指在程序执行的过程中动态地分配或者回收存储空间的分配内存的方法。动态内存分配不象数组等静态内存分配方法那样需要预先分配存储空间，而是由系统根据程序的需要即时分配，且分配的大小就是程序要求的大小。从以上动、静态内存分配比较可以知道动态内存分配相对于景泰内存分配的特点：

　　1、不需要预先分配存储空间；

　　2、分配的空间可以根据程序的需要扩大或缩小。


- malloc函数的原型为：

　　void *malloc (unsigned int size)

　　其作用是在内存的动态存储区中分配一个长度为size的连续空间。其参数是一个无符号整形数，返回值是一个指向所分配的连续存储域的起始地址的指针。还有一点必须注意的是，当函数未能成功分配存储空间（如内存不足）就会返回一个NULL指针。所以在调用该函数时应该检测返回值是否为NULL并执行相应的操作。
- free函数

　　由于内存区域总是有限的，不能不限制地分配下去，而且一个程序要尽量节省资源，所以当所分配的内存区域不用时，就要释放它，以便其它的变量或者程序使用。这时我们就要用到free函数。

　　其函数原型是：

　　void free(void *p)

　　作用是释放指针p所指向的内存区。

　　其参数p必须是先前调用malloc函数或calloc函数（另一个动态分配存储区域的函数）时返回的指针。给free函数传递其它的值很可能造成死机或其它灾难性的后果。


- 代码：

```php
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main() {
	char *p;
	p = (char *)malloc(100000*sizeof(char)); //定义一个动态内存
	scanf("%s", p);
	printf("%s%d", p, strlen(p));
	free(p); //释放内存
	system("pause");
	return 0;
}
```









