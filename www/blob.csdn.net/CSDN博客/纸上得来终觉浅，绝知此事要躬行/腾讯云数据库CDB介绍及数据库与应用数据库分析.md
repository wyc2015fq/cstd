# 腾讯云数据库CDB介绍及数据库与应用数据库分析 - 纸上得来终觉浅，绝知此事要躬行 - CSDN博客





2016年08月17日 11:52:56[boonya](https://me.csdn.net/boonya)阅读数：3488







现在的应用服务已经不再是单一化的组成了，我们随时可以将自己的应用部署到云上提供访问和服务，数据库也一样。云数据库（字符数据）概念跟云存储（字符、图片、文件等）是相似的，就是通过多个计算机节点提供资源池访问，利用集群和负载均衡做代理访问，达到资源快速响应的目的。这里来看看腾讯云数据库，以Mysql为例。



# 云数据库 CDB

云数据库（Cloud DataBase CDB）是腾讯云提供的关系型数据库云服务，基于PCI-e SSD，高达37000 QPS强悍性能。CDB 支持MySQL、SQL Server、TDSQL（兼容mariaDB）引擎，主从实时热备，并提供数据库运维全套解决方案。



# 产品概述 
|优势|![](https://mc.qcloudimg.com/static/img/28069b3b53a6e045b35f365b401d662e/MySQL.png)CDB for MySQL|自建数据库|
|----|----|----|
|价格优势|成本最优无需预先采购、准备硬件资源及投入数据库研发，CDB for MySQL提供多种具有成本优势的存储介质供您选择，帮助您有效降低数据库基础设施的投入。|费用高昂- 硬件：单台存储服务器成本高（如果搭主从，需要购买2台，资源冗余）- 软件：需要招聘专业DBA，人力成本高|
|高性能|专项内核优化高IO型CDB实例存储介质采用企业级PCI-E SSD，提供业界领先的IO吞吐能力；深度定制开发MySQL内核，消除DB冗余I/O、缩短I/O路径，规避了大锁竞争，性能远超基于开源MySQL的自建数据库。CDB for MySQL的性能优势让您可以以更少的数据库数量支撑更高的业务并发请求量，简化了后端架构，使得整体IT架构更易于管理和运维。|调优水平无法保证性能依赖技术人员的调优水平|
|服务高可用性|多重保障工信部可信云认证可用性高达99.95%，行业高标准。实时双机热备，故障秒级切换；专业团队7*24小时守候，一对一指导，QQ远程协助。让您仅需极少的工作就能够轻松实现高可用的数据库架构，为业务高速发展提供稳定的基础设施。|可用性低需自行处理故障，自建主从，自建RAID，自建灾备|
|数据高可靠性|完善的保障机制工信部可信云认证可靠性高达99.9996%，拥有完善的数据自动备份和无损恢复机制（实时双机热备，3日内任意时间点无损恢复，5日冷备数据dump）。CDB for MySQL的高可靠性让您可以放心的将数据放在云端，无需担心数据丢失，也简化了传统运维工作中为保障数据高可靠带来的额外工作量和额外的IT投入成本。|保障体系不周全自行保障，依赖硬件的故障发生率，依赖技术人员的数据库管理水平|
|全面监控|一体化监控提供近三十项重要指标专业的数据库多维度监控，更支持故障自定义预警，让您可以随时深入了解MySQL数据库实例的运行状况，对故障实现自动告警，数据库运维更加省心。|监控体系不健全需自行开发数据库监控系统，运维人员需半夜处理故障|
|自动化运维|全流程运维服务- 用户无需关心MySQL的安装、部署、版本更新及故障处理，云数据库运营团队为您全面负责，免除后顾之忧- master与slave的切换、故障的处理及数据迁移，完全对用户透明，IP、Port保持不变，编程完全无需考虑IP飘移，帮助您极大降低运维成本|工作繁琐- 用户需独立负责MySQL的安装、部署、版本更新、故障处理等操作- master与slave切换时，用户需要重新配置数据据库连接的IP Port|

### 版本更新 
- 2010.06v1.0- 单机版上线
- 完善MySQL管理功能

- 2013.12v2.0- 标准版上线
- 优化MySQL内核

- 2014.03v3.0- 高性能版上线
- 优化存储性能

- 2015.05v4.0- 全新高IO版上线
- 性能提升10倍

- 2015.07.30v4.1- [金融级数据库TDSQL上线](https://www.qcloud.com/product/tdsql.html)

- 2016.08.15v6.0- [全新机皇上线](https://www.qcloud.com/act/event/cdb60.html)
- 只读实例 
- 异地容灾


# 功能介绍

- 极高性能
- 数据复制和迁移
- 可用性保障
- 可扩展性
- 安全性保障
- 易用性




## 极高性能

##### 硬件保障

基于PCI-E SSD，强大IO性能保障数据库的访问能力；

存储硬件采用NvMe 协议，专门针对PCI-E接口的SSD设计，更能发挥出性能优势；

高IO型单实例最大支持245509QPS(每秒访问次数)、488G内存和6TB存储空间 。

##### 内核优化

主从同步多线程优化，解决DB间同步性能瓶颈，无需考虑主从同步不及时的问题；

MySQL事务线程和Dump线程的锁优化，进一步提高数据库性能。





## 数据恢复和迁移




##### 只读实例

只读实例帮助用户实现一主多从或读写分离架构，轻松应对业务海量请求压力；更支持带有负载均衡功能的RO组，大大简化从机之间业务访问的压力分配过程。您只需在页面购买即可在几分钟内为您配置一台只读实例。

##### 数据迁移

借助CDB的数据传输工具CDT，可轻松实现云主机上自建MySQL数据库到CDB数据库实例，具有外网IP的IDC机房内/其他友商云MySQL数据库到CDB数据库实例等多种场景下的数据库自动迁移，可极大简化您的数据库上云工作，无需自己手动迁移数据库，实现业务无缝过渡上云。

数据传输工具CDT已实现全Web化操作，控制台点击操作即可实现自动数据迁移，无需人工值守。

##### 异地灾备实例

CDB for MySQL现已支持跨地域的灾备实例，帮助您建立通过内网专线同步的异地灾备数据同步。在CDB数据库主实例所在地域的机房发生故障或由其他原因引起不可用的情况下，异地灾备实例为您提供快速恢复数据访问的能力，可帮助您在异地迅速搭建业务体系，将业务访问流量切换到异地恢复运营，减少业务因故障引起的损失，保证了数据库在灾难情况下的高可用性。

灾备实例从主实例同步数据过程中，数据写入功能会受到限制。但您可在Web控制台将灾备实例升级为主实例，断开与数据同步连接并恢复完整功能。




## 可用性保障




##### 完善的热备和冷备

使用完全同构的物理机提供实时的双机热备，主机故障可秒级切换至备机，提高数据库的可用性，保障业务的无间断服务；基于冷备和binlog文件，提供3日内无损恢复，5日冷备数据dump，保障数据安全恢复。

##### 自动容灾

支持宕机自动检测和故障自动迁移。在主备切换时，采用VIP屏蔽切换过程，主备切换和故障迁移过程对用户透明。您无需关心数据库所在物理机故障和宕机的问题，应用层无需做任何改动即可完成热备切换，业务对容灾切换无感知。

##### 专业的监控与告警

覆盖连接访问、数据库负载、查询缓存、存储引擎等近三十项重要指标，可全方位监控数据库运行状况；自定义资源阈值告警，提供慢查询分析报告和SQL完整运行报告下载，可帮助用户快速定位DB运行中的问题。自定义告警可将问题及时反馈给运维人员，帮助您快速响应数据库问题。




## 可扩展性




##### 灵活的计费方式

CDB for MySQL 提供包年包月和按量计费两种计费模式，满足您不同业务场景下的弹性需求，帮助您节省数据库的成本投入。
[详细计费说明>>](https://www.qcloud.com/doc/product/236/3135)

包年包月的计费模式，您可以根据业务需求一次性支付一个月或几个月的数据库服务费用，避免一次性投入大量资金建设基础设备；

按量计费的弹性计费模式，您可以随时开通/销毁数据库实例，按实例的实际使用量计费，适用于突发性业务高峰。

##### 性能和容量扩展

CDB for MySQL 除最大规格实例外均提供无缝升级功能。当您遇到性能瓶颈时，您可在页面上通过鼠标点击操作，一键升级到更高性能和容量的实例规格，升级过程不影响您业务正常访问和使用，实现快速、平滑扩容，满足业务快速发展需要。




## 安全性保障




##### 多重安全防护

云数据库默认为每个数据库都提供了多重安全防护，在提供了外网访问功能的数据库实例遭到DDoS攻击时，能帮助用户抵御各种攻击流量，保证业务的正常运行。高效防御SQL注入、暴力破解等数据库攻击行为，极大减少用户因数据库攻击带来的业务中断和损失。

##### 存储高可靠

提供在线的主从两份数据存储，确保线上数据安全。每日自动备份数据，云数据库可根据备份文件提供3天内的任意时间点回档。同时每天的冷备数据都会存储多份，以便于在灾难情况下进行数据恢复。您可以放心的将数据存储在CDB上，无需考虑数据丢失的问题。




## 易用性




##### 轻松管理海量数据库

提供命令行和Web两种方式管理云数据库，并支持批量数据库的管理、权限设置和SQL导入，将海量数据库实例的运维工作简化为在页面点击即可完成，极大地降低了运维工作量。

##### 多种网络接入方式

支持VPC网络和基础网络，还可配置数据库外网访问。通过这些接入方式，您可从腾讯云、IDC、私有云或其他云厂商处访问云数据库，从而满足多种环境下的数据库访问需求。

##### 参数模版

提供参数配置模版，您可以将常用的数据库配置保存为模版，应用到新建实例中，免去了初始化数据库的繁杂工作，极大地简化了参数调优工作。

##### 支持API

云数据库MySQL提供完善的API体系，您可使用API轻松地将云数据库与内部监控、运营系统相结合，实现贴近业务需求、完全自动化的业务运维体系。 [查看API说明>>](https://www.qcloud.com/doc/api/253/1209)




# 腾讯其他云数据库产品



- ![](https://imgcache.qq.com/open_proj/proj_qcloud_v2/qcloud_2015/css/img/product/sum-case-1.png)
MySQL内核优化版

- ![](https://imgcache.qq.com/open_proj/proj_qcloud_v2/qcloud_2015/css/img/product/sum-case-2.png)
SQL Server 含证书版

- ![](https://imgcache.qq.com/open_proj/proj_qcloud_v2/qcloud_2015/css/img/product/sum-case-3.png)
自研商业数据库 TDSQL

- ![](https://imgcache.qq.com/open_proj/proj_qcloud_v2/qcloud_2015/css/img/product/sum-case-4.png)
基于MySQL打造专业存储服务








## 云数据库 CDB for TDSQL

云数据库TDSQL定位于OLTP场景下高安全性的企业级云数据库，十余年来一直应用于腾讯计费业务，TDSQL兼容MySQL语法，拥有诸如线程池、审计、异地容灾等高级功能，并在多个项目中通过银监、保监的可靠性、信息安全等检查，同时具有云数据库的易扩展性、简单性和性价比。


## 云数据库 CDB for SQL Server

云数据库SQL Server帮助用户部署已包含正版授权的SQL Server（2008 R2和2012）版本，基于租用而非一次性购买许可和硬件，将变得更加经济实惠，并且腾讯云默认为用户提供数据库镜像以实现高可用容灾，并同时部署备份、恢复、监控、迁移等全套解决方案，让您能专注于业务程序开发。

## 云数据库 CDB for PostgreSQL

云数据库PostgreSQL能够让您在云端轻松设置、操作和扩展目前功能最强大的开源数据库PostgreSQL，腾讯云将负责绝大部分处理复杂而耗时的管理工作，如PostgreSQL软件安装、存储管理、高可用复制、以及为灾难恢复而进行的数据备份，让您更专注于业务程序开发。



资料来源：[https://www.qcloud.com/product/cdb-overview.html](https://www.qcloud.com/product/cdb-overview.html)

# 应用数据库分析

## 关系型和非关系型数据库

数据库分为关系型数据库和非关系型数据库。关系型数据库以Oracle、SQL server、Mysql等为典型。非关系型数据库以Mongo DB、Memcache、Redis等为典型。在真实应用环境下选择关系型数据库还是非关系型数据库建立强关联或者弱关联关系，这取决于应用数据的安全性而定。

## 云数据库与云存储

云数据库和云存储实际上是由若干个数据库实例节点构成的，只是根据他们存储数据的类型而有所区别。数据库一般是基于字符数据的存储，而云存储的格式以多样化而存在，它可以存储大容量的文件和数据包，是基于一个一个的文件存储单元。


## 关于数据库应用场景的选择

一般地，重要的业务数据我们都会采用数据库的事务来执行，而事务是关系型数据库的基本特性。据此，我们可以完成很多负杂型业务的数据一致性处理。而相对于中间操作的过程数据或不太重要的业务数据我们可以考虑采用非关系数据来存储就好了。另外，如果我们的站点是CMS内容管理系统的话一般还会考虑使用云存储来实现文件管理（图片、资料、文档）。所以根据自己不同的应用环境所需选择适合的数据库就好，不必为了使用云数据库而投入不必要的资源，按需开通服务是最好的选择。




