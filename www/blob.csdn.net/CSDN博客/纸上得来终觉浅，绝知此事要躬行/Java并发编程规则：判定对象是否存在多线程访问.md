# Java并发编程规则：判定对象是否存在多线程访问 - 纸上得来终觉浅，绝知此事要躬行 - CSDN博客





2016年12月07日 16:52:17[boonya](https://me.csdn.net/boonya)阅读数：1166
所属专栏：[Java并发编程实践](https://blog.csdn.net/column/details/13974.html)









## 判定规则：

无论何时，只要存在多于一个线程访问给定的状态变量，而其中某个线程会写入该变量，此时必须使用同步来协调对线程的访问。

## 关键字使用：


使用关键字**synchronized**和**volatile**来实现状态变量的同步修改。


一般将涉及的变量修改的方法改为synchronized修饰的方法public synchronized void change(){} ，将可变对象用synchronized(obj){}同步块进行处理。


volatile本意为不稳定的，一般考虑在求同步的性能上面使用。volatile一般修饰变量。




## 确保线程安全的方法：

说明：在没有正确同步的情况下，如果多个线程访问了同一个变量，那么程序就是存在隐患的。将程序修复为线程安全的3种方法：


1.不要跨线程同步变量


2.使状态变量定义为不可变的，用final修饰。


3.在任何线程访问状态变量的地方使用同步。



建议：一开始就将类设计为线程安全的，比后期重新修复它更容易。



## 设计线程安全类：



设计线程安全的类时，优秀的面向对象技术——封装、不可变性以及明确的不变约束，这些都可以为我们提供帮助。首先确保自己的代码正确，其次再考虑性能！

注意：线程安全的程序与线程安全的类在语义上基本类似。完全由线程安全构成的类未必是线程安全的，线程安全的程序可以有不是线程安全的类。




