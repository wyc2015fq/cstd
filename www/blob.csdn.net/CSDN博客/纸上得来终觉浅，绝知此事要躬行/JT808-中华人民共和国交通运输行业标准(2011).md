# JT808-中华人民共和国交通运输行业标准(2011) - 纸上得来终觉浅，绝知此事要躬行 - CSDN博客





2018年08月21日 13:26:38[boonya](https://me.csdn.net/boonya)阅读数：2026








最新版本：[JTT 808-2011 道路运输车辆卫星定位系统终端通讯协议及数据格式](https://pan.baidu.com/s/1Zuo7r9lQ7OAaflzjPVafIw) 密码：8j8g

本文摘录下载地址链接：[https://pan.baidu.com/s/1hNUSfXprYr-IpzeKD0R6yw](https://pan.baidu.com/s/1hNUSfXprYr-IpzeKD0R6yw) 密码：vi7l

ICS 03.220.20;35.240.60

M53

备案号:

JT

# ******中华人民共和国交通运输行业标准******

JT/T 808-2011





















道路运输车辆卫星定位系统

终端通讯协议及数据格式

GNSS system for operational vehicles

General specifications for vehicle terminal communication protocol and data

format

(报批稿)



















2011-05-23发布                                              2011-08-01实施



中华人民共和国交通运输部 发布

JT/T 808-2011

目次

前言

1范围

2规范性引用文件

3术语和定义、缩略语

4协议基础

5通信连接

6消息处理

7协议分类与说明

8数据格式

附录A(规范性附录)车载终端与外接设备通讯协议

附录B(规范性附录)消息对照表



JT/T 808-2011

******前言******

    本标准按GB/T 1.1-2009给出的规则起草。

    本标准由全国道路运输标准化技术委员会(筹)提出并归口。

    本标准起草单位:福建省交通运输厅、中国交通通信信息中心、交通运输部公路科学研究院。

    本标准主要起草人:罗冠伟、冯泉、董轩、张锦、刘建、周炜、梁金焰、尚绛、李文亮、丘舍金、李明瑛、李臣、林昭、沈兵、张学文、杨立、崔海涛。





JT/T 808-2011

道路运输车辆卫星定位系统

终端通讯协议及数据格式

******1********范围******

    本标准规定了道路运输车辆卫星定位系统车载终端(以下简称终端)与监管/监控平台

(以下简称平台)之间的通讯协议与数据格式，包括协议基础、通信连接、消息处理、协议

分类与说明及数据格式。

    本标准适用于道路运输车辆卫星定位系统车载终端和平台之间的通信。


******2********规范性引用文件******

    下列文件对于本文件的应用是必不可少的。凡是注日期的引用文件，仅所注日期的版本

适用于本文件。凡是不注日期的引用文件，其最新版本(包括所有的修改单)适用于本文件。

GB/T 2260中华人民共和国行政区划代码

GB/T 19056汽车行驶一记录仪

JT/T 415-2006道路运输电子政务平台编日编码规则

JT/T794道路运输车辆卫星定位系统车载终端技术要求



******3********术语和定义、缩略语******

## ******3. 1********术语和定义******

下列术语和定义适用于本文件。

3. 1.1

数据通信链路异常abnormal data communication link

无线通信链路断开，或暂时挂起(如通话过程中)。

3. 1 .2

注册register

终端向平台发送消息告知其安装在某一车辆上。

3. 1 .3

注销unregister

终端向平台发送消息告知从所安装车辆拆下。

3. 1 .4

鉴权 authentication

终端连接上平台时向平台发送消息以使平台验证自己身份。

3. 1 .5

位置汇报策略location reporting strategy

定时、定距汇报或两者结合。

3. 1 .6

位置汇报方案location reporting program

根据相关条件确定周期汇报的间隔的规则。

3. 1 .7

拐点补传additional points report while turning

终端在判断到车辆拐弯时发送位置信息汇报消息。采样频率不低于1Hz，汽车方位角

变化率不低于15°/s,月.至少持续3s以上。

3. 1.8

电话接听策略answering strategy

终端自动或手动接听来电的规则。

3. 1 .9

SMS文本报警SMS text alarm

终端报警时以SMS方式发送文本信息。

3. 1 .10

事件项event item

    事件项由平台顶设到终端，由事件编码和事件名称组成，驾驶员在遇到相应事件时操作

终端，触发事件报告发送到平台。

3. 2缩略语

下列缩略语适用于本文件。

APN—接入点名称(access point name)

GZIP—一个GNU自由软件的文件压缩程序(GNUzip)

LCD—液晶显示屏(liquid crystal display)

RSA—一种非对称密码算法(由Ron Rivest、Adi Shamirh、Len Adleman开发，取名来自三者的名字)

SMS—短消息服务 (short message protocol)

TCP—传输控制协议 (transmission control protocol)

TTS—文本到语音(text to speech)

UDP—用户数据报协议(user datagrnm protocol)

VSS—车辆速度传感器( vehicle speed sensor)


******4********协议基础******

## ******4.1********通信方式******

    协议采用的通信方式应符合JT/T 794中的相关规定，通信协议采用TCP或UDP，平台

作为服务器端，终端作为客户端。当数据通信链路异常时，终端可以采用SMS消息方式进

行通信。

## ******4. 2********数据类型******

协议消息中使用的数据类型见表1:

表1数据类型
|数据类型|描述及要求|
|----|----|
|BYTE|无符号单字节整型(字节，8位)|
|WORD|无符号双字节整型(字，16位)|
|DWORD|无符号四字节整型(双字，32位)|
|BYTE[n]|n字节|
|BCD[n]|8421码，n字节|
|STRING|GBK编码，采用0终结符，若无数据，则放一个0终结符|

## ******4. 3********传输规则******

协议采用大端模式(big-endian)的网络字节序来传递字和双字。

约定如下:

——字节 (BYTE)的传输约定:按照字节流的方式传输；

——字(WORD)的传输约定:先传递高八位，再传递低八位；

——双字(DWORD)的传输约定:先传递高24位，然后传递高16位，再传递高八位，

最后传递低八位。

## ******4.4********消息的组成******

4.4. 1消息结构

每条消息由标识位、消息头、消息体和校验码组成，消息结构图如图1所示：
|标识位|消息头|消息体|校验码|标识位|
|----|----|----|----|----|

图1 消息结构体

JT/T 808-2011

4. 4. 2标识位

    采用Ox7e表示，若校验码、消息头以及消息体中出现0x7e，则要进行转义处理，转义

规则定义如下:

0x7e<——>0x7d后紧跟一个0x02；

0x7d<——>0x7d后紧跟一个0x01。

    转义处理过程如下:

        发送消息时:消息封装——>计算并填充校验码——>转义;

        接收消息时:转义还原——>验证校验码——>解析消息。

      示例:

发送一包内容为0x30 0x7e 0x08 0x7d 0x55的数据包，则经过封装如下:0x7e 0x30 7d 0x02 0x08 0x7d 0x01 0x55 0x7e。

4. 4. 3消息头

消息头内容详见表2:

表2消息头内容
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|消息ID|WORD||
|2|消息体属性|WORD|消息体属性格式结构图见图2|
|4|终端手机号|BCD[6]|根据安装后终端自身的手机号转换。手机号不足12位，则在前补充数字，大陆手机号补充数字0港澳台则根据其区号进行位数补充。|
|10|消息流水号|WORD|按发送顺序从0开始循环累加|
|12|消息包封装项||如果消息体属性中相关标识位确定消息分包处理，则该项有内容，否则无该项|



消息体属性格式结构图如图2所示:
|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|
|保留|分包|数据加密方式|消息体长度| | | | | | | | | | | | |

图2消息体属性格式结构图

    数据加密方式:

    —— bit10-bit12为数据加密标识位；

    ——当此三位都为0，表示消息体不加密；

    ——当第10位为1，表示消息体经过RSA算法加密；

    ——其他保留。

    分包:

    当消息体属性中第13位为1时表示消息体为长消息，进行分包发送处理，具体分包信

息由消息包封装项决定；若第13位为0，则消息头中无消息包封装项字段。

    消息包封装项内容见表3

                                表3消息包封装项内容

JT/T 808-2011
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|消息总包数|WORD|该消息分包后的总包数|
|2|包序号|WORD|从1开始|

### ******4. 4. 4********校验码******

校验码指从消息头开始，同后一字节异或，直到校验码前一个字节，占用一个字节。

******5********通信连接******

## ******5.1********连接的建立******

    终端与平台的数据日常连接可采用TCP或UDP方式，终端复位后应尽快与平台建立连

接，连接建立后立即向平台发送终端鉴权消息进行鉴权。

## ******5. 2********连接的维持******

    连接建立和终端鉴权成功后，终端应周期性向平台发送终端心跳消息，平台收到后向终

端发送平台通用应答消息，发送周期由终端参数指定。



## ******5. 3********连接的断开******

平台和终端均可根据TCP协议主动断开连接，双方都应主动判断TCP连接是否断开。

平台判断TCP连接断开的方法：

——根据TCP协议判断出终端主动断开；

——相同身份的终端建立新连接，表明原连接已断开；

——在一定的时间内未收到终端发出的消息，如终端心跳。

终端判断TCP连接断开的方法：

——根据TCP协议判断出平台主动断开；

——数据通信链路断开；

——数据通信链路正常，达到重传次数后仍未收到应答。

******6********消息处理******

## ******6. 1   TCP********和********UDP********消息处理******

### ******6. 1.1********平台主发的消息******

    所有平台主发的消息均要求终端应答，应答分为通用应答和专门应答，由各具体功能协

议决定。发送方等待应答超时后，应对消息进行重发。应答超时时间和重传次数由平台参数

指定，每次重传后的应答超时时间和重传次数由平台参数指定，每次重传后的应答超时时间的计算公式见式(1):  

TN+1=TN*(N+1)                   …………(1)

式中：

    TN+1——每次重传后的应答超时时间；

    TN——前一次的应答超时时间；

N——重传次数。

IT/T 808-201 1

### ******6. 1 .2********终端主发的消息******

6.1.2.1数据通信链路正常

数据通信链路正常时，所有终端主发的消息均要求平台应答，应答分为通用应答和专门应答，由各具体功能协议决定。终端等待应答超时后，应对消息进行重发。应答超时时间和重传次数由终端参数指定，每次重传后的应答超时时间按式(1)进行计算。对于终端发送的关键报警消息，若达到重传次数后仍未收到应答，则应对其进行保存。以后在发送其它消息前要先发送保存的关键报警消息。

6.1.2.2数据通信链路异常

数据通信链路异常时，终端应对需发送的位置信息汇报消息进行保存。在数据通信链路恢复正常后，立即发送保存的消息。

6. 2  SMS消息处理

终端通信方式切换为GSM网络的SMS消息方式时，采用PDU八位编码方式，对于长度超过140字节的消息，应按照GSM网络的短信服务规范GSM 03.40进行分包处理。

SMS消息的应答、重传和保存机制同6.1，但应答超时时间及重传次数应按照表10中参数ID0x0006及0x0007的相关设定值处理。

******7********协议分类******

## ******7. 1********概述******

以下按功能分类对协议进行描述。无特别指明，缺省采用TCP通信方式。车载终端与外接设备通讯·协议见附录A。协议中消息名称与消息ID的消息对照表见附录B。

## ******7. 2********终端管理类协议******

### ******7. 2.1********终端注册********/********注销******

终端在未注册状态下，应首先进行注册，注册成功后终端将获得鉴权码并进行保存，鉴权码在终端登录时使用。车辆需要拆除或更换终端前，终端应该执行注销操作，取消终端和车辆的对应关系。

终端若选择通过SMS方式发送终端注册和终端注销消息，平台应通过SMS方式发送终端注册应答对终端注销进行回复，通过SMS方式发送平台通用应答对终端注销进行回复。

### ******7. 2. 2********终端鉴权******

终端注朋后每次在与平台建立连接后，应立即进行鉴权。鉴权成功前终端不得发送其它消息。

终端通过发送终端鉴权消息进行鉴权，平台回复平台通用应答消息。

### ******7. 2. 3********设置********/********查询终端参数******

平台通过发送设置终端参数消息设置终端参数，终端回复终端通用应答消息。平台通过发送查询终端参数消息查询终端参数，终端回复查询终端参数应答消息。不同网络制式下的终端应支持各自网络的一些特有参数。

### ******7.2.4********终端控制******

平台通过发送终端控制消息对终端进行控制，终端回复终端通用应答消息。

## ******7. 3********位置、报警类协议******

### ******7. 3. 1********位置信息汇报******

终端根据参数设定周期性发送位置信息汇报消息。

根据参数控制，终端在判断到车辆拐弯时可发送位置信息汇报消息。

### ******7. 3. 2********位置信息查询******

平台通过发送位置信息查询消息，查询指定车载终端当时位置信息，终端回复位置信息查询应答消息。

### ******7. 3. 3********临时位置跟踪控制******

平台通过发送临时位置跟踪控制消息启动/停止位置跟踪，位置跟踪要求终端停止之前的周期汇报，按消息指定时间间隔进行汇报。终端回复终端通用应答消息。

### ******7. 3. 4********终端报警******

终端判断满足报警条件时发送位置信息汇报消息，在位置汇报消息中设置相应的报警标志，平台可通过回复平台通用应答消息进行报警处理。各报警类型见位置信息汇报消息体中的描述。报警标志维持至报警条件解除的报警，在报警条件解除后应立即发送位置信息汇报消息，清除相应的报警标志。

## ******7. 4********信息类协议******

### ******7. 4. 1********文本信息下发******

平台通过发送文本信息下发消息，按指定方式通知驾驶员。终端回复终端通用应答消息。

### ******7.4.2********事件设置及报告******

平台通过发送事件设置消息，将事件列表发到终端存储，驾驶员在遇到相应事件后一可进入事件列表界而进行选择，选择后终端向平台发出事件报告消息。

事件设置消息，需要终端回复终端通用应答消息。

事件报告消息，需要平台回复平台通用应答消息。

### ******7.4.3********提问******

平台通过发送提问下发消息，将带有候选答案的提问发到终端，终端立即显示，驾驶员选择后终端向平台发出提问应答消息。提问下发消息，需要终端回复终端通用应答消息。

### ******7.4.4********信息点播******

平台通过发送信息点播菜单设置消息，将信息点播项列表发到终端存储，驾驶员可以通过菜单选择点播/取消相应的信息服务，选择后终端向平台发出消息点播/取消消息。

信息服务被点播后，将定期收到来自平台的信息服务消息，如新闻、天气预报等。

信息点播菜单设置消息，需要终端回复终端通用应答消息。

信息点播/取消消息，需要平台回复平台通用应答消息。

信息服务消息，需要终端回复终端通用应答消息。

## ******7. 5********电话类协议******

### ******7. 5.1********电话回拨******

平台通过发送电话回拨消息，要求终端按指定的电话号码回拨电话，并指定是否按监听方式(终端不打开扬声器)。

电话回拨消息，需要终端回复终端通用应答消息。

### ******7.5.2********设置电话本******

平台通过发送设置电话本消息，对终端设置电话本，该消息需要终端回复终端通用应答消息。

## ******7.6********车辆控制类协议******

平台通过发送车辆控制消息，要求终端按指定的操作对车辆进行控制。终端收到后立即回复终端通用应答消息。之后终端对车辆进行控制，根据结果再回复车辆控制应答消息。

## ******7.7********车辆管理类协议******

平台通过发送设置圆型区域、设置矩形区域、设置多边形区域、设置路线等消息，对终端进行区域和线路设置。终端根据区域和线路属性判断是否满足报警条件，报警包括超速报警、进出区域/路线报警和路段行驶时间不足/过长报警，应在位置信自、汇报消息中包含相应的位置附加信息。

区域或路线ID取值范围为1-0XFFFFFFFF。若设置的ID与终端中己有的同类型区域或路线ID重复，则已有的被更新。

平台也可通过删除圆型区域、删除矩形区域、删除多边形区域、删除路线等消息，删除终端上保存的区域和路线。

设置/删除区域和路线消息，需要终端回复终端通用应答消息。

## ******7.8********信息采集类协议******

### ******7.8.1********采集驾驶员身份信息数据******

终端采集驾驶员身份信息、数据上传平台进行识别，平台回复成功与否消息。

### ******7.8.2********采集电子运单数据******

终端采集电子运单数据上传平台。

### ******7.8.3********采集行驶记录数据******

平台通过发送行驶记录数据采集命令消息，要求终端上传制定的数据，该消息需要终端回复行驶记录数据上传消息。

### ******7. 8.4********下传行驶记录参数******

平台通过发送行驶记录参数下传命令消息，要求终端上传制定的数据，该消息需要终端回复终端通用应答消息。

## ******7.9********多媒体类协议******

### ******7.9.1********多媒体事件信息上传******

终端因特定事件而主动拍摄或录音时，应在事件发生后主动上传多媒体事件消息，该消息需要平台回复通用应答消息。

### ******7.9.2********多媒体数据上传******

终端发送多媒体数据上传消息，上传多媒体数据。每个完整的多媒体数据前需附加摄录时的位置信息汇报消息体，称为位置多媒体数据。平台根据总包数确定接收超时时间，在收到全部数据包或达到超时时间后，平台向终端发送多媒体数据上传应答消息，该消息确认收到全部数据包或要求终端重传指定的数据包。

### ******7.9.3********摄像头立即拍摄******

平台通过发送摄像头立即拍摄命令消息，对终端下发拍摄命令，该消息需要终端回复终端通用应答消息。若指定实时上传，则终端拍摄后上传摄像头图像/视频，否则对图像/视频进行存储。

### ******7.9.4********录音开始******

平台通过发送录音开始命令消息，对终端下发录音命令，该消息需要终端回复终端通用应答消息。若指定实时上传，则终端录制后上传音频数据，否则对音频数据进行存储。

### ******7.9.5********检索终端存储多媒体数据和提取******

平台通过发送存储多媒体数据检索消息，获得终端存储多媒体数据的情况，该消息需要终端回复存储多媒体数据检索应答消息。

根据检索结果，平台可以通过发送存储多媒体数据上传消息，要求终端上传指定的多媒体数据，该消息需要终端回复终端通用应答消息。

## ******7.10********通用数据传输类******

协议中未定义但实际使用中需传递的消息可使用数据上行透传消息和数据下行透传消息进行上下行数据交换。

终端可采用GZIP压缩算法压缩较长消息，用数据压缩上报消息上传。

## ******7.11********加密类协议******

平台与终端之间若需加密通信，可采用 RSA公钥密码系统。平台通过发送平台RSA公钥消息向终端告知自己的RSA公钥，终端回复终端RSA公钥消息，反之亦然。

******8.********数据格式******

## ******8.1********终端通用应答******

消息ID: 0x0001。

终端通用应答消息体数据格式见表4.

                      表4终端通用应答消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|应答流水号|WORD|对应的平台消息的流水号|
|2|应答ID|WORD|对应的平台消息的ID|
|4|结果|BYTE|0：成功/确认；1：失败；2：消息有误；3：不支持|

## ******8.2 ********平台通用应答******

消息ID：0X8001。

平台通用应答消息体数据格式见表5。

表5 平台通用应答消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|应答流水号|WORD|对应的终端消息的流水号|
|2|应答ID|WORD|对应的终端消息的ID|
|4|结果|BYTE|0：成功/确认；1：失败；2：消息有误；3：不支持|

## ******8.3********终端心跳******

消息ID：0X0002。

终端心跳数据消息体为空。

## ******8.4********终端注册******

消息ID：0X0100。

终端注册消息体数据格式见表6。

表6终端注册消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|省域ID|WORD|标示终端安装车辆所在的省域，0保留，由平台取默认值。省域ID采用GB/T 2260中规定的行政区划代码六位中前两位。|
|2|市县域ID|WORD|标示终端安装车辆所在的市域和县域，0保留，由平台取默认值。市县域ID采用GB/T 2260中规定的行政区划代码六位后四位。|
|4|制造商ID|BYTE[5]|五个字节，终端制造商编码。|
|9|终端型号|BYTE[8]|八个字节，此终端型号由制造商自行定义，位数不是八位的，补空格。|
|17|终端ID|BYTE[7]|七个字节，由大写字母和数字组成，此终端ID由制造商自行定义。|
|21|车牌颜色|BYTE|车牌颜色，按照JT/T 415-2006的5.4.12|
|25|车牌|STRING|公安交通管理部门颁发的机动车号牌|

## ******8.5********终端注册应答******

消息ID：0x8100。

终端注册应答消息体数据格式见表7。

表7终端注册应答消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|应答流水号|WORD|对应的终端注册消息的流水号|
|2|结果|BYTE|0：成功；1：车辆已被注册；2：数据库中无该车辆；3：终端已被注册；4：数据库中无该终端|
|3|鉴权码|STRING|只有在成功后才有该字段|

## ******8.6********终端注销******

消息ID：0X0003

终端注销消息体为空。

## ******8.7********终端鉴权******

消息ID：0x0102.

终端鉴权消息体数据格式见表8。

表8 终端鉴权消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|鉴权码|STRING|终端重连后上报鉴权码|

## ******8.8********设置终端参数******

消息ID：0x8103

设置终端参数消息体数据格式见表9。

表9终端参数消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|参数总数|BYTE||
|1|包参数个数|BYTE||
|2|参数项列表||参数项格式见表10|

表10终端参数项
|字段|数据类型|描述及要求|
|----|----|----|
|参数ID|DWORD|参数ID定义及说明表目|
|参数长度|BYTE||
|参数值||DWORD或STRING，若为多值参数，则消息中使用多个相同ID的参数项，如调度中心电话号码|

表11终端参数设置各参数项定义及说明
|参数ID|数据类型|描述及要求|
|----|----|----|
|0x0001|DWORD|终端心跳发送间隔，单位为秒(s)|
|0x0002|DWORD|TCP消息应答超时时间，单位为秒(s)|
|0x0003|DWORD|TCP消息重传次数|
|0x0004|DWORD|UDP消息应答超时时间，单位为秒(s)|
|0x0005|DWORD|UDP消息重传次数|
|0x0006|DWORD|SMS消息应答超时时间，单位为秒(s)|
|0x0007|DWORD|SMS消息重传次数|
|0x0008-0x000F||保留|
|0x0010|STRING|主服务器APN，无线通信拨号访问点。若网络制式为CDMA，则该处为PPP拨号号码|
|0x0011|STRING|主服务器无线通信拨号用户名|
|0x0012|STRING|主服务器无线通信拨号密码|
|0x0013|STRING|主服务器地址，IP或域名|
|0x0014|STRING|备份服务器APN，无线通信拨号访问点|
|0x0015|STRING|备份服务器无线通信拨号用户名|
|0x0016|STRING|备份服务器无线通信拨号密码|
|0x0017|STRING|备份服务器地址，IP或域名|
|0x0018|DWORD|服务器TCP端口|
|0x0019|DWORD|服务器UDP端口|
|0x001A-0x001F||保留|
|0x0020|DWORD|位置汇报策略，0：定时汇报；1：定距汇报；2：定时和定距汇报|
|0x0021|DWORD|位置汇报方案，0：根据ACC状态；1：根据登录状态和ACC状态，先判断登录状态，若登录再根据ACC状态|
|0x0022|DWORD|驾驶员未登录汇报时间间隔，单位为秒(s),>0|
|0x0023-0x0026|DWORD|保留|
|0x0027|DWORD|休眠时汇报时间间隔，单位为秒(s),>0|
|0x0028|DWORD|紧急报警时汇报时间间隔，单位为秒(s),>0|
|0x0029|DWORD|缺省时间汇报间隔，单位为秒(s),>0|
|0x002A-0x002B|DWORD|保留|
|0x002C|DWORD|缺省距离汇报间隔，单位为米(m),>0|
|0x002D|DWORD|驾驶员未登录汇报距离间隔，单位为米(m),>0|
|0x002E|DWORD|休眠时汇报距离间隔，单位为米(m),>0|
|0x002F|DWORD|紧急报警时汇报距离间隔，单位为米(m),>0|
|0x0030|DWORD|拐点补传角度，<180°|
|0x0031-0x003F||保留|
|0x0040|STRING|监控平台电话号码|
|0x0041|STRING|复位电话号码，可采用此电话号码拨打终端电话让终端复位|
|0x0042|STRING|恢复出厂设置电话号码，可采用此电话号码拨打终端电话让终端恢复出厂设置|
|0x0043|STRING|监控平台SMS电话号码|
|0x0044|STRING|接收终端SMS文本报警号码|
|0x0045|DWORD|终端电话接听策略，0：自动接听；1：ACC ON时自动接听，OFF时手动接听|
|0x0046|DWORD|每次最长通话时间，单位为秒(s),0为不允许通话，0xFFFFFFFF为不限制|
|0x0047|DWORD|当月最长通话时间，单位为秒(s),0为不允许通话，0xFFFFFFFF为不限制|
|0x0048|STRING|监听电话号码|
|0x0049|STRING|监管平台特权短信号码|
|0x004A-0x004F||保留|
|0x0050|DWORD|报警屏蔽字。与位置信息汇报消息中的报警标志相对应，相应位为1则相应报警被屏蔽|
|0x0051|DWORD|报警发送文本SMS开关，与位置信息汇报消息中的报警标志相对应，相应位为1则相应报警时发送文本SMS|
|0x0052|DWORD|报警拍摄开关，与位置信息汇报消息中的报警标志相对应，相应位为1则相应报警时摄像头拍摄|
|0x0053|DWORD|报警拍摄存储标志，与位置信息汇报消息中的报警标志相对应，相应位为1则对相应报警时牌的照片进行存储，否则实时长传|
|0x0054|DWORD|关键标志，与位置信息汇报消息中的报警标志相对应，相应位为1则对相应报警为关键报警|
|0x0055|DWORD|最高速度，单位为公里每小时(km/h)|
|0x0056|DWORD|超速持续时间，单位为秒(s)|
|0x0057|DWORD|连续驾驶时间门限，单位为秒(s)|
|0x0058|DWORD|当天累计驾驶时间门限，单位为秒(s)|
|0x0059|DWORD|最小休息时间，单位为秒(s)|
|0x005A|DWORD|最长停车时间，单位为秒(s)|
|0x005B-0x006F||保留|
|0x0070|DWORD|图像/视频质量，1-10,1最好|
|0x0071|DWORD|亮度，0-255|
|0x0072|DWORD|对比度，0-127|
|0x0073|DWORD|饱和度，0-127|
|0x0074|DWORD|色度，0-255|
|0x0075-0x007F|DWORD||
|0x0080|DWORD|车辆里程表读数，1/10km|
|0x0081|DWORD|车辆所在的省域ID|
|0x0082|DWORD|车辆所在的市域ID|
|0x0083|DWORD|公安交通管理部门颁发的机动车号牌|
|0x0084|DWORD|车牌颜色，按照JT/T415-2006的5.4.12|

## ******8.9 ********查询终端参数******

消息ID：0 x8104

查询终端参数消息体为空。

## ******8.10 ********查询终端参数应答******

消息ID：0x0104。

查询终端参数应答消息体数据格式见表12。

表12查询终端参数应答消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|应答流水号|WORD|对应的终端参数查询消息的流水号|
|2|包参数个数|BYTE||
|3|包参数个数|BYTE|参数项格式见表10|
|4|参数项列表||参数项格式和定义见表10|

## ******8.11 ********终端控制******

消息ID：0x 8105。

终端控制消息体数据格式见表13。

表13终端控制消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|命令字|BYTE|终端控制命令字说明见表14|
|1|命令参数|STRING|命令参数格式具体见后血描述，每个字段之间采用半角”;”分隔，每个STRING字段先按GBK编码处理后再组成消息|

表14终端控制命令字说明
|起始字节|命令参数|描述及要求|
|----|----|----|
|1|命令参数格式见表15|无线升级。参数之问采用半角分号分隔。指令如下：“地址;拨号点名称；拨号川户名;拨号密码；地址；TCP端口；UDP端口；制造商ID；硬件版本；固件版本；连接到指定服务器时限”，若某个参数无值，则放空|
|2|命令参数格式见表15|控制终端连接指定服务器。参数之间采用半角分号分隔。控制指令如下：“连接控制；监管平台鉴权码；拨号点名称；拨号用户名；拨号密码；地址；TCP端口；UDP端口；连接到指定服务器时限”，若某个参数无值，则放空，若连接控制值为1，则无后继参数|
|3|无|终端关机|
|4|无|终端复位|
|5|无|终端恢复出厂设置|
|6|无|关闭数据通信|
|7|无|关闭所有无线通信|











表15 命令参数格式
|字段|数据类型|描述及要求|
|----|----|----|
|连接控制|BYTE|0：切换到指定监管平台服务器，连按到该服务器后即进入应急状态，此状态下仅有下发控制指令的监管平台可发送包括短信在内的控制指令：1：切换回原缺省监控平台服务器，并恢复正常状态。|
|拨号点名称|STRING|一般为服务器APN，无线通信拨号访问点，若网络制式为CDMA，则该值为PPP连接拨号号码|
|拨号用户名|STRING|服务器无线通信拨号用户名|
|拨号密码|STRING|服务器无线通信拨号密码|
|地址|STRING|服务器地址，IP或域名|
|TCP端口|WORD|服务器TCP端口|
|UDP端口|WORD|服务器UDP端口|
|制造商ID|BYTE[5]|终端制造商编码|
|监管平台鉴权码|STRING|监管平台下发的鉴权码，仅用于终端连接到.监管平台之后的鉴权，终端连接回原监控平台还用原鉴权码|
|硬件版本|STRING|终端的硬件版本号，由制造商自定|
|固件版本|STRING|终端的固件版本号，由制造商自定|
|URL地址|STRING|完整URL地址|
|连接到指定服务器时限|WORD|单位:分(min),值非0表示在终端接收到升级或连接指定服务器指令后的有效期截止前，终端应连回原地址。若值为0，则表示一直连接指定服务器|

## ******8.12 ********位置信息汇报******

消息ID：0x0200。

位置信息汇报消息体由位置基本信息和位置附加信息项列表组成，消息结构图如图3所示：
|位置基本信息|位置附加信息项列表|
|----|----|

图3 位置汇报消息结构图

位置附加信息项列表由各位置附加信息项组合，也可没有，根据消息头中的长度字段确定。

位置基本信息数据格式见表16。

表16位置基本信息数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|报警标志|DWORD|报警标志位定义见表18|
|4|状态|DWORD|状态位定义见表17|
|8|纬度|DWORD|以度为单位的纬度值乘以10的6次方，精确到百万分之一度|
|12|经度|DWORD|以度为单位的纬度值乘以10的6次方，精确到百万分之一度|
|16|高程|WORD|海拔高度，单位为米(m)|
|18|速度|WORD|1/10km/h|
|20|方向|WORD|0-359,正北为0，顺时针|
|21|时间|BCD[6]|YY-MM-DD-hh-mm-ss(GMT+8时间，本标准之后涉及的时间均采用此时区|

表17状态位定义
|位|状态|
|----|----|
|0|0: ACC关;1:ACC开|
|1|0:未定位;1:定位|
|2|0:北纬:1:南纬|
|3|0:东经;1:西经|
|4|0:运营状态:1:停运状态|
|5|0:经纬度未经保密插件加密;l:经纬度已经保密插件加密|
|6-9|保留|
|10|0:车辆油路正常:1:车辆油路断开|
|11|0:车辆电路正常:1:车辆电路断开|
|12|0:车门解锁；1：车门加锁|
|13-31|保留|

表18报警标志位定义
|位|定义|处理说明|
|----|----|----|
|0|1:紧急报警触动报警开关后触发|收到应答后清零|
|1|1：超速报警|标志维持至报警条件解除|
|2|1：疲劳驾驶|标志维持至报警条件解除|
|3|1：预警|收到应答后清零|
|4|1：GNSS模块发生故障|标志维持至报警条件解除|
|5|1：GNSS天线未接或被剪断|标志维持至报警条件解除|
|6|1：GNSS天线短路|标志维持至报警条件解除|
|7|1：终端主电源欠压|标志维持至报警条件解除|
|8|1：终端主电源掉电|标志维持至报警条件解除|
|9|1：终端LCD或显示器故障|标志维持至报警条件解除|
|10|1：TTS模块故障|标志维持至报警条件解除|
|11|1:摄像头故障|标志维持至报警条件解除|
|12-17|保留||
|18|1:当天累计驾驶超时|标志维持至报警条件解除|
|19|1：超时停车|标志维持至报警条件解除|
|20|1：进出区域|收到应答后清零|
|21|1:进出路线|收到应答后清零|
|22|1:路段行驶时间不足/过长|收到应答后清零|
|23|1:路线偏离报警|标志维持至报警条件解除|
|24|1：车辆VSS故障|标志维持至报警条件解除|
|25|1：车辆油量异常|标志维持至报警条件解除|
|26|1：车辆被盗(通过车辆防盗器)|标志维持至报警条件解除|
|27|1：车辆非法点火|收到应答后清零|
|28|1：车辆非法位移|收到应答后清零|
|29-31|保留||

位置附加信息项格式见表19。



表19位置附加信息项格式
|字段|数据类型|描述及要求|
|----|----|----|
|附加信息ID|BYTE|1-255|
|附加信息长度|BYTE||
|附加信息||附加信息定义见表20|

表20附加信息定义
|附加信息ID|附加信息长度|描述及要求|
|----|----|----|
|0x01|4|里程，DWORD，1-10km，对应车上里程表读书|
|0x02|2|油量，WORD 1-10L，对应车上油量表读书|
|0x03|2|行驶记录功能获取的速度，WORD，1/10km/h|
|0x04-0xF||保留|
|0x11|1或5|超速报警附加信息见表21|
|0x12|6|进出区域/路线报警附加信息见表22|
|0x13|7|路段行驶时间不足/过长报警附加信息见表23|

表21超速报警附加信息消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|位置类型|BYTE|0:无特定位置;1:圆形区域;2:矩形区域;3:多边形区域;4:路段|
|1|区域或路段ID|DWORD|若位置类型为0，无该字段|

表22进出区域/路线报警附加信息消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|位置类型|BYTE|1:圆形区域;2:矩形区域;3:多边形区域;4:路段|
|1|区域或线路ID|DWORD||
|5|方向|BYTE|0:进;1:出|

表23路线行驶时间不足/过长报警附加信息消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|路段ID|DWORD||
|4|路段行驶时间|WORD|单位为秒(s)|
|6|结果|WORD|0:不足；1：过长|

## ******8. 13********位置信息查询******

消息ID: 0x8201。

位置信息查询消息体为空。

## ******8. 14********位置信息查询应答******

消息ID: 0x0201。

位置信息查询应答消息体数据格式见表24。



表24位置信息查询应答消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|位置信息汇报||位置信息汇报见8.12|

## ******8. 15********临时位置跟踪控制******

消息ID: 0x8202。

临时位置跟踪控制消息体数据格式见表25。

表25临时位置跟踪控制消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|时间间隔|WORD|单位为秒(s),0则停止跟踪。停止跟踪无需带后继字段|
|2|位置跟踪有效期|DWORD|单位为秒(S)，终端在接收到位置跟踪控制消息后，在有效期截止时问之前，依据消息中的时间间隔发送位置汇报|

## ******8. 16********文本信息下发******

消息ID: 0x8300。

文本信息下发消息体数据格式见表26。

表26文本信息下发消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|标志|BYTE|文本信息标志位含义见表27|
|1|文本信息|STRING|最长为102字节，经GBK编码|

表27文本信息、标志位含义
|位|标志|
|----|----|
|0|1：紧急|
|1|保留|
|2|1：终端显示器显示|
|3|1：终端TTS播读|
|4|1：广告屏显示|
|5-7|保留|

## ******8. 17********事件设置******

消息ID：0x8301。

事件设置消息体数据格式见表28。

表28事件设置消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|设置类型|BYTE|0：删除终端现有所有事件，该命令后不带后继字节1：更新事件。2：追加事件。3:修改事件。4：删除特定几项事件，之后事件项中无需带事件内容|
|1|设置总数|BYTE||
|2|包设置个数|BYTE|当前数据包中的事件项个数|
|3|事件项列表||事件项组成数据格式见表29|

表29事件项组成数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|事件ID|BYTE|若终端已有同ID的事件，则被覆盖|
|1|事件内容长度|BYTE|后继事件内容字段字节长度|
|2|事件内容|STRING|事件内容，经GBK编码|

## ******8. 18********事件报告******

消息ID: 0x0301。

事件报告消息体数据格式见表30。

表30事件报告消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|事件ID|BYTE||

## ******8. 19********提问下发******

消息ID: 0x8302。

提问下发消息体数据格式见表31。

表31提问下发消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|标志|BYTE|提问下发标志喂定义见表32|
|1|问题内容长度|BYTE|问题字段字节长度|
|2|问题|STRING|问题文本，经GBK编码，长度为N|
|2-N|候选答案列友||候选答案消息组成见表33|

表32提问下发标志位定义
|位|标志|
|----|----|
|0|1：紧急|
|1|保留|
|2|保留|
|3|1：终端TTS播读|
|4|1：广告屏显示|
|5-7|保留|

表33提问下发候选答案消息组成
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|答案ID|BYTE||
|1|答案内容长度|WORD|答案内容字段字节长度|
|3|答案内容|STRING|答案内容，经GBK编码|

## ******8. 20********提问应答******

消息ID: 0x0302。

提问应答消息体数据格式见表34。

表34提问应答消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|应答流水号|WORD|对应的提问下发消息的流水号|
|2|答案ID|BYTE|提问下发中附带的答案ID|

## ******8. 21********信息点播菜单设置******

消息ID：0x8303

信息点播菜单设置消息体数据格式见表35。

表35信息点播菜单设置消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|设置类型|BYTE|0：删除终端现有信息项；1：更新菜单；2：追加菜单；3：修改菜单|
|1|信息项总数|BYTE||
|2|包消息数|BYTE||
|3|信息项列表||信息点播信息项组成数据格式见表36|

表36信息点播信息项组成数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|信息类型|BYTE|若终端已有同类型的信息项，则被覆盖|
|1|信息名称长度|WORD|信息名称字段字节长度|
|3|信息名称|STRING|经GBK编码处理|

## ******8. 22********信息点播********/********取消******

消息ID：0x0303。

消息点播/取消消息体数据格式见表37。

表37消息点播/取消消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|信息类型|BYTE||
|1|点播/取消标志|BYTE|0：取消；1：点播|

## ******8. 23********信息服务******

消息ID: 0x8304。

信息服务消息体数据格式见表38。

表38信息服务消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|信息类型|BYTE||
|1|信息总长度|WORD||
|3|包信息长度|WORD||
|5|信息内容|STRING|经GBK编码|

## ******8. 24********电话回拨******

消息lD： 0x8400。

电话回拨消息体数据格式见表39。

表39电话回拨消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|标志|BYTE|0：普通通话；1：监听|
|1|电话号码|STRING|最长为20字节|

## ******8. 25********设置电话本******

消息ID：0x8401

设置电话本消息体数据格式见表40。







表40设置电话本消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|设置类型|BYTE|0：删除终端上所有存储的联系人；1：表示更新电话本(删除终端中已有全部联系人并追加消息，户的联系人)；2：表示追加电话本；3：表示修改电话本(以联系人为索引)|
|1|联系人总数|BYTE||
|2|包联系人个数|BYTE|当前数据包中联系人个数|
|3|联系人项||电话本联系人项数据格式见表41|

表41电话本联系人项数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|标志|BYTE|1：呼入；2：呼出；3：呼入/呼出|
|1|号码长度|BYTE||
|2|电话号码|STRING|长度为n|
|2+n|联系人长度|BYTE||
|3+n|联系人|STRING|经GBK编码|

## ******8. 26********车辆控制******

消息ID: 0x8500

车辆控制消息体数据格式见表42。

表42车辆控制消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|控制标志|BYTE|控制指令标志位数据格式见表43|

表43控制指令标志位数据格式
|位|标志|
|----|----|
|0|0：车门解锁；1：车门加锁|
|1-7|保留|

## ******8. 27********车辆控制应答******

消息ID：0x0500。

车辆控制应答消息体数据格式见表44。

表44车辆控制应答消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|应答流水号|WORD|对应的车辆控制消息的流水号|
|2|位置信息汇报消息体||根据对应的状态位判断控制成功与否|

## ******8. 28********设置圆形区域******

消息ID: 0x8600。

设置圆形区域消息体数据格式见表45。

注：注本条消息协议支持周期时问范围，如要限制每天的8:30-18:00，起始/结束时间设为:00-00-00-08-30-00/00-00-00-18-00=00，其他以此类推。











表45设置圆形区域消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|设置属性|BYTE|0：更新区域；1：追加区域；  2：修改区域|
|1|区域总数|BYTE||
|2|包区域数|BYTE|当前数据包中区域个数|
|3|区域项||圆形区域的区域项内容数据格式见表46|

表46圆形区域的区域项内容数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|区域ID|DWORD||
|4|区域属性|WORD|区域属性定义见表97|
|6|中心点纬度|DWORD|以度为单位的纬度值乘以10的6次方，精确到百万分之一度|
|10|中心点经度|DWORD|以度为单位的经度值乘以10的6次方，精确到百万分之一度|
|14|半径|DWORD|单位为米(m)，路段为该拐点到下一拐点|
|18|起始时间|BCD[6]|YY-MM-DD-hh-mm-ss ,若区域属性0位为0则没有该字段|
|24|结束时间|BCD[6]|YY-MM-DD-hh-mm-ss ,若区域属性0位为0则没有该字段|
|30|最高速度|WORD|Km/h，若区域属性1位为0则没有该字段|
|32|超速持续时间|BYTE|单位为秒(s)(类似表述，同前修改)，若区域属性1位为0则没有该字段|

表47区域的区域属性定义
|位|标志|
|----|----|
|0|1：根据时间|
|1|1：限速|
|2|1：进区域报警给驾驶员|
|3|1：进区域报警给平台|
|4|1：出区域报警给驾驶员|
|5|1：出区域报警给平台|
|6|0：北纬；1：南纬|
|7|0：东经；1：西经|
|8-15|保留|

## ******8. 29********删除圆形区域******

消息ID: 0x8601。

删除圆形区域消息体数据格式见表48。













表48删除圆形区域消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|区域数|BYTE|本条消息中包含的区域数，不超过125个，多于125个建议用多条消息，0为删除所有圆形区域|
|1|区域ID1|DWORD||
||……|DWORD||
||区域IDn|DWORD||

## ******8. 30********设置矩形区域******

消息ID: 0x8602。

设置矩形区域消息体数据格式见表49。

表49设置矩形区域消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|设置属性|BYTE|0：更新区域；1：追加区域；2：修改区域|
|1|区域总数|BYTE||
|2|包区域数|BYTE|当前数据包中区域个数|
|3|区域项||矩形区域的区域项数据格式见表50|

表50矩形区域的区域项数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|区域ID|DWORD||
|4|区域属性|WORD|区域属性定义见表47|
|6|左上点纬度|DWORD|以度为单位的纬度值乘以10的6次方，精确到百万分之一度|
|10|左上点经度|DWORD|以度为单位的纬度值乘以10的6次方，精确到百万分之一度|
|14|右下点纬度|DWORD|以度为单位的纬度值乘以10的6次方，精确到百万分之一度|
|18|右下点经度|DWORD|以度为单位的纬度值乘以10的6次方，精确到百万分之一度|
|22|起始时间|BCD[6]|同圆形区域中时间范围设定|
|28|结束时间|BCD[6]|同圆形区域中时间范围设定|
|34|最高速度|WORD|单位为公里每小时(km/h)，若区域属性1位为没有该字段|
|36|超速持续时间|BYTE|单位为秒(S),若区域属性1位为0则没有该字段|

## ******8. 31  ********删除矩形区域******

消息ID: 0x8603。

删除矩形区域消息体数据格式见表51。

表51删除矩形区域消息体数据格式




|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|区域数|BYTE|本条消息中，包含的区域数，不超过125个，多于125个建议用多条消息，0为删除所有矩形区域|
|1|区域ID1|DWORD||
||……|DWORD||
||区域IDn|DWORD||

## ******8. 32********设置多边形区域******

消息ID: 0x8604。

设置多边形区域消息体数据格式见表52。

表52设置多边形区域消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|区域ID|DWORD||
|1|区域属性|WORD|区域属性定义见表47|
|6|起始时间|BCD[6]|同圆形区域中时间范围设定|
|12|结束时间|BCD[6]|同圆形区域中时间范围设定|
|18|最高速度|WORD|单位为公里每小时(Km/h)，若区域属性1位为0则没有该字段|
|20|超速持续时间|BYTE|单位为秒(s)，若区域属性1位为0则没有该字段|
|21|区域总定点数|WORD||
|23|包顶点数|BYTE|当前数据包中顶点个数|
|24|顶点数||多边形区域的顶点项数据格式见表53|

表53多边形区域的顶点项数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|顶点纬度|DWORD|以度为单位的纬度值乘以10的6次方，精确到百万分之一度|
|4|顶点经度|DWORD|以度为单位的纬度值乘以10的6次方，精确到百万分之一度|

## ******8. 33  ********删除多边形区域******

消息ID: 0x8605。

删除多边形区域消息体数据格式见表54。

表54删除多边形区域消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|区域数|BYTE|本条消息中，包含的区域数，不超过125个，多于125个建议用多条消息，0为删除所有矩形区域|
|1|区域ID1|DWORD||
||……|DWORD||
||区域IDn|DWORD||

## ******8. 34********设置路线******

消息ID: 0x8606。

设置路线消息体数据格式见表55



表55设置路线消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|路线ID|DWORD||
|4|路线属性|WORD|路线属性数据格式见表56|
|6|起始时间|BCD[6]|同圆形区域中时间范围设定|
|12|结束时间|BCD[6]|同圆形区域中时间范围设定|
|18|路线总拐点数|WORD||
|20|包拐点数|BYTE||
|21|拐点项||路线拐点项数据格式见表57|

表56路线属性数据格式
|位|标志|
|----|----|
|0|1：根据时间|
|1|保留|
|2|1：进路线报警给驾驶员|
|3|1：进路线报警给平台|
|4|1：出路线报警给驾驶员|
|5|1：出路线报警给平台|
|6-15|保留|

表57路线拐点项数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|路段ID|DWORD||
|4|拐点纬度|DWORD|以度为单位的纬度值乘以10的6次方，精确到百万分之一度|
|8|拐点经度|DWORD|以度为单位的纬度值乘以10的6次方，精确到百万分之一度|
|12|路段宽度|BYTE|单位为米(m),路段为该拐点到下一拐点|
|13|路段属性|BYTE|路段属性数据格式见表58|
|14|路段行驶时长|WORD|单位为秒(S)，若路段属性0位为0则没有该字段|
|16|路段最高速度|WORD|单位为公里每小时(km/h ),若路段属性1位为0则没有该字段|
|18|路段超速持续时问|BYTE|单位为秒(S),若路段属性1位为0则没有该字段|

表58路段属性数据格式
|位|标志|
|----|----|
|0|1：行驶时间|
|1|1：限速|
|2|0：北纬；1：南纬|
|3|0：东经；1：西经|
|4-7|保留|

## ******8. 35********删除路线******

消息ID: 0x8607。

删除路线消息体数据格式见表59。

表59删除路线消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|路线数|BYTE|本条消息中，包含的区域数，不超过125个，多于125个建议用多条消息，0为删除所有矩形区域|
|1|路线ID1|DWORD||
||……|DWORD||
||路线IDn|DWORD||

## ******8. 36********行驶记录数据采集命令******

消息ID: Ox8700。

行驶记录数据采集命令消息体数据格式见表60。

表60行驶记录仪数据采集命令消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|命令字|BYTE|命令字列表见GB/T19056中相关要求|

## ******8. 37********行驶记录数据上传******

消息ID: 0x0700。

行驶记录数据上传消息体数据格式见表61。

表61行驶记录数据上传消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|命令字|BYTE|对应平台发出的命令字|
|1|数据块总长度|WORD||
|3|包数据长度|WORD||
|5|数据块||数据块内容格式见GB/T19056中相关内容|

## ******8. 38********行驶记录参数下传命令******

消息ID: 0x8101。

行驶记录参数下传命令消息体数据格式见表62。

表62 行驶记录参数下传命令消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|命令字|BYTE|命令字内容格式见GB/T19056中相关内容|
|1|数据块||数据块内容格式见GB/T19056中相关内容|

## ******8. 39********电子运单上报******

消息ID: 0x0701。

电子运单上报消息体数据格式见表630

表63 电子运单上报消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|电子运单长度|DWORD||
|4|电子运单内容||电子运单数据包|

## ******8. 40********驾驶员身份信息采集上报******

消息ID: 0x0702。

驾驶员身份信息采集上报消息体数据格式见表64。

表64驾驶员身份信息上报消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|驾驶员姓名长度|BYTE||
|1|驾驶员姓名|STRING|驾驶员姓名，长度n|
|1+n|驾驶员身份证编码|STRING|长度20位|
|21+n|从业资格证编码|STRING|长度40位|
|61+n|发证机构名称民度|BYTE|长度m|
|61+n+m|发证机构名称|STRING|从业资格证发证机构名称|

## ******8. 41********多媒体事件信息上传******

消息ID: 0x0800

多媒体事件消息上传数据格式见表65。

                  表65多媒体事件消息上传数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|多媒体数据ID|DWORD|>0|
|4|多媒体类型|BYTE|0：图像；1：音频；2：视频|
|5|多媒体格式编码|BYTE|0：JPEG；1：TIF；2：MP3；3：WAV；4：WMV；其他保留|
|6|事件项编码|BYTE|0：平台下发指令；1：定时动作；2：抢劫报警触发；3：碰撞侧翻报警触发；其他保留|
|7|通道ID|BYTE||

## ******8. 42********多媒体数据上传******

消息ID: 0x0801。

多媒体数据上传消息体数据格式见表66。

                    表66 多媒体数据上传消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|多媒体ID|DWORD|>0|
|4|多媒体类型|BYTE|0：图像；1：音频；2：视频|
|5|多媒体格式编码|BYTE|0：JPEG；1：TIF；2：MP3；3：WAV；4：WMV；其他保留|
|6|事件项编码|BYTE|0：平台下发指令；1：定时动作；2：抢劫报警触发；3：碰撞侧翻报警触发；其他保留|
|7|通道ID|BYTE||
|8|数据总包数|DWORD||
|12|包ID|DWORD|从1开始|
|16|多媒体数据包|||

## ******8. 43********多媒体数据上传应答******

消息ID: Ox8800。

多媒体数据上传应答消息体数据格式见表67。

表67多媒体数据上传应答消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|应答流水号|WORD|对应的多媒体数据上传消息的流水号|
|2|多媒体ID|DWORD|>0|
|6|重传包总数|BYTE||
|7|重传包ID列表||不超过125项，无该宇段则表明己收到个部数据包|

## ******8. 44********摄像头立即拍摄命令******

消息ID: 0x8801。

摄像头立即拍摄命令消息体数据格式见表68。

                    表68摄像头立即拍摄命令消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|通道ID|BYTE|>0|
|1|拍摄命令|WORD|0表示停止拍摄；0xFFFF表示录像；其他表示拍照张数|
|3|拍照间隔，录像时间|WORD|秒，0表示按最小间隔拍照或一直录像|
|5|保持标志|BYTE|1：保存；0：实时上传|
|6|分辨率|BYTE|0x01:320*210;0x02:640*480:0x03:800*600;0x04:1024*768;0x05:176*144;[Qcif];0x06:352*288;[Cif];0x07:704*288;[HALF D1];0x08:701*576;[D1];|
|7|图像/视频质量|BYTE|1-10,  1代表质量损失最小，10表示压缩比最大|
|8|亮度|BYTE|0-255|
|9|对比度|BYTE|0-127|
|10|饱和度|BYTE|0-127|
|11|色度|BYTE|0-255|
|终端若不支持系统要求的分辨率，则取最接近的分辨率拍摄并上传| | | |

## ******8. 45********存储多媒体数据检索******

消息ID: 0x8802。

存储多媒体数据检索消息体数据格式见表69。

注:不按时间范围则将起始时间/结束时间都设为00-00-00-00-00.

                    表69存储多媒体数据检索消息/体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|多媒体类型|BYTE|0:图像;1:音频:2:视频;|
|1|通道ID|BYTE|0表示检索该媒体类型的所有通道;|
|2|事件项编码|BYTE|0:平台下发指令:1:定时动作:2:抢劫报警触:3:碰撞侧翻报警触发;其他保留|
|3|起始时间|BCD[6]|YY-MM-DD-hh-mm-ss|
|9|结束时间|BCD[6]|YY-MM-DD-hh-mm-ss|

## ******8. 46********存储多媒体数据检索应答******

消自ID: 0x0802。

存储多媒体数据检索应答消息体数据格式见表70。

                表70存储多媒体数据检索应答消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|应答流水|WORD|对应的多媒体数据检索消息的流水号|
|2|多媒体数据总项数|WORD|满足检索条们的多媒体数据总项数|
|4|包项数|WORD|当前数据包中多媒体数据个数|
|6|检索项||多媒体检索项数据格式见表71|

表71多媒体检索项数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|多媒体类型|BYTE|0：图像；1：音频；2：视频|
|1|通道ID|BYTE||
|2|事件项编码|BYTE|0：平台下发指令；1：定时动作；2：抢劫报警触发；3：碰撞侧翻报警触发；其他保留|
|3|位置信息汇报(0x0200)消息体||表示拍摄或录制的起始时刻的汇报消息|

## ******8. 47********存储多媒体数据上传命令******

消息ID: 0x8803

存储多媒体数据上传命令消息体数据格式见表72。

                表72存储多媒体数据上传命令消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|多媒体类型|BYTE|0:图像;1:音频;2:视频|
|1|通道ID|BYTE||
|2|事件项编码|BYTE|0：平台下发指令;1:定时动作;2:抢劫报警触发;3:碰撞侧翻报警触发;其他保留|
|3|起始时间|BCD[6]|YY-MM-DD-hh-mm-ss|
|9|结束时间|BCD[6]|YY-MM-DD-hh-mm-ss|
|15|删除标志|BYTE|0:保留;1:删除;|

## ******8. 48********录音开始命令******

消息ID: 0x8804

录音开始命令消息体数据格式见表73。

                      表73录音开始命令消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|录音命令|BYTE|0：停止录音；0x01:开始录音|
|1|录音时间|WORD|单位为秒(s)，0表示一直录音|
|3|保存标志|BYTE|0：实时长传；1：保存|
|4|音频采样率|BYTE|0：8k；1:11k；2:23K；3：32K；其他保留|

## ******8. 49********数据下行透传******

消息ID:  0x8900。

数据下行透传消息体数据格式见表74

表74数据下行透传消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|透传消息类型|BYTE||
|1|信息总长度|DWORD|整条透传消息的总长度|
|5|包信息长度|WORD|本条消息的长度|
|7|透传消息内容|||

## ******8. 50********数据上行透传******

消息ID:  0x0900。

数据上行透传消息体数据格式见表75。

                      表75数据上行透传消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|透传消息类型|BYTE||
|1|信息总长度|DWORD|整条透传消息的总长度|
|5|包信息长度|WORD|本条消息的长度|
|7|透传消息内容|||

## ******8. 51********数据压缩上报******

消息ID: 0x0901。

数据压缩上报消息体数据格式见表76。

                      表76数据压缩上报消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|压缩消息长度|DWORD||
|4|压缩消息体||压缩消息体为需要压缩的消息经过GZIP压缩算法后的消息。|

## ******8. 52********平台********RSA********公钥******

消息ID: 0x8A00。

平台RSA公钥消息体数据格式见表77。

表77平台RSA公钥消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|e|DWORD|平台RSA公钥{e,n}中的e|
|1|n|BYTE[128]|RSA公钥{e,n}中的n|

## ******8. 53********终端********RSA********公钥******

消息ID: 0x0A00。

终端RSA公钥消息体数据格式见表780

                    表78终端RSA公钥消息体数据格式
|起始字节|字段|数据类型|描述及要求|
|----|----|----|----|
|0|e|DWORD|平台RSA公钥{e,n}中的e|
|4|n|BYTE[128]|RSA公钥{e,n}中的n|



















******附录********A******

(规范性附录)

车载终端与外接设备通讯协议

A. 1设备

A.1.1主机

    主机应符合JT/T 794

A.1.2从机

    从机包括各种点对点串行通信外部设备，如调度显示屏、智能外设、油量检测装置、碰撞侧翻检测装置等。

A. 2通讯协议

A. 2. 1帧格式定义

    所有从机与主机的通讯遵循的帧格式见表A.1

表A.1帧格式
|标识位|校验码|版本号|厂商编号|外设类型编号|命令类型|用户数据|标识位|
|----|----|----|----|----|----|----|----|
|1byte|1 byte|2 byte|2 byte|1 byte|1 byte|n byte|1 byte|

表A. 1的内容说明如下:

a)标识位:采用0x7e表示，若校验码、消息头以及消息体中出现0x7e，则要进行转义处理，转义规则定义如下:

        0x7e<—>0x7d后紧跟一个0x02;

        0x7d<—>0x7d后紧跟一个0x01;

转义处理过程如下:

发送消息时:消息封装—>计算并填充校验码—>转义;

接收消息时:转义还原—>验证校验码—>解析消息;

示例1：

发送一包内容为0x30 0x7e 0x08 0x7d 0x55的数据包，则经过封装如下：0x7e 0x30 0x7d 0x02 0x08 0x7d 0x01 0x55 0x7e；

b)校验码:从厂商编号到用户数据依次累加的累加和，然后取累加的低8位作为校验码:

      示例2:

      累加和为0x1388，则校验码为0x88:

c)版木号:标识通讯协议版本；

d)厂商编号:外设从机的制造厂商代码；

e)外设类型编号:每种外设唯一对应的个类型编号，用于主机的外设接口驱动区别是何种外设发来的数据:外设类型编号见表A.2;

f)命令类型:外设与主机进行各种数据交互的信息类型，命令类型分为通用协议和专有协议两大类：通用协议主要包括从机与主机基本的、必需的、共有的一此信息交互类型;专有协议则定义各型外设与主机特有的信息交互类型:命令类型见表：A. 3；

g)用户数据：指外设与主机交互的数据中除以上几个部分以外的山具体业务功能定制内容；

h)通讯帧的数据采用人端(hig-endian)的表示方式。

表A.2外设类型编号表
|外设类型|编号|
|----|----|
|行业信息终端机|0x01|
|调度显示屏|0x02|
|车载导航显示屏|0x03|
|油量检测器|0x04|
|加速度检测器|0x05|
|防盗报警器|0x06|
|接口扩展器|0x07|
|载重检测器|0x08|
|客流检测器|0x08|
|通用传感器|0x0A|

表A. 3命令类型表
|协议类型|业务功能类型|命令类型|
|----|----|----|
|外设通用协议|上电指示/应答|0x01|
|链路探询/应答|0x02| |
|外设电源控制/应答|0x03| |
|查询外设版木号信息|0x04| |
|保留|0x05-0x3F| |
|专用协议|各种从机外设的专有功能业务协议|0x40-0Xff|

A. 2. 2外设协议的添加规则

    外设协议的增加和修改应遵循以下规则:

    a)同一功能的发送与应答协议使用相同的命令类型;

    b)对于命令类型较多的外设，添加新命令类型时，尽量考虑采用可变参数的方式减少命令类型占用。

A. 3通用协议说明

A. 3. 1从机上电指示

      从机上电指示见表A.4。

A.4从机上电指示表
|步骤|命令类型|描述|用户数据|数据方向|
|----|----|----|----|----|
|1|01H|上电指示应答|无|下行|
|2|01H|上电指示|无|上行|

A. 3: 2外设链路探询

外设链路探询指令见表A.5。

表A. 5外设链路探询指令表
|步骤|命令类型|描述|用户数据|数据方向|
|----|----|----|----|----|
|1|02H|链路探询|链路维护时问高位字节在前，低位字节在后;高字节单位为分钟(min)，低字节的单位为秒(s);建议链路探询时间为15s-30s;链路超时后，主机会注销从机的登记信息|下行|
|2|02H|链路探询应答|无|上行|

A. 3. 3从机电源控制

从机电源控制指令见表A. 6 。







表A. 6从机电源控制指示表
|步骤|命令类型|描述|用户数据|数据方向|
|----|----|----|----|----|
|1|03H|从机电源控制|控制类型:0x00—从机退出省电模式:       0x01—从机进入省电模式|下行|
|2|03H|从机电源控制应答|应答类型:0x01操作成功;         0x02一一操作失败(从机因为特殊情况无法进入省电模式或退出省电模式)|上行|



******附录********B******

(规范性附录)

消息对照表

终端通讯·协议的消息对照表见表B.1

    表B.1消息对照表
|序号|消息体名称|消息ID|序号|消息体名称|消息ID|
|----|----|----|----|----|----|
|1|终端通用应答|0x0001|23|信息服务|0x8304|
|2|平台通用应答|0x8001|24|电话回拨|0x8400|
|3|终端心跳|0x0002|25|设置电话本|0x8401|
|4|终端注册|0x0100|26|车辆控制|0x8500|
|5|终端注册应答|0x8100|27|车辆控制应答|0x0500|
|6|终端注销|0x0101|28|设置圆形区域|0x8600|
|7|终端桨权|0x0102|29|删除圆形区域|0x8601|
|8|设置终端参数|0x8103|30|设置矩形区域|0x8602|
|9|查询终端参数|0x8104|31|删除矩形区域|0x8603|
|10|查询终端参数应答|0x0104|32|设置多边形区域|0x8604|
|11|终端控制|0x8105|33|删除多边形区域|0x8605|
|12|位置信息汇报|0x0200|34|设置路线|0x8606|
|13|位置信息查询|0x8201|35|删除路线|0x8607|
|14|位置信息查询应答|0x0201|36|行驶记录仪数据采集命令|0x8700|
|15|临时位置跟踪控制|0x8202|37|行驶记录仪数据上报|0x0700|
|16|文本信息下发|0x8300|38|行驶记录仪参数下达命令|0x8701|
|17|事件设置|0x8301|39|电子运单上报|0x0701|
|18|事件报告|0x0301|40|驾驶员身份信息采集上报|0x0702|
|19|提问下发|0x8105|41|多媒体事件信息上传|0x0800|
|20|提问应答|0x0302|42|多媒体数据上传|0x0801|
|21|信息点播菜单设置|0x8303|43|多媒体数据上传应答|0x8800|
|22|信息点播/取消|0x0303|44|摄像头立即拍摄命令|0x8801|
|45|存储多媒体数据检索|0x8802|51|数据压缩上报|0x0901|
|46|存储多媒体数据检索应答|0x0803|52|平台RSA公钥|0x8A00|
|47|存储多媒体数据上传|0x8803|53|终端RSA公钥|0x0A00|
|48|录音开始命令|Ox8804|54|平台下行消息保留|0x8F00-0x8fff|
|49|数据下行透传|0x8900|55|终端上行消息保留|0x0F00-0x0fff|
|50|数据上行透传|0x0900||||





