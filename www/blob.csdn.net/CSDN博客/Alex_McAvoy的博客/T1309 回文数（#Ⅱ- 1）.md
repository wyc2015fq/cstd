# T1309 回文数（#Ⅱ- 1） - Alex_McAvoy的博客 - CSDN博客





2018年04月15日 22:18:34[Alex_McAvoy](https://me.csdn.net/u011815404)阅读数：903
个人分类：[信息学奥赛一本通																[基础算法——高精度](https://blog.csdn.net/u011815404/article/category/7586330)](https://blog.csdn.net/u011815404/article/category/7429967)








### 【题目描述】



若一个数（首位不为零）从左向右读与从右向左读都是一样，我们就将其称之为回文数。例如：给定一个 10进制数 56，将 56加 65（即把56从右向左读），得到 121是一个回文数。又如，对于10进制数87：

STEP1： 87＋78= 165 

STEP2： 165＋561= 726

STEP3： 726＋627＝1353

STEP4：1353+3531=4884

在这里的一步是指进行了一次N进制的加法，上例最少用了4步得到回文数4884。


写一个程序，给定一个N（2＜N＜＝10或N=16）进制数 M．求最少经过几步可以得到回文数。如果在30步以内（包含30步）不可能得到回文数，则输出“Impossible” 。

### 【输入】

给定一个N（2＜N＜＝10或N=16）进制数M。

### 【输出】

最少几步。如果在30步以内（包含30步）不可能得到回文数，则输出“Impossible”。

### 【输入样例】
`9 87`
### 【输出样例】
`6`
### 【源程序】

```cpp
#include<iostream>
#include<cstring>
using namespace std;
int n;
int a[500],b[500],step=0;
char str[500];
void add(int a[],int b[])//高精加
{
    int i;
    for(i=1;i<=a[0];i++)
    {
        a[i]+=b[i];
        a[i+1]+=a[i]/n;
        a[i]%=n;
    }
    if(a[a[0]+1]>0)
        a[0]+=1;
}
bool judge(int a[])//判断回文数
{
    int i;
    for(i=1;i<=a[0]/2;i++)
        if(a[i]!=a[a[0]-i+1])
            return false;
    return true;
}
void overturn(int a[])//倒序存储
{
    int i,j;
    b[0]=a[0];
    j=1;
    for(i=a[0];i>=1;i--)
    {
        b[j]=a[i];
        j++;
    }
}
void print(int a[])//数据输出
{
    int i;
    for(i=a[0];i>=1;i--)
        cout<<a[i];
    cout<<endl;
}
int main()
{
    int len;
    int i;

    cin>>n>>str;
    len=strlen(str);

    int k=1;
    for(i=len-1;i>=0;i--)//数据处理
    {
        if('0'<=str[i]&&str[i]<='9')
        {
            a[k]=str[i]-'0';
            k++;
        }
        if('a'<=str[i]&&str[i]<='z')
        {
            a[k]=str[i]-'a'+10;
            k++;
        }
        if('A'<=str[i]&&str[i]<='Z')
        {
            a[k]=str[i]-'A'+10;
            k++;
        }
    }

    a[0]=len;
    while(judge(a)==0)
    {
        overturn(a);
        add(a,b);
        step++;
        if(step>30)
            break;
    }

    if(step>30)
        cout<<"Impossible"<<endl;
    else
        cout<<step<<endl;
    return 0;
}
```






