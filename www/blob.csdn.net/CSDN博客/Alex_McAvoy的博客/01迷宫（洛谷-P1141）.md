# 01迷宫（洛谷-P1141） - Alex_McAvoy的博客 - CSDN博客





2018年05月14日 19:19:48[Alex_McAvoy](https://me.csdn.net/u011815404)阅读数：86








> 
## 题目描述

有一个仅由数字0与1组成的n×n格迷宫。若你位于一格0上，那么你可以移动到相邻4格中的某一格1上，同样若你位于一格1上，那么你可以移动到相邻4格中的某一格0上。

你的任务是：对于给定的迷宫，询问从某一格开始能移动到多少个格子（包含自身）。

## 输入输出格式

**输入格式：**

输入的第1行为两个正整数n，m。

下面n行，每行n个字符，字符只可能是0或者1，字符之间没有空格。

接下来m行，每行2个用空格分隔的正整数i,j，对应了迷宫中第i行第j列的一个格子，询问从这一格开始能移动到多少格。

**输出格式：**

输出包括m行，对于每个询问输出相应答案。

## 输入输出样例

**输入样例#1：**

**2 201101 12 2**

**输出样例#1：**

**4**

4


## 源代码

```cpp
#include<iostream>
using namespace std;

int n,m,x,y;
int a[1001][1001];
char ch[1010][1010];
int judge[1001][1001];
int sum;
int original_x[1001][1001]={0};
int original_y[1001][1001]={0};
int current_x, current_y;
void dfs(int x, int y);

int main()
{
    int i,j;

    cin>>n>>m;//输入迷宫大小n与询问答案数m
    for(i=1;i<=n;i++)
    {
        for(j=1;j<=n;j++)
        {   
            cin>>ch[i][j];
            a[i][j]=ch[i][j]-48;
        }
    }
    
    for(i=1;i<=n;i++)//设置边界，便于判重
    	for(j=1;j<=n;j++)
            judge[i][j]=-1;
    
    for(i=1;i<=m;i++)
    {
        sum=0;//步数清零
        cin>>x>>y;//输入询问答案的坐标
        
        if(judge[original_x[x][y]][original_y[x][y]]>0)//判断当前点是不是以前搜索过的 
        {
            cout<<judge[original_x[x][y]][original_y[x][y]]<<endl;
            continue;
        }
        current_x=x;//记录当前点坐标x
        current_y=y;//记录当前点坐标y
        dfs(x,y);//开始搜索
        cout<<sum<<endl;
        judge[x][y]=sum;//记录当前步骤，用于判断
        original_x[x][y]=x;
        original_y[x][y]=y;
    }

    return 0;
}

void dfs(int x, int y)
{
    int direction_x[4]={1,-1,0,0,},direction_y[4]={0,0,1,-1};//方向坐标
 	int i;   
    if(x>n||x<1||y>n||y<1)//搜索终止条件
        return;
    if(judge[x][y]!=-1)//记忆化搜索，判重 
        return;
    
    sum++;//步数+1
    original_x[x][y]=current_x;//更改坐标x
    original_y[x][y]=current_y;//更改坐标y
    judge[x][y]=0;//标记当前点
    
    for(i=0;i<4;i++)
    {
        if(a[x+direction_x[i]][y+direction_y[i]]!=a[x][y])//与当前坐标不符时
            dfs(x+direction_x[i],y+direction_y[i]);//进一步搜索
    }
}
```





