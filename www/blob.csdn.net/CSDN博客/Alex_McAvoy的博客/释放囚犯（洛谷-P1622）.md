# 释放囚犯（洛谷-P1622） - Alex_McAvoy的博客 - CSDN博客





2018年08月17日 12:06:23[Alex_McAvoy](https://me.csdn.net/u011815404)阅读数：174








## 题目描述

Caima王国中有一个奇怪的监狱，这个监狱一共有P个牢房，这些牢房一字排开，第i个紧挨着第i+1个（最后一个除外）。现在正好牢房是满的。

上级下发了一个释放名单，要求每天释放名单上的一个人。这可把看守们吓得不轻，因为看守们知道，现在牢房中的P个人，可以相互之间传话。如果某个人离开了，那么原来和这个人能说上话的人，都会很气愤，导致他们那天会一直大吼大叫，搞得看守很头疼。如果给这些要发火的人吃上肉，他们就会安静点。

## 输入输出格式

**输入格式：**

第一行两个数P和Q，Q表示释放名单上的人数；

第二行Q个数，表示要释放哪些人。

【数据规模】

对于100%的数据1≤P≤1000； 1≤Q≤100；Q≤P；且50%的数据 1≤P≤100；1≤Q≤5

**输出格式：**

仅一行，表示最少要给多少人次送肉吃。

## 输入输出样例

**输入样例#1：**

```
20 3
3 6 14
```

**输出样例#1：**
`35`
【样例说明】

先释放14号监狱中的罪犯，要给1到13号监狱和15到20号监狱中的19人送肉吃；再释放6号监狱中的罪犯，要给1到5号监狱和7到13号监狱中的12人送肉吃；最后释放3号监狱中的罪犯，要给1到2号监狱和4到5号监狱中的4人送肉吃。

——————————————————————————————————————————————————————

思路：

设 f[i][j] 为区间释放 i~j 号囚犯所需最少的肉，枚举所有分界点 k，则：f[i][j]=min{f[i][j],f[i][k-1]+f[k+1][j]+a[j+1]-a[i-1]-1-1}

a[j+1]-a[i-1]-1 是第 j+1 个要放出的囚犯到第 i-1 个要放出的囚犯之间的人数，也即要发的肉的数量

最后一个 -1 ，就是第 k 个放出去的囚犯，不用再给他发肉了

## 源代码

```cpp
#include<iostream>
#include<cstdio>
#include<cstring>
#include<cmath>
#include<algorithm>
#include<string>
#include<cstdlib>
#include<queue>
#include<set>
#include<map>
#include<stack>
#include<ctime>
#include<vector>
#define INF 0x3f3f3f3f
#define PI acos(-1.0)
#define N 10001
#define MOD 1e9+7
#define E 1e-6
#define LL long long
using namespace std;
int a[N];
int f[N][N];
int main()
{
    int p,q;
    cin>>p>>q;
    for(int i=1;i<=q;i++)
        cin>>a[i];

    a[0]=0;
    a[q+1]=p+1;
    sort(a+1,a+q+1);
    for(int len=1;len<=q;len++)//枚举区间长度
    {
        for(int i=1;i+len-1<=q;i++)//枚举所有起点
        {
            int j=i+len-1;//终点位置
            f[i][j]=INF;
            for(int k=i;k<=j;k++)//枚举所有间断点
                f[i][j]=min(f[i][j],f[i][k-1]+f[k+1][j]+a[j+1]-a[i-1]-1-1);
        }
    }

    cout<<f[1][q]<<endl;

    return 0;
}
```





