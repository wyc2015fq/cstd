# 税收与补贴问题（洛谷-P1023） - Alex_McAvoy的博客 - CSDN博客





2018年04月03日 23:22:40[Alex_McAvoy](https://me.csdn.net/u011815404)阅读数：105








## 题目背景

每样商品的价格越低，其销量就会相应增大。现已知某种商品的成本及其在若干价位上的销量（产品不会低于成本销售），并假设相邻价位间销量的变化是线性的且在价格高于给定的最高价位后，销量以某固定数值递减。（我们假设价格及销售量都是整数）

对于某些特殊商品，不可能完全由市场去调节其价格。这时候就需要政府以税收或补贴的方式来控制。（所谓税收或补贴就是对于每个产品收取或给予生产厂家固定金额的货币）

## 题目描述

你是某家咨询公司的项目经理，现在你已经知道政府对某种商品的预期价格，以及在各种价位上的销售情况。要求你确定政府对此商品是应收税还是补贴的最少金额（也为整数），才能使商家在这样一种政府预期的价格上，获取相对其他价位上的最大总利润。

总利润=单位商品利润*销量

单位商品利润=单位商品价格 - 单位商品成本 （- 税金 or + 补贴）

## 输入输出格式

**输入格式：**

输入的第一行为政府对某种商品的预期价，第二行有两个整数，第一个整数为商品成本，第二个整数为以成本价销售时的销售量，以下若干行每行都有两个整数，第一个为某价位时的单价，第二个为此时的销量，以一行-1，-1表示所有已知价位及对应的销量输入完毕，输入的最后一行为一个单独的整数表示在已知的最高单价外每升高一块钱将减少的销量。

**输出格式：**

输出有两种情况：若在政府预期价上能得到最大总利润，则输出一个单独的整数，数的正负表示是补贴还是收税，数的大小表示补贴或收税的金额最小值。若有多解，取绝对值最小的输出。

如在政府预期价上不能得到最大总利润，则输出“NO SOLUTION”。

## 输入输出样例

**输入样例#1：**

```
31
28 130
30 120
31 110
-1  -1
15
```

**输出样例#1：**
`4`
——————————————————————————————————————————

思路：本质是一数学题，考虑预期价格前后的价格，如果预期收益大于或等于前后收益，即为所需解，如果找不到则输出NO SOLUTION

## 源代码

```cpp
#include<iostream>
#include<cstring>
#include<cmath>
using namespace std;
struct node
{
    int price;
    int sale;
}a[10001];

int main()
{
    int n,m;
    int p=1,g=0;
    int cost,cost_sale;
    int i;

    cin>>n;
    cin>>cost>>cost_sale;

    while((cin>>a[p].price>>a[p].sale)&&(a[p].price!=-1))
    {
        if(a[p].price==n)//记录预期价格
        {
            g=p;
            p++;
        }
        else
            p++;
    }
    p--;

    cin>>m;
    int flag=p;
    flag++;
    if(a[p].price>n&&!g)//对于输入中没有预期价格，并且输入价格比预期大很多的处理
    {
        int work=0;
        for(i=1;i<=p;i++)
        {
            if(a[i].price<n)
            {
                a[p].price=a[i].price;
                a[p].sale=a[i].sale;
                work++;
            }
        }
        if(!work)
        {
            a[p].price=cost;
            a[p].sale=cost_sale;
        }
    }

    for(i=a[p].price+1;i<=10001;i++)//将可能的最大价格及其销量处理
    {
         a[flag].price=i;
         a[flag].sale=a[p].sale-(m*(a[flag].price-a[p].price));
         flag++;
    }

    if(g==0)//寻找预期价格
        for(i=p;i<=10001;i++)
            if(a[i].price==n)
            {
                g=i;
                break;
            }

    int h=0;
    int x,y,z;
    for(i=1;i<=10001;i++)//补贴
    {
      x=(a[g].price-cost+i)*a[g].sale;
      y=(a[g-1].price-cost+i)*a[g-1].sale;
      z=(a[g+1].price-cost+i)*a[g+1].sale;
      if(x>y&&x>z)
      {
           cout<<i;
           h++;
          return 0;
       }
    }
    if(h==0)//税收
    {
      for(i=1;i<=10001;i++)
      {
      x=(a[g].price-cost-i)*a[g].sale;
      y=(a[g-1].price-cost-i)*a[g-1].sale;
      z=(a[g+1].price-cost-i)*a[g+1].sale;
      if(x>=y&&x>=z)
      {
           cout<<"-"<<i;
           h++;
           return 0;
       }
      }
    }
    
    if(h==0)//没有可行解
        cout<<"NO SOLUTION"<<endl;
    return 0;
}
```





