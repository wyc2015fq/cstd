# 计算器的改良（洛谷-P1022） - Alex_McAvoy的博客 - CSDN博客





2018年03月03日 14:37:53[Alex_McAvoy](https://me.csdn.net/u011815404)阅读数：181








## 题目背景

NCL是一家专门从事计算器改良与升级的实验室，最近该实验室收到了某公司所委托的一个任务：需要在该公司某型号的计算器上加上解一元一次方程的功能。实验室将这个任务交给了一个刚进入的新手ZL先生。

## 题目描述

为了很好的完成这个任务，ZL先生首先研究了一些一元一次方程的实例：

4＋3x＝8

6a－5＋1＝2－2a

－5＋12y＝0

ZL先生被主管告之，在计算器上键入的一个一元一次方程中，只包含整数、小写字母及+、-、=这三个数学符号（当然，符号“-”既可作减号，也可作负号）。方程中并没有括号，也没有除号，方程中的字母表示未知数。

你可假设对键入的方程的正确性的判断是由另一个程序员在做，或者说可认为键入的一元一次方程均为合法的，且有唯一实数解。

## 输入输出格式

**输入格式：**

一个一元一次方程。

**输出格式：**

解方程的结果(精确至小数点后三位)。

## 输入输出样例

**输入样例#1：**
`6a-5+1=2-2a`
**输出样例#1：**
`a＝0.750`
## 源代码

```cpp
#include<iostream> 
#include<iomanip>
#include<cstdio>
#include<cstring>
**using** **namespace** std;
**int** main()
{
    **char** ch,unknown;
    **int** coefficient=0,sum=0;
    **int** current=0,flag=1,work=1,symbol=1;
    **double** result;
    
    ch=getchar();//读入一个字符
    **for**(;;)
    {
        **if**(ch>='a' && ch<='z')//当字符为字母时
        {
            unknown=ch;//记录该字符
            **if**(current==0&&work)//当前数位为0时
                coefficient=coefficient+symbol*flag;//求系数
            **else**//当前数位不为0时
            {
                coefficient=coefficient+symbol*flag*current;//求系数
                current=0;
                flag=1;
            }
        }
        **else** **if**(ch>='0'&&ch<='9')//当字符为数字时
        {
            current=current*10+ch-'0';//记录当前数位
            work=1; 
        }
        **else** **if**(ch=='+')//当字符为加号时
        {
            sum=sum+(-symbol*flag*current);//累加数字和
            current=0;
            flag=1;
            work=0;
        }
        **else** **if**(ch=='-')//当字符为减号时
        {
            sum=sum+(-symbol*flag*current);//累加数字和
            current=0;
            flag=-1;
            work=0; 
        }
        **else** **if**(ch=='=')//当字符为等号时
        {
            sum=sum+(-symbol*flag*current);//累加数字和
            current=0;
            flag=1;
            symbol=-symbol;//由于移位，取负
            work=0;
        }
        **else**//循环终止情况
        {
            sum=sum+(-symbol*flag*current);
            **break**;//终止循环
        }
        ch=getchar();//读入一个字符
    }
    
    result=1.0*sum/coefficient;//数字和和除以系数
    
    cout<<setiosflags(ios::fixed)<<setprecision(3);
    cout<<unknown<<"="<<result<<endl;
    
    **return** 0;
}
```



