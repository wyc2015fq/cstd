# 搜索 —— 深度优先搜索（DFS） - Alex_McAvoy的博客 - CSDN博客





2018年03月20日 23:57:40[Alex_McAvoy](https://me.csdn.net/u011815404)阅读数：275








# 【算法原理】

    从初始状态，利用规则生成搜索树下一层任一个结点，检查是否出现目标状态，若未出现，以此状态利用规则生成再下一层任一个结点，再检查，重复过程一直到叶节点（即不能再生成新状态节点），当它仍不是目标状态时，回溯到上一层结果，取另一可能扩展搜索的分支。采用相同办法一直进行下去，直到找到目标状态为止。

    状态必须在遍历完所有它的子状态之后，才能继续进行对同一层中下一个状态的遍历。

    符合栈的先进后出的性质

![](https://img-blog.csdn.net/20180320234039704)

# 【适用范围】

    最大路寻找、图的遍历等

# 【具体过程】
-  每次取出栈顶元素，对其进行拓展。
- 若栈顶元素无法继续拓展，则将其从栈中弹出。继续1过程。
- 不断重复直到获得目标状态（取得可行解）或栈为空（无解）。

# 【过程对应队列情况】

![](https://img-blog.csdn.net/20180320235204158)

每个方块表示一个状态，浅蓝色的表示遍历了该状态黑色代表当前探索的状态，浅蓝色为已经搜索过的状态，灰色为未搜索的状态。在过程中遇到搜索的解则退出，找到答案。

# 【时间复杂度】

    因为在邻接矩阵上遍历，一般至少需要将矩阵中元素一半给过一下，由于矩阵元素个数为n^2，因此时间复杂度就是O(n^2)

至于在邻接表上遍历时，过程与这个类似，但是邻接表中只是存储了边结点(e条边，无向图也只是2e个结点)，加上表头结点为n（也就是顶点个数），因此时间复杂度为O(n+e)

    注：在邻接表中判断某个顶点是否关联，最坏时可能需要将链表中所有结点都遍历完（尤其是有向图中），此时时间复杂度自然就是O(e)

# 【递归实现(回溯)】

```cpp
int dfs(int step)//当前状态
{
    if(当前状态==边界状态)//结束条件
    {
        记录或输出;
        return;
    }
    
    for(i=0;i<n;i++)//横向遍历解答树所有子节点  
    {  
        /*扩展出一个子状态*/
        修改全局变量
        if(子状态满足约束条件)  
            dfs(子状态)  
        恢复全局变量//回溯部分
    }  
}
```

# 【非递归实现】

```cpp
while(!stack.empty())//当栈顶元素不为空
{
    temp=Stack.top();//取栈顶元素值
    从temp拓展下一个未拓展的状态next;
    
	if( next没有未拓展状态(到达叶节点) )
		stack.pop();//移除栈顶元素
	else if(状态next满足条件)
		stack.push(next);//next入栈
}
```

# 【例题】
- A strange lift（HDU-1548）：[点击这里](https://blog.csdn.net/u011815404/article/details/79598817)
- 单词方阵（洛谷-P1101）：[点击这里](https://blog.csdn.net/u011815404/article/details/79998276)
- 全排列（信息学奥赛一本通-T1199）：[点击这里](https://blog.csdn.net/u011815404/article/details/80261448)
- 组合的输出（信息学奥赛一本通-T1317）：[点击这里](https://blog.csdn.net/u011815404/article/details/80282524)
- Divide by three, multiply by two（CF-977D）：[点击这里](https://blog.csdn.net/u011815404/article/details/81540319)
- 八皇后（洛谷-P1219）：[点击这里](https://blog.csdn.net/u011815404/article/details/79998198)
- 八皇后问题（信息学奥赛一本通-T1213）：[点击这里](https://blog.csdn.net/u011815404/article/details/80282521)
- 八皇后（信息学奥赛一本通-T1214）：[点击这里](https://blog.csdn.net/u011815404/article/details/80282520)
- 马走日（信息学奥赛一本通-T1219）：[点击这里](https://blog.csdn.net/u011815404/article/details/80282635)



