# 字串变换（洛谷-P1032） - Alex_McAvoy的博客 - CSDN博客





2018年05月14日 19:20:11[Alex_McAvoy](https://me.csdn.net/u011815404)阅读数：117








## 题目描述

已知有两个字串 A, B 及一组字串变换的规则（至多6个规则）:

A1 -> B1

A2 -> B2

规则的含义为：在 A＄中的子串 A1 可以变换为 B1、A2 可以变换为 B2 …。

例如：A＝'abcd'B＝'xyz'

变换规则为：

‘abc’->‘xu’‘ud’->‘y’‘y’->‘yz’

则此时，A 可以经过一系列的变换变为 B，其变换的过程为：

‘abcd’->‘xud’->‘xy’->‘xyz’

共进行了三次变换，使得 A 变换为B。

## 输入输出格式

**输入格式：**

输入格式如下：

A B A1 B1 \

A2 B2 |-> 变换规则

... ... /

所有字符串长度的上限为 20。

**输出格式：**

输出至屏幕。格式如下：

若在 10 步（包含 10步）以内能将 A 变换为 B ，则输出最少的变换步数；否则输出"NO ANSWER!"

## 输入输出样例

**输入样例#1：**

```
abcd xyz
abc xu
ud y
y yz
```

**输出样例#1：**
`3`
## 源代码

```cpp
#include<iostream>
#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<algorithm>
#include<string>
#define INF 999999999
#define N 1000001
using namespace std;
struct node
{
    string str;
    int step;
}q[N];
string used[N];
string a,b;
string rulea[20],ruleb[20];
int head,tail=-1;
int n,len;
string change(string s,int i,int j)
{
    if(i+rulea[j].length()>s.length())
        return "";
    for(int k=0;k<rulea[j].length();k++)
    {
        if(s[i+k]!=rulea[j][k])
            return "";
    }
    string sum=s.substr(0,i);//没变的部分
    sum.append(ruleb[j]+s.substr(i+rulea[j].length()));//相加
    return sum;
}
int check(string x)
{
    for(int i=1;i<=len;i++)
    {
        if(x[0]==used[i][0])//比较第一个字符
        {
            if(x[1]==used[i][1])//比较第二个字符
            {
                if(x==used[i])
                    return 1;//比较整个字符串
            }
            else
                continue;
        }
        else continue;
    }
    return 0;
}
void bfs()
{
    q[head].step=0;
    q[head].str=a;//队列初始化
    while(tail<head)
    {
        node temp=q[++tail];//取队头
        if(check(temp.str)==1)//判重
            continue;
        if(temp.step>10)
        {
            cout<<"NO ANSWER!"<<endl;
            exit(0);//终止程序
        }
        if(temp.str==b)
        {
            cout<<temp.step<<endl;
            exit(0);//终止程序
        }
        used[++len]=temp.str;//记录
        for(int i=0;i<temp.str.length();i++)//枚举每一位
        {
            for(int j=0;j<n;j++)//枚举变化方式
            {
                string sum=change(temp.str,i,j);
                if(!sum.empty())//判断字符串是否为空
                {
                    head++;
                    q[head].str=sum;
                    q[head].step=temp.step+1;//入队
                }
            }
        }
    }
}
int main()
{
    cin>>a>>b;
    while(cin>>rulea[n]>>ruleb[n])
        n++;
    bfs();
    cout<<"NO ANSWER!"<<endl;
    return 0;
}
```





