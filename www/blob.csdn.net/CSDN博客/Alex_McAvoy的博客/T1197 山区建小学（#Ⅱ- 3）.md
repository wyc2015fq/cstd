# T1197 山区建小学（#Ⅱ- 3） - Alex_McAvoy的博客 - CSDN博客





2018年05月04日 16:26:11[Alex_McAvoy](https://me.csdn.net/u011815404)阅读数：1013








### 【题目描述】

政府在某山区修建了一条道路，恰好穿越总共m个村庄的每个村庄一次，没有回路或交叉，任意两个村庄只能通过这条路来往。已知任意两个相邻的村庄之间的距离为didi(为正整数)，其中，0<i<m。为了提高山区的文化素质，政府又决定从m个村中选择n个村建小学(设0<n≤m<500)。请根据给定的m、n以及所有相邻村庄的距离，选择在哪些村庄建小学，才使得所有村到最近小学的距离总和最小，计算最小值。

### 【输入】

第1行为m和n，其间用空格间隔

    第2行为m−1个整数，依次表示从一端到另一端的相邻村庄的距离，整数之间以空格间隔。

例如:

    10 3

    2 4 6 5 2 4 3 1 3

    表示在10个村庄建3所学校。第1个村庄与第2个村庄距离为2，第2个村庄与第3个村庄距离为4，第3个村庄与第4个村庄距离为6，...，第9个村庄到第10个村庄的距离为3。

### 【输出】

各村庄到最近学校的距离之和的最小值。

### 【输入样例】

```
10 2
3 1 3 1 1 1 1 1 3
```

### 【输出样例】

```
18
```

### 【源程序】

```cpp
#include<iostream>
#include<cstring>
#include<algorithm>
using namespace std;
int dis[510];
int a[510][510];
int dp[510][510];
int main()
{
    int m,n;
    int i,j,k;

    memset(a,0,sizeof(a));

    cin>>m>>n;
    dis[1]=0;
    for(i=2;i<=m;i++)
    {
        cin>>dis[i];
        dis[i]+=dis[i-1];
    }

    for(i=1;i<=m;i++)//学校建在i村j村的中间村落
        for(j=i+1;j<=m;j++)
            a[i][j]=a[i][j-1]+dis[j]-dis[(i+j)/2];

    for(i=1;i<=m;i++)
        for(j=1;j<=i&&j<=n;j++)
           dp[i][j]=9999999999;
    for(i=1;i<=m;i++)//dp[i][j]前i个村建j所学校,最短距离
        dp[i][1]=a[1][i];

    for(i=2;i<=m;i++)
        for(j=2;j<=i&&j<=n;j++)
            for(k=j-1;k<i;k++)
               dp[i][j]=min(dp[i][j],dp[k][j-1]+a[k+1][i]);

    cout<<dp[m][n]<<endl;
    return 0;
}
```





