# 《BREW进阶与精通——3G移动增值业务的运营、定制与开发》连载之98——BREW中RUIM的相关问题 - 我相信...... - CSDN博客





2011年01月21日 11:24:00[半吊子全栈工匠](https://me.csdn.net/wireless_com)阅读数：1069








在BREW引入中国联通之前，基于BREW的移动增值业务都是与手机上唯一标识符（ESN）联系在一起，以实现计费和使用授权管理。当在BREW手机上引入RUIM卡后，应用所有权、购买信息以及使用授权就与RUIM卡提供的唯一标识符(IMSI)连系了起来。跟据不同的用户情况，一个带有IMSI标识符的RUIM卡可以插入不同的手机，这就产生了一些独特的计费情况。



针对机卡分离的情况，BREW在2.X版中增加了一些功能。BDS分发系统也增加了对包月记费的处理以更好的解决用一个IMSI将同一个应用下载到多个手机上而产生的记费问题。这些支持RUIM的功能确保了友好的用户经验、防止了应用盗版，并提供了全面的计费支持。

可能引起手机和RUIM组合发生变更的最常见情况如下：

1. 现有手机升级即用户更换新手机，这会造成现有RUIM卡插入新的BREW手机。

2. RUIM卡丢失，这会造成新的RUIM卡插入现有手机。

3. 将现有手机送给朋友/家人，这会造成新的 RUIM卡插入现有手机。

4. 临时将手机借给朋友/家人使用，朋友使用自己的RUIM卡，这会造成新的RUIM卡插入现有手机。

5. 有人对经常去的每个城市持有该城市的RUIM卡，以便不必漫游计费。还有些人持有多个卡，以区分“私用”和“公用”，这就造成了一部手机在不同时间使用不同的RUIM卡。

如果没有人工干预，BREW手机自身将很难区分第2到第5种情况。 



应用的所有权和运营商分发系统的使用记录，一般地，是与下载应用时用户所用的卡的IMSI连系在一起的（若IMSI为SID-Subscriber ID）。如果使用不同的RUIM卡下载应用，则在同一个手机上的不同应用可能会有不同的所有权。

特别地，针对预安装的应用，应用的所有权为启动手机的第一个SID/IMSI所有。

在缺省情况下，只有下载应用时用户所用的卡(原来的SID)可以起动包月应用，有限用次的应用，和有分钟限制的应用。当应用不能起动时，手机会显示错误性息。如果运营商需要，可以规定只有原始用户才可以使用手机上基于BREW的移动增值业务（不论是哪种授权方式的应用）。这意味着启动应用时，需要使用用于下载该应用的那个RUIM卡。在手机上，是通过通过设定手机设备标识中的标识位（DIF_SID_VALIDATE_ALL）来实现这一功能的。 



