# h264检测是I帧还是P帧 - 一世豁然的专栏 - CSDN博客





2016年10月10日 15:16:58[一世豁然](https://me.csdn.net/Explorer_day)阅读数：2211








本博客转载于：[http://blog.csdn.net/zgyulongfei/article/details/7558031](http://blog.csdn.net/zgyulongfei/article/details/7558031)







今天在网上找了一些资料，知道了如何检测h264中的帧类型，在这里记录下来。

首先，贴出nal单元类型定义（图从《新一代视频压缩编码标准H.264》摘录）：

![](https://img-my.csdn.net/uploads/201205/11/1336727471_3857.png)





假设一段h264的码流为：00 00 00 01 41 E6 60……

其中的00 00 00 01为起始码，而起始码之后的下一个字节就可以检测出这一帧的类型。

在上面的码流中起始码之后的字节位 0x41，换算成二进制为 0100 0001。

注：我解读顺序为从左往右算。

（1）第1位禁止位，值为1表示语法出错

（2）第2~3位为参考级别

（3）第4~8为是nal单元类型，在此处为 0 0001换算成十进制为1。根据上图可知道这段码流是【不分区、非IDR图像的片】，在baseline的档次中就是P帧，因为baseline没有B帧。




如果是另一段码流：00 00 00 01 
65 E8……

那么根据0x65字节（0110 0101）根据后5位换算十进制为5，也就是【IDR图像中的片】，即I帧。




用代码的方式可以这样写，int type = 0x65 & 0x1f，然后根据type在表中查找即可获得需要的结果。










