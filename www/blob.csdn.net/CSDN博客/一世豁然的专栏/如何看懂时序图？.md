# 如何看懂时序图？ - 一世豁然的专栏 - CSDN博客





2015年04月29日 11:15:37[一世豁然](https://me.csdn.net/Explorer_day)阅读数：2276








本博客转载于：[http://www.21ic.com/jichuzhishi/mcu/shixu/2013-05-31/182781.html](http://www.21ic.com/jichuzhishi/mcu/shixu/2013-05-31/182781.html)








操作时序永远使用是任何一片IC芯片的最主要的内容。一个芯片的所有使用细节都会在它的官方器件手册上包含。所以使用一个器件事情，要充分做好的第一件事就是要把它的器件手册上有用的内容提取，掌握。介于中国目前的芯片设计能力有限，所以大部分的器件都是外国几个IC巨头比如TI、AT、MAXIM这些公司生产的，器件资料自然也是英文的多，所以，英文的基础要在阅读这些数据手册时得到提高哦。即便有中文翻译版本，还是建议看英文原版，看不懂时不妨再参考中文版，这样比较利于提高。

我们首先来看1602的引脚定义,1602的引脚是很整齐的SIP单列直插封装，所以器件手册只给出了引脚的功能数据表：

![2.jpg](http://www.21ic.com/d/file/201305/43ac34a3acc0fc72f1c1271932a5448a.jpg)

**我们只需要关注以下几个管脚：**

3脚：VL，液晶显示偏压信号，用于调整LCD1602的显示对比度，一般会外接电位器用以调整偏压信号，注意此脚电压为0时可以得到最强的对比度。

4脚：RS，数据/命令选择端，当此脚为高电平时，可以对1602进行数据字节的传输操作，而此脚为低电平时，则是进行命令字节的传输操作。命令字节，即是用来对LCD1602的一些工作方式作设置的字节;数据字节，即使用以在1602上显示的字节。值得一提的是，LCD1602的数据是8位的。

5脚：R/W，读写选择端。当此脚为高电平可对LCD1602进行读数据操作，反之进行写数据操作。笔者认为，此脚其实用处不大，直接接地永久置为低电平也不会影响其正常工作。但是尚未经过复杂系统验证，保留此意见。

6脚：E，使能信号，其实是LCD1602的数据控制时钟信号，利用该信号的上升沿实现对LCD1602的数据传输。

7~14脚：8位并行数据口，使得对LCD1602的数据读写大为方便。

**现在来看LCD1602的操作时序：**

**![1.jpg](http://www.21ic.com/d/file/201305/737bce7046a66698660c57669f0bf708.jpg)![3.jpg](http://www.21ic.com/d/file/201305/644ccb90a8423fde4ddc915b0a1a432b.jpg)**

在此，我们可以先不读出它的数据的状态或者数据本身。所以只需要看两个写时序：

① 当我们要写指令字，设置LCD1602的工作方式时：需要把RS置为低电平，RW置为低电平，然后将数据送到数据口D0~D7，最后E引脚一个高脉冲将数据写入。

② 当我们要写入数据字，在1602上实现显示时：需要把RS置为高电平，RW置为低电平，然后将数据送到数据口D0~D7，最后E引脚一个高脉冲将数据写入。

发现了么，写指令和写数据，差别仅仅在于RS的电平不一样而已。以下是LCD1602的时序图：

大家要慢慢学会看时序图，要知道操作一个器件的精华便蕴藏在其中，看懂看准了时序，你操控这个芯片就是非常容易的事了。1602的时序是我见过的一个最简单的时序：

![3.jpg](http://www.21ic.com/d/file/201305/189a61ce162d633ad024c1712c9c6372.jpg)

1、注意时间轴，如果没有标明(其实大部分也都是不标明的)，那么从左往右的方向为时间正向轴，即时间在增长。

2、上图框出并注明了看懂此图的一些常识：

(1).时序图最左边一般是某一根引脚的标识，表示此行图线体现该引脚的变化，上图分别标明了RS、R/W、E、DB0~DB7四类引脚的时序变化。

(2).有线交叉状的部分，表示电平在变化，如上所标注。

(3).应该比较容易理解，如上图右上角所示，两条平行线分别对应高低电平，也正好吻合(2)中电平变化的说法。

(4).上图下，密封的菱形部分，注意要密封，表示数据有效，Valid Data这个词也显示了这点。

3、需要十分严重注意的是，时序图里各个引脚的电平变化，基于的时间轴是一致的。一定要严格按照时间轴的增长方向来精确地观察时序图。要让器件严格的遵守时序图的变化。在类似于18B20这样的单总线器件对此要求尤为严格。

4、以上几点，并不是LCD1602的时序图所特有的，绝大部分的时序图都遵循着这样的一般规则，所以大家要慢慢的习惯于这样的规则。

也许你还注意到了上面有许多关于时间的标注，这也是个十分重要的信息，这些时间的标注表明了某些状态所要维持的最短或最长时间。因为器件的工作速度也是有限的，一般都跟不上主控芯片的速度，所以它们直接之间要有时序配合。话说现在各种处理器的主频也是疯狂增长，日后搞不好出现个双核单片机也不一定就是梦话。下面是时序参数表：

![4.jpg](http://www.21ic.com/d/file/201305/2982dfe0528a00f64fe2173fdd3ec3e3.jpg)

大家要懂得估计主控芯片的指令时间，可以在官方数据手册上查到MCU的一些级别参数。比如我们现在用AVR M16做为主控芯片，外部12MHz晶振，指令周期就是一个时钟周期为(2/12MHz)s，所以至少确定了它执行一条指令的时间是us级别的。我们看到，以上给的时间参数全部是ns级别的，所以即便我们在程序里不加延时程序，也应该可以很好的配合LCD1602的时序要求了。怎么看这个表呢?很简单，我们在时序图里可以找到TR1，对应时序参数表，可以查到这个是E上升沿/下降沿时间，最大值为25ns，表示E引脚上的电平变化，必须在最大为25ns之内的时间完成。大家看是不是这个意思?

**现在我来解读我对这个时序图的理解：**

当要写命令字节的时候，时间由左往右，RS变为低电平，R/W变为低电平，注意看是RS的状态先变化完成。然后这时，DB0~DB7上数据进入有效阶段，接着E引脚有一个整脉冲的跳变，接着要维持时间最小值为tpw=400ns的E脉冲宽度。然后E引脚负跳变，RS电平变化，R/W电平变化。这样便是一个完整的LCD1602写命令的时序。

扩展阅读：[51系列单片机关于时序问题](http://www.21ic.com/jichuzhishi/mcu/shixu/2013-05-31/182780.html)

ps感谢热心网友的指出错误之处：

(1/12MHz)s是振荡周期，而不是时钟周期，因为时钟周期(状态周期)等于两个振荡周期，换句话说就是对振动频率进行“二分频”的振荡信号，所以(2/12MHz)s才是晶振为12MHz时的时钟周期。







