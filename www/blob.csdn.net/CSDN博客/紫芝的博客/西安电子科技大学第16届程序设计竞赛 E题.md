# 西安电子科技大学第16届程序设计竞赛 E题 - 紫芝的博客 - CSDN博客





2018年04月22日 11:54:27[紫芝](https://me.csdn.net/qq_40507857)阅读数：44








                链接：[https://www.nowcoder.com/acm/contest/107/E](https://www.nowcoder.com/acm/contest/107/E)
来源：牛客网


## 题目描述


众所周知，Xieldy最常用的口令是******。
 为了改变这一现状，他random了一个01串，并从中截取了一段作为自己的口令。
 他选择的口令满足以下条件：
 1. 口令串表示的二进制数在十进制下可以被表示为3k(k>=0)。
 2. 口令串可以有前导零。
 现已经random出了01串，他想知道有多少种口令方案可以选择（不同的子段即为不同）。


## 输入描述:
若干组数据，每组数据仅一行01串s，表示random出来的的串，|s|<=1e6。
## 输出描述:
输出口令的方案数。

示例1



## 输入

101010



## 输出

5





## 解法一：

枚举所有子串，计算子串的十进制数，超时

```cpp
/*
s.substr(pos,n);
在s中，从pos开始截取n个字符长度的子串 
*/
//#include<bits/stdc++.h>
#include<iostream>
#include<string>
#include<set>
#include<cmath>
#include<map>
using namespace std;
int check(string s)
{
	int l=s.length(),num=0,p=l-1;
	
	for(int i=0;i<l;i++)
	{
		if(s[i]=='1')
		num+=pow(2,p);
		p--;
	}
	return num;
}

int main()
{
	ios::sync_with_stdio(false);
	string s;
	while(cin>>s)
	{
		int l=s.length();
		int ans=0,num;
		
		map<string,int> m;
		m.clear();
		for(int i=0;i<l;i++)
		{
			for(int j=1;j<=l-i;j++){
				string t=s.substr(i,j);
				if(m[t]==0){
					num=check(t);
				}
			else num=m[t];				
			if(num==0||num%3==0)
			ans++;
			//cout<<t<<" "<<num<<endl;
			}		
		}
		cout<<ans<<endl;
	}
	return 0;
 }
```

## 解法二：

大神的动态规划，不懂，运行时间：95ms

```cpp
#include<iostream>
#include<cstring>
#include<algorithm>
using namespace std;
typedef long long ll;
const int N=1e6+5;
char s[N];
int dp[N][3]; 
int main()
{
	while(scanf("%s",s)!=EOF){
		int len=strlen(s);
		ll ans=0;
		memset(dp,0,sizeof(dp));
		for(int i=0;i<len;i++)
		{
			if(s[i]=='0')
			{
				dp[i][0]=1;
				dp[i][0]+=dp[i-1][0];
				dp[i][1]+=dp[i-1][2];
				dp[i][2]+=dp[i-1][1];
			}else{
				dp[i][1]=1;
				dp[i][0]+=dp[i-1][1];
				dp[i][1]+=dp[i-1][0];
				dp[i][2]+=dp[i-1][2];
			}
			ans+=dp[i][0];
		}
		printf("%lld\n",ans);
	}
	return 0;
}
```

## 解法三：

深度优化的动态规划，运行时间：32ms


```cpp
#include<iostream>
#include<cstring>
#include<algorithm>
using namespace std;
typedef long long ll;
const int N=1e6+5;
char s[N];
int main()
{
	while(scanf("%s",s)!=EOF){
		int len=strlen(s);
		ll ans=0,cnt[3]={0};
		for(int i=0;i<len;i++)
		{
			if(s[i]=='0')
			{
				swap(cnt[1],cnt[2]);
				cnt[0]++;
			}else{
				swap(cnt[0],cnt[1]);
				cnt[1]++;
			}
			ans+=cnt[0];
		}
		printf("%lld\n",ans);
	}
	return 0;
}
```







