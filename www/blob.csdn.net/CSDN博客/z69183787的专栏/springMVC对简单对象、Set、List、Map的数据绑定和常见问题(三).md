# springMVC对简单对象、Set、List、Map的数据绑定和常见问题(三) - z69183787的专栏 - CSDN博客
2016年08月20日 14:10:45[OkidoGreen](https://me.csdn.net/z69183787)阅读数：3173
7、Set绑定：
Set和List类似，也需要绑定在对象上，而不能直接写在Controller方法的参数中。但是，绑定Set数据时，必须先在Set对象中add相应的数量的模型对象。
- **public****class** User {  
- 
- **private** String firstName;  
- 
- **private** String lastName;  
- 
-     。。。  
- 
- }  
- 
- **public****class** UserSetForm {  
- 
- **private** Set users = **new** HashSet();  
- 
- **public** UserSetForm(){  
-         users.add(**new** User());  
-         users.add(**new** User());  
-         users.add(**new** User());  
-     }  
- 
-     。。。  
- 
- }  
- @RequestMapping("test.do")  
- **public****void** test(UserSetForm userForm) {  
- **for** (User user : userForm.getUsers()) {  
-         System.out.println(user.getFirstName() + " - " + user.getLastName());  
-     }  
- }  
- **<</span>formaction="test.do"method="post">**
- **<</span>table>**
- **<</span>thead>**
- **<</span>tr>**
- **<</span>th>First Name</</span>th>**
- **<</span>th>Last Name</</span>th>**
- **</</span>tr>**
- **</</span>thead>**
- **<</span>tfoot>**
- **<</span>tr>**
- <</span>tdcolspan="2"><</span>inputtype="submit"value="Save"/></</span>td>
- **</</span>tr>**
- **</</span>tfoot>**
- **<</span>tbody>**
- **<</span>tr>**
- <</span>td><</span>inputname="users[0].firstName"value="aaa"/></</span>td>
- <</span>td><</span>inputname="users[0].lastName"value="bbb"/></</span>td>
- **</</span>tr>**
- **<</span>tr>**
- <</span>td><</span>inputname="users[1].firstName"value="ccc"/></</span>td>
- <</span>td><</span>inputname="users[1].lastName"value="ddd"/></</span>td>
- **</</span>tr>**
- **<</span>tr>**
- <</span>td><</span>inputname="users[2].firstName"value="eee"/></</span>td>
- <</span>td><</span>inputname="users[2].lastName"value="fff"/></</span>td>
- **</</span>tr>**
- **</</span>tbody>**
- **</</span>table>**
- **</</span>form>**
基本和List绑定类似。
需要特别提醒的是，如果最大下标值大于Set的size，则会抛出org.springframework.beans.InvalidPropertyException异常
**8、Map绑定：**
- **public****class** User {  
- 
- **private** String firstName;  
- 
- **private** String lastName;  
- 
-     。。。  
- 
- }  
- 
- **public****class** UserMapForm {  
- 
- **private** Map users;  
- 
-     。。。  
- 
- }  
- @RequestMapping("test.do")  
- **public****void** test(UserMapForm userForm) {  
- **for** (Map.Entry entry : userForm.getUsers().entrySet()) {  
-         System.out.println(entry.getKey() + ": " + entry.getValue().getFirstName() + " - " +  
-                                  entry.getValue().getLastName());  
-     }  
- }  
- **<</span>formaction="test.do"method="post">**
- **<</span>table>**
- **<</span>thead>**
- **<</span>tr>**
- **<</span>th>First Name</</span>th>**
- **<</span>th>Last Name</</span>th>**
- **</</span>tr>**
- **</</span>thead>**
- **<</span>tfoot>**
- **<</span>tr>**
- <</span>tdcolspan="2"><</span>inputtype="submit"value="Save"/></</span>td>
- **</</span>tr>**
- **</</span>tfoot>**
- **<</span>tbody>**
- **<</span>tr>**
- <</span>td><</span>inputname="users['x'].firstName"value="aaa"/></</span>td>
- <</span>td><</span>inputname="users['x'].lastName"value="bbb"/></</span>td>
- **</</span>tr>**
- **<</span>tr>**
- <</span>td><</span>inputname="users['y'].firstName"value="ccc"/></</span>td>
- <</span>td><</span>inputname="users['y'].lastName"value="ddd"/></</span>td>
- **</</span>tr>**
- **<</span>tr>**
- <</span>td><</span>inputname="users['z'].firstName"value="eee"/></</span>td>
- <</span>td><</span>inputname="users['z'].lastName"value="fff"/></</span>td>
- **</</span>tr>**
- **</</span>tbody>**
- **</</span>table>**
- **</</span>form>**
最后：
像test(int num)这种把表单字段直接映射到方法参数名的方式是不太靠谱的，这是Spring MVC最大的问题，并且是无法解决的问题，因为它是基于字节码来取方法参数名的，如果在编译源码时不生成debug信息，比如javac -g:none 或者 在eclipse中在Preference那个窗口中选"Java->Compiler"把"Add varible..."那个复选框取消，这样生成的字节码中是不会保存方法参数名的。最靠谱的办法就是基于java源代码来做，或者Spring MVC目前已提供的比较啰嗦的注解方式:
 在参数名前加@RequestParam把test(int num)改成下面这样才是万无一失的:
- test(@RequestParam("num") **int** num)  
所以最后在控制器方法上带上这个注解。
