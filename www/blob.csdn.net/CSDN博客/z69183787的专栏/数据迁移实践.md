# 数据迁移实践 - z69183787的专栏 - CSDN博客
2017年04月14日 13:56:56[OkidoGreen](https://me.csdn.net/z69183787)阅读数：830
中奖纪录侧
数据量：千万级
实施方案：数据库层面迁移，新数据一一匹配
实施脚本：
1、sql整理出需要导出的数据：
```
select a,b,c,d,e,f,g
 from table_1 
                into outfile '/data/aaa/haha.csv'
fields terminated by ',' optionally enclosed by '\''
lines terminated by '\r\n';
```
2、使用shell分割记录结果，分批导入
```python
split -a 3 -l 20000 haha.csv target/table2_
  
for i in `ls -1 target `
do
    mysql -s -N -p'xxxxxxx' DPEmidas -e "load data infile '/data/aaa/target/$i'
IGNORE into table table2
fields terminated by ','  optionally enclosed by '\''
lines terminated by '\r\n'"
    mv /data/aaa/target/$i /data/aaa/complete/
    sleep 1
done
```
