# 联合索引的最左前缀匹配原则 - z69183787的专栏 - CSDN博客
2019年01月23日 15:34:23[OkidoGreen](https://me.csdn.net/z69183787)阅读数：124
[https://www.jianshu.com/p/b7911e0394b0](https://www.jianshu.com/p/b7911e0394b0)
```
CREATE TABLE `user2` (
  `userid` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(20) NOT NULL DEFAULT '',
  `password` varchar(20) NOT NULL DEFAULT '',
  `usertype` varchar(20) NOT NULL DEFAULT '',
  PRIMARY KEY (`userid`),
  KEY `a_b_c_index` (`username`,`password`,`usertype`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
```
上表中有一个联合索引，下面开始验证最左匹配原则。
当存在username时会使用索引查询：
```
explain select * from user2 where username = '1' and password = '1';
```
![](https://upload-images.jianshu.io/upload_images/4441909-0bb3f37bba05cf0a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/727)
Paste_Image.png
当没有username时，不会使用索引查询：
```
explain select * from user2 where password = '1';
```
![](https://upload-images.jianshu.io/upload_images/4441909-0acd8c10d746644a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/674)
Paste_Image.png
当有username，但顺序乱序时也可以使用索引：
```
explain select * from user2 where password = '1' and username = '1';
```
![](https://upload-images.jianshu.io/upload_images/4441909-7e55dd9aca66fb43.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/728)
Paste_Image.png
在最左匹配原则中，有如下说明：
- 最左前缀匹配原则，非常重要的原则，mysql会一直向右匹配直到遇到范围查询(>、<、between、like)就停止匹配，比如a = 1 and b = 2 and c > 3 and d = 4 如果建立(a,b,c,d)顺序的索引，d是用不到索引的，如果建立(a,b,d,c)的索引则都可以用到，a,b,d的顺序可以任意调整。
- =和in可以乱序，比如a = 1 and b = 2 and c = 3 建立(a,b,c)索引可以任意顺序，mysql的查询优化器会帮你优化成索引可以识别的形式
