# Linux常用系统管理命令(top、free、kill、df) - z69183787的专栏 - CSDN博客
2017年03月31日 12:19:38[OkidoGreen](https://me.csdn.net/z69183787)阅读数：1002
[http://www.jb51.net/LINUXjishu/86334.html](http://www.jb51.net/LINUXjishu/86334.html)
一、 top
1.作用
top命令用来显示执行中的程序进程，使用权限是所有用户。
2.格式
top [－] [d delay] [q] [c] [S] [s] [i] [n]
3.主要参数
d：指定更新的间隔，以秒计算。q：没有任何延迟的更新。如果使用者有超级用户，则top命令将会以最高的优先序执行。c：显示进程完整的路径与名称。S：累积模式，会将己完成或消失的子行程的CPU时间累积起来。s：安全模式。i：不显示任何闲置(Idle)或无用(Zombie)的行程。n：显示更新的次数，完成后将会退出top。
4.说明
top命令是Linux系统管理的一个主要命令，通过它可以获得许多信息。这里我们结合图1来说明它给出的信息。
![](http://files.jb51.net/file_images/article/201306/201306082232322.jpg)
图1 top命令的显示
在图1中，第一行表示的项目依次为当前时间、系统启动时间、当前系统登录用户数目、平均负载。第二行显示的是所有启动的进程、目前运行的、挂起(Sleeping)的和无用(Zombie)的进程。第三行显示的是目前CPU的使用情况，包括系统占用的比例、用户使用比例、闲置(Idle)比例。第四行显示物理内存的使用情况，包括总的可以使用的内存、已用内存、空闲内存、缓冲区占用的内存。第五行显示交换分区使用情况，包括总的交换分区、使用的、空闲的和用于高速缓存的大小。第六行显示的项目最多，下面列出了详细解释。
PID（Process ID）：进程标示号。USER：进程所有者的用户名。PR：进程的优先级别。NI：进程的优先级别数值。VIRT：进程占用的虚拟内存值。RES：进程占用的物理内存值。SHR：进程使用的共享内存值。S：进程的状态，其中S表示休眠，R表示正在运行，Z表示僵死状态，N表示该进程优先值是负数。%CPU：该进程占用的CPU使用率。%MEM：该进程占用的物理内存和总内存的百分比。TIME＋：该进程启动后占用的总的CPU时间。Command：进程启动的启动命令名称，如果这一行显示不下，进程会有一个完整的命令行。  
**top命令使用过程中，还可以使用一些交互的命令来完成其它参数的功能。这些命令是通过快捷键启动的。**
<空格>：立刻刷新。P：根据CPU使用大小进行排序。M：根据使用内存大小进行排序。T：根据时间、累计时间排序。q：退出top命令。m：切换显示内存信息。t：切换显示进程和CPU状态信息。c：切换显示命令名称和完整命令行。W：将当前设置写入~/.toprc文件中。这是写top配置文件的推荐方法。
可以看到，top命令是一个功能十分强大的监控系统的工具，对于系统管理员而言尤其重要。但是，它的缺点是会消耗很多系统资源。
5.应用实例
使用top命令可以监视指定用户，缺省情况是监视所有用户的进程。如果想查看指定用户的情况，在终端中按“U”键，然后输入用户名，系统就会切换为指定用户的进程运行界面，见图2所示。
![](http://files.jb51.net/file_images/article/201306/201306082232323.jpg)
图2 使用top命令监视指定用户
 二、 free
1.作用
free命令用来显示内存的使用情况，使用权限是所有用户。
2.格式
free [－b|－k|－m] [－o] [－s delay] [－t] [－V]
3.主要参数
－b －k －m：分别以字节（KB、MB）为单位显示内存使用情况。－s delay：显示每隔多少秒数来显示一次内存使用情况。l－t：显示内存总和列。－o：不显示缓冲区调节列。
4.应用实例
free命令是用来查看内存使用情况的主要命令。和top命令相比，它的优点是使用简单，并且只占用很少的系统资源。通过－S参数可以使用free命令不间断地监视有多少内存在使用，这样可以把它当作一个方便实时监控器。
＃free －m －s 3
使用这个命令后终端会连续不断地报告内存使用情况（以MB为单位），每3秒更新一次。
三、 kill
1.作用
kill命令用来中止一个进程。
2.格式
kill [ －s signal | －p ] [ －a ] pid …
kill －l [ signal ]
3.参数
－s：指定发送的信号。－p：模拟发送信号。－l：指定信号的名称列表。pid：要中止进程的ID号。Signal：表示信号。
4.说明
进程是Linux系统中一个非常重要的概念。Linux是一个多任务的操作系统，系统上经常同时运行着多个进程。我们不关心这些进程究竟是如何分配的，或者是内核如何管理分配时间片的，所关心的是如何去控制这些进程，让它们能够很好地为用户服务。
Linux操作系统包括三种不同类型的进程，每种进程都有自己的特点和属性。交互进程是由一个Shell启动的进程。交互进程既可以在前台运行，也可以在后台运行。批处理进程和终端没有联系，是一个进程序列。监控进程（也称系统守护进程）时Linux系统启动时启动的进程，并在后台运行。例如，httpd是著名的Apache服务器的监控进程。
kill命令的工作原理是，向Linux系统的内核发送一个系统操作信号和某个程序的进程标识号，然后系统内核就可以对进程标识号指定的进程进行操作。比如在top命令中，我们看到系统运行许多进程，有时就需要使用kill中止某些进程来提高系统资源。在讲解安装和登陆命令时，曾提到系统多个虚拟控制台的作用是当一个程序出错造成系统死锁时，可以切换到其它虚拟控制台工作关闭这个程序。此时使用的命令就是kill，因为kill是大多数Shell内部命令可以直接调用的。
5.应用实例
（1）**强行中止**（经常使用杀掉）一个进程标识号为324的进程：
＃kill －9 324
（2）解除Linux系统的死锁
在Linux中有时会发生这样一种情况：一个程序崩溃，并且处于死锁的状态。此时一般不用重新启动计算机，只需要中止(或者说是关闭)这个有问题的程序即可。当kill处于X-Window界面时，主要的程序(除了崩溃的程序之外)一般都已经正常启动了。此时打开一个终端，在那里中止有问题的程序。比如，如果Mozilla浏览器程序出现了锁死的情况，可以使用kill命令来中止所有包含有Mozolla浏览器的程序。首先用top命令查处该程序的PID，然后使用kill命令停止这个程序：
＃kill －SIGKILL XXX
其中，XXX是包含有Mozolla浏览器的程序的进程标识号。
（3）使用命令回收内存
我们知道内存对于系统是非常重要的，回收内存可以提高系统资源。kill命令可以及时地中止一些“越轨”的程序或很长时间没有相应的程序。例如，使用top命令发现一个无用 (Zombie) 的进程，此时可以使用下面命令：
＃kill －9 XXX
其中，XXX是无用的进程标识号。
然后使用下面命令：
＃free
此时会发现可用内存容量增加了。
（4）killall命令
Linux下还提供了一个killall命令，可以直接使用进程的名字而不是进程标识号，例如：
＃ killall -HUP inetd
四、 查看磁盘盘剩余空间 df   (df -h)
用法：df [选项]… [文件]…
显示每个<文件>所在的文件系统的信息，默认是显示所有文件系统。
长选项必须用的参数在使用短选项时也是必须的。
-a, –all              包括大小为 0 个块的文件系统-B, –block-size=大小 块以指定<大小>的字节为单位-h, –human-readable   以容易理解的格式印出文件系统大小 (例如 1K 234M 2G)-H, –si               类似 -h，但取 1000 的次方而不是 1024-i, –inodes           显示 inode
 信息而非块使用量-k                     即 –block-size=1K-l, –local            只显示本机的文件系统–no-sync          取得使用量数据前不进行 sync 动作 (默认)-P, –portability      使用 POSIX 输出格式–sync             取得使用量数据前先进行 sync 动作-t, –type=类型        只印出指定<类型>的文件系统信息-T, –print-type       印出文件系统类型-x,
 –exclude-type=类型    只印出不是指定<类型>的文件系统信息-v                     (此选项不作处理)
**汇总：**
top   -c
free  -m
kill  -9   2312 （说明：强制杀死进程 kill  -9  pid ）
df   -h
