# SpringMVC数据绑定全面示例（复杂对象，数组等） - z69183787的专栏 - CSDN博客
2014年12月01日 21:41:15[OkidoGreen](https://me.csdn.net/z69183787)阅读数：78924
已经使用SpringMVC开发了几个项目，平时也有不少朋友问我数据怎么传输，怎么绑定之类的话题，今天做一个总结。在此之前，大家可以看一下我之前的一篇关于Spring restful的文章[http://www.xdemo.org/spring-restful/](http://www.xdemo.org/spring-restful/)。
项目下载：[http://pan.baidu.com/share/link?shareid=955245807&uk=1896630845](http://pan.baidu.com/share/link?shareid=955245807&uk=1896630845)
首先贴出Controller的全部内容
```
```java
/**
```
```java
```
```java
* @author <a href="http://www.xdemo.org">xdemo.org</a>
```
```java
```
```java
*/
```
```java
@Controller
```
```java
@RequestMapping
```
```java
(value=
```
```java
"/request"
```
```java
)
```
```java
public
```
```java
class
```
```java
RequestParamController {
```
```java
```
```java
```
```java
/**
```
```java
```
```java
* 最简的配置，不是用@RequestParam,效果和get2一样，默认required=false
```
```java
```
```java
* 请求方式不限
```
```java
```
```java
* @param p1
```
```java
```
```java
* @param map
```
```java
```
```java
*/
```
```java
```
```java
@RequestMapping
```
```java
(value=
```
```java
"get0"
```
```java
)
```
```java
```
```java
public
```
```java
void
```
```java
get0(String p1,ModelMap map){
```
```java
```
```java
map.addAttribute(
```
```java
"p1"
```
```java
, p1);
```
```java
//往页面传递
```
```java
```
```java
}
```
```java
```
```java
```
```java
/**
```
```java
```
```java
* value="p1"表示参数名称<br>
```
```java
```
```java
* required=true表示如果没有传递参数"p1",则会报400参数异常<br>
```
```java
```
```java
* 使用void表示约定的路径，即request/get1.jsp
```
```java
```
```java
* @param p1
```
```java
```
```java
* @param map
```
```java
```
```java
*/
```
```java
```
```java
@RequestMapping
```
```java
(value=
```
```java
"get1"
```
```java
,method=RequestMethod.GET)
```
```java
```
```java
public
```
```java
void
```
```java
get1(
```
```java
@RequestParam
```
```java
(value=
```
```java
"p1"
```
```java
,required=
```
```java
true
```
```java
)String p1,ModelMap map){
```
```java
```
```java
map.addAttribute(
```
```java
"p1"
```
```java
, p1);
```
```java
//往页面传递
```
```java
```
```java
}
```
```java
```
```java
```
```java
/**
```
```java
```
```java
* 和get1不同的是，p1这个参数不一定非得需要，即使不给这个参数，也可以正常运行<br>
```
```java
```
```java
* 返回String是视图的名称，只要将map赋值，给的值也会带到前抬
```
```java
```
```java
* @param p1
```
```java
```
```java
* @param map
```
```java
```
```java
* @return
```
```java
```
```java
*/
```
```java
```
```java
@RequestMapping
```
```java
(value=
```
```java
"get2"
```
```java
,method=RequestMethod.GET)
```
```java
```
```java
public
```
```java
String get2(
```
```java
@RequestParam
```
```java
(value=
```
```java
"p1"
```
```java
,required=
```
```java
false
```
```java
)String p1,ModelMap map){
```
```java
```
```java
map.addAttribute(
```
```java
"p1"
```
```java
, p1);
```
```java
//往页面传递
```
```java
```
```java
return
```
```java
"request/get2"
```
```java
;
```
```java
```
```java
}
```
```java
```
```java
```
```java
/**
```
```java
```
```java
* 和get2不同的是，返回的对象是ModelAndView
```
```java
```
```java
* 表示绑定了视图和数据的对象，数据就是ModelMap中的Key-Value
```
```java
```
```java
* @param p1
```
```java
```
```java
* @param map
```
```java
```
```java
* @return
```
```java
```
```java
*/
```
```java
```
```java
@RequestMapping
```
```java
(value=
```
```java
"get3"
```
```java
,method=RequestMethod.GET)
```
```java
```
```java
public
```
```java
ModelAndView get3(
```
```java
@RequestParam
```
```java
(value=
```
```java
"p1"
```
```java
,required=
```
```java
false
```
```java
)String p1,ModelMap map){
```
```java
```
```java
map.addAttribute(
```
```java
"p1"
```
```java
, p1);
```
```java
```
```java
return
```
```java
new
```
```java
ModelAndView(
```
```java
"request/get2"
```
```java
,map);
```
```java
```
```java
}
```
```java
```
```java
```
```java
/**
```
```java
```
```java
* 跳转到页面
```
```java
```
```java
* @throws NoSuchAlgorithmException
```
```java
```
```java
*/
```
```java
```
```java
@RequestMapping
```
```java
(
```
```java
"userForm"
```
```java
)
```
```java
```
```java
public
```
```java
String userForm(HttpServletResponse response)
```
```java
throws
```
```java
NoSuchAlgorithmException{
```
```java
```
```java
CookieUtils.writeCookie(response, -
```
```java
1
```
```java
,
```
```java
"x"
```
```java
,
```
```java
"dddddddddddddd"
```
```java
);
```
```java
```
```java
return
```
```java
"request/userForm"
```
```java
;
```
```java
```
```java
}
```
```java
```
```java
```
```java
/**
```
```java
```
```java
* 绑定数据到User对象，支持Map,Set,List,Array等，但是需要使用下标，不是很灵活
```
```java
```
```java
* 请查看user2的写法
```
```java
```
```java
* @param user
```
```java
```
```java
* @param map
```
```java
```
```java
*/
```
```java
```
```java
@RequestMapping
```
```java
(value=
```
```java
"user"
```
```java
)
```
```java
```
```java
public
```
```java
void
```
```java
user(User user,ModelMap map){
```
```java
```
```java
map.addAttribute(
```
```java
"user"
```
```java
, user);
```
```java
```
```java
}
```
```java
```
```java
```
```java
/**
```
```java
```
```java
* 这里可以接受List，Array，Set等，写法是一样的，注意前端写法<br>
```
```java
```
```java
* 另外这个必须要使用MappingJacksonHttpMessageConverter这个消息转换器
```
```java
```
```java
* 请看我上面的配置
```
```java
```
```java
* @param user
```
```java
```
```java
* @return
```
```java
```
```java
*/
```
```java
```
```java
@ResponseBody
```
```java
```
```java
@RequestMapping
```
```java
(
```
```java
"user2"
```
```java
)
```
```java
```
```java
public
```
```java
String user2(
```
```java
@RequestBody
```
```java
List<User> user){
```
```java
```
```java
System.out.println(user.size());
```
```java
```
```java
return
```
```java
""
```
```java
;
```
```java
```
```java
}
```
```java
```
```java
```
```java
/**
```
```java
```
```java
* 这个方法只支持POST
```
```java
```
```java
* @param s
```
```java
```
```java
* @return
```
```java
```
```java
*/
```
```java
```
```java
@ResponseBody
```
```java
```
```java
@RequestMapping
```
```java
(
```
```java
"array"
```
```java
)
```
```java
```
```java
public
```
```java
String array(
```
```java
@RequestBody
```
```java
String[] s){
```
```java
```
```java
System.out.println(s.length);
```
```java
```
```java
return
```
```java
""
```
```java
;
```
```java
```
```java
}
```
```java
```
```java
```
```java
/**
```
```java
```
```java
* 这个比较奇葩，来自一位朋友的写法，即.xxx/5,4这样的请求，SpringMVC竟然也是支持的
```
```java
```
```java
* @param id
```
```java
```
```java
* @return
```
```java
```
```java
*/
```
```java
```
```java
@ResponseBody
```
```java
```
```java
@RequestMapping
```
```java
(value=
```
```java
"array/{id}"
```
```java
,method=RequestMethod.GET)
```
```java
```
```java
public
```
```java
String array2(
```
```java
@PathVariable
```
```java
(
```
```java
"id"
```
```java
)Long[] id){
```
```java
```
```java
System.out.println(id.length);
```
```java
```
```java
return
```
```java
"array length:"
```
```java
+id.length+
```
```java
""
```
```java
;
```
```java
```
```java
}
```
```java
```
```java
```
```java
/**
```
```java
```
```java
* 一个表单对应多个Bean对象，这些Bean中有相同的属性，那么需要在分装他们的一个整体的对象
```
```java
```
```java
* 使之支持object.property的表达式
```
```java
```
```java
* @param c
```
```java
```
```java
*/
```
```java
```
```java
@ResponseBody
```
```java
```
```java
@RequestMapping
```
```java
(
```
```java
"complex"
```
```java
)
```
```java
```
```java
public
```
```java
void
```
```java
complexObject(C c){
```
```java
```
```java
System.out.println(c.getA().getX());
```
```java
```
```java
System.out.println(c.getB().getX());
```
```java
```
```java
```
```java
}
```
```java
```
```java
```
```java
/**
```
```java
```
```java
* 读取Cookie的值
```
```java
```
```java
* @param x
```
```java
```
```java
* @return
```
```java
```
```java
*/
```
```java
```
```java
@ResponseBody
```
```java
```
```java
@RequestMapping
```
```java
(
```
```java
"cookie"
```
```java
)
```
```java
```
```java
public
```
```java
String cookie(
```
```java
@CookieValue
```
```java
(
```
```java
"x"
```
```java
)String x){
```
```java
```
```java
return
```
```java
x;
```
```java
```
```java
}
```
```java
```
```java
}
```
```
这种方式支持get和post，参数可选
```
```java
/**
```
```java
* 最简的配置，不是用@RequestParam,效果和get2一样，默认required=false
```
```java
* 请求方式不限
```
```java
* @param p1
```
```java
* @param map
```
```java
*/
```
```java
@RequestMapping
```
```java
(value=
```
```java
"get0"
```
```java
)
```
```java
public
```
```java
void
```
```java
get0(String p1,ModelMap map){
```
```java
```
```java
map.addAttribute(
```
```java
"p1"
```
```java
, p1);
```
```java
//往页面传递
```
```java
}
```
```
访问方式简单的比如[http://localhost:8080/springmvc-param/request/get0?p1=xxx。](http://localhost:8080/springmvc-param/request/get0?p1=xxx%E3%80%82)
这种方式支持get，参数必须
```
```java
/**
```
```java
* value="p1"表示参数名称<br>
```
```java
* required=true表示如果没有传递参数"p1",则会报400参数异常<br>
```
```java
* 使用void表示约定的路径，即request/get1.jsp
```
```java
* @param p1
```
```java
* @param map
```
```java
*/
```
```java
@RequestMapping
```
```java
(value=
```
```java
"get1"
```
```java
,method=RequestMethod.GET)
```
```java
public
```
```java
void
```
```java
get1(
```
```java
@RequestParam
```
```java
(value=
```
```java
"p1"
```
```java
,required=
```
```java
true
```
```java
)String p1,ModelMap map){
```
```java
```
```java
map.addAttribute(
```
```java
"p1"
```
```java
, p1);
```
```java
//往页面传递
```
```java
}
```
```
这种方式和第一种不同的是，指定了访问访问必须为GET,而且参数是必须的，可以通过如下方式访问这个地址：http://localhost:8080/springmvc-param/request/get1?p1=xxxx。
这种方式仅支持GET，参数可选
```
```java
/**
```
```java
* 和get1不同的是，p1这个参数不一定非得需要，即使不给这个参数，也可以正常运行<br>
```
```java
* 返回String是视图的名称，只要将map赋值，给的值也会带到前抬
```
```java
* @param p1
```
```java
* @param map
```
```java
* @return
```
```java
*/
```
```java
@RequestMapping
```
```java
(value=
```
```java
"get2"
```
```java
,method=RequestMethod.GET)
```
```java
public
```
```java
String get2(
```
```java
@RequestParam
```
```java
(value=
```
```java
"p1"
```
```java
,required=
```
```java
false
```
```java
)String p1,ModelMap map){
```
```java
```
```java
map.addAttribute(
```
```java
"p1"
```
```java
, p1);
```
```java
//往页面传递
```
```java
```
```java
return
```
```java
"request/get2"
```
```java
;
```
```java
}
```
```
这个方法和第二种唯一不同的就是参数是可选的，其他没有不同。
这种方式仅支持GET，参数可选
```
```java
/**
```
```java
* 和get2不同的是，返回的对象是ModelAndView
```
```java
* 表示绑定了视图和数据的对象，数据就是ModelMap中的Key-Value
```
```java
* @param p1
```
```java
* @param map
```
```java
* @return
```
```java
*/
```
```java
@RequestMapping
```
```java
(value=
```
```java
"get3"
```
```java
,method=RequestMethod.GET)
```
```java
public
```
```java
ModelAndView get3(
```
```java
@RequestParam
```
```java
(value=
```
```java
"p1"
```
```java
,required=
```
```java
false
```
```java
)String p1,ModelMap map){
```
```java
```
```java
map.addAttribute(
```
```java
"p1"
```
```java
, p1);
```
```java
//往页面传递
```
```java
```
```java
return
```
```java
new
```
```java
ModelAndView(
```
```java
"request/get2"
```
```java
,map);
```
```java
}
```
```
ModelAndView表示绑定了数据的视图，可以通过EL表达式去取值。
```
```java
/**
```
```java
```
```java
* 跳转到页面
```
```java
```
```java
* @throws NoSuchAlgorithmException
```
```java
```
```java
*/
```
```java
@RequestMapping
```
```java
(
```
```java
"userForm"
```
```java
)
```
```java
public
```
```java
String userForm(HttpServletResponse response)
```
```java
throws
```
```java
NoSuchAlgorithmException{
```
```java
```
```java
CookieUtils.writeCookie(response, -
```
```java
1
```
```java
,
```
```java
"x"
```
```java
,
```
```java
"dddddddddddddd"
```
```java
);
```
```java
```
```java
return
```
```java
"request/userForm"
```
```java
;
```
```java
}
```
```java
/**
```
```java
* 读取Cookie的值
```
```java
* @param x
```
```java
* @return
```
```java
*/
```
```java
@ResponseBody
```
```java
@RequestMapping
```
```java
(
```
```java
"cookie"
```
```java
)
```
```java
public
```
```java
String cookie(
```
```java
@CookieValue
```
```java
(
```
```java
"x"
```
```java
)String x){
```
```java
```
```java
return
```
```java
x;
```
```java
}
```
```
先访问http://localhost:8080/springmvc-param/request/userForm这个方法，跳转到一个页面，并向浏览器写入Cookie，第二个方法访问的时候即可通过@CookieValue方式来取到Cookie中的值。
绑定数据到一个对象上，支持get和post
一个User，一个Phone，一个User拥有多个Phone，为了演示，User中有一个List和Array的Phone的集合
```
```java
public
```
```java
class
```
```java
User {
```
```java
```
```java
```
```java
private
```
```java
String userName;
```
```java
```
```java
private
```
```java
String address;
```
```java
```
```java
private
```
```java
List<Phone> phones;
```
```java
```
```java
private
```
```java
Phone[] phones2;
```
```java
```
```java
//省略GET和SET...
```
```java
}
```
```
```
```java
public
```
```java
class
```
```java
Phone {
```
```java
```
```java
private
```
```java
String brand;
```
```java
//手机品牌
```
```java
}
```
```
Controller方法如下
```
```java
/**
```
```java
* 绑定数据到User对象，支持Map,Set,List,Array等，但是需要使用下标，不是很灵活
```
```java
* 请查看user2的写法
```
```java
* @param user
```
```java
* @param map
```
```java
*/
```
```java
@RequestMapping
```
```java
(value=
```
```java
"user"
```
```java
)
```
```java
public
```
```java
void
```
```java
user(User user,ModelMap map){
```
```java
```
```java
map.addAttribute(
```
```java
"user"
```
```java
, user);
```
```java
}
```
```
HTML表单如下
```
`<``form``action``=``"request/user"``method``=``"get"``style``=``"border:1px solid red;"``>`
`     ``<``table``>`
`           ``<``tr``><``td``colspan``=``"2"``>这个表单演示了对象数据绑定的方法，以及对象中的Set，List，Array数据绑定（三者类似）</``td``></``tr``>`
`            ``<``tr``>`
`                ``<``td``>用户名：</``td``>`
`                ``<``td``><``input``type``=``"text"``name``=``"userName"``value``=``"张三"``></``td``>`
`            ``</``tr``>`
`            ``<``tr``>`
`                ``<``td``>用户地址：</``td``>`
`                ``<``td``><``input``type``=``"text"``name``=``"address"``value``=``"江苏省无锡市新区菱湖大道200号"``><``br``></``td``>`
`            ``</``tr``>`
`            ``<``tr``>`
`                ``<``td``>手机品牌：</``td``>`
`                ``<``td``>`
`                    ``<``input``type``=``"text"``name``=``"phones[0].brand"``value``=``"SONY"``><``br``>`
`                    ``<``input``type``=``"text"``name``=``"phones[1].brand"``value``=``"MOTO"``><``br``>`
`                    ``<``input``type``=``"text"``name``=``"phones[2].brand"``value``=``"LG"``><``br``>`
`                 ``</``td``>`
`             ``</``tr``>`
`             ``<``tr``>`
`                 ``<``td``>手机品牌2：</``td``>`
`                 ``<``td``>`
`                     ``<``input``type``=``"text"``name``=``"phones2[0].brand"``value``=``"Apple"``><``br``>`
`                     ``<``input``type``=``"text"``name``=``"phones2[1].brand"``value``=``"Samsung"``><``br``>`
`                     ``<``input``type``=``"text"``name``=``"phones2[2].brand"``value``=``"HTC"``><``br``>`
`                 ``</``td``>`
`              ``</``tr``>`
`              ``<``tr``>`
`                  ``<``td``colspan``=``"2"``style``=``"text-align: right;"``>`
`                  ``<``input``type``=``"submit"``value``=``"提交"``>`
`                  ``</``td``>`
`               ``</``tr``>`
`       ``</``table``>`
`</``form``>`
```
一对多的时候，使用多一方的在一一方的对象中的属性名，加上数组下标，即phones[0].brand,phones[1].brand即可绑定到User的phones属性上，这种方法的局限性就是要求下标是正确的，否则会无法绑定，不是很方便，但是也有其适用场景。
下面这种方法就是比较方便了，仅支持post，但是必须要在消息转换器中配置JSON解析器
```
```java
<bean
```
```java
class
```
```java
=
```
```java
"org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"
```
```java
></bean>
```
```
并注册到RequestMappingHandlerAdapter的messageConverters中。
Controller如下：
```
```java
/**
```
```java
```
```java
* 这里可以接受List，Array，Set等，写法是一样的，注意前端写法<br>
```
```java
```
```java
* 另外这个必须要使用MappingJacksonHttpMessageConverter这个消息转换器
```
```java
```
```java
* 请看我上面的配置
```
```java
```
```java
* @param user
```
```java
```
```java
* @return
```
```java
```
```java
*/
```
```java
```
```java
@ResponseBody
```
```java
```
```java
@RequestMapping
```
```java
(
```
```java
"user2"
```
```java
)
```
```java
```
```java
public
```
```java
String user2(
```
```java
@RequestBody
```
```java
List<User> user){
```
```java
```
```java
System.out.println(user.size());
```
```java
```
```java
return
```
```java
""
```
```java
;
```
```java
```
```java
}
```
```
Javascript如下
```
`var``userList= ``new``Array();`
`userList.push({userName:``"xx"``,address:``"fff"``});`
`userList.push({userName:``"zzzz"``,address:``"ggggg"``});`
`$.ajax({`
`  ``url:``"request/user2"``,`
`  ``type:``"post"``,`
`  ``data:JSON.stringify(userList),`
`  ``dataType:``"json"``,`
`  ``contentType:``"application/json"``,`
`  ``success:``function``(data){`
`   ``},error:``function``(data){`
`  ``}`
`});`
```
该方法仅支持POST的方式，会使用到json2.js这个类库，注意设置contentType:"application/json"这个属性，否则会报415未知的类型异常。
传递简单的字符串数组，仅支持POST方式
```
```java
/**
```
```java
* 传递简单的字符串数组
```
```java
* 这个方法只支持POST
```
```java
* @param s
```
```java
* @return
```
```java
*/
```
```java
@ResponseBody
```
```java
@RequestMapping
```
```java
(
```
```java
"array"
```
```java
)
```
```java
public
```
```java
String array(
```
```java
@RequestBody
```
```java
String[] s){
```
```java
```
```java
System.out.println(s.length);
```
```java
```
```java
return
```
```java
""
```
```java
;
```
```java
```
```java
}
```
```
```
`var``array=``new``Array();`
`array.push(1);`
`array.push(2);`
`array.push(3);`
`array.push(4);`
`array.push(5);`
`$.ajax({`
`    ``url:``"request/array"``,`
`    ``type:``"post"``,`
`    ``dataType:``"json"``,`
`    ``data:JSON.stringify(array),`
`    ``dataType:``"json"``,`
`    ``contentType:``"application/json"``,`
`    ``success:``function``(data){`
`    ``},error:``function``(data){`
`    ``}`
`});`
```
和上面的方法类似，注意contentType:"application/json",否则同样的415错误。
下面的方法是restful中的路径变量,支持get,post,delete等，如：xxx/1,xxx/2这种方式，经测试，这个方法的奇葩之处在于"xxx/5,4"以及"xxx/[5,4]"的效果是一样的，看代码：
```
```java
/**
```
```java
* 这个比较奇葩，来自一位朋友的写法，即.xxx/5,4这样的请求，SpringMVC竟然也是支持的
```
```java
* @param id
```
```java
* @return
```
```java
*/
```
```java
@ResponseBody
```
```java
@RequestMapping
```
```java
(value=
```
```java
"array/{id}"
```
```java
,method=RequestMethod.GET)
```
```java
public
```
```java
String array2(
```
```java
@PathVariable
```
```java
(
```
```java
"id"
```
```java
)Long[] id){
```
```java
```
```java
System.out.println(id.length);
```
```java
```
```java
return
```
```java
"array length:"
```
```java
+id.length+
```
```java
""
```
```java
;
```
```java
}
```
```
可以直接将后面的路径变量，转换成相应的数组。可以在浏览器输入：http://localhost:8080/springmvc-param/request/array/5,4,3,2,1或者http://localhost:8080/springmvc-param/request/array/[5,4,3,2,1],都可以转换成数组。
如果一个表单对应多个实体类，恰好这些类中具有相同的属性，这时候SpringMVC就犯难了，我们要做的是让SpringMVC明白我们在给谁赋值。
支持post,get,put
如下，A，B，C，其中C中包含了A和B两个成员变量
```
```java
public
```
```java
class
```
```java
A {
```
```java
```
```java
private
```
```java
String x;
```
```java
}
```
```
```
```java
public
```
```java
class
```
```java
B {
```
```java
```
```java
private
```
```java
String x;
```
```java
}
```
```
```
```java
public
```
```java
class
```
```java
C {
```
```java
```
```java
private
```
```java
A a;
```
```java
```
```java
private
```
```java
B b;
```
```java
}
```
```
Controller如下
```
```java
/**
```
```java
* 一个表单对应多个Bean对象，这些Bean中有相同的属性，那么需要在分装他们的一个整体的对象
```
```java
* 使之支持object.property的表达式
```
```java
* @param c
```
```java
*/
```
```java
@ResponseBody
```
```java
@RequestMapping
```
```java
(
```
```java
"complex"
```
```java
)
```
```java
public
```
```java
void
```
```java
complexObject(C c){
```
```java
```
```java
System.out.println(c.getA().getX());
```
```java
```
```java
System.out.println(c.getB().getX());
```
```java
}
```
```
HTML如下：
```
`<``form``action``=``"request/complex"``method``=``"POST"``style``=``"border:1px solid red;"``>`
`      ``<``table``>`
`             ``<``tr``>`
`                 ``<``td``>A对象：</``td``>`
`                 ``<``td``><``input``type``=``"text"``name``=``"a.x"``value``=``"xxx"``></``td``>`
`              ``</``tr``>`
`              ``<``tr``>`
`                  ``<``td``>B对象：</``td``>`
`                  ``<``td``><``input``type``=``"text"``name``=``"b.x"``value``=``"yyy"``><``br``></``td``>`
`              ``</``tr``>`
`              ``<``tr``>`
`                  ``<``td``colspan``=``"2"``style``=``"text-align: right;"``>`
`                     ``<``input``type``=``"submit"``value``=``"提交"``>`
`                  ``</``td``>`
`              ``</``tr``>`
`        ``</``table``>`
`</``form``>`
```
通过object.property即可指定给谁赋值。
另外一个是关于Session取值的
代码如下
```
```java
@Controller
```
```java
@SessionAttributes
```
```java
(value=
```
```java
"user"
```
```java
)
```
```java
@RequestMapping
```
```java
(
```
```java
"/session"
```
```java
)
```
```java
public
```
```java
class
```
```java
SessionController {
```
```java
```
```java
@RequestMapping
```
```java
(method=RequestMethod.GET)
```
```java
```
```java
public
```
```java
String setUser(ModelMap map){
```
```java
```
```java
User user=
```
```java
new
```
```java
User();
```
```java
```
```java
user.setAddress(
```
```java
"xxx"
```
```java
);
```
```java
```
```java
user.setUserName(
```
```java
"yyy"
```
```java
);
```
```java
```
```java
map.put(
```
```java
"user"
```
```java
, user);
```
```java
```
```java
return
```
```java
"request/userForm"
```
```java
;
```
```java
```
```java
}
```
```java
```
```java
```
```java
@ResponseBody
```
```java
```
```java
@RequestMapping
```
```java
(value=
```
```java
"getUser"
```
```java
,method=RequestMethod.GET)
```
```java
```
```java
public
```
```java
String getUser(
```
```java
@ModelAttribute
```
```java
(
```
```java
"user"
```
```java
)User user){
```
```java
```
```java
System.out.println(user.getUserName());
```
```java
```
```java
return
```
```java
user.getUserName();
```
```java
```
```java
}
```
```java
}
```
```
在Controller上加上注解@SessionAttributes(value="user")，再使用ModelMap的put方法（非addAttribute方法），然后在getUser方法中，使用@ModelAttribute("user")即可取得session中的user对象
Maven依赖：
```
```xml
<
```
```xml
properties
```
```xml
>
```
```xml
```
```xml
<
```
```xml
springframework
```
```xml
>4.0.5.RELEASE</
```
```xml
springframework
```
```xml
>
```
```xml
```
```xml
<
```
```xml
servlet
```
```xml
>3.1.0</
```
```xml
servlet
```
```xml
>
```
```xml
```
```xml
<
```
```xml
jstl
```
```xml
>1.2</
```
```xml
jstl
```
```xml
>
```
```xml
```
```xml
<
```
```xml
xstream
```
```xml
>1.4.7</
```
```xml
xstream
```
```xml
>
```
```xml
```
```xml
<
```
```xml
commons-fileupload
```
```xml
>1.3.1</
```
```xml
commons-fileupload
```
```xml
>
```
```xml
```
```xml
<
```
```xml
jackson
```
```xml
>1.9.13</
```
```xml
jackson
```
```xml
>
```
```xml
</
```
```xml
properties
```
```xml
>
```
```xml
<
```
```xml
dependencies
```
```xml
>
```
```xml
```
```xml
<!-- jackson json解析支持 -->
```
```xml
```
```xml
<
```
```xml
dependency
```
```xml
>
```
```xml
```
```xml
<
```
```xml
groupId
```
```xml
>org.codehaus.jackson</
```
```xml
groupId
```
```xml
>
```
```xml
```
```xml
<
```
```xml
artifactId
```
```xml
>jackson-mapper-asl</
```
```xml
artifactId
```
```xml
>
```
```xml
```
```xml
<
```
```xml
version
```
```xml
>${jackson}</
```
```xml
version
```
```xml
>
```
```xml
```
```xml
</
```
```xml
dependency
```
```xml
>
```
```xml
```
```xml
<!-- Spring web mvc -->
```
```xml
```
```xml
<
```
```xml
dependency
```
```xml
>
```
```xml
```
```xml
<
```
```xml
groupId
```
```xml
>org.springframework</
```
```xml
groupId
```
```xml
>
```
```xml
```
```xml
<
```
```xml
artifactId
```
```xml
>spring-webmvc</
```
```xml
artifactId
```
```xml
>
```
```xml
```
```xml
<
```
```xml
version
```
```xml
>${springframework}</
```
```xml
version
```
```xml
>
```
```xml
```
```xml
</
```
```xml
dependency
```
```xml
>
```
```xml
```
```xml
<!-- servlet -->
```
```xml
```
```xml
<
```
```xml
dependency
```
```xml
>
```
```xml
```
```xml
<
```
```xml
groupId
```
```xml
>javax.servlet</
```
```xml
groupId
```
```xml
>
```
```xml
```
```xml
<
```
```xml
artifactId
```
```xml
>javax.servlet-api</
```
```xml
artifactId
```
```xml
>
```
```xml
```
```xml
<
```
```xml
version
```
```xml
>${servlet}</
```
```xml
version
```
```xml
>
```
```xml
```
```xml
</
```
```xml
dependency
```
```xml
>
```
```xml
```
```xml
<!-- JSTL -->
```
```xml
```
```xml
<
```
```xml
dependency
```
```xml
>
```
```xml
```
```xml
<
```
```xml
groupId
```
```xml
>jstl</
```
```xml
groupId
```
```xml
>
```
```xml
```
```xml
<
```
```xml
artifactId
```
```xml
>jstl</
```
```xml
artifactId
```
```xml
>
```
```xml
```
```xml
<
```
```xml
version
```
```xml
>${jstl}</
```
```xml
version
```
```xml
>
```
```xml
```
```xml
</
```
```xml
dependency
```
```xml
>
```
```xml
```
```xml
<!--xml解析支持 -->
```
```xml
```
```xml
<
```
```xml
dependency
```
```xml
>
```
```xml
```
```xml
<
```
```xml
groupId
```
```xml
>com.thoughtworks.xstream</
```
```xml
groupId
```
```xml
>
```
```xml
```
```xml
<
```
```xml
artifactId
```
```xml
>xstream</
```
```xml
artifactId
```
```xml
>
```
```xml
```
```xml
<
```
```xml
version
```
```xml
>${xstream}</
```
```xml
version
```
```xml
>
```
```xml
```
```xml
</
```
```xml
dependency
```
```xml
>
```
```xml
</
```
```xml
dependencies
```
```xml
>
```
```
Spring配置
```
```java
@EnableWebMvc
```
```java
// 启用SpringMVC
```
```java
@ComponentScan
```
```java
(basePackages =
```
```java
"org.xdemo.example.springmvc"
```
```java
)
```
```java
// 配置包扫描路径
```
```java
@Configuration
```
```java
// 启用注解式配置
```
```java
//继承WebMvcConfigurerAdapter可以是我们可以重写一些资源或者一些处理器
```
```java
public
```
```java
class
```
```java
AppConfig
```
```java
extends
```
```java
WebMvcConfigurerAdapter {
```
```java
```
```java
/**
```
```java
```
```java
* 设置资源路径
```
```java
```
```java
*/
```
```java
```
```java
@Override
```
```java
```
```java
public
```
```java
void
```
```java
addResourceHandlers(ResourceHandlerRegistry registry) {
```
```java
```
```java
registry.addResourceHandler(
```
```java
"/resources/**"
```
```java
).addResourceLocations(
```
```java
"/resources/"
```
```java
).setCachePeriod(
```
```java
31556926
```
```java
);
```
```java
```
```java
}
```
```java
```
```java
/**
```
```java
```
```java
* 设置默认的Servlet请求处理器
```
```java
```
```java
*/
```
```java
```
```java
@Override
```
```java
```
```java
public
```
```java
void
```
```java
configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
```
```java
```
```java
configurer.enable();
```
```java
```
```java
}
```
```java
```
```java
/**
```
```java
```
```java
* 设置视图解析器，以及页面路径
```
```java
```
```java
*
```
```java
```
```java
* @return
```
```java
```
```java
*/
```
```java
```
```java
@Bean
```
```java
```
```java
public
```
```java
InternalResourceViewResolver getInternalResourceViewResolver() {
```
```java
```
```java
InternalResourceViewResolver resolver =
```
```java
new
```
```java
InternalResourceViewResolver();
```
```java
```
```java
resolver.setPrefix(
```
```java
"/WEB-INF/views/"
```
```java
);
```
```java
```
```java
resolver.setSuffix(
```
```java
".jsp"
```
```java
);
```
```java
```
```java
return
```
```java
resolver;
```
```java
```
```java
}
```
```java
```
```java
```
```java
/**
```
```java
```
```java
* 配置消息转换器
```
```java
```
```java
*/
```
```java
```
```java
@Override
```
```java
```
```java
public
```
```java
void
```
```java
configureMessageConverters(
```
```java
```
```java
List<HttpMessageConverter<?>> converters) {converters.add(converter());
```
```java
```
```java
```
```java
}
```
```java
```
```java
```
```java
/**
```
```java
```
```java
* JSON格式的支持，这个很重要，只有加上这个JSON的消息转换器，才能够支持JSON格式数据的绑定
```
```java
```
```java
* @return
```
```java
```
```java
*/
```
```java
```
```java
@Bean
```
```java
```
```java
public
```
```java
MappingJacksonHttpMessageConverter converter() {
```
```java
```
```java
MappingJacksonHttpMessageConverter converter =
```
```java
new
```
```java
MappingJacksonHttpMessageConverter();
```
```java
```
```java
return
```
```java
converter;
```
```java
```
```java
}
```
```java
}
```
```
转载请注明来源：[http://www.xdemo.org/springmvc-data-bind/](http://www.xdemo.org/springmvc-data-bind/)
