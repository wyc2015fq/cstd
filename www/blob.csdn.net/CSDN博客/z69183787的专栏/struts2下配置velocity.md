# struts2下配置velocity - z69183787的专栏 - CSDN博客
2014年05月21日 19:14:27[OkidoGreen](https://me.csdn.net/z69183787)阅读数：1978
1.通过maven加载依赖
```
```xml
<
```
```xml
dependency
```
```xml
>
```
```xml
```
```xml
<
```
```xml
groupId
```
```xml
>org.apache.velocity</
```
```xml
groupId
```
```xml
>
```
```xml
```
```xml
<
```
```xml
artifactId
```
```xml
>velocity</
```
```xml
artifactId
```
```xml
>
```
```xml
```
```xml
<
```
```xml
version
```
```xml
>1.7</
```
```xml
version
```
```xml
>
```
```xml
</
```
```xml
dependency
```
```xml
>
```
```xml
<
```
```xml
dependency
```
```xml
>
```
```xml
```
```xml
<
```
```xml
groupId
```
```xml
>org.apache.velocity</
```
```xml
groupId
```
```xml
>
```
```xml
```
```xml
<
```
```xml
artifactId
```
```xml
>velocity-tools</
```
```xml
artifactId
```
```xml
>
```
```xml
```
```xml
<
```
```xml
version
```
```xml
>2.0</
```
```xml
version
```
```xml
>
```
```xml
</
```
```xml
dependency
```
```xml
>
```
```
2.编辑web.xml
```
```xml
<!--
 定义Velocity -->
```
```xml
<
```
```xml
servlet
```
```xml
>
```
```xml
```
```xml
<
```
```xml
servlet-name
```
```xml
>velocitylayout</
```
```xml
servlet-name
```
```xml
>
```
```xml
```
```xml
<
```
```xml
servlet-class
```
```xml
>org.apache.velocity.tools.view.servlet.VelocityViewServlet</
```
```xml
servlet-class
```
```xml
>
```
```xml
</
```
```xml
servlet
```
```xml
>
```
```xml
<
```
```xml
servlet-mapping
```
```xml
>
```
```xml
```
```xml
<
```
```xml
servlet-name
```
```xml
>velocitylayout</
```
```xml
servlet-name
```
```xml
>
```
```xml
```
```xml
<
```
```xml
url-pattern
```
```xml
>*.vm</
```
```xml
url-pattern
```
```xml
>
```
```xml
</
```
```xml
servlet-mapping
```
```xml
>
```
```
3.在struts.xml中添加测试使用的action
```
```
<package
 name=
```
`"frame-default"``extends=``"struts-default,json-default"``>`
`    `
```
<action
 name=
```
`"example_*"``method=``"{1}"``class=``"exampleAction"``>`
`        ``<result>/WEB-INF/vm/example/{1}.vm</result>`
`    ``</action>`
`</package>`
```
4.在/WEB_INF/vm下创建login.vm
```
`<``html``>`
`    ``<``head``>`
`        ``<``title``>Velocity</``title``>`
`        ``<``meta``http-equiv``=``"content-type"``content``=`
```
"text/html;
 charset=UTF-8"
```
`>`
`    ``</``head``>`
`    ``<``body``>`
`        ``<``h2`
```
>你好:
 $username</
```
`h2``>`
`    ``</``body``>`
`</``html``>`
```
5.创建ExampleAction
```
```java
@Service
```
```java
(
```
```java
"exampleAction"
```
```java
)
```
```java
public
```
```java
class
```
```java
ExampleAction
```
```java
extends
```
```java
BaseAction
 {
```
```java
```
```java
@Autowired
```
```java
```
```java
private
```
```java
ExampleService
 exampleService;
```
```java
```
```java
private
```
```java
String
 username;
```
```java
```
```java
private
```
```java
String
 password;
```
```java
```
```java
public
```
```java
String
 getUsername() {
```
```java
```
```java
return
```
```java
username;
```
```java
```
```java
}
```
```java
```
```java
public
```
```java
void
```
```java
setUsername(String
 username) {
```
```java
```
```java
this
```
```java
.username
 = username;
```
```java
```
```java
}
```
```java
```
```java
public
```
```java
String
 getPassword() {
```
```java
```
```java
return
```
```java
password;
```
```java
```
```java
}
```
```java
```
```java
public
```
```java
void
```
```java
setPassword(String
 password) {
```
```java
```
```java
this
```
```java
.password
 = password;
```
```java
```
```java
}
```
```java
```
```java
public
```
```java
String
 login()
```
```java
throws
```
```java
Exception
 {
```
```java
```
```java
System.out.println(
```
```java
"login"
```
```java
);
```
```java
```
```java
this
```
```java
.exampleService.save(
```
```java
this
```
```java
.getUsername());
```
```java
```
```java
return
```
```java
Action.SUCCESS;
```
```java
```
```java
}
```
```java
```
```java
public
```
```java
String
 execute()
```
```java
throws
```
```java
Exception
 {
```
```java
```
```java
System.out.println(
```
```java
"execute"
```
```java
);
```
```java
```
```java
return
```
```java
Action.SUCCESS;
```
```java
```
```java
}
```
```java
}
```
```
6.最后在index.html中
```
`<``html``>`
`    ``<``head``>`
`        ``<``title``>Example</``title``>`
`        ``<``meta``http-equiv``=``"content-type"``content``=`
```
"text/html;
 charset=UTF-8"
```
`/>`
`    ``</``head``>`
`    ``<``body``>`
`        ``<``h2`
```
>Hello
 World!</
```
`h2``>`
`        ``<``form``method``=``"post"``action``=``"example_login.action"``>`
`            ``<``table``align``=``"center"``>`
`                ``<``caption``><``h3``>用户登录</``h3``></``caption``>`
`                ``<``tr``>`
`                    ``<``td``>用户名：<``input``type``=``"text"``name``=``"username"``/></``td``>`
`                ``</``tr``>`
`                ``<``tr``>`
`                    ``<``td``>密码：<``input``type``=``"text"``name``=``"password"``/></``td``>`
`                ``</``tr``>`
`                ``<``tr``align``=``"center"``>`
`                    ``<``td``colspan``=``"2"``>`
`                        ``<``input``type``=``"submit"``value``=``"登录"``/>`
`                        ``<``input``type``=``"reset"``value``=``"重填"``/>`
`                    ``</``td``>`
`                ``</``tr``>`
`            ``</``table``>`
`        ``</``form``>`
`    ``</``body``>`
`</``html``>`
```
本文出自 “[十年一剑](http://sauron.blog.51cto.com/)” 博客，请务必保留此出处[http://sauron.blog.51cto.com/5231038/1271587](http://sauron.blog.51cto.com/5231038/1271587)
