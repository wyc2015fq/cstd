# Spring 3之MVC & Security简单整合开发（一） - z69183787的专栏 - CSDN博客
2014年08月13日 20:47:57[OkidoGreen](https://me.csdn.net/z69183787)阅读数：2698
个人分类：[安全框架-SpringSecurity																[SpringMvc](https://blog.csdn.net/z69183787/article/category/2176803)](https://blog.csdn.net/z69183787/article/category/2175245)
原文链接：[http://sarin.iteye.com/blog/829738](http://sarin.iteye.com/blog/829738)
    Spring的MVC模块是一种简洁的Web应用框架，实现了MVC模式来处理HTTP请求和响应。相比于Struts系列，SpringMVC的MVC更加明显，将控制器和视图的定义完全分离，它们不需要在一个命名空间下了。它有Spring的全部优点，bean的配置更加舒服。而Spring 3的注解配置使得代码编写更加优雅。本例结合Spring MVC和Security框架进行小小整合，仅做功能说明，不详细探究其原理。 
    首先是建立项目，做一个简单的消息发布功能，代码结构如下，使用Maven可以很好的管理依赖： 
![](http://www.chinasb.org/wp-content/uploads/2011/05/spring_mvc_demo.png)
    采用了分层结构，但是没有使用到数据库操作，仅仅做个简短的说明，数据库操作用在后面Security框架验证用户时。下面来看看依赖关系，这样能对Spring的层次结构了解更加清晰： 
![](http://www.chinasb.org/wp-content/uploads/2011/05/spring_mvc_demo_dependence_tree.png)
    先来看最基本的web部署描述文件web.xml，将用到的配置写好，Spring 3使用DispatcherServlet派发请求，而Security框架串接过滤器的机制来进行安全处理。配置很简单，如下即可，web请求使用.htm形式： 
```
```xml
<?
```
```xml
xml
```
```xml
version
```
```xml
=
```
```xml
"1.0"
```
```xml
encoding
```
```xml
=
```
```xml
"UTF-8"
```
```xml
?>
```
```xml
<
```
```xml
web-app
```
```xml
version
```
```xml
=
```
```xml
"2.5"
```
```xml
xmlns
```
```xml
=
```
```xml
"http://java.sun.com/xml/ns/javaee"
```
```xml
```
```xml
xmlns:xsi
```
```xml
=
```
```xml
"http://www.w3.org/2001/XMLSchema-instance"
```
```xml
```
```xml
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
```
```xml
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
```
```xml
```
```xml
<
```
```xml
context-param
```
```xml
>
```
```xml
```
```xml
<
```
```xml
param-value
```
```xml
>
```
```xml
```
```xml
/WEB-INF/board-service.xml
```
```xml
```
```xml
/WEB-INF/board-security.xml
```
```xml
```
```xml
</
```
```xml
param-value
```
```xml
>
```
```xml
```
```xml
</
```
```xml
context-param
```
```xml
>
```
```xml
```
```xml
<
```
```xml
listener
```
```xml
>
```
```xml
```
```xml
<
```
```xml
listener-class
```
```xml
>org.springframework.web.context.ContextLoaderListener</
```
```xml
listener-class
```
```xml
>
```
```xml
```
```xml
</
```
```xml
listener
```
```xml
>
```
```xml
```
```xml
<
```
```xml
filter
```
```xml
>
```
```xml
```
```xml
<
```
```xml
filter-name
```
```xml
>springSecurityFilterChain</
```
```xml
filter-name
```
```xml
>
```
```xml
```
```xml
<
```
```xml
filter-class
```
```xml
>org.springframework.web.filter.DelegatingFilterProxy</
```
```xml
filter-class
```
```xml
>
```
```xml
```
```xml
</
```
```xml
filter
```
```xml
>
```
```xml
```
```xml
<
```
```xml
filter-mapping
```
```xml
>
```
```xml
```
```xml
<
```
```xml
filter-name
```
```xml
>springSecurityFilterChain</
```
```xml
filter-name
```
```xml
>
```
```xml
```
```xml
<
```
```xml
url-pattern
```
```xml
>/*</
```
```xml
url-pattern
```
```xml
>
```
```xml
```
```xml
</
```
```xml
filter-mapping
```
```xml
>
```
```xml
```
```xml
<
```
```xml
servlet
```
```xml
>
```
```xml
```
```xml
<
```
```xml
servlet-name
```
```xml
>board</
```
```xml
servlet-name
```
```xml
>
```
```xml
```
```xml
<
```
```xml
servlet-class
```
```xml
>org.springframework.web.servlet.DispatcherServlet</
```
```xml
servlet-class
```
```xml
>
```
```xml
```
```xml
</
```
```xml
servlet
```
```xml
>
```
```xml
```
```xml
<
```
```xml
servlet-mapping
```
```xml
>
```
```xml
```
```xml
<
```
```xml
servlet-name
```
```xml
>board</
```
```xml
servlet-name
```
```xml
>
```
```xml
```
```xml
<
```
```xml
url-pattern
```
```xml
>*.htm</
```
```xml
url-pattern
```
```xml
>
```
```xml
```
```xml
</
```
```xml
servlet-mapping
```
```xml
>
```
```xml
</
```
```xml
web-app
```
```xml
>
```
```
    下面是Servlet的配置文件，因为我们使用了注解，这里仅需对视图文件进行一下说明即可，而又配合后面的Security框架，在这里对Security框架的方法拦截注解也声明了一下，这里说明一点，要拦截Controller的方法，必须将Security的声明和Servlet放在一个文件内，否则拦截是没有作用的： 
```
```xml
<?
```
```xml
xml
```
```xml
version
```
```xml
=
```
```xml
"1.0"
```
```xml
encoding
```
```xml
=
```
```xml
"UTF-8"
```
```xml
?>
```
```xml
<
```
```xml
beans
```
```xml
xmlns
```
```xml
=
```
```xml
"http://www.springframework.org/schema/beans"
```
```xml
```
```xml
xmlns:xsi
```
```xml
=
```
```xml
"http://www.w3.org/2001/XMLSchema-instance"
```
```xml
```
```xml
xmlns:security
```
```xml
=
```
```xml
"http://www.springframework.org/schema/security"
```
```xml
```
```xml
xmlns:context
```
```xml
=
```
```xml
"http://www.springframework.org/schema/context"
```
```xml
```
```xml
xsi:schemaLocation="http://www.springframework.org/schema/beans
```
```xml
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
```
```xml
http://www.springframework.org/schema/context
```
```xml
http://www.springframework.org/schema/context/spring-context-3.0.xsd
```
```xml
http://www.springframework.org/schema/security
```
```xml
http://www.springframework.org/schema/security/spring-security-3.0.xsd">
```
```xml
```
```xml
<
```
```xml
context:component-scan
```
```xml
base-package
```
```xml
=
```
```xml
"org.ourpioneer.board.web"
```
```xml
/>
```
```xml
```
```xml
<
```
```xml
bean
```
```xml
```
```xml
class
```
```xml
=
```
```xml
"org.springframework.web.servlet.view.InternalResourceViewResolver"
```
```xml
>
```
```xml
```
```xml
<
```
```xml
property
```
```xml
name
```
```xml
=
```
```xml
"prefix"
```
```xml
value
```
```xml
=
```
```xml
"/WEB-INF/jsp/"
```
```xml
/>
```
```xml
```
```xml
<
```
```xml
property
```
```xml
name
```
```xml
=
```
```xml
"suffix"
```
```xml
value
```
```xml
=
```
```xml
".jsp"
```
```xml
/>
```
```xml
```
```xml
</
```
```xml
bean
```
```xml
>
```
```xml
```
```xml
<
```
```xml
security:global-method-security
```
```xml
```
```xml
jsr250-annotations
```
```xml
=
```
```xml
"enabled"
```
```xml
secured-annotations
```
```xml
=
```
```xml
"enabled"
```
```xml
/>
```
```xml
</
```
```xml
beans
```
```xml
>
```
```
其中对org.ourpioneer.board.web包进行组件扫描，就会发现我们注解声明的控制器了，下面是对视图解析的说明，我们把视图文件写在/WEB-INF/jsp/下，后缀名为.jsp的文件就是视图文件，为什么把前缀和后缀都声明好了？因为程序里面我们直接写文件名就可以了，非常灵活，它不关心是不是和请求路径是相同的。下面是对Controller方法拦截的Security框架的配置。 
配置好Servlet相关内容，剩下就是Service内容了，这个很简单了，声明一个bean就是了，为了配合Security框架连接数据库验证用户身份，这里也配置一个数据源，使用Spring自己的数据源实现： 
```
```xml
<
```
```xml
bean
```
```xml
id
```
```xml
=
```
```xml
"dataSource"
```
```xml
class
```
```xml
=
```
```xml
"org.springframework.jdbc.datasource.DriverManagerDataSource"
```
```xml
>
```
```xml
```
```xml
<
```
```xml
property
```
```xml
name
```
```xml
=
```
```xml
"driverClassName"
```
```xml
value
```
```xml
=
```
```xml
"com.mysql.jdbc.Driver"
```
```xml
/>
```
```xml
```
```xml
<
```
```xml
property
```
```xml
name
```
```xml
=
```
```xml
"url"
```
```xml
```
```xml
value
```
```xml
=
```
```xml
"jdbc:mysql://localhost:3306/board"
```
```xml
/>
```
```xml
```
```xml
<
```
```xml
property
```
```xml
name
```
```xml
=
```
```xml
"username"
```
```xml
value
```
```xml
=
```
```xml
"root"
```
```xml
/>
```
```xml
```
```xml
<
```
```xml
property
```
```xml
name
```
```xml
=
```
```xml
"password"
```
```xml
value
```
```xml
=
```
```xml
"123"
```
```xml
/>
```
```xml
</
```
```xml
bean
```
```xml
>
```
```xml
<
```
```xml
bean
```
```xml
id
```
```xml
=
```
```xml
"messageBoardService"
```
```xml
class
```
```xml
=
```
```xml
"org.ourpioneer.board.service.MessageBoardServiceImpl"
```
```xml
/>
```
```
配置好后，我们来看看程序代码，首先看看定义的领域对象Message，很简单的bean： 
```
```java
package
```
```java
org.ourpioneer.board.domain;
```
```java
public
```
```java
class
```
```java
Message {
```
```java
```
```java
private
```
```java
Long id;
```
```java
```
```java
private
```
```java
String author;
```
```java
```
```java
private
```
```java
String title;
```
```java
```
```java
private
```
```java
String body;
```
```java
//省略了getter和setter方法
```
```java
}
```
```
    下面是Service，我们使用了实现和接口相分离的原则，方面后续在WebService中公开等，可能用不到，但这是一个良好的设计原则。接口内定义四个方法声明： 
```
```java
package
```
```java
org.ourpioneer.board.service;
```
```java
import
```
```java
java.util.List;
```
```java
import
```
```java
org.ourpioneer.board.domain.Message;
```
```java
public
```
```java
interface
```
```java
MessageBoardService {
```
```java
```
```java
public
```
```java
List<Message> listMessages();
```
```java
```
```java
public
```
```java
void
```
```java
postMessage(Message message);
```
```java
```
```java
public
```
```java
void
```
```java
deleteMeesage(Message message);
```
```java
```
```java
public
```
```java
Message findMessageById(Long messageId);
```
```java
}
```
```
    下面是Service的实现类，就用List放置Message即可，这里我们对Service的方法也进行了安全拦截，这是更细粒度的拦截，后面会详细介绍，现在可以不管： 
```
```java
package
```
```java
org.ourpioneer.board.service;
```
```java
import
```
```java
java.util.ArrayList;
```
```java
import
```
```java
java.util.LinkedHashMap;
```
```java
import
```
```java
java.util.List;
```
```java
import
```
```java
java.util.Map;
```
```java
import
```
```java
org.ourpioneer.board.domain.Message;
```
```java
import
```
```java
org.springframework.security.access.annotation.Secured;
```
```java
public
```
```java
class
```
```java
MessageBoardServiceImpl
```
```java
implements
```
```java
MessageBoardService {
```
```java
```
```java
private
```
```java
Map<Long, Message> messages =
```
```java
new
```
```java
LinkedHashMap<Long, Message>();
```
```java
```
```java
//@Secured(
 { "ROLE_ADMIN", "IP_LOCAL_HOST" })
```
```java
```
```java
public
```
```java
synchronized
```
```java
void
```
```java
deleteMeesage(Message message) {
```
```java
```
```java
messages.remove(message.getId());
```
```java
```
```java
}
```
```java
```
```java
//@Secured(
 { "ROLE_USER", "ROLE_GUEST" })
```
```java
```
```java
public
```
```java
Message findMessageById(Long messageId) {
```
```java
```
```java
return
```
```java
messages.get(messageId);
```
```java
```
```java
}
```
```java
```
```java
//@Secured(
 { "ROLE_USER", "ROLE_GUEST" })
```
```java
```
```java
public
```
```java
List<Message> listMessages() {
```
```java
```
```java
return
```
```java
new
```
```java
ArrayList<Message>(messages.values());
```
```java
```
```java
}
```
```java
```
```java
//@Secured(
 { "ROLE_USER" })
```
```java
```
```java
public
```
```java
synchronized
```
```java
void
```
```java
postMessage(Message message) {
```
```java
```
```java
message.setId(System.currentTimeMillis());
```
```java
```
```java
messages.put(message.getId(),
 message);
```
```java
```
```java
}
```
```java
}
```
```
 下面就该进入控制器部分了，我们一个一个来看： 
```
```java
package
```
```java
org.ourpioneer.board.web;
```
```java
import
```
```java
java.util.List;
```
```java
import
```
```java
org.ourpioneer.board.domain.Message;
```
```java
import
```
```java
org.ourpioneer.board.service.MessageBoardService;
```
```java
import
```
```java
org.springframework.beans.factory.annotation.Autowired;
```
```java
import
```
```java
org.springframework.security.access.annotation.Secured;
```
```java
import
```
```java
org.springframework.stereotype.Controller;
```
```java
import
```
```java
org.springframework.ui.Model;
```
```java
import
```
```java
org.springframework.web.bind.annotation.RequestMapping;
```
```java
import
```
```java
org.springframework.web.bind.annotation.RequestMethod;
```
```java
@Controller
```
```java
@RequestMapping
```
```java
(
```
```java
"/messageList.htm"
```
```java
)
```
```java
public
```
```java
class
```
```java
MessageListController {
```
```java
```
```java
@Autowired
```
```java
```
```java
private
```
```java
MessageBoardService messageBoardService;
```
```java
```
```java
@RequestMapping
```
```java
(method
 = RequestMethod.GET)
```
```java
```
```java
//@Secured(
 { "ROLE_USER" })
```
```java
```
```java
public
```
```java
String generateList(Model model) {
```
```java
```
```java
List<Message>
 messages = java.util.Collections.emptyList();
```
```java
```
```java
messages
 = messageBoardService.listMessages();
```
```java
```
```java
model.addAttribute(
```
```java
"messages"
```
```java
,
 messages);
```
```java
```
```java
return
```
```java
"messageList"
```
```java
;
```
```java
```
```java
}
```
```java
}
```
```
    对该类进行控制器注解声明，说明是Spring MVC中的控制器，下面是请求映射声明，处理/messageList.htm的请求，Service的注入采用自动装配，连set方法都不用了，下面是对处理方法，可以看出，这是一个简单的POJO，连方法名都是我们自定义的，只需声明HTTP请求方法，就能找到方法了，而Model是传递数据给页面的对象，把获取到的message列表放进去就行了，来看返回值，一个字符串，什么意思？就是JSP页面的名字，是不是很简单，MVC表现的淋漓尽致，这就会找到页面了。 
    下面是发布消息的类： 
```
```java
package
```
```java
org.ourpioneer.board.web;
```
```java
import
```
```java
javax.servlet.http.HttpServletRequest;
```
```java
import
```
```java
org.ourpioneer.board.domain.Message;
```
```java
import
```
```java
org.ourpioneer.board.service.MessageBoardService;
```
```java
import
```
```java
org.springframework.beans.factory.annotation.Autowired;
```
```java
import
```
```java
org.springframework.security.access.annotation.Secured;
```
```java
import
```
```java
org.springframework.stereotype.Controller;
```
```java
import
```
```java
org.springframework.ui.Model;
```
```java
import
```
```java
org.springframework.validation.BindingResult;
```
```java
import
```
```java
org.springframework.web.bind.annotation.ModelAttribute;
```
```java
import
```
```java
org.springframework.web.bind.annotation.RequestMapping;
```
```java
import
```
```java
org.springframework.web.bind.annotation.RequestMethod;
```
```java
@Controller
```
```java
@RequestMapping
```
```java
(
```
```java
"/messagePost.htm"
```
```java
)
```
```java
public
```
```java
class
```
```java
MessagePostController {
```
```java
```
```java
@Autowired
```
```java
```
```java
private
```
```java
MessageBoardService messageBoardService;
```
```java
```
```java
@RequestMapping
```
```java
(method
 = RequestMethod.GET)
```
```java
```
```java
//@Secured(
 { "ROLE_USER" })
```
```java
```
```java
public
```
```java
String setupForm(Model model) {
```
```java
```
```java
Message
 message =
```
```java
new
```
```java
Message();
```
```java
```
```java
model.addAttribute(
```
```java
"message"
```
```java
,
 message);
```
```java
```
```java
return
```
```java
"messagePost"
```
```java
;
```
```java
```
```java
}
```
```java
```
```java
@RequestMapping
```
```java
(method
 = RequestMethod.POST)
```
```java
```
```java
//@Secured(
 { "ROLE_USER" })
```
```java
```
```java
public
```
```java
String onSubmit(
```
```java
@ModelAttribute
```
```java
(
```
```java
"message"
```
```java
)
 Message message,
```
```java
```
```java
BindingResult
 result, HttpServletRequest request) {
```
```java
```
```java
message.setAuthor(request.getRemoteUser());
```
```java
```
```java
if
```
```java
(result.hasErrors()) {
```
```java
```
```java
return
```
```java
"messagePost"
```
```java
;
```
```java
```
```java
}
```
```java
else
```
```java
{
```
```java
```
```java
messageBoardService.postMessage(message);
```
```java
```
```java
return
```
```java
"redirect:messageList.htm"
```
```java
;
```
```java
```
```java
}
```
```java
```
```java
}
```
```java
}
```
```
    GET方式是请求到这个页面，而POST方式是发布消息，最后是重定向，再到messageList.htm，就是这么简单的配置。要注意的是方法实现，先看页面请求方法setupForm(Model model)，参数上面已经解释了，是传递给页面的数据对象，里面放置了一个Message对象，做什么用的？肯定页面使用了，不过这是一个空对象，那么自然想到要和表单属性进行绑定，等会看看页面就一清二楚了。下面是onSubmit方法，里面的参数都是我自己定义的，只要记住BindingResult要和数据对象参数Message写在一起，后面的参数写想用的就行，那么我想用HttpServletRequest对象，就写上去。真的很灵活。方法实现很简单，就不多说了。 
    最后是删除功能了，更简单了： 
```
```java
package
```
```java
org.ourpioneer.board.web;
```
```java
import
```
```java
org.ourpioneer.board.domain.Message;
```
```java
import
```
```java
org.ourpioneer.board.service.MessageBoardService;
```
```java
import
```
```java
org.springframework.beans.factory.annotation.Autowired;
```
```java
import
```
```java
org.springframework.security.access.annotation.Secured;
```
```java
import
```
```java
org.springframework.stereotype.Controller;
```
```java
import
```
```java
org.springframework.ui.Model;
```
```java
import
```
```java
org.springframework.web.bind.annotation.RequestMapping;
```
```java
import
```
```java
org.springframework.web.bind.annotation.RequestMethod;
```
```java
import
```
```java
org.springframework.web.bind.annotation.RequestParam;
```
```java
@Controller
```
```java
@RequestMapping
```
```java
(
```
```java
"/messageDelete.htm"
```
```java
)
```
```java
public
```
```java
class
```
```java
MessageDeleteController {
```
```java
```
```java
@Autowired
```
```java
```
```java
private
```
```java
MessageBoardService messageBoardService;
```
```java
```
```java
@RequestMapping
```
```java
(method
 = RequestMethod.GET)
```
```java
```
```java
//@Secured(
 { "ROLE_ADMIN" })
```
```java
```
```java
public
```
```java
String messageDelete(
```
```java
```
```java
@RequestParam
```
```java
(required
 =
```
```java
true
```
```java
,
 value =
```
```java
"messageId"
```
```java
)
 Long messageId,
```
```java
```
```java
Model
 model) {
```
```java
```
```java
Message
 message = messageBoardService.findMessageById(messageId);
```
```java
```
```java
messageBoardService.deleteMeesage(message);
```
```java
```
```java
model.addAttribute(
```
```java
"messages"
```
```java
,
 messageBoardService.listMessages());
```
```java
```
```java
return
```
```java
"redirect:messageList.htm"
```
```java
;
```
```java
```
```java
}
```
```java
}
```
```
    只是权限设置为有管理员权限的才能删除，这里先不用。来看方法参数，我们必须要一个请求参数，是messageId，删除消息的标识符。下面就是操作了，很简单。 
    最后来看一下页面： 
```
```xml
<%@taglib
 prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
```
```xml
<%@taglib
 prefix="security"
```
```xml
```
```xml
uri="http://www.springframework.org/security/tags"%>
```
```xml
<
```
```xml
html
```
```xml
>
```
```xml
<
```
```xml
head
```
```xml
>
```
```xml
<
```
```xml
title
```
```xml
>Message
 List</
```
```xml
title
```
```xml
>
```
```xml
</
```
```xml
head
```
```xml
>
```
```xml
<
```
```xml
body
```
```xml
>
```
```xml
<
```
```xml
h2
```
```xml
>Welcome!
 <
```
```xml
security:authentication
```
```xml
property
```
```xml
=
```
```xml
"name"
```
```xml
/></
```
```xml
h2
```
```xml
>
```
```xml
<
```
```xml
security:authentication
```
```xml
property
```
```xml
=
```
```xml
"authorities"
```
```xml
var
```
```xml
=
```
```xml
"authorities"
```
```xml
/>
```
```xml
<
```
```xml
ul
```
```xml
>
```
```xml
```
```xml
<
```
```xml
c:forEach
```
```xml
items
```
```xml
=
```
```xml
"${authorities}"
```
```xml
var
```
```xml
=
```
```xml
"authority"
```
```xml
>
```
```xml
```
```xml
<
```
```xml
li
```
```xml
>${authority.authority}</
```
```xml
li
```
```xml
>
```
```xml
```
```xml
</
```
```xml
c:forEach
```
```xml
>
```
```xml
</
```
```xml
ul
```
```xml
>
```
```xml
<
```
```xml
hr
```
```xml
/>
```
```xml
<
```
```xml
c:forEach
```
```xml
items
```
```xml
=
```
```xml
"${messages}"
```
```xml
var
```
```xml
=
```
```xml
"message"
```
```xml
>
```
```xml
```
```xml
<
```
```xml
table
```
```xml
>
```
```xml
```
```xml
<
```
```xml
security:authorize
```
```xml
ifAllGranted
```
```xml
=
```
```xml
"ROLE_ADMIN,ROLE_USER"
```
```xml
>
```
```xml
```
```xml
<
```
```xml
tr
```
```xml
>
```
```xml
```
```xml
<
```
```xml
td
```
```xml
>Author</
```
```xml
td
```
```xml
>
```
```xml
```
```xml
<
```
```xml
td
```
```xml
>${message.author}</
```
```xml
td
```
```xml
>
```
```xml
```
```xml
</
```
```xml
tr
```
```xml
>
```
```xml
```
```xml
</
```
```xml
security:authorize
```
```xml
>
```
```xml
```
```xml
<
```
```xml
tr
```
```xml
>
```
```xml
```
```xml
<
```
```xml
td
```
```xml
>Title</
```
```xml
td
```
```xml
>
```
```xml
```
```xml
<
```
```xml
td
```
```xml
>${message.title}</
```
```xml
td
```
```xml
>
```
```xml
```
```xml
</
```
```xml
tr
```
```xml
>
```
```xml
```
```xml
<
```
```xml
tr
```
```xml
>
```
```xml
```
```xml
<
```
```xml
td
```
```xml
>Body</
```
```xml
td
```
```xml
>
```
```xml
```
```xml
<
```
```xml
td
```
```xml
>${message.body}</
```
```xml
td
```
```xml
>
```
```xml
```
```xml
</
```
```xml
tr
```
```xml
>
```
```xml
```
```xml
<
```
```xml
tr
```
```xml
>
```
```xml
```
```xml
<
```
```xml
td
```
```xml
colspan
```
```xml
=
```
```xml
"2"
```
```xml
><
```
```xml
a
```
```xml
```
```xml
href
```
```xml
=
```
```xml
"messageDelete.htm?messageId=${message.id}"
```
```xml
>Delete</
```
```xml
a
```
```xml
></
```
```xml
td
```
```xml
>
```
```xml
```
```xml
</
```
```xml
tr
```
```xml
>
```
```xml
```
```xml
</
```
```xml
table
```
```xml
>
```
```xml
```
```xml
<
```
```xml
hr
```
```xml
/>
```
```xml
</
```
```xml
c:forEach
```
```xml
>
```
```xml
<
```
```xml
a
```
```xml
href
```
```xml
=
```
```xml
"messagePost.htm"
```
```xml
>Post</
```
```xml
a
```
```xml
>
```
```xml
<
```
```xml
a
```
```xml
href
```
```xml
=
```
```xml
"<c:url
 value="
```
```xml
/j_spring_security_logout"
 />">Logout</
```
```xml
a
```
```xml
>
```
```xml
</
```
```xml
body
```
```xml
>
```
```xml
</
```
```xml
html
```
```xml
>
```
```
    列表页面有Security框架标签的使用，仅做MVC时可以先注释起来。这里使用了JSTL标签来遍历message列表，都很简单。 
    下面是发布消息的页面： 
```
```xml
<%@taglib
 prefix="form" uri="http://www.springframework.org/tags/form"%>
```
```xml
<
```
```xml
html
```
```xml
>
```
```xml
<
```
```xml
head
```
```xml
>
```
```xml
<
```
```xml
title
```
```xml
>Message
 Post</
```
```xml
title
```
```xml
>
```
```xml
</
```
```xml
head
```
```xml
>
```
```xml
<
```
```xml
body
```
```xml
>
```
```xml
<
```
```xml
form:form
```
```xml
method
```
```xml
=
```
```xml
"POST"
```
```xml
modelAttribute
```
```xml
=
```
```xml
"message"
```
```xml
>
```
```xml
```
```xml
<
```
```xml
table
```
```xml
>
```
```xml
```
```xml
<
```
```xml
tr
```
```xml
>
```
```xml
```
```xml
<
```
```xml
td
```
```xml
>Title</
```
```xml
td
```
```xml
>
```
```xml
```
```xml
<
```
```xml
td
```
```xml
><
```
```xml
form:input
```
```xml
path
```
```xml
=
```
```xml
"title"
```
```xml
/></
```
```xml
td
```
```xml
>
```
```xml
```
```xml
</
```
```xml
tr
```
```xml
>
```
```xml
```
```xml
<
```
```xml
tr
```
```xml
>
```
```xml
```
```xml
<
```
```xml
td
```
```xml
>Body</
```
```xml
td
```
```xml
>
```
```xml
```
```xml
<
```
```xml
td
```
```xml
><
```
```xml
form:textarea
```
```xml
path
```
```xml
=
```
```xml
"body"
```
```xml
/></
```
```xml
td
```
```xml
>
```
```xml
```
```xml
</
```
```xml
tr
```
```xml
>
```
```xml
```
```xml
<
```
```xml
tr
```
```xml
>
```
```xml
```
```xml
<
```
```xml
td
```
```xml
colspan
```
```xml
=
```
```xml
"2"
```
```xml
><
```
```xml
input
```
```xml
type
```
```xml
=
```
```xml
"submit"
```
```xml
value
```
```xml
=
```
```xml
"Post"
```
```xml
/></
```
```xml
td
```
```xml
>
```
```xml
```
```xml
</
```
```xml
tr
```
```xml
>
```
```xml
```
```xml
</
```
```xml
table
```
```xml
>
```
```xml
</
```
```xml
form:form
```
```xml
>
```
```xml
</
```
```xml
body
```
```xml
>
```
```xml
</
```
```xml
html
```
```xml
>
```
```
 前面说的数据绑定，这里就很容易看明白了吧。没有什么可以多解释的。 
 准备都做好后就是运行了，我们启动Jetty，来看看效果。
![](http://www.chinasb.org/wp-content/uploads/2011/05/spring_mvc_demo_result_1.png)
 因为我结合了Security框架，所以看到了我登录的身份列表，下面就是发布消息了，这就很简单了： 
![](http://www.chinasb.org/wp-content/uploads/2011/05/spring_mvc_demo_result_2.png)
