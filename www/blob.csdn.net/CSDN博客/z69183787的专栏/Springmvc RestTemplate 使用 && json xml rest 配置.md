# Springmvc RestTemplate 使用 &&  json xml rest 配置 - z69183787的专栏 - CSDN博客
2017年07月03日 15:49:27[OkidoGreen](https://me.csdn.net/z69183787)阅读数：3968
## JSON：http://howtodoinjava.com/spring/spring-restful/spring-rest-hello-world-json-example/
## XML：http://howtodoinjava.com/spring/spring-restful/spring-rest-hello-world-xml-example/
## HTTP GET Method Example
1) Get XML representation of employees collection in String format
REST API Code
```java
@RequestMapping
```
```java
(value
 =
```
```java
"/employees"
```
```java
,
 produces = MediaType.APPLICATION_XML_VALUE, method = RequestMethod.GET)
```
```java
public
```
```java
String
 getAllEmployeesXML(Model model)
```
```java
{
```
```java
```
```java
model.addAttribute(
```
```java
"employees"
```
```java
,
 getEmployeesCollection());
```
```java
```
```java
return
```
```java
"xmlTemplate"
```
```java
;
```
```java
}
```
REST Client Code
```java
private
```
```java
static
```
```java
void
```
```java
getEmployees()
```
```java
{
```
```java
```
```java
final
```
```java
String
 uri =
```
```java
"[http://localhost:8080/springrestexample/employees.xml](http://localhost:8080/springrestexample/employees.xml)"
```
```java
;
```
```java
```
```java
```
```java
RestTemplate
 restTemplate =
```
```java
new
```
```java
RestTemplate();
```
```java
```
```java
String
 result = restTemplate.getForObject(uri, String.
```
```java
class
```
```java
);
```
```java
```
```java
```
```java
System.out.println(result);
```
```java
}
```
2) Get JSON representation of employees collection in String format
REST API Code
```java
@RequestMapping
```
```java
(value
 =
```
```java
"/employees"
```
```java
,
 produces = MediaType.APPLICATION_JSON_VALUE,  method = RequestMethod.GET)
```
```java
public
```
```java
String
 getAllEmployeesJSON(Model model)
```
```java
{
```
```java
```
```java
model.addAttribute(
```
```java
"employees"
```
```java
,
 getEmployeesCollection());
```
```java
```
```java
return
```
```java
"jsonTemplate"
```
```java
;
```
```java
}
```
REST Client Code
```java
private
```
```java
static
```
```java
void
```
```java
getEmployees()
```
```java
{
```
```java
```
```java
final
```
```java
String
 uri =
```
```java
"[http://localhost:8080/springrestexample/employees.json](http://localhost:8080/springrestexample/employees.json)"
```
```java
;
```
```java
```
```java
```
```java
RestTemplate
 restTemplate =
```
```java
new
```
```java
RestTemplate();
```
```java
```
```java
String
 result = restTemplate.getForObject(uri, String.
```
```java
class
```
```java
);
```
```java
```
```java
```
```java
System.out.println(result);
```
```java
}
```
3) Using custom HTTP Headers with RestTemplate
REST API Code
```java
@RequestMapping
```
```java
(value
 =
```
```java
"/employees"
```
```java
,
 produces = MediaType.APPLICATION_JSON_VALUE,  method = RequestMethod.GET)
```
```java
public
```
```java
String
 getAllEmployeesJSON(Model model)
```
```java
{
```
```java
```
```java
model.addAttribute(
```
```java
"employees"
```
```java
,
 getEmployeesCollection());
```
```java
```
```java
return
```
```java
"jsonTemplate"
```
```java
;
```
```java
}
```
REST Client Code
```java
private
```
```java
static
```
```java
void
```
```java
getEmployees()
```
```java
{
```
```java
```
```java
final
```
```java
String
 uri =
```
```java
"[http://localhost:8080/springrestexample/employees](http://localhost:8080/springrestexample/employees)"
```
```java
;
```
```java
```
```java
```
```java
RestTemplate
 restTemplate =
```
```java
new
```
```java
RestTemplate();
```
```java
```
```java
```
```java
HttpHeaders
 headers =
```
```java
new
```
```java
HttpHeaders();
```
```java
```
```java
headers.setAccept(Arrays.asList(MediaType.APPLICATION_JSON));
```
```java
```
```java
HttpEntity<String>
 entity =
```
```java
new
```
```java
HttpEntity<String>(
```
```java
"parameters"
```
```java
,
 headers);
```
```java
```
```java
```
```java
ResponseEntity<String>
 result = restTemplate.exchange(uri, HttpMethod.GET, entity, String.
```
```java
class
```
```java
);
```
```java
```
```java
```
```java
System.out.println(result);
```
```java
}
```
4) Get data as mapped object
REST API Code
```java
@RequestMapping
```
```java
(value
 =
```
```java
"/employees"
```
```java
,
 produces = MediaType.APPLICATION_XML_VALUE, method = RequestMethod.GET)
```
```java
public
```
```java
String
 getAllEmployeesXML(Model model)
```
```java
{
```
```java
```
```java
model.addAttribute(
```
```java
"employees"
```
```java
,
 getEmployeesCollection());
```
```java
```
```java
return
```
```java
"xmlTemplate"
```
```java
;
```
```java
}
```
REST Client Code
```java
private
```
```java
static
```
```java
void
```
```java
getEmployees()
```
```java
{
```
```java
```
```java
final
```
```java
String
 uri =
```
```java
"[http://localhost:8080/springrestexample/employees](http://localhost:8080/springrestexample/employees)"
```
```java
;
```
```java
```
```java
RestTemplate
 restTemplate =
```
```java
new
```
```java
RestTemplate();
```
```java
```
```java
```
```java
EmployeeListVO
 result = restTemplate.getForObject(uri, EmployeeListVO.
```
```java
class
```
```java
);
```
```java
```
```java
```
```java
System.out.println(result);
```
```java
}
```
5) Passing parameters in URL
REST API Code
```java
@RequestMapping
```
```java
(value
 =
```
```java
"/employees/{id}"
```
```java
)
```
```java
public
```
```java
ResponseEntity<EmployeeVO>
 getEmployeeById (
```
```java
@PathVariable
```
```java
(
```
```java
"id"
```
```java
)
```
```java
int
```
```java
id)
```
```java
{
```
```java
```
```java
if
```
```java
(id
 <=
```
```java
3
```
```java
)
 {
```
```java
```
```java
EmployeeVO
 employee =
```
```java
new
```
```java
EmployeeVO(
```
```java
1
```
```java
,
```
```java
"Lokesh"
```
```java
,
```
```java
"Gupta"
```
```java
,
```
```java
"howtodoinjava@gmail.com"
```
```java
);
```
```java
```
```java
return
```
```java
new
```
```java
ResponseEntity<EmployeeVO>(employee,
 HttpStatus.OK);
```
```java
```
```java
}
```
```java
```
```java
return
```
```java
new
```
```java
ResponseEntity(HttpStatus.NOT_FOUND);
```
```java
}
```
REST Client Code
```java
private
```
```java
static
```
```java
void
```
```java
getEmployeeById()
```
```java
{
```
```java
```
```java
final
```
```java
String
 uri =
```
```java
"[http://localhost:8080/springrestexample/employees/](http://localhost:8080/springrestexample/employees/){id}"
```
```java
;
```
```java
```
```java
```
```java
Map<String,
 String> params =
```
```java
new
```
```java
HashMap<String,
 String>();
```
```java
```
```java
params.put(
```
```java
"id"
```
```java
,
```
```java
"1"
```
```java
);
```
```java
```
```java
```
```java
RestTemplate
 restTemplate =
```
```java
new
```
```java
RestTemplate();
```
```java
```
```java
EmployeeVO
 result = restTemplate.getForObject(uri, EmployeeVO.
```
```java
class
```
```java
,
 params);
```
```java
```
```java
```
```java
System.out.println(result);
```
```java
}
```
## HTTP POST Method Example
REST API Code
```java
@RequestMapping
```
```java
(value
 =
```
```java
"/employees"
```
```java
,
 method = RequestMethod.POST)
```
```java
public
```
```java
ResponseEntity<String>
 createEmployee(
```
```java
@RequestBody
```
```java
EmployeeVO
 employee)
```
```java
{
```
```java
```
```java
System.out.println(employee);
```
```java
```
```java
return
```
```java
new
```
```java
ResponseEntity(HttpStatus.CREATED);
```
```java
}
```
REST Client Code
```java
private
```
```java
static
```
```java
void
```
```java
createEmployee()
```
```java
{
```
```java
```
```java
final
```
```java
String
 uri =
```
```java
"[http://localhost:8080/springrestexample/employees](http://localhost:8080/springrestexample/employees)"
```
```java
;
```
```java
```
```java
EmployeeVO
 newEmployee =
```
```java
new
```
```java
EmployeeVO(-
```
```java
1
```
```java
,
```
```java
"Adam"
```
```java
,
```
```java
"Gilly"
```
```java
,
```
```java
"test@email.com"
```
```java
);
```
```java
```
```java
RestTemplate
 restTemplate =
```
```java
new
```
```java
RestTemplate();
```
```java
```
```java
EmployeeVO
 result = restTemplate.postForObject( uri, newEmployee, EmployeeVO.
```
```java
class
```
```java
);
```
```java
```
```java
System.out.println(result);
```
```java
}
```
## HTTP PUT Method Example
REST API Code
```java
@RequestMapping
```
```java
(value
 =
```
```java
"/employees/{id}"
```
```java
,
 method = RequestMethod.PUT)
```
```java
public
```
```java
ResponseEntity<EmployeeVO>
 updateEmployee(
```
```java
@PathVariable
```
```java
(
```
```java
"id"
```
```java
)
```
```java
int
```
```java
id,
```
```java
@RequestBody
```
```java
EmployeeVO
 employee)
```
```java
{
```
```java
```
```java
System.out.println(id);
```
```java
```
```java
System.out.println(employee);
```
```java
```
```java
return
```
```java
new
```
```java
ResponseEntity<EmployeeVO>(employee,
 HttpStatus.OK);
```
```java
}
```
REST Client Code
```java
private
```
```java
static
```
```java
void
```
```java
deleteEmployee()
```
```java
{
```
```java
```
```java
final
```
```java
String
 uri =
```
```java
"[http://localhost:8080/springrestexample/employees/](http://localhost:8080/springrestexample/employees/){id}"
```
```java
;
```
```java
```
```java
```
```java
Map<String,
 String> params =
```
```java
new
```
```java
HashMap<String,
 String>();
```
```java
```
```java
params.put(
```
```java
"id"
```
```java
,
```
```java
"2"
```
```java
);
```
```java
```
```java
```
```java
EmployeeVO
 updatedEmployee =
```
```java
new
```
```java
EmployeeVO(
```
```java
2
```
```java
,
```
```java
"New
 Name"
```
```java
,
```
```java
"Gilly"
```
```java
,
```
```java
"test@email.com"
```
```java
);
```
```java
```
```java
```
```java
RestTemplate
 restTemplate =
```
```java
new
```
```java
RestTemplate();
```
```java
```
```java
restTemplate.put
 ( uri, updatedEmployee, params);
```
```java
}
```
## HTTP DELETE Method Example
REST API Code
```java
@RequestMapping
```
```java
(value
 =
```
```java
"/employees/{id}"
```
```java
,
 method = RequestMethod.DELETE)
```
```java
public
```
```java
ResponseEntity<String>
 updateEmployee(
```
```java
@PathVariable
```
```java
(
```
```java
"id"
```
```java
)
```
```java
int
```
```java
id)
```
```java
{
```
```java
```
```java
System.out.println(id);
```
```java
```
```java
return
```
```java
new
```
```java
ResponseEntity(HttpStatus.OK);
```
```java
}
```
REST Client Code
```java
private
```
```java
static
```
```java
void
```
```java
deleteEmployee()
```
```java
{
```
```java
```
```java
final
```
```java
String
 uri =
```
```java
"[http://localhost:8080/springrestexample/employees/](http://localhost:8080/springrestexample/employees/){id}"
```
```java
;
```
```java
```
```java
```
```java
Map<String,
 String> params =
```
```java
new
```
```java
HashMap<String,
 String>();
```
```java
```
```java
params.put(
```
```java
"id"
```
```java
,
```
```java
"2"
```
```java
);
```
```java
```
```java
```
```java
RestTemplate
 restTemplate =
```
```java
new
```
```java
RestTemplate();
```
```java
```
```java
restTemplate.delete
 ( uri,  params );
```
```java
}
```
Let me know if something needs more explanation.
