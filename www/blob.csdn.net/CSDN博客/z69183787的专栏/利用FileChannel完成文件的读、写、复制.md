# 利用FileChannel完成文件的读、写、复制 - z69183787的专栏 - CSDN博客
2017年08月11日 17:46:20[OkidoGreen](https://me.csdn.net/z69183787)阅读数：1544
内容：通过NIO中的FileChannel完成文件的读、写、复制。
**[java]**[view
 plain](http://blog.csdn.net/u011345136/article/details/45501559#)[copy](http://blog.csdn.net/u011345136/article/details/45501559#)
- publicclass NioFileCopy {  
- private RandomAccessFile aFile = null;  
- private FileChannel inChannel = null;  
- privatefinal ByteBuffer buf = ByteBuffer.allocate(1024);  
- 
- publicvoid doWrite() throws IOException {  
-         aFile = new RandomAccessFile("C:/goods.txt", "rw");  
-         inChannel = aFile.getChannel();  
-         String newData = "New String to wirte to file... " + System.currentTimeMillis();  
-         buf.clear();  
-         buf.put(newData.getBytes());  
- 
-         buf.flip();  
- 
- while (buf.hasRemaining())   
-             inChannel.write(buf);  
- 
-         inChannel.close();  
-         System.out.println("Write Over");  
-     }  
- 
- publicvoid doRead() throws IOException {  
-         aFile = new RandomAccessFile("C:/goods.txt", "rw");  
-         inChannel = aFile.getChannel();  
- 
- int bytesRead = inChannel.read(buf);  
- while (bytesRead != -1) {  
-             System.out.println("Read " + bytesRead);  
-             buf.flip();  
- while (buf.hasRemaining())  
-                 System.out.print((char) buf.get());  
- 
-             buf.clear();  
-             bytesRead = inChannel.read(buf);  
-         }  
- 
-         aFile.close();  
-     }  
- 
- publicvoid doCopy() throws IOException {  
-         aFile = new RandomAccessFile("C:/goods.txt", "rw");  
-         inChannel = aFile.getChannel();  
-         RandomAccessFile bFile = new RandomAccessFile("C:/22.log", "rw");  
-         FileChannel outChannel = bFile.getChannel();  
-         inChannel.transferTo(0, inChannel.size(), outChannel);  
-         System.out.println("Copy over");  
-     }  
- 
- publicstaticvoid main(String[] args) throws IOException {  
-         NioFileCopy tool = new NioFileCopy();  
- //tool.doWrite();
- //tool.doRead();
-         tool.doCopy();  
-     }  
- }  
