# ITU-T Technical Paper： QoS 测量 （目标，方法，协议） - 雷霄骅(leixiaohua1020)的专栏 - CSDN博客





2013年10月30日 11:23:00[雷霄骅](https://me.csdn.net/leixiaohua1020)阅读数：68
个人分类：[网络](https://blog.csdn.net/leixiaohua1020/article/category/8433201)










本文翻译自ITU-T的Technical Paper：《How to increase QoS/QoE of IP-based platform(s) to regionally agreed standards》(2013/3/1)。这是其第六章的一部分，给出了QoS测量方面的综述。PS：在此感谢一位师弟的翻译。



**针对 QoS测量的考虑 [b-ITU-T E.800-Sup.8]**
 通常来说，QoS的测量方法应该至少可以估计指定测量点之间传输的数据包的QoS指标。而且QoS的测量应该是按需发生的或持续性进行的。
 我们需要知道，像IP和下一代网络（NGN）这样的无连接服务，具有在每个方向上以数据包/字节的形式提供用户有效载荷的特性。在这种情况下，传出和传入的通信路由可能会有所不同，因此所有QoS属性的目标和测量实际上单向地体现了服务的连接特性。那么测量也应该是单向的。而这引出了一些实际性的挑战（例如时钟同步），所以可能会发生出现双向测量的场合（以及通过双向测量估计得到的单向指标），如果出现这样的情况应该得到注意和报告。
 测量用的探测数据包的传输路径应该尽量和有着相同QoS类别以及机制的客户数据包相同，这意味着探测数据包的值应该被合适地设置以供测量QoS类别。
 测量方法应该不要求供应商提供测量点的接入权限或交换测量数据。但是，协议应该支持测量点的接入或测量数据在同意的供应商与授权的请求者之间交换。它应该能够支持PE-PE：（供应商边缘路由器）或CE-CE（客户边缘路由器）的测量，即使PE或CE属于不同供应商的网络。测量方法应该指明测量中的错误应该如何处理以及任何统计数据的结果是如何处理的。最后，测量方法和协议必须提供限制和监测篡改或变更QoS指标评定值的尝试。
 端到端客户之间路径上的QoS的测量应该成为SLA的监测与故障诊断部分的重要内容。
 端到端的QoS测量可能会涉及到多个不同的供应商，因而要求确定供应商之间的测量方法。所以在多供应商网络之间进行的测量结果应该通过比较和综合来得到有价值而且准确的端到端测量结果。为了方便达到这一点，有些关于多供应商环境下的通用测量方法的协议将会简化服务监测和故障诊断的任务。ITU-T在Y.1543建议[13]以及E.800系列建议的补充8 [b-ITU-T E.800-Sup.8]中介绍了多供应商环境下QoS测量的目标、注意事项、方法和协议。
 A provider may also designate an MPoP (Measurement Point of Presence) as a location that has specific capabilities for measurement.
 一个供应商也可以指定一个MPoP（存在的测量点）作为拥有特定测量功能的位置。在这些情况下，服务供应商应该就他们输入到彼此网络中的测试流量的体积达成协议。服务供应商应该发布足够的有关于测量设备位置的信息，这些位置可以帮助客户和/或其他的服务供应商做出合理的选择来决定要将他们的测试流量引向何方。合作的供应商之间还应该就他们支持的时钟精确度达成共识。为了支持故障的诊断和服务一致性的追踪，每个供应商都应该在一个商定的时间段内保留QoS测量数据。
 End user aspects of QoS including QoE should be a set of QoS and performance measurements as shown in Figure 11.
 如图11所示，终端用户方面的QoS，包括QoE，应该是一组QoS和性能测量[2]。因此，测量工作会在测量网络模型的每个段之间进行，也可以组合形成多区段网络、站点到站点、边对边或终端到终端的指标。这些指标的一个子集将被用于报告所提供服务的相关信息。



![](https://img-blog.csdn.net/20131029153831390?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

图 11 – 客户感知的QoS


**QoS 测量的目标**
 提高QoS有助于提升网络预期服务水平的信心程度。更强的信心程度将带来新的应用、服务和收入来源。达成这一目标的方法之一是进行持续的QoS和性能测量。因此QoS测量的目标是为客户、潜在客户和服务供应商提供信息，这包括[13]：
 对客户和潜在客户而言：
 *向客户报告所交付的服务；
 *向潜在客户报告以支持有关于服务特色的营销。
 对服务供应商和第三方交付担保实体而言：
 *进行报告以设计服务产品；
 *进行报告以排除故障；
 *提供市场营销所需的数据；
 *进行报告以开拓业务和筹备容量。
 因此QoS测量系统和统计数据应有如下特点：
 *定义明确，且易于SP和客户理解；
 *与客户的应用有关；
 *有助于服务供应商诊断问题和预测容量需求；
 *具备独立可重复性（多供应商在同一时间段内进行的测量可以得到一致的结果）
 *可被客户独立核查（客户的测量应该和SP的估计相接近）；
 *可被广泛应用 （可用于多种流量类型、链接大小，与负载无关，可用于任何IP网络）;
 *对距离和路径具有适当的敏感度；
 *不会显著影响其他的数据的转发；
 *有足够的可扩展性来支持足够多（例如，上百万的）的客户站点；
 *具有足够的可靠性和准确性，以支持具有经济处罚条款的SLA的执行。

**QoS 测量方法**
 如果可能的话，测量方法应尽量在供应商之间保持一致（但是这可能并不现实）。QoS的测量方法有两种：被动测量（用测试数据包）和主动测量[22]。但是需要指出，在一个特定的性能测量工具中可能会用到这些技术的任意组合。
 被动测量；
 作为一种通用的方法，在被动测量方法中由管理系统发出测试数据包，而诸如延时、抖动以及丢包率这样的性能指标就会随测试包的传输而得到测量结果。这些测量结果可作为真实流量性能的代理。这一方法也常常用于排除故障。虽然这是一个非常简单的技术，但是在解释结果时也需要多加注意。我们不希望在高峰时段发送测试数据包，因为这样会给网络增加不必要的管理流量负载。另一方面，除非是在高峰使用时段进行测量，否则测量结果不会真正反映用户在最重要时间的体验质量。
 主动测量；
 在这一方法中，测试探针以软件代理或网络设备的形式部署在网络元件和用户设备（对于软件代理的情况）上。基于这些测试探针获得的结果在任何时候都能提供设备的准确状态。此外，对于软件代理的情况，因为测量结果是直接从用户设备处获得的，所以可以真正反映用户体验。这一测量方法的主要缺点在于它不适用于大型网络。尽管这一方法非常适用于故障隔离和根本原因分析，但是它不能用于监控有数以百万计的用户设备和网络元件的大型网络。
 测试探针的源和汇可以是专门用于测量任务的专用测量设备、路由器，也可以是既能支持数据流量又能支持测量探针的路由器。测量结果可以表示为在两个测量点之间的点对点的测量结果，也可以表示为在多个测量点之间的得到的测量结果矩阵。它还可以表示为平均测量结果或由多个不同的点对点测量结果计算得到的统计数据。为了实现在多供应商网络之中进行QoS测量，可以用到下面的方法：
 *各供应商就使用同一测量协议达成共识，并且测试探针应可供其他供应商使用，从而使得测量可以在端到端的路径上进行；
 *每个供应商网络使用它们自己的方法和探针设备搜集测量结果，将这些结果综合后来估计端到端的性能。需要注意的是这需要互联服务供应商之间的合作，合作内容包括测量多供应商环境下的链接的QoS参数所用的协议以及探测点的可用性。

**QoS 测量协议**
 许多标准组织开发了多种多样的测量协议，特别是被许多供应商和终端用户所使用的供应商专有测量协议，它包含在IETF（互联网工程任务组）的QoS测量方法之中。基于ICMP（互联网控制报文协议）的PING测量方法用于测量TWPD（双向数据包延时）和TWPL（双向数据包丢失），而瞬时双向连接在历史上曾被许多供应商用于监测网络传输面向QoS的SLA。
 IPPM（IP性能指标）的OWAMP（单向主动测量协议）[IETF RFC 4656]（或兼容它的协议）应该被用于单向测量，如果用的是双向测量，那么TWAMP（双向主动测量协议）可以作为替代方法。（需要指出，所有的测量都应该是单向的，但如果可以区别表示的话也可以是双向的）
 基于ICMP的PING测量方法并不被推荐为测量客户IP路径性能的可靠协议。IP网络元件以非常不同的方式对待ICMP消息，尤其是在更高的网络流量情况下。其他的下层OAM协议，比如以太网OAM（其性能参数在[ITU-T Y.1731]中确定）可能适用于在以太网维护实体存在于或靠近于代表性的IP网段测量点的情况下降低IP延时和丢包性能。需要注意的是，要确保以太网OAM的测量结果可以切实反映相同路径上的IP客户流量体验。使用以太网OAM可能是实现跨以太网接入段的有效协议，否则为达到足够大的样本路径而部署的专用IP测量探针就会显得不经济。




