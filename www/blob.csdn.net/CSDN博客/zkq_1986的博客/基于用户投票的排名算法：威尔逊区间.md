# 基于用户投票的排名算法：威尔逊区间 - zkq_1986的博客 - CSDN博客





2017年08月23日 16:28:30[zkq_1986](https://me.csdn.net/zkq_1986)阅读数：436








# 基于用户投票的排名算法：威尔逊区间




# 1 威尔逊区间



排名算法就比较清晰了：

> 
第一步，计算每个项目的"好评率"（即赞成票的比例）。

第二步，计算每个"好评率"的置信区间（以95%的概率）。

第三步，根据置信区间的下限值，进行排名。这个值越大，排名就越高。



1927年，美国数学家 Edwin Bidwell Wilson提出了一个修正公式，被称为["威尔逊区间"](http://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval#Wilson_score_interval)，很好地解决了小样本的准确性问题。

![](http://chart.googleapis.com/chart?cht=tx&chl=%5Cfrac%7B%5Chat%7Bp%7D%2B%5Cfrac%7B1%7D%7B2n%7Dz%5E%7B2%7D_%7B1-%5Cfrac%7B%5Calpha%7D%7B2%7D%7D%5Cpm%20z_%7B1-%5Cfrac%7B%5Calpha%7D%7B2%7D%7D%5Csqrt%7B%5Cfrac%7B%5Chat%7Bp%7D(1-%5Chat%7Bp%7D)%7D%7Bn%7D%2B%5Cfrac%7Bz%5E%7B2%7D_%7B1-%5Cfrac%7B%5Calpha%7D%7B2%7D%7D%7D%7B4n%5E%7B2%7D%7D%7D%7D%7B1%2B%5Cfrac%7B1%7D%7Bn%7Dz%5E%7B2%7D_%7B1-%5Cfrac%7B%5Calpha%7D%7B2%7D%7D%7D&chs=180)


在上面的公式中，![](http://chart.googleapis.com/chart?cht=tx&chl=%5Chat%7Bp%7D&chs=20)表示样本的"赞成票比例"，n表示样本的大小，![](http://chart.googleapis.com/chart?cht=tx&chl=z_%7B1-%5Calpha%2F2%7D&chs=25)表示对应某个置信水平的z统计量，这是一个常数，可以通过查表或统计软件包得到。一般情况下，在95%的置信水平下，z统计量的值为1.96。


威尔逊置信区间的均值为

![](http://chart.googleapis.com/chart?cht=tx&chl=%5Cfrac%7B%5Chat%7Bp%7D%2B%5Cfrac%7B1%7D%7B2n%7Dz%5E%7B2%7D_%7B1-%5Cfrac%7B%5Calpha%7D%7B2%7D%7D%7D%7B1%2B%5Cfrac%7B1%7D%7Bn%7Dz%5E%7B2%7D_%7B1-%5Cfrac%7B%5Calpha%7D%7B2%7D%7D%7D&chs=100)


它的下限值为

![](http://chart.googleapis.com/chart?cht=tx&chl=%5Cfrac%7B%5Chat%7Bp%7D%2B%5Cfrac%7B1%7D%7B2n%7Dz%5E%7B2%7D_%7B1-%5Cfrac%7B%5Calpha%7D%7B2%7D%7D-z_%7B1-%5Cfrac%7B%5Calpha%7D%7B2%7D%7D%5Csqrt%7B%5Cfrac%7B%5Chat%7Bp%7D(1-%5Chat%7Bp%7D)%7D%7Bn%7D%2B%5Cfrac%7Bz%5E%7B2%7D_%7B1-%5Cfrac%7B%5Calpha%7D%7B2%7D%7D%7D%7B4n%5E%7B2%7D%7D%7D%7D%7B1%2B%5Cfrac%7B1%7D%7Bn%7Dz%5E%7B2%7D_%7B1-%5Cfrac%7B%5Calpha%7D%7B2%7D%7D%7D&chs=150)


可以看到，当n的值足够大时，这个下限值会趋向![](http://chart.googleapis.com/chart?cht=tx&chl=%5Chat%7Bp%7D&chs=20)。如果n非常小（投票人很少），这个下限值会大大小于![](http://chart.googleapis.com/chart?cht=tx&chl=%5Chat%7Bp%7D&chs=20)。实际上，起到了降低"赞成票比例"的作用，使得该项目的得分变小、排名下降。









# 2 置信区间



Pr(c1<=μ<=c2)=1-α


α是[显著性水平](https://baike.baidu.com/item/%E6%98%BE%E8%91%97%E6%80%A7%E6%B0%B4%E5%B9%B3)（例：0.05或0.10）


100%*（1-α）指置信水平（例：95%或90%）


表达方式：interval（c1,c2)——置信区间。









转载自：http://www.ruanyifeng.com/blog/2012/03/ranking_algorithm_wilson_score_interval.html



