# 一段小程序 - Arthur的随笔 - CSDN博客
2011年12月26日 21:43:45[largetalk](https://me.csdn.net/largetalk)阅读数：621标签：[encoding																[string																[import																[each																[lambda																[c](https://so.csdn.net/so/search/s.do?q=c&t=blog)](https://so.csdn.net/so/search/s.do?q=lambda&t=blog)](https://so.csdn.net/so/search/s.do?q=each&t=blog)](https://so.csdn.net/so/search/s.do?q=import&t=blog)](https://so.csdn.net/so/search/s.do?q=string&t=blog)](https://so.csdn.net/so/search/s.do?q=encoding&t=blog)
个人分类：[python](https://blog.csdn.net/largetalk/article/category/715661)
```python
#coding: utf8
import re
reg = re.compile('\\\u([0-9a-f]{4})')
def realunichr(original):
    return unichr(long(original, 16))
def safe_decode(orig):
    try:
        return orig.decode('utf8')
    except UnicodeDecodeError:
        pass
    try:
        return orig.decode('gb2312')
    except UnicodeDecodeError:
        pass
    try:
        return orig.decode('gbk')
    except UnicodeDecodeError:
        pass
    try:
        return orig.decode('big5')
    except UnicodeDecodeError:
        pass
def convert(original):
    tz = reg.split(safe_decode(original))
    tp = map(lambda x: realunichr(x) if tz.index(x)%2 else x, tz)
    return ''.join(tp)
bb = "dad\u0254dd"
print bb
print convert(bb)
bb = "\u0255dad\u0254dd"
print convert(bb)
bb = "\u0254"
print convert(bb)
bb = "ddff\u0254"
print convert(bb)
bb = "\u0254aabb"
print convert(bb)
bb = "aa\u0255\u0254aabb"
print convert(bb)
bb = "aa\u0255\u0254"
print convert(bb)
bb = "aa\u0254aa\u0254aa"
print convert(bb)
bb = "aa\u0254aa中\u0254aa"
print convert(bb)
bb = "中过"
bb = bb.decode('utf8').encode('gb2312')
print convert(bb)
```
 另一个网上抄的程序，求汉字拼音首字母的， 保存起来
```python
#!/usr/bin/env python
# coding : utf-8
# author : binux(17175297.hk@gmail.com)
def getFirstPY(word, encoding='utf-8'):
    if isinstance(word, unicode):
        try:
            word = word[0].encode('gbk')
        except:
            return '?'
    elif isinstance(word, str):
        try:
            word = word.decode(encoding)[0].encode('gbk')
        except:
            return '?'
    if len(word) == 1:
        return word
    else:
        asc = ord(word[0])*256 + ord(word[1]) - 65536
        if asc >= -20319 and asc <= -20284:
            return 'a'
        if asc >= -20283 and asc <= -19776:
            return 'b'
        if asc >= -19775 and asc <= -19219:
            return 'c'
        if asc >= -19218 and asc <= -18711:
            return 'd'
        if asc >= -18710 and asc <= -18527:
            return 'e'
        if asc >= -18526 and asc <= -18240:
            return 'f'
        if asc >= -18239 and asc <= -17923:
            return 'g'
        if asc >= -17922 and asc <= -17418:
            return 'h'
        if asc >= -17417 and asc <= -16475:
            return 'j'
        if asc >= -16474 and asc <= -16213:
            return 'k'
        if asc >= -16212 and asc <= -15641:
            return 'l'
        if asc >= -15640 and asc <= -15166:
            return 'm'
        if asc >= -15165 and asc <= -14923:
            return 'n'
        if asc >= -14922 and asc <= -14915:
            return 'o'
        if asc >= -14914 and asc <= -14631:
            return 'p'
        if asc >= -14630 and asc <= -14150:
            return 'q'
        if asc >= -14149 and asc <= -14091:
            return 'r'
        if asc >= -14090 and asc <= -13119:
            return 's'
        if asc >= -13118 and asc <= -12839:
            return 't'
        if asc >= -12838 and asc <= -12557:
            return 'w'
        if asc >= -12556 and asc <= -11848:
            return 'x'
        if asc >= -11847 and asc <= -11056:
            return 'y'
        if asc >= -11055 and asc <= -10247:
            return 'z'
        return '?'
def getPY(string, encoding=("utf-8","gbk", "gb2312")):
    if isinstance(string, str):
        for en in encoding:
            try:
                string = string.decode(en)
                break
            except:
                pass
    result = []
    for each in string:
        result.append(getFirstPY(each))
    return "".join(result)
import fileinput
for line in fileinput.input():
    print getPY(line)
```

