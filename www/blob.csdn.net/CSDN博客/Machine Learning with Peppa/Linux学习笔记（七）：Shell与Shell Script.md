# Linux学习笔记（七）：Shell与Shell Script - Machine Learning with Peppa - CSDN博客





2018年03月14日 22:16:53[刺客五六柒](https://me.csdn.net/qq_39521554)阅读数：1684
所属专栏：[Linux私房菜](https://blog.csdn.net/column/details/20153.html)









## 一、什么是shell？

Shell 是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。Shell 既是一种命令语言，又是一种程序设计语言。Shell 是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务。Ken Thompson 的 sh 是第一种 Unix Shell，Windows Explorer 是一个典型的图形界面 Shell。

# Shell 脚本（shell script），是一种为 shell 编写的脚本程序。业界所说的 shell 通常都是指 shell 脚本，但读者朋友要知道，shell 和 shell script 是两个不同的概念。由于习惯的原因，简洁起见，本文出现的 "shell编程" 都是指 shell 脚本编程，不是指开发 shell 自身。

# Shell和shell脚本有什么区别？确切一点说，Shell就是一个命令行解释器，它的作用就是遵循一定的语法将输入的命令加以解释并传给系统。它为用户提供了一个向Linux发送请求以便运行程序的接口系统级程序，用户可以用Shell来启动、挂起、停止甚至是编写一些程序。 Shell本身是一个用C语言编写的程序，它是用户使用Linux的桥梁。Shell既是一种命令语言，又是一种程序设计语言(就是你所说的shell脚本)。作为命令语言，它互动式地解释和执行用户输入的命令；作为程序设计语言，它定义了各种变量和参数，并提供了许多在高阶语言中才具有的控制结构，包括循环和分支。它虽然不是 Linux系统内核的一部分，但它调用了系统内核的大部分功能来执行程序、创建文档并以并行的方式协调各个程序的运行。







## 二、如何使用？

# shell脚本打开文本编辑器(可以使用vi/vim命令来创建文件)，新建一个文件test.sh，扩展名为sh（sh代表shell），扩展名并不影响脚本执行，见名知意就好，如果你用php写shell 脚本，扩展名就用php好了。输入一些代码，第一行一般是这样：

```cpp
#!/bin/bash
```

```cpp
echo "Hello World !"
```

# "#!" 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种Shell。echo命令用于向窗口输出文本。Shell Script，Shell脚本与Windows/Dos下的批处理相似，也就是用各类命令预先放入到一个文件中，方便一次性执行的一个程序文件，主要是方便管理员进行设置或者管理用的。但是它比Windows下的批处理更强大，比用其他编程程序编辑的程序效率更高，它使用了Linux/Unix下的命令。




## 三、**注意事项：**


- 指令的执行时从上到下，从左到右
- 指令、选项与参数之间的多个空白都会被忽略掉
- 空白行也会被忽略掉，并且tab同样视为空格
- 如果读取到一个enter符号，就会尝试改行命令。可以用’\’来转义一个enter。
- #后面是批注，不被执行

#     在赋值语句name=value中不能存在空格，例如：name = value这样的形式会被认为是三个变量，因为本质上来说，脚本的内容就是传给shell程序的变量，而变量之间是通过空格区分的。如果想要在value里面出现空格，则需要用引号标注出来，想要应用变量的内容则在变量名前加‘$’符号，如下：    当我们需要在一些非空格字符之间插入变量时，例如：为了脚本的扩展性，常在路径名/home/my$USERtxt中用变量取代一部分内容，但是这样做的话，我们其实无法区分变量名是USER还是USERtxt，解决方法其实很简单，把变量名用花括号括起来即可，如/home/my${USER}txt    定义变量时，在变量名前加export就可以将该变量变为全局变量，并且可以在子shell中调用它，不过需要注意的是，该全局变量是通过“值传递”的方式进入子shell的，类似与C语言中的函数参数，虽然在子函数中改变了它的值，但是它原本的值并没有改变。那么有没有类似指针的东西能直接改变原变量的值呢？回答是，没有。（通过env或者export -p命令可以查看全部的全局变量）    同时我们能像C语言一样直接给shell脚本传递命令行参数，在脚本中$1就表示第一个参数，$2表示第二个参数，以此类推，需要注意的是，当表示第十个以上的参数时，需要用花括号将序号括起来，例如：${10}，因为$10会被分解为$1和0。这里需要注意的是，如果命令行参数表示的字符串里有空格，那么在输入命令行是要将该参数用引号括起来，同时在脚本里引用时，也要使用引号，例如：ls "${1}"，否则在脚本内部，该参数也会被误认为由空格分割的多个参数


## 四、执行方式
- 直接当做命令下达：该档案必须有rx权限，然后必须可以找到该命令，即要么通过绝对路径或相对路径，或者利用环境变量PATH
- 以bash程序来执行：通过bash shell.sh或许sh shell.sh来执行（shell.sh是我们写好的脚本）这时相当于一个子程序中执行，所以在shell.sh中自定义的变量不会保留到父程序当中。除非在脚本中加入export，把自定义变量加入到环境变量

     3. 用source命令来执行：这时就是在父程序中执行脚本






