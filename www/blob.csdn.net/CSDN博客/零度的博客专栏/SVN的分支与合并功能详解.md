# SVN的分支与合并功能详解 - 零度的博客专栏 - CSDN博客
2017年03月24日 16:19:37[零度anngle](https://me.csdn.net/zmx729618)阅读数：284
                
分支的基本概念就正如它的名字,开发的一条线独立于另一条线,如果回顾历史,可以发现两条线分享共同的历史,一个分支总是从一个备份开始的,从那里开始,发展自己独有的历史(如下图所示)
![](http://chaxinyi.iteye.com/upload/picture/pic/10345/a5f7da85-6e2c-3c41-b9e1-57c1e4874747.jpg)
⑴创建分支 
假设目前我们版本库中的项目的布局如下图： 
![](http://chaxinyi.iteye.com/upload/picture/pic/10347/3e3b403f-7684-3eca-b47e-efc191928a90.jpg)
如图所示，我们的项目放在了trunk（主线）目录，另外还有branch(分支)和tags(标签)目录，这样的布局是为了更清晰的区别主线、分支和标签三者的位置。 
subversion对分支和标签是通过复制一份最新的版本库的快照来实现的。 
开始创建分支： 
在我们CheckOut的主线目录(trunk)上，右键点击然后选择“Branch/tag…” 
![](http://chaxinyi.iteye.com/upload/picture/pic/10349/0e66b0bf-118b-3b96-a5c9-0f16df426773.jpg)
在弹出的窗口中，将To Url 指向branch目录并输入分支的具体目录名，这里是mybranch1.0，我们即将创建的分支便存放于此处，点击OK。 
![](http://chaxinyi.iteye.com/upload/picture/pic/10351/d40acf2e-1133-3380-b183-fcc8aedc14cd.jpg)
Update一下本地的branch目录，你就可以看到你刚刚创建的分支“mybranch1.0”，这样一来我们的分支就创建完成了。 
![](http://chaxinyi.iteye.com/upload/picture/pic/10353/d8552794-297c-39c2-ae11-fe62ae22a9f3.jpg)
创建分支的最大的目的就是跟主线进行并行开发的时候不影响主线的开发。 
因为你在分支上所做的提交都只存于分支上，主线上的Update是看不到分支的修改的。如下图所示，trunk只能看到r344的版本，并看不到r343的版本。 
![](http://chaxinyi.iteye.com/upload/picture/pic/10355/3888d86d-c616-38d0-9306-6adb75b52a76.jpg)
（什么时候应该使用分支呢？例如你接到了一个任务，完成这个任务需要三四个人的合作，你们之间需要共享资源，那们就可以创建一个专为这次任务的分支，参与此次任务的人员则在分支上做开发，等完成之后再合并到主线上，才不会出现将实现了一半的不完成功能也提交到主线上，影响主线的正常工作。又或者自己需要一个较长的开发周期来完成任务，这么长的时间内如果一直没有将资源进行提交，万一丢失了就前功尽弃了。当然分支不是只用于此类情况，还有其它很多种情况也能使用分支来达到目的。）
使用分支需要注意,由于长期的独立开发，可能会在合并回主线时出现较多的冲突。所以在支线上开发间期如果发现主干有更新，而且这个更新有可能将来跟你产生冲突，那你可以先将主线的内容合并到分支上。已免等到做了大量修改再来更新。(其实此过程跟分支合并到主线上是一样的操作，只是目的地不同。)
例如我们在主线上的版本为3，我们如何将此版本的信息合并到分支上呢？ 
![](http://chaxinyi.iteye.com/upload/picture/pic/10357/bf1c755b-689b-3989-9a30-087905177164.jpg)
在分支的根目录上右键点击，选择“TortoiseSVNMerge…”。 
![](http://chaxinyi.iteye.com/upload/picture/pic/10359/c5181bd0-cba5-3cfd-8b3c-b87f7b67bc41.jpg)
在这里我们必需先弄明白一个合并背后的关健概念 
合并的过程中发生的所有事:首先两个版本库树的比较，然后将区别应用到本地拷贝. 
这个命令是包括三个参数的: 
1. 初始的版本树 2.最终的版本树 3一个接收区别的工作拷贝。 
弄明白这些概念之后我们继续往下操作。 
在弹出的窗口中，选择主线目录和其版本号(初始的版本树)，再选择主线目录和最新的版本号（最终的版本树），这里也可以是某一个版本号但应该比初始的版本树的版本号要高，接收区默认为你右键所指的目录，这里是mybranch1.0。
在合并之前我们可以通过点击“Unified diff”，查看两版本树之间所有文件的内容的变化，“diff”显示出有发生变化的文件列表，“dry run”能显示真正合并时的状态信息，但并没有做任何的合并操作。
我们点击“Merge”。 
![](http://chaxinyi.iteye.com/upload/picture/pic/10361/79cca1ca-b738-30c4-8ec6-0c5ba2bbe842.jpg)
在点击“Merge”，合并后的文件（即对分支上的文件补上了主线上修改的内容），如无冲突则可以在分支上像其它文件一样使用了，如果合并后的内容不满意，可以通过撤销来取消这次的合并操作，前提是未对合并后的文件做提交操作。
分支合并到主线跟从主线上合并内容到分支上类似 
不同的是 
1、开始的版本库是分支创建的版本 
2、结束的版本库是完成所以开发工作之后的版本 
3、应用的目的是主线目录 
关于转换工作拷贝、标签（标签在Subversion中跟分支是相同原理的，一个不去做任何的修改的分支就是版本库某一时刻的一个快照，相当于为某一个版本做了一个标签） 
            
