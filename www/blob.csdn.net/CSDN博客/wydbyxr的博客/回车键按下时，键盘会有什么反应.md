# 回车键按下时，键盘会有什么反应 - wydbyxr的博客 - CSDN博客
2018年12月24日 09:39:38[whitenightwu](https://me.csdn.net/wydbyxr)阅读数：70
## 吐槽一句自己，这种贼偏门东西怎么也收录了…
  为了从零开始，我们选择键盘上的回车键被按到最低处作为起点。在这个时刻，一个专用于回车键的电流回路被直接地或者通过电容器间接地闭合了，使得少量的电流进入了键盘的逻辑电路系统。这个系统会扫描每个键的状态，对于按键开关的电位弹跳变化进行噪音消除(debounce)，并将其转化为键盘码值。在这里，回车的码值是13。键盘控制器在得到码值之后，将其编码，用于之后的传输。
现在这个传输过程几乎都是通过通用串行总线(USB)或者蓝牙(Bluetooth)来进行的，以前是通过PS/2或者ADB连接进行。
  1）USB键盘：
  键盘的USB元件通过计算机上的USB接口与USB控制器相连接，USB接口中的第一号针为它提供了5V的电压键码值存储在键盘内部电路一个叫做"“endpoint”“的寄存器内USB控制器大概每隔10ms便查询一次”“endpoint”“以得到存储的键码值数据，这个最短时间间隔由键盘提供键值码值通过USB串行接口引擎被转换成一个或者多个遵循低层USB协议的USB数据包这些数据包通过D+针或者D-针(中间的两个针)，以最高1.5Mb/s的速度从键盘传输至计算机。速度限制是因为人机交互设备总是被声明成”“低速设备”"（USB 2.0 compliance）。
  这个串行信号在计算机的USB控制器处被解码，然后被人机交互设备通用键盘驱动进行进一步解释。之后按键的码值被传输到操作系统的硬件抽象层。
  2）虚拟键盘（触屏设备）：
  在现代电容屏上，当用户把手指放在屏幕上时，一小部分电流从传导层的静电域经过手指传导，形成了一个回路，使得屏幕上触控的那一点电压下降，屏幕控制器产生一个中断，报告这次“点击”的坐标。
  然后移动操作系统通知当前活跃的应用，有一个点击事件发生在它的某个GUI部件上了，现在这个部件是虚拟键盘的按钮虚拟键盘引发一个软中断，返回给OS一个“按键按下”消息"。
