# 【DMA模式2联想到的磁盘坏道】终于CHKDSK解决了！ - 三少GG - CSDN博客
2011年10月04日 00:31:49[三少GG](https://me.csdn.net/scut1135)阅读数：4516
### 【DMA模式2联想到的磁盘坏道】
检查DMA模式如下：
![](http://hi.csdn.net/attachment/201110/4/0_13177132102kUr.gif)
### 虽然已开启，但是居然是模式2,33M/s的传输速度。肯定有问题。若不开启，则
### ![](http://hi.csdn.net/attachment/201110/4/0_1317713446Z4u7.gif)
### 又经HDD测试如下：当前模式为UDMA Model 6,为何和上图不一致，费解~
### ![](http://hi.csdn.net/attachment/201110/4/0_1317713311l4ZU.gif)
意外发现如下warning：
![](http://hi.csdn.net/attachment/201110/4/0_1317713344u278.gif)
有warning！
本次长达两周的修电脑终于告一段落了，但也许好景不长。
【症状】开机欢迎之后先黑3s才能缓慢进入桌面，开机时间解决3分钟，是平时正常（50几s）的几倍。磁盘持续发出多，杂的磨牙声音。。。
             进入系统后速度极其慢，浏览器，QQ经常假死。死机时常发生，但cpu利用率很正常。清除风扇等之后，所有问题再一次指向了硬盘！！！
【原因】 磁盘有坏道啦！进而估计也会引起DMA模式降为2等一系列反应~~~
![](http://hi.csdn.net/attachment/201110/4/0_1317716972GjWk.gif)
可知如果重装系统很可能也不管用。
**【权宜之计】 1. CHKDSK 可以防止继续使用坏道，起到临时避免作用。（正是靠这个办法解决的）**
![](http://hi.csdn.net/attachment/201110/4/0_1317717272f6dX.gif)
这次即检查出25个bad clusters如下：
CHKDSK is verifying file data(stage 4 of 5)...
Windows replaced bad clusters in file 48473
of name \users\Admin~1\AppData\Local\MICROS~1\Windows\Tempor-1\Content-IE5\index.dat
Windows replaced bad clusters in file 72397
of name \windows\winsxs\X8635B~1.166\msxml3.dll
...of name \PROGRA~1\kwsing\TEMP\denoise.wav
...of name \PROGRA_2\koowo\data\kusing\..
...of name \Windows\Install\188353.msi
               \windows\system32\pxsfs.dll
...of name \opencv2.0\vs2008\3rdparty\libpng\libpng.dir\Release\pngwutil.obj
...
汇总信息显示：  172KB in bad sectors.
2.将虚拟内存pagefile文件移至确保没有坏道的盘中 
![](http://hi.csdn.net/attachment/201110/4/0_13177171815BaU.gif)
3 尝试修复磁盘坏道
待续。。。
关于磁盘坏道：[http://baike.baidu.com/view/951202.htm](http://baike.baidu.com/view/951202.htm)
如果硬盘有下列情况，应怀疑它有坏道
　　①**在打开、运行文件时，硬盘速度明显变慢；或明显听到硬盘“嗒嗒”响**，有时Windows还会提示无法读写文件。
　　②每次开机都自动进行磁盘扫描，这表明硬盘有需要修复的错误。如果该程序不能顺利通过，就表明硬盘有坏道了；或者扫描虽可通过，但在某些位置标记为红色的“B”。
　　③硬盘无法引导，用软盘或光盘启动后可看见硬盘盘符，但无法对其进行操作；或根本看不到盘符。
　　④在读取某一文件或运行某一程序时，硬盘反复读盘且出错，提示文件损坏等信息，或者要经过很长时间才能成功；有时甚至会出现蓝屏等
　　⑤**硬盘声音突然由原来正常的摩擦音变成了怪音**
　　⑥在排除病毒感染的情况下系统无法正常启动，出现“Sector not found”或“General error in reading drive C”等提示信息
　　⑦FORMAT硬盘时，到某一进度停止不前，最后报错，无法完成
　　⑧每次系统开机都会自动运行Scandisk扫描磁盘错误
　　⑨对硬盘执行FDISK时，到某一进度会反复进进退退
　　⑩启动时不能通过硬盘引导系统，用软盘启动后可以转到硬盘盘符，但无法进入，用SYS命令传导系统也不能成功。这种情况很有可能是硬盘的引导扇区出了问题。
发现硬盘坏道后要修复，以免坏道扩散。
　　发现硬盘坏道后要修复或隐藏，以免坏道扩散。
　　方法一：磁盘扫描标记坏道，让系统不再向其存入数据
　　在Windows中选择盘符，从右键菜单中选择“属性”，在“工具”选项中对硬盘盘面作完全扫描，并对可能出现的坏簇自动修正。
+++++++++++++如何修复+++++++++++++++++
关于能否以及如何修复网上说法五花八门，众说不一
比如：   硬盘坏道分两种，一种假的，逻辑坏道，一种真的物理坏道
逻辑坏道就是数据读写 错误造成的，直接格式化就行了。真的坏道就是磁盘盘片坏了，
如果你的盘存放一些重要数据建议换个硬盘，因为物理坏道很难修复，我试过很多软件不是很理想
mhdd 或者是一些硬盘修复软件，都不是很好，要是你真想用可以测试如来硬盘坏道的位置，然后分割一个区给他，pm可以，做到，隐藏掉那个区就行了。dm低格，不是迫不得已不要用，效果没试过，但是低格很慢，很伤硬盘硬盘出现坏道后，就不要继续使用了，一些常用的屏蔽坏道软件并不十分理想，除非您存储不重要的数据，如电影音乐什么的，如果存储重要的文档，突然坏掉了，做数据恢复的话，要远比一块硬盘贵，所以，为了数据安全，建议您换一块硬盘，如果硬盘在质保，那么直接去换一块好了。硬盘故障一般很少修的，越修越糟糕，最好的解决办法就是换。 
大家比较赞同的修复软件是1.** PartitionMagic隐藏分区法** 及**2.HDD Regenerator**(值得注意的是，最新的V1.71，可以直接在winXP/Vista下完成扫描与修复,方便了许多)
1.** PartitionMagic**
**贡献两个下载地址吧：**
**1. [http://www.hanzify.org/software/6509.html](http://www.hanzify.org/software/6509.html)   (v8.05 xp版本，win7下用不了)**
2**. [http://www.9553.com/soft/2117.htm](http://www.9553.com/soft/2117.htm)    （其实是v8.0 win7下也用不了，故下面这个方法没有尝试）**
# [硬盘坏道修复全攻略](http://article.pchome.net/content-17390.html)
**方法一：用PartitionMagic等磁盘软件完成工作**
如PartitionMagic分区软件，先用PartitionMagic4中的“check”命令或Windows中的磁盘扫描程序来扫描磁盘，算出坏簇在硬盘上的位置，然后在Operation菜单下选择“Advanced/badSectorRetest”，把坏簇所在硬盘分成多个区后，再把坏簇所在的分区隐藏，以免在Windows中误操作，这个功能是通过HidePartition菜单项来实现的。这样也能保证有严重坏道的硬盘的正常使用，并免除系统频繁地去读写坏道从而扩展坏道的面积。但是这需要对这些软件熟悉，并且有计算硬盘的经验，许多人并不容易做到准确。
**2.HDD Regenerator**
**v.1.71**
**关于如何使用见如下两篇好文章：**
**1). **[HDD Regenerator Shell中文版+使用教程](http://apps.hi.baidu.com/share/detail/30701809)****
**2). [http://www.verycd.com/topics/2903985/](http://www.verycd.com/topics/2903985/)**
但是这个版本是使用demo版，"如果您使用的是非注册版本，您就只能修复找到的第一个坏道"
比如我的： sectors 0-45140277
                 0M-21GB    22041MB
 1 sectors ever recovered.  
整个修复时间320G硬盘约为80分钟(指完整版，没办法我只有一个一个重启修复了)。
重要提示：--HDDR直接工作于硬件底层，不会影响硬盘的逻辑结构。即使您的硬盘已经得到修复，文件系统可能仍会保持着早先所标记的坏道信息，如果您想清除这些早先的坏道信息，可以用PQ（分区魔术师）之类的软件对硬盘重新分区.
ps：dos下关机或重启
① shutdown [-i | -l | -s | -r | -a] [-f] [-m \\computername] [-t xx] [-c "
mment"] [-d up:xx:yy]
        没有参数                显示此消息(与 ? 相同)
        -i                      显示 GUI 界面，必须是第一个选项
        -l                      注销(不能与选项 -m 一起使用)
        -s                      关闭此计算机
        -r                      关闭并重启动此计算机
        -a                      放弃系统关机
        -m \\computername       远程计算机关机/重启动/放弃
        -t xx                   设置关闭的超时为 xx 秒
        -c "comment"            关闭注释(最大 127 个字符)
        -f                      强制运行的应用程序关闭而没有警告
        -d [u][p]:xx:yy         关闭原因代码
                                u 是用户代码
                                p 是一个计划的关闭代码
                                xx 是一个主要原因代码(小于 256 的正整数)
                                yy 是一个次要原因代码(小于 65536 的正整数)
②按 Ctrl+Alt+Del都可以。
3.初次之外，还有MHDD 
1)
2)[MHDD使用方法图解](http://wenku.baidu.com/view/14037b0abb68a98271fefafa.html)
3)
【告诫】爱惜磁盘！这块盘断电(上百次)，死机强制重启的次数太多。磁盘碎片，坏道屡次发生。CHKDSK检出25个左右bad clusters足可证明。上一次电脑出问题也是由于硬盘问题，这块希捷的硬盘太差了，再不用了！
【彻底解决】估计以上方法又撑不了个把月。最终还是需要换个500G或者1T的硬盘才是王道。！以后要多加注意爱惜硬盘。
【PS:】磁盘磨牙声少了点，但还是有。起码系统，开机什么的恢复正常了。
2011.10.4
+++++++++++++++++++++++++++++
定期整理磁盘碎片
1)硬盘在使用一段时间后，文件的反复存放、删除，往往会使许多文件，尤其是大文件在硬盘上占用的扇区不连续，看起来就像一个个碎片，它们虽说一般不会影响系统的正常运行，但会对系统的性能造成一定的影响。此外硬盘上碎片过多会极大地影响硬盘的速度，甚至造成程序不能正常运行。为了保证文件的连续存放，提高系统的运行效率，在适当的时候对硬盘上的文件碎片进行整理。具体操作步骤：点击“开始”，选择“程序”*“附件”*“系统工具”*“磁盘碎片整理程序”。
2)磁盘整理和磁盘碎片整理有什么区别？分别对电脑有什么作用？
磁盘清理是删除一些无用的文件.磁盘上文件的保存不是连续的,而是分块保存的.比如文件A保存在1、3块，文件B保存在2、4块，当文件B删除后，夹在文件A中的块2就没用了。它就形成了一块碎片。以上是比较简单的说明，在实际应用中，如果不定期清理，这种碎片在磁盘中是很多的。如果碎片太多，将导致硬盘的读写性能下降，甚至对磁盘的寿命产生影响。**整理碎片是不会对实际的空间产生影响的，除非硬盘出现了坏的磁道或坏的扇区**。
没什么区别，硬盘在使用一段时间后，由于反复写入和删除文件，磁盘中的空闲扇区会分散到整个磁盘中不连续的物理位置上，从而使文件不能存在连续的扇区类。这样，再读写文件是就需要到不同的地方去读取，增加了磁头的来回移动，降低了磁盘的访问速度。所以说硬盘就像屋子一样需要常整理，这样才能够加快电脑的运行速度。要整理磁盘我们就要用到“磁盘碎片整理程序”这个东西，但是我们如果用Windows自带的磁盘碎片整理软件来整理，速度非常的慢。
磁盘整理和磁盘碎片整理，我打个比如吧磁盘整理呢是把一个垃圾文件或临时文件删除 碎片整理呢，就是把存在磁盘里零零散散的文件排好放好，整理到一块儿，使磁盘读写速度加快.前者清理磁盘上多余的文件——垃圾；后者将“翻乱”的文件整齐地“归纳”。
一、使用“磁盘清理”释放磁盘空间。 是清理不需要的文件，二是清除垃圾文件，这样可以整理出更多的磁盘空间。 
二、使用“磁盘整理碎片整理程序”提高运行速度。 
磁盘使用久了空间就会七零八落，到处都有数据，这种现象称为“碎片”现象。如果一个文件产生了碎片，表示它占用磁盘是不连续的，这样就需要到不同的地方去读取文件，增加了磁头运动，降低了磁盘的访问速度。使用“磁盘整理碎片整理程序”可以重新安排文件使其连续起来，以加快访问速度，提高程序的运行速度。
三、清理磁盘是把没用的文件或垃圾文件从磁盘上清除出去，自然增加收入了磁盘空间；而磁盘整理碎片整理并不清除什么文件或垃圾，只是把原有的数据重新排放一次，使之连续易读，不增加磁盘空间。
3）不能被整理的文件主要有以下几种 
1，正在使用的文件 
2，文件体积超过了该分区的剩余容量 
3，磁盘坏道区域的数据无法整理 
3，MFT文件 
4，休眠以及页面文件 
5，部分病毒文件 
### ++++++++++++附加知识++++++++++++++++
### [为什么一个磁盘的sector是512个字节](http://blog.csdn.net/pennyliang/article/details/5749403)
### [](http://blog.csdn.net/pennyliang/article/details/5749403)
     磁盘分为磁道(track)，每条track上有若干sector，每个sector为512字节，为什么是512字节呢？这是1956年由industry trade organization, International Disk Drive Equipment和Materials Association三家机构确定的行业标准。
     随着时代的发展512的sector大小明显太小了，由于每个sector还要存放很多其他信息【3】，因此增大sector size可以降低sector的数量，从而提高实际存储量，同时降低了差错校验等很多CPU计算量。但遗憾的是由于这个标准太根深低估很多代码开发都默认了这一size要想改势必登天【2】。
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
**MHDD使用方法图解**
**MHDD使用方法图解**
