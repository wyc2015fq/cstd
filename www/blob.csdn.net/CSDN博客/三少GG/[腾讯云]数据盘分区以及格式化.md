# [腾讯云]数据盘分区以及格式化 - 三少GG - CSDN博客
2015年12月19日 15:00:00[三少GG](https://me.csdn.net/scut1135)阅读数：4228
**首先切换到root账户下  sudo -i**
## 手动格式化
请根据以下步骤对数据盘进行分区以及格式化，并挂载分区使数据盘可用。
注：
执行以下命令时，请注意修改数据盘符，可以使用”fdisk -l”查看盘符等相关信息，以下均以xvdb为例，若是其他盘符，仅需将vdb替换为该盘符即可，如fdisk /dev/vdb替换为fdisk /dev/xvdb
请确认路径为“/dev/vdb”,若错填为“/dev/vda”,将会造成云主机崩溃
### 2.1 查看数据盘信息
登录Linux云服务器后，可以使用“fdisk -l”命令查看数据盘相关信息。
使用“df -h”命令，无法看到未分区和格式化的数据盘。 
![Linuxgeshi-1.png](http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Linuxgeshi-1.png)
### 2.2 数据盘分区
执行以下命令，对数据盘进行分区。
fdisk /dev/vdb
按照界面的提示，依次输入“n”(新建分区)、“p”(新建扩展分区)、“1”(使用第1个主分区)，两次回车(使用默认配置)，输入“w”(保存分区表)，开始分区。
这里是以创建1个分区为例，开发者也可以根据自己的需求创建多个分区。
![Linuxgeshi-2.png](http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Linuxgeshi-2.png)
### 2.3 查看新分区
使用“fdisk -l”命令，即可查看到，新的分区vdb1已经创建完成。
![Linuxgeshi-3.png](http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Linuxgeshi-3.png)
### 2.4 格式化新分区
在进行分区格式化时，开发者可以自行决定文件系统的格式，如ext2、ext3等。
这里以“ext3”为例：
使用下面的命令对新分区进行格式化。 
**mkfs.ext3 /dev/vdb1**
![Linuxgeshi-4.png](http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Linuxgeshi-4.png)
### 2.5 挂载新分区
使用命令“mkdir /mydata”创建mydata目录，再通过“mount /dev/vdb1 /mydata”命令手动挂载新分区后，用“df -h”命令查看，出现以下信息说明挂载成功，即可以查看到数据盘了。
![shoudonggeshi-1.png](http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/shoudonggeshi-1.png)
### 2.6 添加分区信息
如果希望云服务器在重启或开机时能自动挂载数据盘，必须将分区信息添加到/etc/fstab中。如果没有添加，则云服务器重启或开机后，都不能自动挂载数据盘。
请确认分区路径是否为 “/dev/vdb1”,若路径错误，将会造成云主机重启失败
使用“echo '/dev/vdb1 /mydata ext3 defaults 0 0' >> /etc/fstab”命令添加分区信息后，使用“cat /etc/fstab”命令查看，出现以下信息表示添加分区信息成功。
![Linuxgeshi-6.png](http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Linuxgeshi-6.png)
sudo chmod 777 /data
