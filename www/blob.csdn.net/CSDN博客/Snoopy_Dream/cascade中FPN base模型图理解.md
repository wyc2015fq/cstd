# cascade中FPN base模型图理解 - Snoopy_Dream - CSDN博客





2018年06月29日 11:23:26[Snoopy_Dream](https://me.csdn.net/e01528)阅读数：323
所属专栏：[cascade rcnn目标检测](https://blog.csdn.net/column/details/25672.html)









![](https://img-blog.csdn.net/20180629112525441?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2UwMTUyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

0.上图是普通的FPN



1.下面是我自己手绘的模型图，首先C2-C5 表示的res2c-res5c每个对应的末层进行1*1*256全卷积，保证通道的一致。

2.下图1中包含了从下往上（up branch）（不断向上 下采样）即把底层的细节带给顶层，这样P5这样的层寻找大目标的时候就会更准确，和从上往下（down branch）（不断向下 上采样），保证底层的语义信息增强，小目标的勘测能力变强。且下图给出了最方便的P2和P5层。

3.下图2给出了P3，P4的生成。

4.最终P层后面都接上RPN就是RPN

注意：cascade中已经把上采样改成了反卷积，也因此short size这些只能是32的倍数

![](https://img-blog.csdn.net/20180629112247790?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2UwMTUyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)![](https://img-blog.csdn.net/20180629112203774?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2UwMTUyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)



------------------------------------------------------------------------------------------------



后来添加，整体理解的添加，和普通的FPN自底向上和自顶向下不一样。注：下文用到的C层都是经过全卷积的，通道都是256.

普通的P2层是**C2+P3（上采样）**=

**C2+((**C4****经过3*3去混叠+C5经过3*3去混叠***上采样****）*上采样+**C3经过3*3去混叠**）***上采样，然****后3*3卷积，去除混叠现象。

而cascade base中的**P2=C2+C3上采样+C4上采样上采样+C5上采样上采样上采样**，然后3*3卷积，去除混叠现象。

------------------------------------------------------------------------------------------------

普通的P3层=C3+**P4**（上采样），然后3*3卷积，去除混叠现象。

而cascade base中的**P3=C5上采样上采样+C4上采样+C3+C2下采样**然后3*3卷积，去除混叠现象。

------------------------------------------------------------------------------------------------

同理P4层=C4+P5（上采样）=C4+C5**经过3*3去混叠*上采样**，然后3*3卷积，去除混叠现象。

而cascade base中的**P4=C5上采样+C4+C3下采样+C2下采样下采样**然后3*3卷积，去除混叠现象。

------------------------------------------------------------------------------------------------

普通**P5=C5**，然后3*3卷积，去除混叠现象。而cascade base中的**P5=C5+C4下采样+****C3下采样下采样+C2下采样下采样下采样**，然后3*3卷积，去除混叠现象。

------------------------------------------------------------------------------------------------

灵感：这么做就有一点点PANet的感觉了，但又不是PANet。

说他像，是因为他的**自底向上**的这种**short cut**是同一种思维。也就是多了底层相加的操作，不像原来就是一股脑往上传。

说他又不是，是因为PANet中相加的操作，用的是P层与P层的下采样相加得到N层，而这里却用到的是C层与C层的下采样还有C层的上采样相加。

=======================================================

下图是PAnet的意绘图。

![](https://img-blog.csdn.net/20180629120255582?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2UwMTUyOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

-------------------------------------------------------------------------------------------------





