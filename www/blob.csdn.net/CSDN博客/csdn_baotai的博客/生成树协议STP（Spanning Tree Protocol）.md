# 生成树协议STP（Spanning Tree Protocol） - csdn_baotai的博客 - CSDN博客

2019年03月08日 20:05:17[csdn-[baotai]](https://me.csdn.net/csdn_baotai)阅读数：49


## 生成树协议STP（Spanning Tree Protocol）

**生成树协议**（英语：**Spanning Tree Protocol**，**STP**），是一种工作在OSI网络模型中的第二层(数据链路层）的通信协议，基本应用是防止交换机冗余链路产生的环路.用于确保以太网中无环路的逻辑拓扑结构.从而避免了（广播风暴）,大量占用交换机的资源。

### 工作过程：

STP的工作过程如下：首先进行根网桥的选举，其依据是网桥优先级（bridge priority）和MAC地址组合生成的桥ID，桥ID最小的网桥将成为网络中的根桥（bridge root）。在此基础上，计算每个节点到根桥的距离，并由这些路径得到各冗余链路的代价，选择最小的成为通信路径（相应的端口状态变为forwarding），其它的就成为备份路径(相应的端口状态变为blocking)。STP生成过程中的通信任务由BPDU完成，这种数据包又分为包含配置信息的配置BPDU（其大小不超过35B）和包含拓扑变化信息的通知BPDU（其长度不超过4B）。

### 端口状态：
|端口状态|端口能力|
|----|----|
|Disabled|不收发任何报文|
|Blocking|不接收或者转发数据，接收但不发送BPDU，不进行地址学习|
|Listening|不接收或者转发数据，接收并发送BPDU，不进行地址学习|
|Learning|不接收或者转发数据，接收并发送BPDU，开始进行地址学习|
|Forwarding|接收或者转发数据，接收并发送BPDU，进行地址学习|

### 特点：

（1）生成树协议提供一种控制环路的方法。采用这种方法，在连接发生问题的时候，你控制的以太网能够绕过出现故障的连接。

（2）生成树中的根桥是一个逻辑的中心，并且监视整个网络的通信。最好不要依靠设备的自动选择去挑选哪一个网桥会成为根桥。

（3）生成树协议重新计算是繁冗的。恰当地设置主机连接端口(这样就不会引起重新计算)，推荐使用快速生成树协议。

（4）生成树协议可以有效的抑制广播风暴。开启生成树协议后抑制广播风暴，网络将会更加稳定，可靠性、安全性会大大增强。

