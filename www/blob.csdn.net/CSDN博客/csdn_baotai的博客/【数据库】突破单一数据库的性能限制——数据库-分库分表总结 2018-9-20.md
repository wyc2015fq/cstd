# 【数据库】突破单一数据库的性能限制——数据库-分库分表总结 2018-9-20 - csdn_baotai的博客 - CSDN博客

2018年09月20日 10:19:16[csdn-[baotai]](https://me.csdn.net/csdn_baotai)阅读数：106


## 突破单一数据库的性能限制，之数据库-分库分表总结

# 分库分表概述

![在这里插入图片描述](https://img-blog.csdn.net/20180928002216375?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NzZG5fYmFvdGFp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

读写分离分散数据库读写操作压力，分库分表**分散存储压力**

# 适用场景

![在这里插入图片描述](https://img-blog.csdn.net/20180928002203173?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NzZG5fYmFvdGFp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

> 
**类似读写分离，分库分表也是确定没有其他优化空间之后才采取的优化方案**。那如果业务真的发展很快岂不是很快要进行分库分表了？那为何不一开始就设计好呢？

> 
按照架构设计的“三原则”（**简单原则，合适原则，演化原则**），简单分析一下：

> 
首先，这里的“如果”事实上发生的概率比较低，做10个业务有一个业务能活下去就很不错了，更何况快速发展，和中彩票的概率差不多。**如果我们每个业务上来就按照淘宝、微信的规模去做架构设计，不但会累死自己，还会害死业务**。

> 
其次，**如果业务真的发展很快，后面进行分库分表也不迟**。因为业务发展好，相应的资源投入就会加大，可以投入更多的人和更多的钱，那业务分库带来的代码和业务复杂问题就可以通过加人来解决，成本问题也可以通过增加资金来解决。

# 业务分库

![在这里插入图片描述](https://img-blog.csdn.net/20180928002147818?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NzZG5fYmFvdGFp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

![在这里插入图片描述](https://img-blog.csdn.net/20180928002231829?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NzZG5fYmFvdGFp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

# 业务分表

## 业务分表概述

![在这里插入图片描述](https://img-blog.csdn.net/20180928002242591?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NzZG5fYmFvdGFp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
![在这里插入图片描述](https://img-blog.csdn.net/20180928002341706?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NzZG5fYmFvdGFp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

## 带来的问题

### 垂直分表

增加表操作的次数

### 水平分表
- 路由问题

![在这里插入图片描述](https://img-blog.csdn.net/20180928002350736?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NzZG5fYmFvdGFp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
- 数据库操作问题

![在这里插入图片描述](https://img-blog.csdn.net/20180928002359631?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NzZG5fYmFvdGFp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

# 实现方法

![在这里插入图片描述](https://img-blog.csdn.net/20180928002408939?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NzZG5fYmFvdGFp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

类似读写分离，具体实现也是“程序代码封装”和“中间件封装”，但具体实现复杂一些，因为还有要判断SQL中具体操作的表，具体操作(例如count、order by、group by等)，根据具体操作做不同的处理。

