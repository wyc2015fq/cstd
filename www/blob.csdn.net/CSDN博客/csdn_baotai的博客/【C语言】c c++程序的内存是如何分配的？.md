# 【C语言】c/c++程序的内存是如何分配的？ - csdn_baotai的博客 - CSDN博客

2018年05月05日 17:17:02[csdn-[baotai]](https://me.csdn.net/csdn_baotai)阅读数：46


### ⼀个由C编译的程序占⽤的内存分为以下⼏个部分：

1、栈区（stack） — 由编译器⾃动分配释放 ，存放为运⾏函数⽽分配的局部变量、函数参数、返回数据、返回地址等。其操作⽅式类似于数据结构中的栈。
2、堆区（heap） — ⼀般由程序员分配释放， 若程序员不释放，程序结束时可能由OS回收 。分配⽅式类似于链表。
3、全局区（静态区）（static） —存放全局变量、静态数据、常量。程序结束后由系统释放。
4、⽂字常量区 —常量字符串就是放在这⾥的。 程序结束后由系统释放。
5、程序代码区—存放函数体（类成员函数和全局函数）的⼆进制代码。从静态存储区域分配内存在程序编译的时候就已经分配好，这块内存在程序的整个运⾏期间都存在。例如全局变量， static变量。

## 在栈上创建

在执⾏函数时，函数内局部变量的存储单元都可以在栈上创建，函数执⾏结束时这些存储单元⾃动被释放。栈内存分配运算内置于处理器的指令集中，效率很⾼，但是分配的内存容量有限。

## 从堆上分配

亦称动态内存分配。

程序在运⾏的时候⽤malloc或new申请任意多少的内存，

程序员⾃⼰负责在何时⽤free或delete释放内存。

动态内存的⽣存期由程序员决定，使⽤⾮常灵活，但如果在堆上分配了空间，就有责任回收它，否则运⾏的程序会出现内存泄漏

频繁地分配和释放不同⼤⼩的堆空间将会产⽣堆内存碎块。

