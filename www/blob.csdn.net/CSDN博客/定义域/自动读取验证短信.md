# 自动读取验证短信 - 定义域 - CSDN博客
2015年09月17日 10:14:26[定义域](https://me.csdn.net/u010278882)阅读数：318标签：[短信																[Android																[验证码																[用户体验](https://so.csdn.net/so/search/s.do?q=用户体验&t=blog)](https://so.csdn.net/so/search/s.do?q=验证码&t=blog)](https://so.csdn.net/so/search/s.do?q=Android&t=blog)](https://so.csdn.net/so/search/s.do?q=短信&t=blog)
个人分类：[效果](https://blog.csdn.net/u010278882/article/category/5821695)
# 自动读取验证短信
## 效果
通常在涉及用户身份验证、手机绑定、敏感操作（比如修改账户密码、尝试支付操作）时，常常需要系统发送验证短信到用户手机上，用户查收后输入验证码。为了营造更好的用户体验，通常会采取应用自动读取系统发送的短信验证码进行验证的操作。
## 实现原理
### 观察者模式
在基于事件编程的模型中，当A组件发生某个变化时，B组件要求得知。通常采用的做法是B向A注册某种变化，当变化发生时，A通知（常常通过“**回调**”的方式）所有注册这种变化的组件（比如B）。这里，A是被**被观察者**，观察A的变化的B是**观察者**。一个观察者可以观察多个被观察者，一个被观察者可以被多个观察者观察。所以，观察者和被观察者间的是多对多的关系。通过使用观察者模式能够很好的对消息的生产者和消费者进行解耦。
### ContentObserver
观察者模式在Android中普通采用，ContentObserver采用了观察者模式。
观察什么？观察数据库中URI的变化。
如何使用？ 
1. 实现ContentObserver 
实现需要实现构造器，需要传入两个参数：Context和Handler。ContentObserver在非UI线程中执行，如果观察者根据观察结果需要操作UI线程中的元素，可以通过Handler发送消息实现。 
2. 重写onChange(Boolean selfChange, Uri uri)方法 
selfChange **?**
uri **?**
3. 在观察环境中注册观察者，比如在Activity中  
Context#getContentResolver() 
ContentResovler#registerContentObserver(Uri uri, boolean notifyForDescedents, ContentObserver observer ) 
其中：通过Uri制定需要观察的数据库，observer致命观察者
## 实现
[代码](https://code.csdn.net/u010278882/jk_validate_code)
