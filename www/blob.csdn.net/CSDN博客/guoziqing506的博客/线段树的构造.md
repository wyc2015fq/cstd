# 线段树的构造 - guoziqing506的博客 - CSDN博客





2016年07月29日 16:44:12[guoziqing506](https://me.csdn.net/guoziqing506)阅读数：563
所属专栏：[LintCode-Python题解](https://blog.csdn.net/column/details/guoziqing-blog.html)









题目描述：线段树是一棵二叉树，他的每个节点包含了两个额外的属性start和end用于表示该节点所代表的区间。start和end都是整数，并按照如下的方式赋值:

根节点的 start 和 end 由 build 方法所给出。

对于节点 A 的左儿子，有 start=A.left, end=(A.left + A.right) / 2。

对于节点 A 的右儿子，有 start=(A.left + A.right) / 2 + 1, end=A.right。

如果 start 等于 end, 那么该节点是叶子节点，不再有左右儿子。

实现一个 build 方法，接受 start 和 end 作为参数, 然后构造一个代表区间 [start, end] 的线段树，返回这棵线段树的根


样例：

比如给定start=1, end=6，对应的线段树为：

![](https://img-blog.csdn.net/20160729162515215?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)





对于这样一棵树的所有节点来说，不过是两种情况：1. 非叶节点，那么这个通过这个节点，我们就能得到它的左右孩子的所存储的“区间值”。2. 叶子节点，那就直接返回这个节点就行




所以，这是非常经典的递归的应用，触底的条件是start > end，返回空，或者start == end，返回叶子节点。

直接上代码：



```python
"""
Definition of SegmentTreeNode:
class SegmentTreeNode:
    def __init__(self, start, end):
        self.start, self.end = start, end
        self.left, self.right = None, None
"""

class Solution:
    # @param start, end: Denote an segment / interval
    # @return: The root of Segment Tree
    def build(self, start, end):

        # 起点大于终点，返回空
        if start > end:
            return 

        # 起点等于终点，返回叶子
        if start == end:
            return SegmentTreeNode(start, end)

        # 生成根节点
        root = SegmentTreeNode(start, end)
        mid = (end + start) // 2

        # 递归生成每个节点的左右孩子
        root.left = self.build(start, mid)
        root.right = self.build(mid + 1, end)
        return root
        # write your code here
```





