# 丢失的第一个正整数 - guoziqing506的博客 - CSDN博客





2016年03月22日 08:42:05[guoziqing506](https://me.csdn.net/guoziqing506)阅读数：1855
所属专栏：[LintCode-Python题解](https://blog.csdn.net/column/details/guoziqing-blog.html)








题目描述：给出一个无序的整数数组，找出其中没有出现的最小正整数。

样例：

![](https://img-blog.csdn.net/20160322084014732)


换个角度思考这个问题，我们只需要将数组做一种特殊的排序，使得正整数“诸神归位”（例如[3, 4, -1, 1]中令1在第一位，3在第三位，4在第四位，也就是变成[1, -1, 3, 4]），那么第一个对不上的位所代表的正整数就是第一个缺失的，例如，在前面的例子中数组第二位是-1，而不是2，那么2就是丢失的第一个正整数。这是什么思想呢？当然是桶排序了（有关桶排序的介绍详见：[点击打开链接](http://blog.csdn.net/guoziqing506/article/details/50952009)）



好了，这道题的解法就是借助桶排序（当然是经过细微改变的桶排序）来实现正整数的“归位”，再查找第一个没有对应数的位。代码如下：




```python
class Solution:
    # @param A, a list of integers
    # @return an integer
    def firstMissingPositive(self, A):
        self.bucket_sort(A)
        n = len(A)
        # 寻找第一个没有对应数归位的位
        for i in range(n):
            if A[i] != i + 1:
                # 将这个位对应的数返回
                return i + 1
        return n + 1
    
    
    def bucket_sort(self, aList):
        n = len(aList)
        for i in range(n):
            while aList[i] != i + 1:
                # 跳过的三个条件：
                # 1. 负数或者是0
                # 2. 超出了数组长度
                # 3. 要交换的位上的数是正确归位的
                if aList[i] <= 0 or aList[i] > n or aList[i] == aList[aList[i] - 1]:
                    break
                temp = aList[i]
                aList[i] = aList[temp - 1]
                aList[temp - 1] = temp
        # write your code here
```






我们主要看一下，这里用的桶排序函数。当数组第i位不是i + 1时，需要将当前的数与当前的数对应的位所存储的数交换（感觉像绕口令，举个例子吧：[3, 4, -1, 1]中，3应该与-1交换；然后扫描到4，4应该与1交换......）但是，就这个问题而言，有三种情况，在“数”与“位”不对应的情况下，也不执行交换：

1. 负数或者是0：比如数组[-1, 2]，-1对不上，但是也不动

2. 超出了数组长度：比如数组[7, 8]，两个数都超出了数组长度，保持不动

3. 要交换的位上的数是正确归位的：比如数组[3, 2, 3]，第一个3本来应该与第三位的数（也就是3）交换，但是显然3这个数已经正确归位了，虽然在不正确的位上也有他，保持不动。



以上三条，其实依然保证了数组第一个没被正确归位的位所应该归位的数是丢失的第一个正整数（特别地，如果数组所有位都合适，比如[1， 2， 3]，那么返回的是4）。也就是说，这里的bucket_sort函数其实并没有真正意义上实现排序，而是对数组每一位“尽可能”寻找对应的数。例如，对[3, 4, -1, 1]，执行bucket_sort后变为[1, -1, 3, 4]；[1, 1, 2]执行bucket_sort后变为[1, 2, 1]。



这个逻辑稍微有点复杂，仔细琢磨一下。




