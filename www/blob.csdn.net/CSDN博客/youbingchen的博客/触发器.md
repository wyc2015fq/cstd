# 触发器 - youbingchen的博客 - CSDN博客





2016年08月05日 13:50:36[youbingchen](https://me.csdn.net/youbingchen)阅读数：776








> 
触发器的作用是在执行insert、delete和update命令之前或之后自动调用sql命令或存储过程，最多一个表可以建立6个触发器，因为触发器的类型主要分为：




- 1.Before
- 2.After 




> 
before 和 after代表触发器发生的时间是在每行操作的之前还是之后。其中after触发器要求只有执行某一操作insert、update、delete之后触发器才被触发，且只能定义在表上。而before触发器表示并不执行其定义的操作（insert、update、delete）而仅是执行触发器本身。既可以在表上定义before触发器，也可以在视图上定义。
   

    触发器有两个特殊的表：插入表（instered表）和删除表（deleted表）。这两张是逻辑表也是虚表。有系统在内存中创建者两张表，不会存储在数据库中。而且两张表的都是只读的，只能读取数据而不能修改数据。这两张表的结果总是与被改触发器应用的表的结构相同。当触发器完成工作后，这两张表就会被删除。Inserted表的数据是插入或是修改后的数据，而deleted表的数据是更新前的或是删除的数据

|对表的操作|Insert逻辑表|Deleted逻辑表|
|----|----|----|
|增加记录（insert）|存放增加的记录|无|
|删除记录 （delete）|无|存放被删除的记录|
|修改记录（update）|存放更新后的记录|存放更新前的记录|

> 
```
Update数据的时候就是先删除表记录，然后增加一条记录。这样在inserted和deleted表就都有update后的数据记录了。注意的是：触发器本身就是一个事务，所以在触发器里面可以对修改数据进行一些特殊的检查。如果不满足可以利用事务回滚，撤销操作。
```




