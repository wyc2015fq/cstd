# 图形学之腐蚀膨胀 - 建建的博客 - CSDN博客
2018年09月03日 09:01:50[纪建](https://me.csdn.net/u013898698)阅读数：317
腐蚀（erode）膨胀(dilate)其实是两种非常形象的操作，但是有的时候容易搞混淆。
- 腐蚀（erode），是将灰度值小（视觉上就是比较暗）的区域增强扩展，主要用来去除比较亮的噪点。
- 膨胀（dilate），是将灰度值大（视觉上就是比较亮）的区域增强扩展，主要用来连通相似颜色或强度的区域。
然后腐蚀与膨胀涉及的一个重要概念就是核，也可以称之为模板或者掩码。核具有几个重要的属性，形状（圆形、方形、十字架甚至椭圆），大小（3x3，5x5等）以及参考点。多数情况下，模板比较简单的是一个圆形，大小3x3，参考点在圆心。如下图所示： 
![这里写图片描述](https://img-blog.csdn.net/20151023171742720)
不同的腐蚀与膨胀算法，本质的区别在于核的设计，如果你的核设计与你的图像场景以及相关目的比较吻合时，效果也许就会好。
具体机理其实很简单，拿腐蚀来说（因为膨胀就是腐蚀的对偶操作，两者流程本质上没有区别）。你确定好核以后，就与原图像进行卷积。原图像的每个像元的灰度值等于，以该像元为参考点，核所覆盖的范围内，所有像元的灰度最小值，这样就完成了腐蚀操作。膨胀操作就是取最大值。
所以腐蚀膨胀的内容很简单，下面主要讲一讲opencv中提到的cvMorphologyEx()这个函数。该函数主要针对的是灰度或者彩色图像。cvMorphologyEx(const CvArr* src,CvArr* dst,CvArr* temp, IplConvKernel* element, int operation,int iterations=1)的函数原型是这样，其中的operation涉及到了5中运算，分别是开运算，闭运算，形态梯度，礼帽，黑帽。下面我主要说说这几种的具体含义，顺便利用opencv实现一下，看看具体效果。
## 开运算与闭运算：
两种就是膨胀腐蚀的连接。
- 开运算先进行腐蚀再进行膨胀，主要是可以消除高于其邻近点的孤立点。下图就可以看出 
![这里写图片描述](https://img-blog.csdn.net/20151023175839932)
- 闭运算先进行膨胀再进行腐蚀，主要是可以消除低于其邻近点的孤立点。下图就可以看出 
![这里写图片描述](https://img-blog.csdn.net/20151023180110868)
## 形态学梯度：
这个主要运用与灰度图，公式就是利用膨胀结果与腐蚀结果做差，得到最终的结果。形态学梯度会将图像中灰度值变化最剧烈的区域凸显出来（也就是边缘会更加凸显）。 
![这里写图片描述](https://img-blog.csdn.net/20151023180905088)
## 礼帽和黑帽：
- 礼帽，是原图像减去开运算的结果。开运算，前面说过是可以消除高于其邻近点的孤立点，也就是可以放大局部低亮度区域，原图像减去开运算就会分割出局部亮度极大点。 
![这里写图片描述](https://img-blog.csdn.net/20151023182147695)
- 黑帽，是闭运算减去原图像。闭运算，前面说过是可以消除低于其邻近点的孤立点，也就是可以放大局部高亮度区域，闭运算减去原图像就可以分割出局部较暗区域。 
![这里写图片描述](https://img-blog.csdn.net/20151023182254161)
