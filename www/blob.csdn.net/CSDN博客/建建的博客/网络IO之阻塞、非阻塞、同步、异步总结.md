# 网络IO之阻塞、非阻塞、同步、异步总结 - 建建的博客 - CSDN博客
2017年04月04日 15:41:36[纪建](https://me.csdn.net/u013898698)阅读数：185
个人分类：[Socket学习](https://blog.csdn.net/u013898698/article/category/6694075)
1、前言
　　在网络编程中，阻塞、非阻塞、同步、异步经常被提到。unix网络编程第一卷第六章专门讨论五种不同的IO模型，Stevens讲的非常详细，我记得去年看第一遍时候，似懂非懂，没有深入理解。网上有详细的分析：[http://blog.csdn.net/historyasamirror/article/details/5778378](http://blog.csdn.net/historyasamirror/article/details/5778378)。我结合网上博客和书总结一下，加以区别，加深理解。
2、数据流向
　　网络IO操作实际过程涉及到内核和调用这个IO操作的进程。以read为例，read的具体操作分为以下两个部分:
　　（1）内核等待数据可读
　　（2）将内核读到的数据拷贝到进程
详细过程如下图所示：
![](http://images.cnitblog.com/blog/305504/201308/12224938-4db3844232b84fb284d057a21df5f149.png)
3、网络IO模型详细分析
　　常见的IO模型有阻塞、非阻塞、IO多路复用，异步。以一个生动形象的例子来说明这四个概念。周末我和女友去逛街，中午饿了，我们准备去吃饭。周末人多，吃饭需要排队，我和女友有以下几种方案：
　　（1）我和女友点完餐后，不知道什么时候能做好，只好坐在餐厅里面等，直到做好，然后吃完才离开。
女友本想还和我一起逛街的，但是不知道饭能什么时候做好，只好和我一起在餐厅等，而不能去逛街，直到吃完饭才能去逛街，中间等待做饭的时间浪费掉了。这就是典型的阻塞。网络中IO阻塞如下图所示：
![](http://images.cnitblog.com/blog/305504/201308/12230408-c8b30331f20a41dcb224d20719ffa1da.png)
　　（2）我女友不甘心白白在这等，又想去逛商场，又担心饭好了。所以我们逛一会，回来询问服务员饭好了没有，来来回回好多次，饭都还没吃都快累死了啦。这就是非阻塞。需要不断的询问，是否准备好了。网络IO非阻塞如下图所示：![](http://images.cnitblog.com/blog/305504/201308/12231306-35dca310d92e4184bd4c0b3f42bee2c1.png)
　　（3）与第二个方案差不多，餐厅安装了电子屏幕用来显示点餐的状态，这样我和女友逛街一会，回来就不用去询问服务员了，直接看电子屏幕就可以了。这样每个人的餐是否好了，都直接看电子屏幕就可以了，这就是典型的IO多路复用，如select、poll、epoll。网络IO具体模型如下图所示：
![](http://images.cnitblog.com/blog/305504/201308/12232204-08fdf03d1d8a40a68d2286c6c43fb036.png)
　　（4）女友不想逛街，又餐厅太吵了，回家好好休息一下。于是我们叫外卖，打个电话点餐，然后我和女友可以在家好好休息一下，饭好了送货员送到家里来。这就是典型的异步，只需要打个电话说一下，然后可以做自己的事情，饭好了就送来了。linux提供了AIO库函数实现异步，但是用的很少。目前有很多开源的异步IO库，例如libevent、libev、libuv。异步过程如下图所示：
![](http://images.cnitblog.com/blog/305504/201308/12233159-16ec6876a48d424d8e6b524d1fb91689.png)
4、同步与异步
　　实际上同步与异步是针对应用程序与内核的交互而言的。同步过程中进程触发IO操作并等待或者轮询的去查看IO操作是否完成。异步过程中进程触发IO操作以后，直接返回，做自己的事情，IO交给内核来处理，完成后内核通知进程IO完成。同步与异步如下图所示：
![](http://images.cnitblog.com/blog/305504/201308/12233922-2a81723a872b4ac5a3395bcf778309b8.png)
5、阻塞与非阻塞
　　简单理解为需要做一件事能不能立即得到返回应答，如果不能立即获得返回，需要等待，那就阻塞了，否则就可以理解为非阻塞。详细区别如下图所示：
![](http://images.cnitblog.com/blog/305504/201308/12234337-ea19e65c6c72464499a307e4a950148a.png)
参考资料：
[http://www.open-open.com/doc/view/cbb2c3363c3b49ceb5812220a9c42e42](http://www.open-open.com/doc/view/cbb2c3363c3b49ceb5812220a9c42e42)
[http://blog.csdn.net/historyasamirror/article/details/5778378](http://blog.csdn.net/historyasamirror/article/details/5778378)
[http://www.zhihu.com/question/19732473](http://www.zhihu.com/question/19732473)
[http://www.ibm.com/developerworks/cn/linux/l-async/](http://www.ibm.com/developerworks/cn/linux/l-async/)
