# 21条自动化测试过程中遭遇的问题及解决思路 - zhusongziye的博客 - CSDN博客





2018年06月09日 16:23:24[zhusongziye](https://me.csdn.net/zhusongziye)阅读数：1603








## 记录自动化中遇到的一些错误及解决思路，会持续更新（根据个人情况不同，错误解决方法不同）



1、找不到元素，脚本报“NoSuchElementException:Unable to find element”，或者"定位到了，不能操作，点击无效"

　　1) 首先查看自己的“属性值”是否写正确

　　2) 元素的标签不唯一，默认找到第一个

　　3)向上查看，元素是否在frame或iframe框架中

　　4) 查看元素是否在新打开的页面中，需要切换到新窗口

　　5) 换其它的定位方式：id/name/class name/tag name/link text/xpath/css selector

　　6) 检查元素属性是否是会变动的、是否是隐藏的

　　7)添加等待时间sleep(),implicitly_wait(),WebDriverWait(driver, 10, 1).until(定位的元素, messages)

　　8) 查看标签的属性是否有“style=’display:none’->。元素不显示。属性改为block

　　9) 查看标签的属性是否有‘onclick=return false’->。取消点击。属性改为false（在百度首页，登陆的属性就是这个）

　　10) 针对于9和8这两种情况，我在网上搜到的结果是：执行js修改属性(这种方法我没有试过，不知道有没有效果）

　　js=”document.getElementById(‘title‘).style.display=’block’”

　　driver.execute_script(js)



2、出现“object is not iterable”：

　　1) 首先查看脚本，测试用例出现问题

　　2) 组织用例时出现错误（我开始是用for循环遍历y，加入测试集合中，返回集合，老是会出现错误，最后改成下方代码，直接返回y，解决问题）

![](https://img-blog.csdn.net/20180609162056678?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)



3、出现“Indentation Error”： 是语法问题，脚本代码没有正确对齐

4、使用PO设计模式封装的页面元素类，都有初始化函数“__init__”

5、页面元素调用Page类时候，Page函数，后面括号的“self”不用写

6、Page的初始化包含（self，driver）两个元素，在页面封装类中，初始化中调用方式为

                                          Page.__init__(self,driver)

7、类中定义变量，比如x=“hello”，调用使用：self.x

8、在测试用例调用自己页面封装的类时，经过实例化后po=Lzsp（driver），定义函数时候，不需要再括号中写self

![](https://img-blog.csdn.net/20180609162259868?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

9、提示在页面封装类中没有basePage.py文件中定义好的函数问题：

　　1) 新建名字为module_basePage.pth文件，内容为“basePage.py文件”存放路径：例如（“d:\\test\\page”)

　　2) 进入python的安装目录，将文件放到python3\lib\sit-packages文件夹下

　　3) 在测试用例中导入其他文件夹模块引入：import sys

　　4) sys.path.append(“..”)

　　5) from .... import ...

10、页面元素封装时候，定位方式一定要写正确，否则会出错

11、进行参数化的时候，读取数据的文件里面代码：“使用绝对地址，加双斜线”

12、运行自动化脚本时候将鼠标放到屏幕中间或者下方，（有可能切换窗口时定位不到）

13、出现”parater must be str“：使用参数有问题，（我的是因为二次定位写的方式有问题）

　　1) 在封装页面元素定位方式时，经常会会遇到二次定位

　　2) 第一次定位调用基础类的方法，第二次定位就正常写就行了，例子如下：

　　3) 我是使用:x=self.find_element(locator).find_element_by_id(locator)

　　4) 因为我在页面封装中将把定位方式和元素都放到列表中，第二次的元素不写定位方式，只写元素

14、在window命令界面下使用：”python 文件名.py >>report/log.txt 2>&1”命令把结果写入文本中

15、在页面封装中，类的初始化使用如下样式：

　　def __init__(self,driver):

　　　　Page.__init__(self,driver)



16、打印输出时显示“not all arguments curerted during string format”是说明前后参数不对应：%前面是一个“%s”，而后面的参数是（“xy”，“xy”）两个

17、同一个模块中的两个类，第二个调用第一个类的方法，直接使用“继承”，2继承1，

　　def __init__(self,driver):

　　　　Logger.__init__(self,’OA’)

　　　　self.log=self.getlog()

　　　　self.driver=driver

18、Python对文件进行“复制”和“改名”

　　1) 首先引入os模块：import os

　　2) 复制：os.system(“copy 文件名.txt 新文件名.txt”）

　　3) 改名：os.rename(“文件名.txt”,”新文件名.txt”

19、读取txt文件中的汉字和字符打印却是一串编码，像这种：（b'\xef\xbb\xbf\xe5\xa5\xbd\xe7\x9a\x84\r\n')

　　解决代码如下：

　　x=open(“2.txt”,”rb”)

　　y=x.readlines()

　　for i in y:

j=i.decode(‘utf-8’)　　：在原有代码增加一句

　　　　Print (j)

　　x.close()

20、出现“str object is not callable”的问题

　　原因是：使用定义的变量名字与内置模块名字相同，（我的原因是：在basePage.py文件中，“得到文本的函数，element.txt后面多加了一对括号”，取消就好了）

　　针对自己的脚本，检查变量的名字，相同的更改一下，

![](https://img-blog.csdn.net/20180609162312728?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

21、在编写自动化用例中，会打开多个窗口，经常会遇到，第一次得到的句柄列表为a=[1,2],第二次得到的句柄列表是b=[1,3,2],偶尔不会

　　按照顺序排序(一般都是按顺序排的)，要切换到句柄3，

　　可以使用如下方法得到句柄3：

c=list(set(b)-set(a))=[3] 　　 :先把a和b变成集合，再取b不同于a的元素

　　最后再转换为列表赋值给变量c

driver.switch_to.window(c[0]) 　　:切换到新窗口c



