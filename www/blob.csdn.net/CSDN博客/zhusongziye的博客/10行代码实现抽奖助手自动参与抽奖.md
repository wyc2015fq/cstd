# 10行代码实现抽奖助手自动参与抽奖 - zhusongziye的博客 - CSDN博客





2018年04月10日 20:32:37[zhusongziye](https://me.csdn.net/zhusongziye)阅读数：2066








不知道大家用过抽奖助手小程序没？（免费给抽奖助手做个小广告），我在公众号多次用它来发过很多奖品，同时，我每天也会去参与一些抽奖，目前的中奖记录为0（尴尬脸）




在助手中参与抽奖你不需要支付一分钱，但是需要花时间，想抽奖就不得不每天打开小程序逐个点击参与才能参与，每天重复的操作觉得好繁琐，于是我萌生出一个想法，用程序去自动参与抽奖。

说干就干，熟悉爬虫基本原理的大概能猜出来怎么做。我们之前写过基于Python爬微信公众号爬虫的系列教程，现在假设你已经会用 Fiddler 去代理 HTTP 请求。怎么安装 Fiddler 和配置手机端这里不再介绍，自行百度。




配置好 Fiddler 之后，手机打开小程序 “抽奖助手” 之后，有个公共抽奖列表

![](https://img-blog.csdn.net/20180410203056933?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)




通过Fiddler 抓包，我们看到抽奖列表的请求地址是：/public_lottery?page=1&size=5， 请求方法是 GET，还有一个 Header 字段 Authorization，返回的数据结构可以清晰看到总共返回了5条数据，代表5个奖品，每个字段基本能猜出来什么意思。

![](https://img-blog.csdn.net/20180410203114496?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)





我们再来手动选择一个活动点击参与抽奖，看背后它是怎么向服务器发送请求的，弄清楚了原理之后就可以用程序来自动模拟请求。

![](https://img-blog.csdn.net/20180410203131375?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)


参与抽奖的请求有几个注意的地方，请求使用的是 POST 方法，URL地址是：/lottery/67c3a5afe794dc7bdbed85a38a18bb44/join，和抽奖列表一样，还有一个请求 Header 是 Authorization，它的值就是后面一串很长的 Bearer 开头的字符串… 。



现在我们就可以用 Python 来构建一个自动参与抽奖的脚本，每隔一段时间就去自动刷，发现有新的奖品，就自动参与抽奖。

### 源代码

```
# coding=utf-8

import requests

def main():
    url = "https://lucky.nocode.com/public_lottery?page=1&size=5"
    # 替换成你自己的Authorization
    headers = {
        "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXV...."}
    res = requests.get(url, headers=headers)
    lotteries = res.json().get("data")
    join_url = "https://lucky.nocode.com/lottery/{id}/join"
    for lottery in lotteries:
        res = requests.post(join_url.format(id=lottery.get("id")), headers=headers)
        data = res.json()
        if res.status_code == 200 and 'errors' not in data:
            print("成功参与抽奖：《%s》" % lottery.get("prizes").get("data")[0].get("name"))

if __name__ == '__main__':
    main()
```

运行

```
成功参与抽奖：《阿玛尼红管唇釉》
成功参与抽奖：《Havaianas 人字拖》
成功参与抽奖：《《不要成为无聊的大人》》
成功参与抽奖：《Satan 钥匙扣》
成功参与抽奖：《桌面理线器》
```

![](https://img-blog.csdn.net/20180410203215199?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)



现在所有奖品都变成已参与状态，坐等中奖吧。你还可以对代码进行改进。




有人可能会问，这算不算作弊呢？我觉得这就是程序员的优势，我们只是用了不一样的工具来完成相同的事情，以后编程还真的是每个人都应该掌握的一项基本技能，没事写个代码解决繁琐的、重复的工作。懒惰是推动社会文明进步的原动力。



