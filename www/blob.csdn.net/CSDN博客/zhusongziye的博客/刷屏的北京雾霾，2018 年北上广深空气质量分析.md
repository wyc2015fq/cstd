# 刷屏的北京雾霾，2018 年北上广深空气质量分析 - zhusongziye的博客 - CSDN博客





2018年11月24日 09:31:23[zhusongziye](https://me.csdn.net/zhusongziye)阅读数：1419








阅读文本大概需要 6 分钟。

*新建Python软件开发测试技术交友群QQ:952490269（加群备注software）*

先对2017年天津的空气质量情况进行分析，然后再是北上广深。

**/ 01 / 网页分析**

![](https://img-blog.csdnimg.cn/20181124091524110.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)

网站没有反爬，所以直接抓取信息就好了。

这里简单给大家科普一下有关AQI，PM2.5的知识。

![](https://img-blog.csdnimg.cn/20181124091610316.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)



![](https://img-blog.csdnimg.cn/20181124091632212.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)



**/ 02 / 数据获取**

获取代码如下所示。

```python
import time
import requests
from bs4 import BeautifulSoup

headers = {
    'User-Agent':'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Safari/537.36'
}
for i in range(1, 13):
    time.sleep(5)
    # 把1转换为01
    url = 'http://www.tianqihoubao.com/aqi/tianjin-2017' + str("%02d" % i) + '.html'
    response = requests.get(url=url, headers=headers)
    soup = BeautifulSoup(response.text, 'html.parser')
    tr = soup.find_all('tr')
    # 去除标签栏
    for j in tr[1:]:
        td = j.find_all('td')
        Date = td[0].get_text().strip()
        Quality_grade = td[1].get_text().strip()
        AQI = td[2].get_text().strip()
        AQI_rank = td[3].get_text().strip()
        PM = td[4].get_text()
        with open('air_tianjin_2017.csv', 'a+', encoding='utf-8-sig') as f:
            f.write(Date + ',' + Quality_grade + ',' + AQI + ',' + AQI_rank + ',' + PM + '\n')
```

成功获取数据。

![](https://img-blog.csdnimg.cn/20181124091752624.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)



**/ 03 / 天津**



**01  AQI全年走势图**

![](https://img-blog.csdnimg.cn/20181124092046837.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)



92.5是年均AQI值，从上面科普知识里可以知道，2017年天津整体空气质量只能是「良」中的下下等水平，与轻度污染近在咫尺。



**02  AQI月均走势图**

![](https://img-blog.csdnimg.cn/20181124092057135.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)



从月均的走势图就能看出，1月的空气质量最差，8月的空气质量最好，当也并不是有多好，充其量也就是个「良」！



****03  AQI季度箱形图****

![](https://img-blog.csdnimg.cn/20181124092110227.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)



箱形图，显示一组数据分散情况资料的统计图。



数据里有最大值、最小值、中位数和两个四分位数。



这里可以看出，2017年天津的季度AQI均值差距不是很大。



但是一、二、四季度有明显的波动，空气质量有时会变得很差。



**04  PM2.5全年走势图**

![](https://img-blog.csdnimg.cn/20181124092129370.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)

59.87是年均PM2.5值，已经远超过国家二级标准限值35了。

其实天津给我留下的印象就是天气经常灰蒙蒙，时常还会变点颜色，比如黄色~

一年下不了几次雨，及其干燥。所以那个最低值11，我猜那时候估计是刮大风。



****05  PM2.5月均走势图****

![](https://img-blog.csdnimg.cn/20181124092151978.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)

和AQI的走势差不多，同样是1月最高，8月最低。



****06  PM2.5季度箱形图****

![](https://img-blog.csdnimg.cn/20181124092205927.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)

说实话，看了这个图，我不知道天津的「大哥」及「姐姐」们是如何做到自强不吸的。

基本上四个季度都超标了，一年不超标的估计也就那么几次。



**07  PM2.5指数日历图**

![](https://img-blog.csdnimg.cn/20181124092232454.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)

![](https://img-blog.csdnimg.cn/20181124092244922.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)

![](https://img-blog.csdnimg.cn/20181124092257137.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)



日均PM2.5国家二级标准为75，从上面的热力图看，基本上轻度污染过半了。

另外一月还是重灾区，天色黄黄的...

其实每逢雾霾，基本上就是蜗居了！



**08  天津全年空气质量情况**

![](https://img-blog.csdnimg.cn/20181124092333480.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)



「良」和「轻度污染」占了大头，「优」只能在角落里瑟瑟发抖，足以说明空气之差。



**/ 04 / 北上广深**



**01  北上广深AQI全年走势图**

![](https://img-blog.csdnimg.cn/20181124092351635.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)



北京月均AQI最低也就50左右，看来今年全年差不多都在「优」以下了。

不过相比前几年，京津冀空气已经好了不少(政策)，真的。

上海和广州差不多，深圳与北京算是鲜明对比。



**02  **北上广深PM2.5全年走势图****

![](https://img-blog.csdnimg.cn/20181124092406353.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)

北京一如既往的高调。



**03  **北上广深全年空气质量情况****

![](https://img-blog.csdnimg.cn/20181124092415814.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll,size_16,color_FFFFFF,t_70)



深圳几乎都是「优」和「良」，上海和广州和上面说的一样，北京的「优」已经不少了。

那么你所在的城市空气质量又是如何？



源码: 

链接：https://pan.baidu.com/s/13ERBA9CK9ZbIMYBZnSbJWA 密码：plen



