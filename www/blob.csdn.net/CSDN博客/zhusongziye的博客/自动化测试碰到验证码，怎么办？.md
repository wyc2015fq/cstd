# 自动化测试碰到验证码，怎么办？ - zhusongziye的博客 - CSDN博客





2018年01月19日 19:35:29[zhusongziye](https://me.csdn.net/zhusongziye)阅读数：532








对于web应用来说，大部分的系统在用户登录时都要求用户输入验证码，验证码的类型的很多，有字母数字的，有汉字的，甚至还要用户输入一条算术题的答案的，对于系统来说使用验证码可以有效果的防止采用机器猜测方法对口令的刺探，在一定程度上增加了安全性。但对于测试人员来说，不管是进行性能测试还是自动化测试都是一个棘手的问题。

![](https://img-blog.csdn.net/20180116212844623?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemh1c29uZ3ppeWU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)





下面来谈一下处理验证码的几种方法。




去掉验证码

　　这是最简单的方法，对于开发人员来说，只是把验证码的相关代码注释掉即可，如果是在测试环境，这样做可省去了测试人员不少麻烦，如果自动化脚本是要在正式环境跑，这样就给系统带来了一定的风险。




设置万能码

　　去掉验证码的主要是安全问题，为了应对在线系统的安全性威胁，可以在修改程序时不取消验证码，而是程序中留一个“后门”---设置一个“万能验证码”，只要用户输入这个“万能验证码”，程序就认为验证通过，否则按照原先的验证方式进行验证。

![](https://img-blog.csdn.net/20180116212942072?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemh1c29uZ3ppeWU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)




运行结果：

![](https://img-blog.csdn.net/20180116212959612?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemh1c29uZ3ppeWU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)




random

random用于生成随机数

randint()

randint()方法用于生成随机整数，传递的两个参数分别是随机数的范围，randint(1000，9999)第二个参数要大于第一个参数。

我们要求用户输入随机数，并且对用户输入做判断，如果等于生成的随机数那么，登录成功，如果等于1111也算登录成功，否则失败。那么等于1111的判断就是一个万能码。




验证码识别技术

　　例如可以通过Python-tesseract 来识别图片验证码，Python-tesseract是光学字符识别Tesseract OCR引擎的Python封装类。能够读取任何常规的图片文件(JPG, GIF ,PNG , TIFF等)。不过，目前市面上的验证码形式繁多，目前任何一种验证码识别技术，识别率都不是100% 。




记录cookie

（适用于UI自动化测试，且目前在大部应用的用户名密码不记录在cookie
 或 进行加密处理。）

　　通过向浏览器中添加cookie 可以绕过登录的验证码，这是比较有意思的一种解决方案。我们可以在用户登录之前，通过add_cookie()方法将用户名密码写入浏览器cookie ，再次访问系统登录链接将自动登录。例如下面的方式：

![](https://img-blog.csdn.net/20180116213034884?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemh1c29uZ3ppeWU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

使用cookie进行登录最大的难点是如何获得用户名密码的name ，如果找到不到name 的名字，就没办法向value 中输用户名、密码信息。

我建议是可以通过get_cookies()方法来获取登录的所有的cookie信息，从而进行找到用户名、密码的name 对象的名字；当然，最简单的方法还是询问前端开发人员。


◆来源:图文来自网络，如有侵权请联系删除



