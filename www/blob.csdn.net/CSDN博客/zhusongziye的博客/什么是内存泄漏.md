# 什么是内存泄漏 - zhusongziye的博客 - CSDN博客





2018年04月15日 14:31:16[zhusongziye](https://me.csdn.net/zhusongziye)阅读数：102








Java最显著的优势之一就是它的内存管理机制。你只需简单创建对象，然后Java垃圾回收机制便会小心的分配和释放内存。然而，事实并非如此简单，因为在Java应用程序中经常发生内存泄漏。




本教程说明了什么是内存泄漏，为什么会发生，以及如何防止它们。




1.什么是内存泄漏？




内存泄漏的定义： 对象不再被应用程序使用，但是垃圾回收器却不能移除它们，因为它们正在被引用。




要理解这个定义，我们需要理解对象在内存中的状态，下图说明了哪些是未被使用的以及哪些是未被引用的。




![](https://img-blog.csdn.net/20180415143030498?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)




从图中可以看到被引用的对象和未被引用的对象。未被引用的对象将会被垃圾回收器回收，而被引用对象则不会被回收。未被引用的对象理所当然是未被使用的，因为没有其他的对象引用它。然而，未被使用的对象并不一定是未被引用的，其中一些是被引用的。这就是内存泄漏的起因。




2.为什么会发生内存泄漏？




让我们来看看下面这个例子，看看为什么内存泄漏会发生。在如下例子中，对象A引用了对象B。A的生命周期（t1—t4）要比B的生命周期（t2—t3）长很多。当B不再用于应用中时，A仍然持有对它的引用。在这种方式下，垃圾回收器就不能将B从内存中移除。这将可能导致出现内存不足的问题，因为如果A对更多的对象做同样的事情，那么内存中将会有很多无法被回收的对象，这将极度耗费内存空间。




也有可能B持有大量对其他对象的引用，这些被B引用的对象也不能够被回收。所有这些未被使用的对象将会耗费宝贵的内存空间。




![](https://img-blog.csdn.net/2018041514304643?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podXNvbmd6aXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)




3.如何阻止内存泄漏？




以下是一些阻止内存泄漏的快速动手技巧。

（1）注意集合类，例如HashMap，ArrayList，等等。因为它们是内存泄漏经常发生的地方。当它们被声明为静态时，它们的生命周期就同应用程序的生命周期一般长。

（2）注意事件监听器和回调，如果一个监听器已经注册，但是当这个类不再被使用时却未被注销，就会发生内存泄漏。

（3）“如果一个类管理它自己的内存，程序员应该对内存泄漏保持警惕。”[1] 很多时候当一个对象的成员变量指向其他对象时，不再使用时需要被置为。






