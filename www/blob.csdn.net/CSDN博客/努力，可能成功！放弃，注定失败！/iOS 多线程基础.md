# iOS 多线程基础 - 努力，可能成功！放弃，注定失败！ - CSDN博客
置顶2016年03月03日 11:17:16[上天眷顾我](https://me.csdn.net/qq_30513483)阅读数：420
# 一、进程
- 进程是指在系统中正在运行的一个应用程序，例如：我们打开QQ是一个进程，打开Xcode也是一个进程
- 每个进程之间是`相互独立`的，每个进程均运行在其专用且受保护的内存空间内
![](http://upload-images.jianshu.io/upload_images/831339-6c63a3541856b349.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
图解.png
# 二、线程
- 线程是进程的基本执行单元，`1个进程要想执行任务，必须得有线程`（每1个进程至少要有1条线程）
- 一个进程（程序）的所有任务都在线程中执行
- 注意：1个线程中任务的执行是串行的
# 三、多线程
> 
什么是多线程？
- 1个进程中可以开启多条线程，多条线程可以并行（同时）执行不同的任务
> 
多线程的原理
- 同一时间，CPU只能处理1条线程，只有1条线程在工作（执行）
- 多线程并发（同时）执行，其实是CPU快速地在多条线程之间调度（切换）
- 如果CPU调度线程的时间足够快，就造成了多线程并发执行的假象
> 
思考：如果线程非常非常多，会发生什么情况？
- 多条线程会再CPU来回切换，会销毁大量的CPU资源
- 每条线程被调度执行的频度会变小，线程的执行效率会降低伴随着
> 
多线程的优缺点
- 
优点：
- 能适当提高程序的执行效率
- 能适当提高资源利用率（CPU、内存利用率）
- 
缺点
- 创建线程是有开销的，线程越多，CPU在调度线程上的开销就越大
- 如果开启大量的线程，会降低程序的性能
- 程序设计更加复杂：比如线程之间的通信、多线程的数据共享
# 四、主线程
> - 什么是主线程
- 一个iOS程序运行后，默认会开启1条线程，称为`“主线程”或“UI线程”`
> - 主线程的主要作用
- 显示\刷新UI界面
- 处理UI事件
> - 主线程的使用注意
- 别将比较耗时的操作放到主线程中- 一般都是在子线程（后台线程、非主线程）处理耗时操作后回到主线程中刷新UI界面
- 耗时操作会卡住主线程，严重影响UI的流畅度，给用户一种“卡”的坏体验
# 五、iOS中多线程的实现方案
![](http://upload-images.jianshu.io/upload_images/831339-eb75fd8fec0b7216.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
多线程方案.png
# 六、总结：
> 
线程与进程的区别和联系?
- 一个程序至少有一个进程,一个进程至少有一个线程:2
- 
进程:一个程序的一次运行,在执行过程中拥有独立的内存单元,而多个线程共享一块内存线程:线程是指进程内的一个执行单元。
- 
联系:线程是进程的基本组成单位
- 
区别:
- 1.调度:线程作为调度和分配的基本单位,进程作为拥有资源的基本单位
- 2.并发性:不仅进程之间可以并发执行,同一个进程的多个线程之间也可并发执行
- 3.拥有资源:进程是拥有资源的一个独立单位,线程不拥有系统资源,但可以访问隶属于进程的资源.
- 4.系统开销:在创建或撤消进程时,由于系统都要为之分配和回收资源,导致系统的开销明显大于创建
或撤消线程时的开销。
> 
多线程的安全隐患 :
- 
资源共享
- 1块资源可能会被多个线程共享，也就是`多个线程可能会访问同一块资源`
- 比如多个线程访问同一个对象、同一个变量、同一个文件
- 
当多个线程访问同一块资源时，很容易`引发数据错乱和数据安全问题`
> 
多线程同步和异步的区别？，iOS 中如何实现多线程的同步?
- 同步 : 是指一个线程要等待上一个线程执行完之后才开始执行当前的线程
- 
异步：线程间没有先后，一个线程不用等某一个线程执行后才可以执行
