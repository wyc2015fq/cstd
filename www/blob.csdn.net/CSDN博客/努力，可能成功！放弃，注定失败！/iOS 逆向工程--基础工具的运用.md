# iOS é€†å‘å·¥ç¨‹--åŸºç¡€å·¥å…·çš„è¿ç”¨ - åŠªåŠ›ï¼Œå¯èƒ½æˆåŠŸï¼æ”¾å¼ƒï¼Œæ³¨å®šå¤±è´¥ï¼ - CSDNåšå®¢
ç½®é¡¶2018å¹´10æœˆ19æ—¥ 10:57:42[ä¸Šå¤©çœ·é¡¾æˆ‘](https://me.csdn.net/qq_30513483)é˜…è¯»æ•°ï¼š95
IOS é€†å‘å·¥ç¨‹ APPç ´è§£
## æè¦ ï¼š
ç»è¿‡ä¸€ä¸ªæœˆæ–­æ–­ç»­ç»­å¯¹**APPé€†å‘å·¥ç¨‹**çš„ç ”ç©¶ï¼Œè¿™ç¯‡æ–‡ç« ç®—æ˜¯å¯¹é€†å‘å·¥ç¨‹çŸ¥è¯†è¿ˆå‡ºäº†ç¬¬ä¸€æ­¥ï¼Œå¦‚æœä½ å¯¹**iOSé€†å‘å·¥ç¨‹**æ„Ÿå…´è¶£çš„è¯ï¼Œå»ºè®®ä½ è¿˜æ˜¯æŒ‰ç…§è¿™ç¯‡æ–‡ç« çš„æ€è·¯ï¼Œåœ¨ä½ çš„è¶Šç‹±æ‰‹æœºä¸Šå®Œæ•´çš„å®è·µä¸€éï¼Œè¿™æ ·ä½ å°±ä¼šå¯¹é‚£äº›åŸºç¡€çš„è¶Šç‹±å·¥å…·æœ‰äº†ä¸€ä¸ªæµ…æ˜¾çš„äº†è§£ã€‚
å¦‚æœä¸å–œæ¬¢è¿™ä¸ªæ’ç‰ˆï¼Œå¯ä»¥è®¿é—®æˆ‘çš„å¦ä¸€ä¸ªåšå®¢ç½‘å€
[ä½œä¸šéƒ¨è½åšå®¢åœ°å€](https://www.zybuluo.com/CoDancer/note/1105833)
## å‡†å¤‡å·¥ä½œ
> - **è¶Šç‹±æ‰‹æœºï¼ˆä¾‹å¦‚æˆ‘çš„ï¼šiPhone 5sï¼Œç³»ç»Ÿ8.3ï¼‰**
- **è¶Šç‹±æ‰‹æœºä¸Šçš„Cydiaä¸­å®‰è£…Cycriptï¼ŒOpenSSH**
- **ç”µè„‘ç«¯ä¸Šå®‰è£…iFunBoxï¼ŒxCodeï¼ŒHopper Disassembler,Sublime Text**
- **ç”µè„‘ç»ˆç«¯å‘½ä»¤è¡Œä¸­å®‰è£…Class Dump,Theos,Dumpdecrypted**
## å·¥å…·ä½œç”¨ä»‹ç»
### OpenSSHï¼š
```
Macè¿æ¥æ‰‹æœºï¼Œé€šè¿‡Macçš„ç»ˆç«¯å‘½ä»¤æ“ä½œæ‰‹æœºã€‚
```
### Cycript
```
è·å–æ‰‹æœºä¸­æŸä¸€ä¸ªè¿è¡Œçš„è¿›ç¨‹ï¼Œå¹¶å¯ä»¥è·å–APPè¿›ç¨‹åç”¨ocä»£ç è·å–åç¼–è¯‘APPçš„Documentsç›®å½•è·¯å¾„ã€‚
```
### iFunBox
```
Macç«¯çš„è¿æ¥æ‰‹æœºåçš„å›¾å½¢ç•Œé¢ï¼Œæ¯”è¾ƒæ–¹ä¾¿çš„æŠŠç ¸å£³åçš„æ–‡ä»¶ç›´æ¥å¯¼å‡ºåˆ°Macä¸Šã€‚
```
### xCode
```
è¿™ä¸ªå°±ä¸ä½œè¯´æ˜äº†
```
### Hopper Disassembler
```
è¿™ä¸ªæ˜¯è¿›è¡Œåæ±‡ç¼–çš„å·¥å…·ï¼Œå¯ä»¥åæ±‡ç¼–ã€åç¼–è¯‘å¹¶ä¸”è°ƒè¯•ä½ çš„åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå·¥å…·æŸ¥çœ‹ä¼ªä»£ç çš„æ–¹æ³•åå’Œå˜é‡ï¼Œè¿˜åŸå‡½æ•°ä½“çš„å…·ä½“é€»è¾‘ã€‚
```
### Class Dump
```
å¯¹APPå¯æ‰§è¡Œæ–‡ä»¶è·å–å…¶å¤´æ–‡ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æ ¹æ®å¤´æ–‡ä»¶ä¸­æš´éœ²çš„æ–¹æ³•åå»çŒœæµ‹å…¶APPçš„ç¼–å†™é€»è¾‘ã€‚ç„¶ååˆ©ç”¨ä¸Šè¿°çš„åç¼–è¯‘å·¥å…·å¯¹æŸä¸€æ–‡ä»¶è¿›è¡Œå‡½æ•°çš„å…·ä½“ç¼–å†™é€»è¾‘ã€‚
```
### Theos
```
åˆ›å»ºä¸€ä¸ªTweakå·¥ç¨‹ï¼Œé€šè¿‡å®šåˆ¶å·¥ç¨‹æ–‡ä»¶ï¼Œå†é€šè¿‡æŒ‡å®šçš„bundle idï¼Œç¼–è¯‘+æ‰“åŒ…+å®‰è£…ï¼Œä»è€Œå‘æ‰‹æœºä¸Šçš„APPæ³¨å…¥ä»£ç ï¼Œè¿›è€Œå®ç°å¯¹æŸä¸ªAPPä¸­çš„åŠŸèƒ½çš„ç ´è§£ï¼ˆä¾‹å¦‚ä¼šå‘˜å»å¹¿å‘ŠåŠŸèƒ½ï¼ŒæŠ¢çº¢åŒ…åŠŸèƒ½ï¼Œè¿‡æ»¤å¥½å‹åˆ—è¡¨åŠŸèƒ½ï¼‰
```
### Dumpdecrypted
```
ä¿—ç§°ï¼šâ€œç ¸å£³â€ï¼Œdumpdecryptedæ˜¯ä¸ªå‡ºè‰²çš„appè„±å£³å¼€æºå·¥å…·ï¼Œå®ƒçš„åŸç†æ˜¯ï¼šå°†åº”ç”¨ç¨‹åºè¿è¡Œèµ·æ¥ï¼ˆiOSç³»ç»Ÿä¼šå…ˆè§£å¯†ç¨‹åºå†å¯åŠ¨ï¼‰ï¼Œç„¶åå°†å†…å­˜ä¸­çš„è§£å¯†ç»“æœdumpå†™å…¥æ–‡ä»¶ä¸­ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„å¯æ‰§è¡Œç¨‹åºæ–‡ä»¶ã€‚
```
### Sublime Text
```
æ‰“å¼€åé¢è¦ç”¨åˆ°çš„Makefileæ–‡ä»¶
```
è¯´äº†è¿™äº›å·¥å…·çš„ç”¨é€”ä¹‹åï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å¼€å§‹æˆ‘ä»¬çš„ç ´è§£å·¥ä½œã€‚
## éœ€è¦æŒæ¡çš„å‘½ä»¤è¡Œ
> - æŸ¥çœ‹å½“å‰xcodeçš„sdkè·¯å¾„ï¼šxcrun --sdk iphoneos --show-sdk-path
- ä¿®æ”¹å½“å‰xcodeçš„é»˜è®¤sdkï¼š sudo xcode-select -s /Applications/Xcode.app/Contents/Developer
- æ–‡ä»¶å¤¹ä¸­æ˜¾ç¤ºå’Œéšè—æ–‡ä»¶ï¼šdefaults write com.apple.finder AppleShowAllFiles -bool false/trueä¹‹åå¾—é‡æ–°å¯åŠ¨Finder
- ps -e è·å–æ‰‹æœºæ‰€æœ‰è¿›ç¨‹
- ps -A|grep mobile æŠ“å–æ‰‹æœºä¸Šè¿è¡Œçš„APPè¿›ç¨‹
- cycript -p WeChat
## å®ç°ç›®æ ‡
æˆ‘ä»¬æ‰“å¼€å¾®ä¿¡APPåï¼ˆåœ¨App Storeä¸­ä¸‹è½½çš„è½¯ä»¶ï¼‰ï¼Œè‡ªåŠ¨å¼¹å‡ºä¸€ä¸ªè­¦å‘Šæ¡†ã€‚
![](https://upload-images.jianshu.io/upload_images/1376750-5279119f117a778e.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/320/format/webp)
IMG_0014.PNG
å½“ç„¶è¿™åªæ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„ä¸€æ­¥ï¼Œæˆ‘ä¹‹å‰ä¹Ÿæ˜¯å‚è€ƒå‰äººçš„æ–‡ç« ã€‚
[å‚è€ƒæ–‡ç« iOSé€†å‘å·¥ç¨‹](https://pandara.xyz/2016/08/13/fake_wechat_location/)
ä¸è¿‡è¿™ç¯‡æ–‡ç« æ˜¯16å¹´çš„ï¼Œåœ¨å®ç°çš„è¿‡ç¨‹ä¸­è¿˜æ˜¯ç¢°åˆ°äº†å‡ ä¸ªå‘ã€‚
> - è·å–å¯æ‰§è¡Œç¨‹åºæ–‡ä»¶WeChat.decryptedå‡ºé”™
- åœ¨åˆ›å»º Theos å·¥ç¨‹åç¼–è¯‘ï¼ˆmakeï¼‰æ“ä½œæ€»æ˜¯æç¤º
**ld: framework not found CydiaSubstrate**
- åœ¨makeæˆåŠŸå make packageæ—¶æç¤ºï¼š
**Can't locate IO/Compress/[Lzma.pm](http://Lzma.pm) in @INC (you may need to install the IO::Compress::Lzma module) (@INC contains: /Library/Perl/5.18/darwin-thread-multi-2level /Library/Perl/5.18 /Network/Library/Perl/5.18/darwin-thread-multi-2level /Network/Library/Perl/5.18 /Library/Perl/Updates/5.18.2 /System/Library/Perl/5.18/darwin-thread-multi-2level /System/Library/Perl/5.18 /System/Library/Perl/Extras/5.18/darwin-thread-multi-2level /System/Library/Perl/Extras/5.18 .) at /opt/theos/bin/[dm.pl](http://dm.pl) line 12.	BEGIN failed--compilation aborted at /opt/theos/bin/dm.pl line 12.	make: [internal-package] Error 2**
## å®ç°æµç¨‹
### 1.ç”Ÿæˆç ¸å£³ç”¨çš„dumpdecrypted.dylib
```
OpenSSHå‘½ä»¤çš„ä½¿ç”¨ï¼š
å‰æï¼šä¿è¯æ‰‹æœºå’ŒMacåœ¨åŒä¸€ä¸ªç½‘æ®µä¸Šã€‚
ç™»å½•æˆåŠŸåå°±å¯ä»¥ä½¿ç”¨ç»ˆç«¯å‘½è¡Œæ“ä½œiPhone
é€€å‡ºç™»å½•å‘½ä»¤æ˜¯exit
```
![](https://upload-images.jianshu.io/upload_images/1376750-ec1f053685767521.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/714/format/webp)
4F102D71-8902-447F-8852-EC1480146C13.png
![](https://upload-images.jianshu.io/upload_images/1376750-8975c7780044c254.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)
1AB41217-5D90-4AE2-B698-B5B17C0CB552.png
![](https://upload-images.jianshu.io/upload_images/1376750-73c0961596d371fe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)
C20F0342-9CA8-42FA-9A5D-19C9D4D182B7.png
```
ps -e è·å–æ‰‹æœºä¸­æ‰€æœ‰çš„å½“å‰è¿è¡Œçš„è¿›ç¨‹
ps -A|grep mobile æŠ“å–æ‰‹æœºä¸Šè¿è¡Œçš„APPè¿›ç¨‹
```
![](https://upload-images.jianshu.io/upload_images/1376750-97b49a044273864e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/990/format/webp)
1CB6FE71-B7B9-468A-8041-39D2B95530E3.png
```
è¿™å„¿æœ‰ä¸¤ä¸ªè·¯å¾„
/var/mobile/Containers/Bundle/Application/ä¸‹çš„æ˜¯æˆ‘ä»¬è¦æ‰¾çš„å¯æ‰§è¡Œæ–‡ä»¶
/var/mobile/Containers/Data/Application
å¾—åˆ°Documentsè·¯å¾„,ä¹Ÿå°±æ˜¯APPæ‰€åœ¨çš„æ²™ç›’è·¯å¾„ï¼Œè€Œæˆ‘ä»¬ä¹‹åè¦ç”Ÿæˆè§£å¯†åæ–‡ä»¶çš„å‘½ä»¤è¡Œå¾—éœ€è¦åœ¨APPçœŸæ­£çš„è·¯å¾„ä¸‹æ‰§è¡Œã€‚
Cycriptå‘½ä»¤è¡Œï¼š
æ²™ç›’è·¯å¾„çš„è·å–ï¼š  [[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask][0]
```
![](https://upload-images.jianshu.io/upload_images/1376750-1232577ecd11d172.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)
18084829-010C-4AF6-A70F-60AEF896EFFD.png
```
è¸©å‘ç‚¹ï¼šå½“å‘½ä»¤è¡Œä¸­è¾“å…¥cycript -p WeChatåå¹¶æ²¡æœ‰å‡ºç°ä¸‹é¢çš„cy#è¿™ä¸€è¡Œæ—¶ï¼Œä½ æœ€å¥½ç”¨æ•°æ®çº¿è¿æ¥æ‰‹æœºï¼ˆè¿™æ ·ä½ ä¼šå‘ç°è¾“å…¥å‘½ä»¤ä¸å¡ï¼‰ï¼Œä¹‹åæ‰“å¼€å¾®ä¿¡ç¨‹åºåï¼Œè¿™æ—¶å€™cy#è¿™ä¸€è¡Œå°±å‡ºç°äº†ï¼ŒåŒæ ·è·å–æ²™ç›’è·¯å¾„ä¹Ÿå¾—æ‰“å¼€ç¨‹åºï¼Œä¸ç„¶ä¸ä¼šå‡ºç°ä½ æƒ³è¦çš„ç»“æœ,é€€å‡ºcyscriptå‘½ä»¤ç¯å¢ƒcontrol+zã€‚
è¿™ä¸€é˜¶æ®µçš„ç›®çš„ï¼šåˆ¶ä½œç ¸å£³çš„â€œé”¤å¤´â€ï¼Œå› ä¸ºä¸åŒiOSç³»ç»Ÿä¸‹çš„dumpdecrypted.dylibï¼ˆé”¤å¤´ï¼‰æ˜¯ä¸åŒçš„ã€‚
```
**å¦‚æœä½ çš„æ‰‹æœºç³»ç»Ÿæ˜¯8.0çš„å¯ä»¥ç›´æ¥ä¸‹è½½æˆ‘ä¸Šä¼ GitHubä¸Šçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å¯ä¸ç”¨çœ‹ç”Ÿæˆâ€œé”¤å¤´â€çš„éƒ¨åˆ†ã€‚**
[dumpdecrypted.dylib githubåœ°å€](https://github.com/CoDancer/dumpdecrypted.dylib)
å¼€å§‹ç”Ÿæˆâ€œé”¤å¤´â€
[dumpdecryptedæºç ä¸‹è½½åœ°å€](https://link.jianshu.com/?t=https://github.com/stefanesser/dumpdecrypted/archive/master.zip)
```
ç”¨Sublime Textæ‰“å¼€ä¸‹è½½çš„dumpdecryptedæ–‡ä»¶å¤¹é‡Œé¢çš„Makefileï¼Œé…ç½®é‡Œé¢çš„å‚æ•°
GCC_UNIVERSAL=$(GCC_BASE) -arch armv7 -arch armv7s -arch arm64
å¦‚æœæ˜¯7.0ä»¥ä¸‹çš„è®¾å¤‡æˆ‘ä»¬è¿˜éœ€è¦æ”¹äº›ä¸œè¥¿ï¼Œæˆ‘ä»¬è¦å°†ä¸Šå›¾çš„ç¬¬äºŒè¡Œä¿®æ”¹ä¸º
GCC_UNIVERSAL=$(GCC_BASE) -arch armv7 -arch armv7s
è¿˜è¦å°†dumpdecryptedæ–‡ä»¶å¤¹é‡Œçš„dumpdecrypted.cæ–‡ä»¶çš„ç¬¬76è¡Œ
if (lc->cmd == LC_ENCRYPTION_INFO || lc->cmd ==LC_ENCRYPTION_INFO_64)
æ”¹ä¸º
if(lc->cmd == LC_ENCRYPTION_INFO)
åˆ°ç›¸åº”çš„ç›®å½•ä¸‹ï¼ˆcd dircï¼‰,
```
**æ‰§è¡Œå‘½ä»¤è¡Œï¼šmake**
```
å®Œæˆådumpdecrypted.dylibæ–‡ä»¶å‡ºç°åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬ç ¸å£³ç”¨çš„é”¤å¤´ã€‚
è¸©å‘ç‚¹ï¼šå¦‚æœä½ çš„æ‰‹æœºæ˜¯ios8.3çš„ç³»ç»Ÿï¼Œå°±éœ€è¦ä¸‹è½½xcode6.3çš„ç‰ˆæœ¬ï¼Œè¿™å„¿æ˜¯ä¸‹è½½é“¾æ¥ï¼Œå¹¶ä¸”éœ€è¦åˆ‡æ¢ä½ çš„é»˜è®¤xcodeè·¯å¾„ï¼Œé¦–å…ˆçœ‹çœ‹ä½ é»˜è®¤çš„xcodeæ˜¯iosSDKæ˜¯å¤šå°‘çš„ã€‚
å‘½ä»¤è¡Œï¼šxcrun --sdk iphoneos --show-sdk-path  //æŸ¥çœ‹iosSDKç‰ˆæœ¬è·¯å¾„
sudo xcode-select -s /Applications/Xcode.app/Contents/Developer
ä¿®æ”¹é»˜è®¤çš„iosSDK
```
![](https://upload-images.jianshu.io/upload_images/1376750-ee13039ac714fd62.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)
63B4B96A-B164-430D-B4D3-714E208F3767.png
[xcodeç‰ˆæœ¬ä¸‹è½½](https://link.jianshu.com/?t=https://developer.apple.com/downloads/index.action)
è·å–â€œé”¤å¤´â€å®Œæˆ
**ç ¸å£³è·å–è§£å¯†åçš„å¯æ‰§è¡Œæ–‡ä»¶**
> - å°†dumpdecrypted.dylibæ‹·è´åˆ°Documentsè·¯å¾„ä¸‹
> 
1 å‘½ä»¤è¡Œï¼šscp `dumpdecrypted.dylibè·¯å¾„` root@è®¾å¤‡IP:`Documentsè·¯å¾„`;
2 åˆ©ç”¨iFunBox
- cd Documentsè·¯å¾„ //åˆ°APPçš„Documentsè·¯å¾„ä¸‹æ‰§è¡Œå‘½ä»¤
- 
DYLD_INSERT_LIBRARIES=dumpdecrypted.dylib å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„
	å»ºè®®ç”¨ç¬¬äºŒç§æ–¹æ³•
![](https://upload-images.jianshu.io/upload_images/1376750-824dcd7ca83caf70.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)
DE6B36FA-2578-4C5F-BA36-15DCC046B206.png
```
åˆ©ç”¨iFunBoxåˆ°APPçš„Documentsè·¯å¾„
```
![](https://upload-images.jianshu.io/upload_images/1376750-4b56aaa9c6285893.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)
4B935D43-042B-402C-900C-27E072DD3E47.png
```
å‘½ä»¤è¡ŒæˆåŠŸï¼ŒAPPçš„Documentsè·¯å¾„ä¼šç”ŸæˆAPPçš„è§£å¯†åçš„å¯æ‰§è¡Œæ–‡ä»¶
```
![](https://upload-images.jianshu.io/upload_images/1376750-69c01cfb6e1a4521.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)
55AC1559-2006-4C70-9E2C-3187C53E72CB.png
```
æœ€åæˆ‘ä»¬æŠŠ.decryptedæ–‡ä»¶æ‹·åˆ°Macä¸Š
```
### 2.åç¼–è¯‘é™æ€åˆ†æï¼ˆHopper Disassemblerç™»åœºï¼‰
```
æŠŠ.decryptedä¸¢è¿›å»ï¼Œä½ ä¼šçœ‹åˆ°å¾ˆç‚«é…·çš„ç•Œé¢ã€‚è‡³äºè¿™ä¸ªè½¯ä»¶çš„ä¸‹è½½ï¼Œ
```
[Hopper Disassemblerçš„ç ´è§£åœ°å€](http://www.sdifen.com/hopperdisassembler408.html)
```
å…·ä½“çš„æ“ä½œä½ å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼Œè¿™ä¸ªæ˜¯åœ¨æ¯”è¾ƒå°çš„demoä¸Šå»ä»‹ç»Hopper Disassemblerçš„åŸç†çš„ã€‚
```
[Hopper Disassemblerçš„åç¼–è¯‘çš„åŸºç¡€demo](https://www.jianshu.com/p/33e40af6e328)
```
å¦‚æœä½ æŠŠä¸Šç¯‡ç®€ä¹¦ä¸­çš„æ–‡ç« ç…§ç€å®ç°äº†ä¸€éçš„è¯ï¼Œä½ å°±ä¼šå¯¹Hopper Disassembleræœ‰äº†è‡ªå·±çš„äº†è§£äº†ã€‚
```
### 3.Tweakä¸Theos
```
ç®€ä»‹ï¼štweakçš„å®è´¨å°±æ˜¯ioså¹³å°çš„åŠ¨æ€åº“ã€‚IOSå¹³å°ä¸Šæœ‰ä¸¤ç§å½¢åŠ¿çš„åŠ¨æ€åº“ï¼Œdylibä¸frameworkã€‚Frameworkè¿™ç§å¼€å‘è€…ç”¨çš„æ¯”è¾ƒå¤šï¼Œè€Œdylibè¿™ç§å°±ç›¸å¯¹æ¯”è¾ƒå°‘ä¸€ç‚¹ï¼Œæ¯”å¦‚libsqlite.dylibï¼Œlibz.dylibç­‰ã€‚è€Œtweakç”¨çš„æ­£æ˜¯dylibè¿™ç§å½¢åŠ¿çš„åŠ¨æ€åº“ã€‚æˆ‘ä»¬å¯ä»¥åœ¨/Library/MobileSubstrate/DynamicLibrariesç›®å½•ä¸‹æŸ¥çœ‹æ‰‹æœºä¸Šå­˜åœ¨ç€çš„æ‰€æœ‰tweakã€‚è¿™ä¸ªç›®å½•ä¸‹é™¤dylibå¤–è¿˜å­˜åœ¨ç€plistä¸bundleä¸¤ç§æ ¼å¼çš„æ–‡ä»¶ï¼Œplistæ–‡ä»¶æ˜¯ç”¨æ¥æ ‡è¯†è¯¥tweakçš„ä½œç”¨èŒƒå›´ï¼Œè€Œbundleæ˜¯tweakæ‰€ç”¨åˆ°çš„èµ„æºæ–‡ä»¶ã€‚
    ä¸æ­£å¸¸çš„APPå¼€å‘ä½¿ç”¨xcodeä¸åŒï¼ŒTweakçš„å¼€å‘ç¯å¢ƒæ˜¯theosæˆ–è€…iosopendevã€‚iosopendevæ˜¯åœ¨theosçš„åŸºç¡€ä¸Šå®ç°çš„åŸºäºxcodeçš„å¼€å‘ç¯å¢ƒã€‚è€Œtheosæ˜¯ä¸€ç§å‘½ä»¤è¡Œå¼çš„å¼€å‘ç¼–è¯‘ç¯å¢ƒï¼Œä¸c/c++çš„å‘½ä»¤è¡Œç¼–è¯‘å½¢å¼å¾ˆç›¸è±¡ã€‚
    è¿™é‡Œçš„æ¦‚è¿°æ‘˜è‡ªç®€å‹çš„è¿™ç¯‡æ–‡ç« ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥çœ‹çœ‹ï¼Œä¸ªäººè®¤ä¸ºæ€»ç»“çš„è¿˜æ˜¯å¾ˆå…¨é¢çš„ã€‚
```
[Tweakä¸Theosçš„åŸºç¡€ä»‹ç»](https://www.jianshu.com/p/b3113ff64688)
```
Macçš„ç¯å¢ƒä¸‹è½½ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šå…³äºTheosçš„ä¸‹è½½åŠé…ç½®çš„åšå®¢ï¼Œä½†æœ‰äº›æ˜¯å¾ˆæ—©çš„èµ„æ–™ï¼Œè¿™é‡Œæˆ‘æ˜¯å‚è€ƒè¿™ç¯‡æ–‡ç« çš„ã€‚
```
[Theosçš„ä¸‹è½½åŠå®‰è£…](https://blog.sunnyyoung.net/theos-an-zhuang-yu-pei-zhi/)
```
åˆ›å»ºtheoså·¥ç¨‹(package name åªèƒ½åŒ…å«å°å†™çš„å­—æ¯è¿˜æœ‰æ•°å­—)
```
![](https://upload-images.jianshu.io/upload_images/1376750-c69b2f94394f5165.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)
7A038052-223E-4E3D-BD84-2F9BBC97A4A0.png
```
è¸©å‘ç‚¹ï¼šnic.plå‘½ä»¤è¡Œå¹¶æ²¡æœ‰ååº”ï¼Œè¿™æ˜¯ä½ æ²¡æœ‰é…ç½®ç¯å¢ƒè·¯å¾„
export THEOS=/opt/theos
export PATH=/opt/theos/bin/:$PATH
```
**ä¸»è¦éœ€è¦æ³¨æ„çš„åœ°æ–¹**
> - Theos è¦æ±‚æˆ‘ä»¬è¾“å…¥ MobileSubstrate Bundle filterï¼Œä¹Ÿå°±æ˜¯ tweak ä½œç”¨å¯¹è±¡çš„ bundle identifierï¼Œè¿™é‡Œæˆ‘ä»¬å¡«ä¸Šå¾®ä¿¡çš„ id(com.tencent.xin)ï¼Œå¯ä»¥åœ¨è§£å‹åçš„ ipa åŒ…ä¸­çš„ plist æ–‡ä»¶ä¸­æ‰¾åˆ°ã€‚
- æœ€åæˆ‘ä»¬éœ€è¦è¾“å…¥æŒ‡å®š tweak å®‰è£…å®Œæˆä¹‹åéœ€è¦é‡å¯çš„åº”ç”¨ï¼Œä»¥ bundle identifier æ¥è¡¨ç¤ºï¼Œè¿™é‡Œè¿˜æ˜¯å¡«ä¸Šå¾®ä¿¡ã€‚
åˆ°è¿™é‡Œå·¥ç¨‹ä¾¿åˆ›å»ºå®Œæˆäº†ï¼Œä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆå·¥ç¨‹æ–‡ä»¶å¤¹ã€‚
æ¥ä¸‹æ¥å°±æ˜¯å®šåˆ¶å·¥ç¨‹æ–‡ä»¶äº†
ç¼–è¾‘ MakeFile
![](https://upload-images.jianshu.io/upload_images/1376750-6dcbc7cb4c561baf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)
E828DE69-F14C-42FF-9183-72028E97A8A1.png
ç¼–å†™ tweak æºç 
![](https://upload-images.jianshu.io/upload_images/1376750-e940620f6ea7e49f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)
C0C8E875-9B75-4D5A-8F27-0DE7C3B1384E.png
```
æ–¹ä¾¿æ‡’äºº
%hook MicroMessengerAppDelegate
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wdeprecated-declarations"
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"æˆåŠŸæ³¨å…¥ä»£ç " message:@"IOS é€†å‘å·¥ç¨‹" delegate:nil cancelButtonTitle:@"Cancel" otherButtonTitles:nil];
[alertView show];
#pragma clang diagnostic pop
return %orig;
}
%end
```
å®šåˆ¶å®Œæ¯•
æ¥ä¸‹æ¥å°±æ˜¯æ¿€åŠ¨äººå¿ƒçš„makeæ“ä½œäº†
![](https://upload-images.jianshu.io/upload_images/1376750-58737c168bda2289.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)
90878361-B368-41AA-B4D0-C5D1153936A7.png
```
è¿™æ˜¯è¯´æ‰¾ä¸åˆ°ios8.3çš„SDKï¼Œé‚£ä¹ˆè¿™æ—¶å€™ä½ å¾—åˆ‡æ¢é»˜è®¤çš„iosSDKè·¯å¾„äº†ã€‚
sudo xcode-select -s /Applications/Xcode6.3.app/Contents/Developer
```
![](https://upload-images.jianshu.io/upload_images/1376750-0cedfcf2d30fb053.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)
C2D8F829-CB8D-4828-8D9F-7CED7DDEBE17.png
```
è¿™æ˜¯ä»€ä¹ˆğŸ‘»ï¼ï¼ï¼æ€ä¹ˆåŠï¼Œå¾ˆæ…Œã€‚
æ‰¾å„ç§å¸–å­èµ„æ–™
```
[èµ„æ–™1](https://github.com/theos/theos/issues/210)
[èµ„æ–™2](https://github.com/theos/theos/issues/167)
æœ€åçš„è§£å†³åŠæ³•(MakeFileæ–‡ä»¶ä¸­é…ç½®)
**TARGET = iphone::9.2:8.3**
```
Clang actually supports it as of Xcode 7.0 (iOS SDK 9.0), but enable it only if you're using iOS SDK 8.4+. I wasn't too sure how it would work out when I implemented it so I restrained it to the latest SDK at the time. It certainly could be dropped back to 9.0+.
å°±æ˜¯è¯´Clangåœ¨ios9.0ä¸Šæ‰æ”¯æŒï¼Œæ‰€ä»¥æˆ‘ä»¬çš„TARGETæ˜¯åŒ…å«9.0çš„ï¼Œå½“ç„¶ä½ æ‰‹æœºå¦‚æœæ˜¯9.0çš„ç³»ç»Ÿå°±ä¸ä¼šæŠ¥é”™äº†ã€‚ï¼ˆå“¦å’ªå¤´ä½›ï¼‰
```
makeä¸€ä¸‹(åŒæ‰‹åˆåï¼Œèµäºˆæˆ‘åŠ›é‡å§ï¼ï¼ï¼)
![](https://upload-images.jianshu.io/upload_images/1376750-0a0800a4eee94486.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)
F32D321E-4C31-4F41-96C0-979169066F26.png
è¿™æ ·æˆ‘ä»¬ç¦»æˆåŠŸåˆè¿›äº†ä¸€æ­¥äº†
```
é¢˜å¤–è¯ï¼šç¬”è€…åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œå¯è°“ç”Ÿä¸å¦‚æ­»å•Šï¼ŒæŸ¥é˜…å„ç§èµ„æ–™ï¼Œå»ºè®®å„ä½è¿˜æ˜¯åœ¨Googleä¸‹æŸ¥é˜…èµ„æ–™ï¼Œä¸­é—´å› ä¸ºè¿™ä¸ªé—®é¢˜è¿˜æç½®äº†å¯¹é€†å‘å·¥ç¨‹çš„ç ”ç©¶ã€‚
```
ä¹‹åmake package
```
Can't locate IO/Compress/Lzma.pm in @INC (you may need to install the IO::Compress::Lzma module)
å¯èƒ½å‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ—¶å€™æ‰§è¡Œ
sudo cpan -I IO::Compress::Lzma
```
![](https://upload-images.jianshu.io/upload_images/1376750-5850dfc50ec5a022.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)
A98354BE-F338-41C2-AE99-99BDE97F3D71.png
**å®‰è£…**
```
æœ€åï¼Œè¦å°†è¿™ä¸ª deb æ–‡ä»¶å®‰è£…åˆ° iOS ä¸­å»ï¼Œé‡‡ç”¨äº†å‘½ä»¤è¡Œçš„å®‰è£…æ–¹æ³•ã€‚
```
![](https://upload-images.jianshu.io/upload_images/1376750-da0720bfe388d054.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)
05AB59E5-4DA0-4707-99B9-6CF29A3BA68E.png
```
è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºæˆ‘è¯¯å°† Makefile ä¸­éœ€è¦ kill çš„è¿›ç¨‹åç§°å¡«æˆäº† bundle identifierï¼Œå°†å®ƒæ”¹æˆ WeChat å°±å¥½äº†ï¼škillall -9 WeChat
```
![](https://upload-images.jianshu.io/upload_images/1376750-ce2722ffa177f81e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)
BF29F32E-239F-44B8-BEDC-43CF7FF2E8D2.png
```
æ‰“å¼€æ‰‹æœºçš„å¾®ä¿¡åï¼Œä½ ä¼šçœ‹åˆ°è¿™ä¸ªæ•ˆæœã€‚
```
![](https://upload-images.jianshu.io/upload_images/1376750-5279119f117a778e.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/320/format/webp)
IMG_0014.PNG
æ–‡ç« åˆ°æ­¤ç»“æŸï¼ï¼ï¼
**ç‰¹åˆ«è¯´æ˜ï¼šå†™è¿™ç¯‡åšå®¢ä¸ªäººå‚è€ƒçš„å‰äººåšå®¢**
> - [OpenSSHçš„åŸºç¡€ç”¨æ³•](https://www.jianshu.com/p/5241669baa74)
- [iOSé€†å‘å·¥ç¨‹ä»‹ç»ä¸å®ç°](https://www.jianshu.com/p/4da57be23275)
- [å¦‚ä½•åˆ¶ä½œâ€œç ¸å£³â€çš„é”¤å¤´](https://www.jianshu.com/p/14db1ac34bf1)
- [iOSé€†å‘å·¥ç¨‹ä»¥åŠdemoçš„å®ç°](https://pandara.xyz/2016/08/13/fake_wechat_location/)
- [Hopper Disassemblerçš„ä»‹ç»](https://www.jianshu.com/p/33e40af6e328)
- [Tweakä¸Theosçš„ä»‹ç»](https://www.jianshu.com/p/b3113ff64688)
ä½œè€…ï¼šæ€€å¿ƒé€æ°´
é“¾æ¥ï¼šhttps://www.jianshu.com/p/38261a775997
ä¾†æºï¼šç®€ä¹¦
ç®€ä¹¦è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½éƒ½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒå¹¶æ³¨æ˜å‡ºå¤„ã€‚
