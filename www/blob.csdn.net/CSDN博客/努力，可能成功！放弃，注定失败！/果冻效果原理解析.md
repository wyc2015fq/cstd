# 果冻效果原理解析 - 努力，可能成功！放弃，注定失败！ - CSDN博客
置顶2016年07月29日 20:27:28[上天眷顾我](https://me.csdn.net/qq_30513483)阅读数：1604
# 果冻效果原理解析
字数344
阅读125评论0喜欢3
**github链接: https://github.com/sun**shineAku/Aku_JellyEffect****
**有哪里需要改进的还请麻烦留言哦!**
**效果图:**
![](http://upload-images.jianshu.io/upload_images/2451397-9335046c16198754.gif?imageMogr2/auto-orient/strip)
**主要分三点:**
**      1. 曲线路径的绘制**
![](http://upload-images.jianshu.io/upload_images/2451397-17b8c0ded415d264.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
通过这两段代码产生曲线:
> // 起始点 moveToPoint
bezierPath.moveToPoint(CGPoint(x: redPointX, y: redPointY))
// 曲线结束  CurveToPoint    控制曲线弯曲位置 controlPoint
bezierPath.addQuadCurveToPoint(CGPoint(x: cyanPointX, y: cyanPointY), controlPoint: CGPoint(x: moveToPoint.x, y: moveToPoint.y))
**2. 弹性动画效果**
![](http://upload-images.jianshu.io/upload_images/2451397-1369eafd3e9d2aea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
**此段代码产生的弹性动画效果**
![](http://upload-images.jianshu.io/upload_images/2451397-86e4366e60d1bf32.gif?imageMogr2/auto-orient/strip)
**3. 结合 1. 2. 两点产生果冻效果**
          曲线,弹性动画已经做完,现在要做的就是将两者结合起来做出类似果冻的效果了
          给图中黄色的view添加拖拽手势, --->**UIPanGestureRecognizer**
**让被拖拽的view跟随手指移动**
![](http://upload-images.jianshu.io/upload_images/2451397-bb069cb7922366b9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
**在手指松开时执行弹性动画**
![](http://upload-images.jianshu.io/upload_images/2451397-3f459aa8f56fd6b0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
**重点来了:**
            做弹性动画期间,yellowJellyView的layer位置在不断的变化(***!!!是layer,不是frame***)
            所以要在动画的时候不断的去获取yellowJellyView的layer的位置
            这里需要借助**CADisplayLink**定时器来重复执行某个方法,在那里将获取到layer的位置并赋值给已经定义好的属性,并通过属性的 set 方法调用绘制操作
> 
通过此方法获取到 动画中 layer 的位置
**yellowJellyView.layer.presentationLayer()!.frame.origin.x**
![](http://upload-images.jianshu.io/upload_images/2451397-2ab40ae0039721e2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
**图形绘制的方法:**
![](http://upload-images.jianshu.io/upload_images/2451397-51fd26dffcdad917.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
